/*! For license information please see main.7eabf192.js.LICENSE.txt */
(()=>{var e={4:(e,t,n)=>{"use strict";var r=n(853),i=n(43),s=n(950);function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}var l=Symbol.for("react.element"),u=Symbol.for("react.transitional.element"),c=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),f=Symbol.for("react.provider"),m=Symbol.for("react.consumer"),g=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),x=Symbol.for("react.suspense_list"),v=Symbol.for("react.memo"),w=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var S=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var k=Symbol.for("react.memo_cache_sentinel"),T=Symbol.iterator;function A(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=T&&e[T]||e["@@iterator"])?e:null}var E=Symbol.for("react.client.reference");function _(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===E?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case h:return"Fragment";case c:return"Portal";case d:return"Profiler";case p:return"StrictMode";case b:return"Suspense";case x:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case g:return(e.displayName||"Context")+".Provider";case m:return(e._context.displayName||"Context")+".Consumer";case y:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case v:return null!==(t=e.displayName||null)?t:_(e.type)||"Memo";case w:t=e._payload,e=e._init;try{return _(e(t))}catch(n){}}return null}var L,C,I=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$=Object.assign;function O(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||"",C=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+L+e+C}var R=!1;function D(e,t){if(!e||R)return"";R=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(i){var r=i}Reflect.construct(e,[],n)}else{try{n.call()}catch(s){r=s}e.call(n.prototype)}}else{try{throw Error()}catch(a){r=a}(n=e())&&"function"===typeof n.catch&&n.catch((function(){}))}}catch(o){if(o&&r&&"string"===typeof o.stack)return[o.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=r.DetermineComponentFrameRoot(),a=s[0],o=s[1];if(a&&o){var l=a.split("\n"),u=o.split("\n");for(i=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;if(r===l.length||i===u.length)for(r=l.length-1,i=u.length-1;1<=r&&0<=i&&l[r]!==u[i];)i--;for(;1<=r&&0<=i;r--,i--)if(l[r]!==u[i]){if(1!==r||1!==i)do{if(r--,0>--i||l[r]!==u[i]){var c="\n"+l[r].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=r&&0<=i);break}}}finally{R=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?O(n):""}function z(e){switch(e.tag){case 26:case 27:case 5:return O(e.type);case 16:return O("Lazy");case 13:return O("Suspense");case 19:return O("SuspenseList");case 0:case 15:return e=D(e.type,!1);case 11:return e=D(e.type.render,!1);case 1:return e=D(e.type,!0);default:return""}}function P(e){try{var t="";do{t+=z(e),e=e.return}while(e);return t}catch(n){return"\nError generating stack: "+n.message+"\n"+n.stack}}function M(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function N(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function F(e){if(M(e)!==e)throw Error(a(188))}function V(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=V(e)))return t;e=e.sibling}return null}var K=Array.isArray,j=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,B={pending:!1,data:null,method:null,action:null},U=[],G=-1;function W(e){return{current:e}}function H(e){0>G||(e.current=U[G],U[G]=null,G--)}function X(e,t){G++,U[G]=e.current,e.current=t}var q=W(null),Y=W(null),J=W(null),Q=W(null);function Z(e,t){switch(X(J,t),X(Y,e),X(q,null),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)&&(t=t.namespaceURI)?Yc(t):0;break;default:if(t=(e=8===e?t.parentNode:t).tagName,e=e.namespaceURI)t=Jc(e=Yc(e),t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}H(q),X(q,t)}function ee(){H(q),H(Y),H(J)}function te(e){null!==e.memoizedState&&X(Q,e);var t=q.current,n=Jc(t,e.type);t!==n&&(X(Y,e),X(q,n))}function ne(e){Y.current===e&&(H(q),H(Y)),Q.current===e&&(H(Q),Ph._currentValue=B)}var re=Object.prototype.hasOwnProperty,ie=r.unstable_scheduleCallback,se=r.unstable_cancelCallback,ae=r.unstable_shouldYield,oe=r.unstable_requestPaint,le=r.unstable_now,ue=r.unstable_getCurrentPriorityLevel,ce=r.unstable_ImmediatePriority,he=r.unstable_UserBlockingPriority,pe=r.unstable_NormalPriority,de=r.unstable_LowPriority,fe=r.unstable_IdlePriority,me=r.log,ge=r.unstable_setDisableYieldValue,ye=null,be=null;function xe(e){if("function"===typeof me&&ge(e),be&&"function"===typeof be.setStrictMode)try{be.setStrictMode(ye,e)}catch(t){}}var ve=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(we(e)/Se|0)|0},we=Math.log,Se=Math.LN2;var ke=128,Te=4194304;function Ae(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194176&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ee(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,a=e.warmLanes;e=0!==e.finishedLanes;var o=134217727&n;return 0!==o?0!==(n=o&~i)?r=Ae(n):0!==(s&=o)?r=Ae(s):e||0!==(a=o&~a)&&(r=Ae(a)):0!==(o=n&~i)?r=Ae(o):0!==s?r=Ae(s):e||0!==(a=n&~a)&&(r=Ae(a)),0===r?0:0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||32===i&&0!==(4194176&a))?t:r}function _e(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function Le(e,t){switch(e){case 1:case 2:case 4:case 8:return t+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Ce(){var e=ke;return 0===(4194176&(ke<<=1))&&(ke=128),e}function Ie(){var e=Te;return 0===(62914560&(Te<<=1))&&(Te=4194304),e}function $e(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Oe(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Re(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-ve(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194218&n}function De(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ve(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function ze(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Pe(){var e=j.p;return 0!==e?e:void 0===(e=window.event)?32:Jh(e.type)}var Me=Math.random().toString(36).slice(2),Ne="__reactFiber$"+Me,Fe="__reactProps$"+Me,Ve="__reactContainer$"+Me,Ke="__reactEvents$"+Me,je="__reactListeners$"+Me,Be="__reactHandles$"+Me,Ue="__reactResources$"+Me,Ge="__reactMarker$"+Me;function We(e){delete e[Ne],delete e[Fe],delete e[Ke],delete e[je],delete e[Be]}function He(e){var t=e[Ne];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ve]||n[Ne]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=lh(e);null!==e;){if(n=e[Ne])return n;e=lh(e)}return t}n=(e=n).parentNode}return null}function Xe(e){if(e=e[Ne]||e[Ve]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function qe(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(a(33))}function Ye(e){var t=e[Ue];return t||(t=e[Ue]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Je(e){e[Ge]=!0}var Qe=new Set,Ze={};function et(e,t){tt(e,t),tt(e+"Capture",t)}function tt(e,t){for(Ze[e]=t,e=0;e<t.length;e++)Qe.add(t[e])}var nt=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),rt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),it={},st={};function at(e,t,n){if(i=t,re.call(st,i)||!re.call(it,i)&&(rt.test(i)?st[i]=!0:(it[i]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var i}function ot(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function lt(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function ut(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ct(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ht(e){e._valueTracker||(e._valueTracker=function(e){var t=ct(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function pt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ct(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function dt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var ft=/[\n"\\]/g;function mt(e){return e.replace(ft,(function(e){return"\\"+e.charCodeAt(0).toString(16)+" "}))}function gt(e,t,n,r,i,s,a,o){e.name="",null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.type=a:e.removeAttribute("type"),null!=t?"number"===a?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ut(t)):e.value!==""+ut(t)&&(e.value=""+ut(t)):"submit"!==a&&"reset"!==a||e.removeAttribute("value"),null!=t?bt(e,a,ut(t)):null!=n?bt(e,a,ut(n)):null!=r&&e.removeAttribute("value"),null==i&&null!=s&&(e.defaultChecked=!!s),null!=i&&(e.checked=i&&"function"!==typeof i&&"symbol"!==typeof i),null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.name=""+ut(o):e.removeAttribute("name")}function yt(e,t,n,r,i,s,a,o){if(null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s&&(e.type=s),null!=t||null!=n){if(!("submit"!==s&&"reset"!==s||void 0!==t&&null!==t))return;n=null!=n?""+ut(n):"",t=null!=t?""+ut(t):n,o||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:i)&&"symbol"!==typeof r&&!!r,e.checked=o?e.checked:!!r,e.defaultChecked=!!r,null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a&&(e.name=a)}function bt(e,t,n){"number"===t&&dt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function xt(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ut(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function vt(e,t,n){null==t||((t=""+ut(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ut(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function wt(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(a(92));if(K(r)){if(1<r.length)throw Error(a(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=ut(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r)}function St(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var kt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Tt(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||kt.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function At(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(a(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var i in t)r=t[i],t.hasOwnProperty(i)&&n[i]!==r&&Tt(e,i,r)}else for(var s in t)t.hasOwnProperty(s)&&Tt(e,s,t[s])}function Et(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _t=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Lt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ct(e){return Lt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var It=null;function $t(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ot=null,Rt=null;function Dt(e){var t=Xe(e);if(t&&(e=t.stateNode)){var n=e[Fe]||null;e:switch(e=t.stateNode,t.type){case"input":if(gt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+mt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=r[Fe]||null;if(!i)throw Error(a(90));gt(r,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&pt(r)}break e;case"textarea":vt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&xt(e,!!n.multiple,t,!1)}}}var zt=!1;function Pt(e,t,n){if(zt)return e(t,n);zt=!0;try{return e(t)}finally{if(zt=!1,(null!==Ot||null!==Rt)&&(Nu(),Ot&&(t=Ot,e=Rt,Rt=Ot=null,Dt(t),e)))for(t=0;t<e.length;t++)Dt(e[t])}}function Mt(e,t){var n=e.stateNode;if(null===n)return null;var r=n[Fe]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Nt=!1;if(nt)try{var Ft={};Object.defineProperty(Ft,"passive",{get:function(){Nt=!0}}),window.addEventListener("test",Ft,Ft),window.removeEventListener("test",Ft,Ft)}catch(wp){Nt=!1}var Vt=null,Kt=null,jt=null;function Bt(){if(jt)return jt;var e,t,n=Kt,r=n.length,i="value"in Vt?Vt.value:Vt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[s-t];t++);return jt=i.slice(e,1<t?1-t:void 0)}function Ut(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Gt(){return!0}function Wt(){return!1}function Ht(e){function t(t,n,r,i,s){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?Gt:Wt,this.isPropagationStopped=Wt,this}return $(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Gt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Gt)},persist:function(){},isPersistent:Gt}),t}var Xt,qt,Yt,Jt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qt=Ht(Jt),Zt=$({},Jt,{view:0,detail:0}),en=Ht(Zt),tn=$({},Zt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Yt&&(Yt&&"mousemove"===e.type?(Xt=e.screenX-Yt.screenX,qt=e.screenY-Yt.screenY):qt=Xt=0,Yt=e),Xt)},movementY:function(e){return"movementY"in e?e.movementY:qt}}),nn=Ht(tn),rn=Ht($({},tn,{dataTransfer:0})),sn=Ht($({},Zt,{relatedTarget:0})),an=Ht($({},Jt,{animationName:0,elapsedTime:0,pseudoElement:0})),on=Ht($({},Jt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),ln=Ht($({},Jt,{data:0})),un={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=hn[e])&&!!t[e]}function dn(){return pn}var fn=Ht($({},Zt,{key:function(e){if(e.key){var t=un[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Ut(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?cn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dn,charCode:function(e){return"keypress"===e.type?Ut(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Ut(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),mn=Ht($({},tn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),gn=Ht($({},Zt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dn})),yn=Ht($({},Jt,{propertyName:0,elapsedTime:0,pseudoElement:0})),bn=Ht($({},tn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),xn=Ht($({},Jt,{newState:0,oldState:0})),vn=[9,13,27,32],wn=nt&&"CompositionEvent"in window,Sn=null;nt&&"documentMode"in document&&(Sn=document.documentMode);var kn=nt&&"TextEvent"in window&&!Sn,Tn=nt&&(!wn||Sn&&8<Sn&&11>=Sn),An=String.fromCharCode(32),En=!1;function _n(e,t){switch(e){case"keyup":return-1!==vn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ln(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Cn=!1;var In={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $n(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!In[e.type]:"textarea"===t}function On(e,t,n,r){Ot?Rt?Rt.push(r):Rt=[r]:Ot=r,0<(t=Pc(t,"onChange")).length&&(n=new Qt("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Rn=null,Dn=null;function zn(e){Lc(e,0)}function Pn(e){if(pt(qe(e)))return e}function Mn(e,t){if("change"===e)return t}var Nn=!1;if(nt){var Fn;if(nt){var Vn="oninput"in document;if(!Vn){var Kn=document.createElement("div");Kn.setAttribute("oninput","return;"),Vn="function"===typeof Kn.oninput}Fn=Vn}else Fn=!1;Nn=Fn&&(!document.documentMode||9<document.documentMode)}function jn(){Rn&&(Rn.detachEvent("onpropertychange",Bn),Dn=Rn=null)}function Bn(e){if("value"===e.propertyName&&Pn(Dn)){var t=[];On(t,Dn,e,$t(e)),Pt(zn,t)}}function Un(e,t,n){"focusin"===e?(jn(),Dn=n,(Rn=t).attachEvent("onpropertychange",Bn)):"focusout"===e&&jn()}function Gn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Pn(Dn)}function Wn(e,t){if("click"===e)return Pn(t)}function Hn(e,t){if("input"===e||"change"===e)return Pn(t)}var Xn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function qn(e,t){if(Xn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!re.call(t,i)||!Xn(e[i],t[i]))return!1}return!0}function Yn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Jn(e,t){var n,r=Yn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Yn(r)}}function Qn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Qn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function Zn(e){for(var t=dt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=dt((e=t.contentWindow).document)}return t}function er(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function tr(e,t){var n=Zn(t);t=e.focusedElem;var r=e.selectionRange;if(n!==t&&t&&t.ownerDocument&&Qn(t.ownerDocument.documentElement,t)){if(null!==r&&er(t))if(e=r.start,void 0===(n=r.end)&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if((n=(e=t.ownerDocument||document)&&e.defaultView||window).getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=Jn(t,s);var a=Jn(t,r);i&&a&&(1!==n.rangeCount||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==a.node||n.focusOffset!==a.offset)&&((e=e.createRange()).setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),n.addRange(e)))}for(e=[],n=t;n=n.parentNode;)1===n.nodeType&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for("function"===typeof t.focus&&t.focus(),t=0;t<e.length;t++)(n=e[t]).element.scrollLeft=n.left,n.element.scrollTop=n.top}}var nr=nt&&"documentMode"in document&&11>=document.documentMode,rr=null,ir=null,sr=null,ar=!1;function or(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ar||null==rr||rr!==dt(r)||("selectionStart"in(r=rr)&&er(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},sr&&qn(sr,r)||(sr=r,0<(r=Pc(ir,"onSelect")).length&&(t=new Qt("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=rr)))}function lr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ur={animationend:lr("Animation","AnimationEnd"),animationiteration:lr("Animation","AnimationIteration"),animationstart:lr("Animation","AnimationStart"),transitionrun:lr("Transition","TransitionRun"),transitionstart:lr("Transition","TransitionStart"),transitioncancel:lr("Transition","TransitionCancel"),transitionend:lr("Transition","TransitionEnd")},cr={},hr={};function pr(e){if(cr[e])return cr[e];if(!ur[e])return e;var t,n=ur[e];for(t in n)if(n.hasOwnProperty(t)&&t in hr)return cr[e]=n[t];return e}nt&&(hr=document.createElement("div").style,"AnimationEvent"in window||(delete ur.animationend.animation,delete ur.animationiteration.animation,delete ur.animationstart.animation),"TransitionEvent"in window||delete ur.transitionend.transition);var dr=pr("animationend"),fr=pr("animationiteration"),mr=pr("animationstart"),gr=pr("transitionrun"),yr=pr("transitionstart"),br=pr("transitioncancel"),xr=pr("transitionend"),vr=new Map,wr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function Sr(e,t){vr.set(e,t),et(t,[e])}var kr=[],Tr=0,Ar=0;function Er(){for(var e=Tr,t=Ar=Tr=0;t<e;){var n=kr[t];kr[t++]=null;var r=kr[t];kr[t++]=null;var i=kr[t];kr[t++]=null;var s=kr[t];if(kr[t++]=null,null!==r&&null!==i){var a=r.pending;null===a?i.next=i:(i.next=a.next,a.next=i),r.pending=i}0!==s&&Ir(n,i,s)}}function _r(e,t,n,r){kr[Tr++]=e,kr[Tr++]=t,kr[Tr++]=n,kr[Tr++]=r,Ar|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Lr(e,t,n,r){return _r(e,t,n,r),$r(e)}function Cr(e,t){return _r(e,null,null,t),$r(e)}function Ir(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var i=!1,s=e.return;null!==s;)s.childLanes|=n,null!==(r=s.alternate)&&(r.childLanes|=n),22===s.tag&&(null===(e=s.stateNode)||1&e._visibility||(i=!0)),e=s,s=s.return;i&&null!==t&&3===e.tag&&(s=e.stateNode,i=31-ve(n),null===(e=(s=s.hiddenUpdates)[i])?s[i]=[t]:e.push(t),t.lane=536870912|n)}function $r(e){if(50<Lu)throw Lu=0,Cu=null,Error(a(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Or={},Rr=new WeakMap;function Dr(e,t){if("object"===typeof e&&null!==e){var n=Rr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:P(t)},Rr.set(e,t),t)}return{value:e,source:t,stack:P(t)}}var zr=[],Pr=0,Mr=null,Nr=0,Fr=[],Vr=0,Kr=null,jr=1,Br="";function Ur(e,t){zr[Pr++]=Nr,zr[Pr++]=Mr,Mr=e,Nr=t}function Gr(e,t,n){Fr[Vr++]=jr,Fr[Vr++]=Br,Fr[Vr++]=Kr,Kr=e;var r=jr;e=Br;var i=32-ve(r)-1;r&=~(1<<i),n+=1;var s=32-ve(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,jr=1<<32-ve(t)+i|n<<i|r,Br=s+e}else jr=1<<s|n<<i|r,Br=e}function Wr(e){null!==e.return&&(Ur(e,1),Gr(e,1,0))}function Hr(e){for(;e===Mr;)Mr=zr[--Pr],zr[Pr]=null,Nr=zr[--Pr],zr[Pr]=null;for(;e===Kr;)Kr=Fr[--Vr],Fr[Vr]=null,Br=Fr[--Vr],Fr[Vr]=null,jr=Fr[--Vr],Fr[Vr]=null}var Xr=null,qr=null,Yr=!1,Jr=null,Qr=!1,Zr=Error(a(519));function ei(e){throw si(Dr(Error(a(418,"")),e)),Zr}function ti(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Ne]=e,t[Fe]=r,n){case"dialog":Cc("cancel",t),Cc("close",t);break;case"iframe":case"object":case"embed":Cc("load",t);break;case"video":case"audio":for(n=0;n<Ec.length;n++)Cc(Ec[n],t);break;case"source":Cc("error",t);break;case"img":case"image":case"link":Cc("error",t),Cc("load",t);break;case"details":Cc("toggle",t);break;case"input":Cc("invalid",t),yt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),ht(t);break;case"select":Cc("invalid",t);break;case"textarea":Cc("invalid",t),wt(t,r.value,r.defaultValue,r.children),ht(t)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||jc(t.textContent,n)?(null!=r.popover&&(Cc("beforetoggle",t),Cc("toggle",t)),null!=r.onScroll&&Cc("scroll",t),null!=r.onScrollEnd&&Cc("scrollend",t),null!=r.onClick&&(t.onclick=Bc),t=!0):t=!1,t||ei(e)}function ni(e){for(Xr=e.return;Xr;)switch(Xr.tag){case 3:case 27:return void(Qr=!0);case 5:case 13:return void(Qr=!1);default:Xr=Xr.return}}function ri(e){if(e!==Xr)return!1;if(!Yr)return ni(e),Yr=!0,!1;var t,n=!1;if((t=3!==e.tag&&27!==e.tag)&&((t=5===e.tag)&&(t=!("form"!==(t=e.type)&&"button"!==t)||Qc(e.type,e.memoizedProps)),t=!t),t&&(n=!0),n&&qr&&ei(e),ni(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){qr=oh(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}qr=null}}else qr=Xr?oh(e.stateNode.nextSibling):null;return!0}function ii(){qr=Xr=null,Yr=!1}function si(e){null===Jr?Jr=[e]:Jr.push(e)}var ai=Error(a(460)),oi=Error(a(474)),li={then:function(){}};function ui(e){return"fulfilled"===(e=e.status)||"rejected"===e}function ci(){}function hi(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(ci,ci),t=n),t.status){case"fulfilled":return t.value;case"rejected":if((e=t.reason)===ai)throw Error(a(483));throw e;default:if("string"===typeof t.status)t.then(ci,ci);else{if(null!==(e=tu)&&100<e.shellSuspendCounter)throw Error(a(482));(e=t).status="pending",e.then((function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}}),(function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}}))}switch(t.status){case"fulfilled":return t.value;case"rejected":if((e=t.reason)===ai)throw Error(a(483));throw e}throw pi=t,ai}}var pi=null;function di(){if(null===pi)throw Error(a(459));var e=pi;return pi=null,e}var fi=null,mi=0;function gi(e){var t=mi;return mi+=1,null===fi&&(fi=[]),hi(fi,e,t)}function yi(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function bi(e,t){if(t.$$typeof===l)throw Error(a(525));throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function xi(e){return(0,e._init)(e._payload)}function vi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(e,t){return(e=Ml(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=33554434,n):r:(t.flags|=33554434,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=33554434),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=jl(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function p(e,t,n,r){var s=n.type;return s===h?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===w&&xi(s)===t.type)?(yi(t=i(t,n.props),n),t.return=e,t):(yi(t=Fl(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function d(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Bl(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,s){return null===t||7!==t.tag?((t=Vl(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function m(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=jl(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case u:return yi(n=Fl(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case c:return(t=Bl(t,e.mode,n)).return=e,t;case w:return m(e,t=(0,t._init)(t._payload),n)}if(K(t)||A(t))return(t=Vl(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return m(e,gi(t),n);if(t.$$typeof===g)return m(e,Eo(e,t),n);bi(e,t)}return null}function y(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case u:return n.key===i?p(e,t,n,r):null;case c:return n.key===i?d(e,t,n,r):null;case w:return y(e,t,n=(i=n._init)(n._payload),r)}if(K(n)||A(n))return null!==i?null:f(e,t,n,r,null);if("function"===typeof n.then)return y(e,t,gi(n),r);if(n.$$typeof===g)return y(e,t,Eo(e,n),r);bi(e,n)}return null}function b(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case u:return p(t,e=e.get(null===r.key?n:r.key)||null,r,i);case c:return d(t,e=e.get(null===r.key?n:r.key)||null,r,i);case w:return b(e,t,n,r=(0,r._init)(r._payload),i)}if(K(r)||A(r))return f(t,e=e.get(n)||null,r,i,null);if("function"===typeof r.then)return b(e,t,n,gi(r),i);if(r.$$typeof===g)return b(e,t,n,Eo(t,r),i);bi(t,r)}return null}function x(l,p,d,f){if("object"===typeof d&&null!==d&&d.type===h&&null===d.key&&(d=d.props.children),"object"===typeof d&&null!==d){switch(d.$$typeof){case u:e:{for(var v=d.key;null!==p;){if(p.key===v){if((v=d.type)===h){if(7===p.tag){n(l,p.sibling),(f=i(p,d.props.children)).return=l,l=f;break e}}else if(p.elementType===v||"object"===typeof v&&null!==v&&v.$$typeof===w&&xi(v)===p.type){n(l,p.sibling),yi(f=i(p,d.props),d),f.return=l,l=f;break e}n(l,p);break}t(l,p),p=p.sibling}d.type===h?((f=Vl(d.props.children,l.mode,f,d.key)).return=l,l=f):(yi(f=Fl(d.type,d.key,d.props,null,l.mode,f),d),f.return=l,l=f)}return o(l);case c:e:{for(v=d.key;null!==p;){if(p.key===v){if(4===p.tag&&p.stateNode.containerInfo===d.containerInfo&&p.stateNode.implementation===d.implementation){n(l,p.sibling),(f=i(p,d.children||[])).return=l,l=f;break e}n(l,p);break}t(l,p),p=p.sibling}(f=Bl(d,l.mode,f)).return=l,l=f}return o(l);case w:return x(l,p,d=(v=d._init)(d._payload),f)}if(K(d))return function(i,a,o,l){for(var u=null,c=null,h=a,p=a=0,d=null;null!==h&&p<o.length;p++){h.index>p?(d=h,h=null):d=h.sibling;var f=y(i,h,o[p],l);if(null===f){null===h&&(h=d);break}e&&h&&null===f.alternate&&t(i,h),a=s(f,a,p),null===c?u=f:c.sibling=f,c=f,h=d}if(p===o.length)return n(i,h),Yr&&Ur(i,p),u;if(null===h){for(;p<o.length;p++)null!==(h=m(i,o[p],l))&&(a=s(h,a,p),null===c?u=h:c.sibling=h,c=h);return Yr&&Ur(i,p),u}for(h=r(h);p<o.length;p++)null!==(d=b(h,i,p,o[p],l))&&(e&&null!==d.alternate&&h.delete(null===d.key?p:d.key),a=s(d,a,p),null===c?u=d:c.sibling=d,c=d);return e&&h.forEach((function(e){return t(i,e)})),Yr&&Ur(i,p),u}(l,p,d,f);if(A(d)){if("function"!==typeof(v=A(d)))throw Error(a(150));return function(i,o,l,u){if(null==l)throw Error(a(151));for(var c=null,h=null,p=o,d=o=0,f=null,g=l.next();null!==p&&!g.done;d++,g=l.next()){p.index>d?(f=p,p=null):f=p.sibling;var x=y(i,p,g.value,u);if(null===x){null===p&&(p=f);break}e&&p&&null===x.alternate&&t(i,p),o=s(x,o,d),null===h?c=x:h.sibling=x,h=x,p=f}if(g.done)return n(i,p),Yr&&Ur(i,d),c;if(null===p){for(;!g.done;d++,g=l.next())null!==(g=m(i,g.value,u))&&(o=s(g,o,d),null===h?c=g:h.sibling=g,h=g);return Yr&&Ur(i,d),c}for(p=r(p);!g.done;d++,g=l.next())null!==(g=b(p,i,d,g.value,u))&&(e&&null!==g.alternate&&p.delete(null===g.key?d:g.key),o=s(g,o,d),null===h?c=g:h.sibling=g,h=g);return e&&p.forEach((function(e){return t(i,e)})),Yr&&Ur(i,d),c}(l,p,d=v.call(d),f)}if("function"===typeof d.then)return x(l,p,gi(d),f);if(d.$$typeof===g)return x(l,p,Eo(l,d),f);bi(l,d)}return"string"===typeof d&&""!==d||"number"===typeof d||"bigint"===typeof d?(d=""+d,null!==p&&6===p.tag?(n(l,p.sibling),(f=i(p,d)).return=l,l=f):(n(l,p),(f=jl(d,l.mode,f)).return=l,l=f),o(l)):n(l,p)}return function(e,t,n,r){try{mi=0;var i=x(e,t,n,r);return fi=null,i}catch(a){if(a===ai)throw a;var s=zl(29,a,null,e.mode);return s.lanes=r,s.return=e,s}}}var wi=vi(!0),Si=vi(!1),ki=W(null),Ti=W(0);function Ai(e,t){X(Ti,e=uu),X(ki,t),uu=e|t.baseLanes}function Ei(){X(Ti,uu),X(ki,ki.current)}function _i(){uu=Ti.current,H(ki),H(Ti)}var Li=W(null),Ci=null;function Ii(e){var t=e.alternate;X(Di,1&Di.current),X(Li,e),null===Ci&&(null===t||null!==ki.current||null!==t.memoizedState)&&(Ci=e)}function $i(e){if(22===e.tag){if(X(Di,Di.current),X(Li,e),null===Ci){var t=e.alternate;null!==t&&null!==t.memoizedState&&(Ci=e)}}else Oi()}function Oi(){X(Di,Di.current),X(Li,Li.current)}function Ri(e){H(Li),Ci===e&&(Ci=null),H(Di)}var Di=W(0);function zi(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Pi="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach((function(e){return e()}))}},Mi=r.unstable_scheduleCallback,Ni=r.unstable_NormalPriority,Fi={$$typeof:g,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Vi(){return{controller:new Pi,data:new Map,refCount:0}}function Ki(e){e.refCount--,0===e.refCount&&Mi(Ni,(function(){e.controller.abort()}))}var ji=null,Bi=0,Ui=0,Gi=null;function Wi(){if(0===--Bi&&null!==ji){null!==Gi&&(Gi.status="fulfilled");var e=ji;ji=null,Ui=0,Gi=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Hi=I.S;I.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===ji){var n=ji=[];Bi=0,Ui=wc(),Gi={status:"pending",value:void 0,then:function(e){n.push(e)}}}Bi++,t.then(Wi,Wi)}(0,t),null!==Hi&&Hi(e,t)};var Xi=W(null);function qi(){var e=Xi.current;return null!==e?e:tu.pooledCache}function Yi(e,t){X(Xi,null===t?Xi.current:t.pool)}function Ji(){var e=qi();return null===e?null:{parent:Fi._currentValue,pool:e}}var Qi=0,Zi=null,es=null,ts=null,ns=!1,rs=!1,is=!1,ss=0,as=0,os=null,ls=0;function us(){throw Error(a(321))}function cs(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Xn(e[n],t[n]))return!1;return!0}function hs(e,t,n,r,i,s){return Qi=s,Zi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,I.H=null===e||null===e.memoizedState?Aa:Ea,is=!1,s=n(r,i),is=!1,rs&&(s=ds(t,n,r,i)),ps(e),s}function ps(e){I.H=Ta;var t=null!==es&&null!==es.next;if(Qi=0,ts=es=Zi=null,ns=!1,as=0,os=null,t)throw Error(a(300));null===e||Ba||null!==(e=e.dependencies)&&ko(e)&&(Ba=!0)}function ds(e,t,n,r){Zi=e;var i=0;do{if(rs&&(os=null),as=0,rs=!1,25<=i)throw Error(a(301));if(i+=1,ts=es=null,null!=e.updateQueue){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,null!=s.memoCache&&(s.memoCache.index=0)}I.H=_a,s=t(n,r)}while(rs);return s}function fs(){var e=I.H,t=e.useState()[0];return t="function"===typeof t.then?vs(t):t,e=e.useState()[0],(null!==es?es.memoizedState:null)!==e&&(Zi.flags|=1024),t}function ms(){var e=0!==ss;return ss=0,e}function gs(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function ys(e){if(ns){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}ns=!1}Qi=0,ts=es=Zi=null,rs=!1,as=ss=0,os=null}function bs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ts?Zi.memoizedState=ts=e:ts=ts.next=e,ts}function xs(){if(null===es){var e=Zi.alternate;e=null!==e?e.memoizedState:null}else e=es.next;var t=null===ts?Zi.memoizedState:ts.next;if(null!==t)ts=t,es=e;else{if(null===e){if(null===Zi.alternate)throw Error(a(467));throw Error(a(310))}e={memoizedState:(es=e).memoizedState,baseState:es.baseState,baseQueue:es.baseQueue,queue:es.queue,next:null},null===ts?Zi.memoizedState=ts=e:ts=ts.next=e}return ts}function vs(e){var t=as;return as+=1,null===os&&(os=[]),e=hi(os,e,t),t=Zi,null===(null===ts?t.memoizedState:ts.next)&&(t=t.alternate,I.H=null===t||null===t.memoizedState?Aa:Ea),e}function ws(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return vs(e);if(e.$$typeof===g)return Ao(e)}throw Error(a(438,String(e)))}function Ss(e){var t=null,n=Zi.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=Zi.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map((function(e){return e.slice()})),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},Zi.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=k;return t.index++,n}function ks(e,t){return"function"===typeof t?t(e):t}function Ts(e){return As(xs(),es,e)}function As(e,t,n){var r=e.queue;if(null===r)throw Error(a(311));r.lastRenderedReducer=n;var i=e.baseQueue,s=r.pending;if(null!==s){if(null!==i){var o=i.next;i.next=s.next,s.next=o}t.baseQueue=i=s,r.pending=null}if(s=e.baseState,null===i)e.memoizedState=s;else{var l=o=null,u=null,c=t=i.next,h=!1;do{var p=-536870913&c.lane;if(p!==c.lane?(ru&p)===p:(Qi&p)===p){var d=c.revertLane;if(0===d)null!==u&&(u=u.next={lane:0,revertLane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),p===Ui&&(h=!0);else{if((Qi&d)===d){c=c.next,d===Ui&&(h=!0);continue}p={lane:0,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===u?(l=u=p,o=s):u=u.next=p,Zi.lanes|=d,hu|=d}p=c.action,is&&n(s,p),s=c.hasEagerState?c.eagerState:n(s,p)}else d={lane:p,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===u?(l=u=d,o=s):u=u.next=d,Zi.lanes|=p,hu|=p;c=c.next}while(null!==c&&c!==t);if(null===u?o=s:u.next=l,!Xn(s,e.memoizedState)&&(Ba=!0,h&&null!==(n=Gi)))throw n;e.memoizedState=s,e.baseState=o,e.baseQueue=u,r.lastRenderedState=s}return null===i&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Es(e){var t=xs(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{s=e(s,o.action),o=o.next}while(o!==i);Xn(s,t.memoizedState)||(Ba=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function _s(e,t,n){var r=Zi,i=xs(),s=Yr;if(s){if(void 0===n)throw Error(a(407));n=n()}else n=t();var o=!Xn((es||i).memoizedState,n);if(o&&(i.memoizedState=n,Ba=!0),i=i.queue,Qs(Is.bind(null,r,i,e),[e]),i.getSnapshot!==t||o||null!==ts&&1&ts.memoizedState.tag){if(r.flags|=2048,Hs(9,Cs.bind(null,r,i,n,t),{destroy:void 0},null),null===tu)throw Error(a(349));s||0!==(60&Qi)||Ls(r,t,n)}return n}function Ls(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Zi.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},Zi.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Cs(e,t,n,r){t.value=n,t.getSnapshot=r,$s(t)&&Os(e)}function Is(e,t,n){return n((function(){$s(t)&&Os(e)}))}function $s(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Xn(e,n)}catch(r){return!0}}function Os(e){var t=Cr(e,2);null!==t&&Ou(t,e,2)}function Rs(e){var t=bs();if("function"===typeof e){var n=e;if(e=n(),is){xe(!0);try{n()}finally{xe(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ks,lastRenderedState:e},t}function Ds(e,t,n,r){return e.baseState=n,As(e,es,"function"===typeof r?r:ks)}function zs(e,t,n,r,i){if(wa(e))throw Error(a(485));if(null!==(e=t.action)){var s={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){s.listeners.push(e)}};null!==I.T?n(!0):s.isTransition=!1,r(s),null===(n=t.pending)?(s.next=t.pending=s,Ps(t,s)):(s.next=n.next,t.pending=n.next=s)}}function Ps(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var s=I.T,a={};I.T=a;try{var o=n(i,r),l=I.S;null!==l&&l(a,o),Ms(e,t,o)}catch(u){Fs(e,t,u)}finally{I.T=s}}else try{Ms(e,t,s=n(i,r))}catch(c){Fs(e,t,c)}}function Ms(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then((function(n){Ns(e,t,n)}),(function(n){return Fs(e,t,n)})):Ns(e,t,n)}function Ns(e,t,n){t.status="fulfilled",t.value=n,Vs(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,Ps(e,n)))}function Fs(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,Vs(t),t=t.next}while(t!==r)}e.action=null}function Vs(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Ks(e,t){return t}function js(e,t){if(Yr){var n=tu.formState;if(null!==n){e:{var r=Zi;if(Yr){if(qr){t:{for(var i=qr,s=Qr;8!==i.nodeType;){if(!s){i=null;break t}if(null===(i=oh(i.nextSibling))){i=null;break t}}i="F!"===(s=i.data)||"F"===s?i:null}if(i){qr=oh(i.nextSibling),r="F!"===i.data;break e}}ei(r)}r=!1}r&&(t=n[0])}}return(n=bs()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ks,lastRenderedState:t},n.queue=r,n=ba.bind(null,Zi,r),r.dispatch=n,r=Rs(!1),s=va.bind(null,Zi,!1,r.queue),i={state:t,dispatch:null,action:e,pending:null},(r=bs()).queue=i,n=zs.bind(null,Zi,i,s,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function Bs(e){return Us(xs(),es,e)}function Us(e,t,n){t=As(e,t,Ks)[0],e=Ts(ks)[0],t="object"===typeof t&&null!==t&&"function"===typeof t.then?vs(t):t;var r=xs(),i=r.queue,s=i.dispatch;return n!==r.memoizedState&&(Zi.flags|=2048,Hs(9,Gs.bind(null,i,n),{destroy:void 0},null)),[t,s,e]}function Gs(e,t){e.action=t}function Ws(e){var t=xs(),n=es;if(null!==n)return Us(t,n,e);xs(),t=t.memoizedState;var r=(n=xs()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function Hs(e,t,n,r){return e={tag:e,create:t,inst:n,deps:r,next:null},null===(t=Zi.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},Zi.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Xs(){return xs().memoizedState}function qs(e,t,n,r){var i=bs();Zi.flags|=e,i.memoizedState=Hs(1|t,n,{destroy:void 0},void 0===r?null:r)}function Ys(e,t,n,r){var i=xs();r=void 0===r?null:r;var s=i.memoizedState.inst;null!==es&&null!==r&&cs(r,es.memoizedState.deps)?i.memoizedState=Hs(t,n,s,r):(Zi.flags|=e,i.memoizedState=Hs(1|t,n,s,r))}function Js(e,t){qs(8390656,8,e,t)}function Qs(e,t){Ys(2048,8,e,t)}function Zs(e,t){return Ys(4,2,e,t)}function ea(e,t){return Ys(4,4,e,t)}function ta(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function na(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Ys(4,4,ta.bind(null,t,e),n)}function ra(){}function ia(e,t){var n=xs();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&cs(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function sa(e,t){var n=xs();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&cs(t,r[1]))return r[0];if(r=e(),is){xe(!0);try{e()}finally{xe(!1)}}return n.memoizedState=[r,t],r}function aa(e,t,n){return void 0===n||0!==(1073741824&Qi)?e.memoizedState=t:(e.memoizedState=n,e=$u(),Zi.lanes|=e,hu|=e,n)}function oa(e,t,n,r){return Xn(n,t)?n:null!==ki.current?(e=aa(e,n,r),Xn(e,t)||(Ba=!0),e):0===(42&Qi)?(Ba=!0,e.memoizedState=n):(e=$u(),Zi.lanes|=e,hu|=e,t)}function la(e,t,n,r,i){var s=j.p;j.p=0!==s&&8>s?s:8;var a=I.T,o={};I.T=o,va(e,!1,t,n);try{var l=i(),u=I.S;if(null!==u&&u(o,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)xa(e,t,function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then((function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)}),(function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)})),r}(l,r),Iu());else xa(e,t,r,Iu())}catch(c){xa(e,t,{then:function(){},status:"rejected",reason:c},Iu())}finally{j.p=s,I.T=a}}function ua(){}function ca(e,t,n,r){if(5!==e.tag)throw Error(a(476));var i=ha(e).queue;la(e,i,t,B,null===n?ua:function(){return pa(e),n(r)})}function ha(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:B,baseState:B,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ks,lastRenderedState:B},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ks,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function pa(e){xa(e,ha(e).next.queue,{},Iu())}function da(){return Ao(Ph)}function fa(){return xs().memoizedState}function ma(){return xs().memoizedState}function ga(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Iu(),r=Oo(t,e=$o(n),n);return null!==r&&(Ou(r,t,n),Ro(r,t,n)),t={cache:Vi()},void(e.payload=t)}t=t.return}}function ya(e,t,n){var r=Iu();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},wa(e)?Sa(t,n):null!==(n=Lr(e,t,n,r))&&(Ou(n,e,r),ka(n,t,r))}function ba(e,t,n){xa(e,t,n,Iu())}function xa(e,t,n,r){var i={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(wa(e))Sa(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,Xn(o,a))return _r(e,t,i,0),null===tu&&Er(),!1}catch(l){}if(null!==(n=Lr(e,t,i,r)))return Ou(n,e,r),ka(n,t,r),!0}return!1}function va(e,t,n,r){if(r={lane:2,revertLane:wc(),action:r,hasEagerState:!1,eagerState:null,next:null},wa(e)){if(t)throw Error(a(479))}else null!==(t=Lr(e,n,r,2))&&Ou(t,e,2)}function wa(e){var t=e.alternate;return e===Zi||null!==t&&t===Zi}function Sa(e,t){rs=ns=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ka(e,t,n){if(0!==(4194176&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,De(e,n)}}var Ta={readContext:Ao,use:ws,useCallback:us,useContext:us,useEffect:us,useImperativeHandle:us,useLayoutEffect:us,useInsertionEffect:us,useMemo:us,useReducer:us,useRef:us,useState:us,useDebugValue:us,useDeferredValue:us,useTransition:us,useSyncExternalStore:us,useId:us};Ta.useCacheRefresh=us,Ta.useMemoCache=us,Ta.useHostTransitionStatus=us,Ta.useFormState=us,Ta.useActionState=us,Ta.useOptimistic=us;var Aa={readContext:Ao,use:ws,useCallback:function(e,t){return bs().memoizedState=[e,void 0===t?null:t],e},useContext:Ao,useEffect:Js,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,qs(4194308,4,ta.bind(null,t,e),n)},useLayoutEffect:function(e,t){return qs(4194308,4,e,t)},useInsertionEffect:function(e,t){qs(4,2,e,t)},useMemo:function(e,t){var n=bs();t=void 0===t?null:t;var r=e();if(is){xe(!0);try{e()}finally{xe(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=bs();if(void 0!==n){var i=n(t);if(is){xe(!0);try{n(t)}finally{xe(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=ya.bind(null,Zi,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},bs().memoizedState=e},useState:function(e){var t=(e=Rs(e)).queue,n=ba.bind(null,Zi,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:ra,useDeferredValue:function(e,t){return aa(bs(),e,t)},useTransition:function(){var e=Rs(!1);return e=la.bind(null,Zi,e.queue,!0,!1),bs().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=Zi,i=bs();if(Yr){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===tu)throw Error(a(349));0!==(60&ru)||Ls(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Js(Is.bind(null,r,s,e),[e]),r.flags|=2048,Hs(9,Cs.bind(null,r,s,n,t),{destroy:void 0},null),n},useId:function(){var e=bs(),t=tu.identifierPrefix;if(Yr){var n=Br;t=":"+t+"R"+(n=(jr&~(1<<32-ve(jr)-1)).toString(32)+n),0<(n=ss++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ls++).toString(32)+":";return e.memoizedState=t},useCacheRefresh:function(){return bs().memoizedState=ga.bind(null,Zi)}};Aa.useMemoCache=Ss,Aa.useHostTransitionStatus=da,Aa.useFormState=js,Aa.useActionState=js,Aa.useOptimistic=function(e){var t=bs();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=va.bind(null,Zi,!0,n),n.dispatch=t,[e,t]};var Ea={readContext:Ao,use:ws,useCallback:ia,useContext:Ao,useEffect:Qs,useImperativeHandle:na,useInsertionEffect:Zs,useLayoutEffect:ea,useMemo:sa,useReducer:Ts,useRef:Xs,useState:function(){return Ts(ks)},useDebugValue:ra,useDeferredValue:function(e,t){return oa(xs(),es.memoizedState,e,t)},useTransition:function(){var e=Ts(ks)[0],t=xs().memoizedState;return["boolean"===typeof e?e:vs(e),t]},useSyncExternalStore:_s,useId:fa};Ea.useCacheRefresh=ma,Ea.useMemoCache=Ss,Ea.useHostTransitionStatus=da,Ea.useFormState=Bs,Ea.useActionState=Bs,Ea.useOptimistic=function(e,t){return Ds(xs(),0,e,t)};var _a={readContext:Ao,use:ws,useCallback:ia,useContext:Ao,useEffect:Qs,useImperativeHandle:na,useInsertionEffect:Zs,useLayoutEffect:ea,useMemo:sa,useReducer:Es,useRef:Xs,useState:function(){return Es(ks)},useDebugValue:ra,useDeferredValue:function(e,t){var n=xs();return null===es?aa(n,e,t):oa(n,es.memoizedState,e,t)},useTransition:function(){var e=Es(ks)[0],t=xs().memoizedState;return["boolean"===typeof e?e:vs(e),t]},useSyncExternalStore:_s,useId:fa};function La(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:$({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}_a.useCacheRefresh=ma,_a.useMemoCache=Ss,_a.useHostTransitionStatus=da,_a.useFormState=Ws,_a.useActionState=Ws,_a.useOptimistic=function(e,t){var n=xs();return null!==es?Ds(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])};var Ca={isMounted:function(e){return!!(e=e._reactInternals)&&M(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Iu(),i=$o(r);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Oo(e,i,r))&&(Ou(t,e,r),Ro(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Iu(),i=$o(r);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Oo(e,i,r))&&(Ou(t,e,r),Ro(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Iu(),r=$o(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=Oo(e,r,n))&&(Ou(t,e,n),Ro(t,e,n))}};function Ia(e,t,n,r,i,s,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!qn(n,r)||!qn(i,s))}function $a(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ca.enqueueReplaceState(t,t.state,null)}function Oa(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=$({},n)),e)void 0===n[i]&&(n[i]=e[i]);return n}var Ra="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function Da(e){Ra(e)}function za(e){console.error(e)}function Pa(e){Ra(e)}function Ma(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout((function(){throw n}))}}function Na(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout((function(){throw r}))}}function Fa(e,t,n){return(n=$o(n)).tag=3,n.payload={element:null},n.callback=function(){Ma(e,t)},n}function Va(e){return(e=$o(e)).tag=3,e}function Ka(e,t,n,r){var i=n.type.getDerivedStateFromError;if("function"===typeof i){var s=r.value;e.payload=function(){return i(s)},e.callback=function(){Na(t,n,r)}}var a=n.stateNode;null!==a&&"function"===typeof a.componentDidCatch&&(e.callback=function(){Na(t,n,r),"function"!==typeof i&&(null===Su?Su=new Set([this]):Su.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var ja=Error(a(461)),Ba=!1;function Ua(e,t,n,r){t.child=null===e?Si(t,null,n,r):wi(t,e.child,n,r)}function Ga(e,t,n,r,i){n=n.render;var s=t.ref;if("ref"in r){var a={};for(var o in r)"ref"!==o&&(a[o]=r[o])}else a=r;return To(t),r=hs(e,t,n,a,s,i),o=ms(),null===e||Ba?(Yr&&o&&Wr(t),t.flags|=1,Ua(e,t,r,i),t.child):(gs(e,t,i),ho(e,t,i))}function Wa(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Pl(s)||void 0!==s.defaultProps||null!==n.compare?((e=Fl(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Ha(e,t,s,r,i))}if(s=e.child,!po(e,i)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:qn)(a,r)&&e.ref===t.ref)return ho(e,t,i)}return t.flags|=1,(e=Ml(s,r)).ref=t.ref,e.return=t,t.child=e}function Ha(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(qn(s,r)&&e.ref===t.ref){if(Ba=!1,t.pendingProps=r=s,!po(e,i))return t.lanes=e.lanes,ho(e,t,i);0!==(131072&e.flags)&&(Ba=!0)}}return Ja(e,t,n,r,i)}function Xa(e,t,n){var r=t.pendingProps,i=r.children,s=0!==(2&t.stateNode._pendingVisibility),a=null!==e?e.memoizedState:null;if(Ya(e,t),"hidden"===r.mode||s){if(0!==(128&t.flags)){if(r=null!==a?a.baseLanes|n:n,null!==e){for(i=t.child=e.child,s=0;null!==i;)s=s|i.lanes|i.childLanes,i=i.sibling;t.childLanes=s&~r}else t.childLanes=0,t.child=null;return qa(e,t,r,n)}if(0===(536870912&n))return t.lanes=t.childLanes=536870912,qa(e,t,null!==a?a.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Yi(0,null!==a?a.cachePool:null),null!==a?Ai(t,a):Ei(),$i(t)}else null!==a?(Yi(0,a.cachePool),Ai(t,a),Oi(),t.memoizedState=null):(null!==e&&Yi(0,null),Ei(),Oi());return Ua(e,t,i,n),t.child}function qa(e,t,n,r){var i=qi();return i=null===i?null:{parent:Fi._currentValue,pool:i},t.memoizedState={baseLanes:n,cachePool:i},null!==e&&Yi(0,null),Ei(),$i(t),null!==e&&So(e,t,r,!0),null}function Ya(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=2097664);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(a(284));null!==e&&e.ref===n||(t.flags|=2097664)}}function Ja(e,t,n,r,i){return To(t),n=hs(e,t,n,r,void 0,i),r=ms(),null===e||Ba?(Yr&&r&&Wr(t),t.flags|=1,Ua(e,t,n,i),t.child):(gs(e,t,i),ho(e,t,i))}function Qa(e,t,n,r,i,s){return To(t),t.updateQueue=null,n=ds(t,r,n,i),ps(e),r=ms(),null===e||Ba?(Yr&&r&&Wr(t),t.flags|=1,Ua(e,t,n,s),t.child):(gs(e,t,s),ho(e,t,s))}function Za(e,t,n,r,i){if(To(t),null===t.stateNode){var s=Or,a=n.contextType;"object"===typeof a&&null!==a&&(s=Ao(a)),s=new n(r,s),t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,s.updater=Ca,t.stateNode=s,s._reactInternals=t,(s=t.stateNode).props=r,s.state=t.memoizedState,s.refs={},Co(t),a=n.contextType,s.context="object"===typeof a&&null!==a?Ao(a):Or,s.state=t.memoizedState,"function"===typeof(a=n.getDerivedStateFromProps)&&(La(t,n,a,r),s.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(a=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),a!==s.state&&Ca.enqueueReplaceState(s,s.state,null),Mo(t,r,s,i),Po(),s.state=t.memoizedState),"function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){s=t.stateNode;var o=t.memoizedProps,l=Oa(n,o);s.props=l;var u=s.context,c=n.contextType;a=Or,"object"===typeof c&&null!==c&&(a=Ao(c));var h=n.getDerivedStateFromProps;c="function"===typeof h||"function"===typeof s.getSnapshotBeforeUpdate,o=t.pendingProps!==o,c||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o||u!==a)&&$a(t,s,r,a),Lo=!1;var p=t.memoizedState;s.state=p,Mo(t,r,s,i),Po(),u=t.memoizedState,o||p!==u||Lo?("function"===typeof h&&(La(t,n,h,r),u=t.memoizedState),(l=Lo||Ia(t,n,l,r,p,u,a))?(c||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),s.props=r,s.state=u,s.context=a,r=l):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,Io(e,t),c=Oa(n,a=t.memoizedProps),s.props=c,h=t.pendingProps,p=s.context,u=n.contextType,l=Or,"object"===typeof u&&null!==u&&(l=Ao(u)),(u="function"===typeof(o=n.getDerivedStateFromProps)||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==h||p!==l)&&$a(t,s,r,l),Lo=!1,p=t.memoizedState,s.state=p,Mo(t,r,s,i),Po();var d=t.memoizedState;a!==h||p!==d||Lo||null!==e&&null!==e.dependencies&&ko(e.dependencies)?("function"===typeof o&&(La(t,n,o,r),d=t.memoizedState),(c=Lo||Ia(t,n,c,r,p,d,l)||null!==e&&null!==e.dependencies&&ko(e.dependencies))?(u||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,d,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,d,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=d),s.props=r,s.state=d,s.context=l,r=c):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),r=!1)}return s=r,Ya(e,t),r=0!==(128&t.flags),s||r?(s=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:s.render(),t.flags|=1,null!==e&&r?(t.child=wi(t,e.child,null,i),t.child=wi(t,null,n,i)):Ua(e,t,n,i),t.memoizedState=s.state,e=t.child):e=ho(e,t,i),e}function eo(e,t,n,r){return ii(),t.flags|=256,Ua(e,t,n,r),t.child}var to={dehydrated:null,treeContext:null,retryLane:0};function no(e){return{baseLanes:e,cachePool:Ji()}}function ro(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=fu),e}function io(e,t,n){var r,i=t.pendingProps,s=!1,o=0!==(128&t.flags);if((r=o)||(r=(null===e||null!==e.memoizedState)&&0!==(2&Di.current)),r&&(s=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(Yr){if(s?Ii(t):Oi(),Yr){var l,u=qr;if(l=u){e:{for(l=u,u=Qr;8!==l.nodeType;){if(!u){u=null;break e}if(null===(l=oh(l.nextSibling))){u=null;break e}}u=l}null!==u?(t.memoizedState={dehydrated:u,treeContext:null!==Kr?{id:jr,overflow:Br}:null,retryLane:536870912},(l=zl(18,null,null,0)).stateNode=u,l.return=t,t.child=l,Xr=t,qr=null,l=!0):l=!1}l||ei(t)}if(null!==(u=t.memoizedState)&&null!==(u=u.dehydrated))return"$!"===u.data?t.lanes=16:t.lanes=536870912,null;Ri(t)}return u=i.children,i=i.fallback,s?(Oi(),u=ao({mode:"hidden",children:u},s=t.mode),i=Vl(i,s,n,null),u.return=t,i.return=t,u.sibling=i,t.child=u,(s=t.child).memoizedState=no(n),s.childLanes=ro(e,r,n),t.memoizedState=to,i):(Ii(t),so(t,u))}if(null!==(l=e.memoizedState)&&null!==(u=l.dehydrated)){if(o)256&t.flags?(Ii(t),t.flags&=-257,t=oo(e,t,n)):null!==t.memoizedState?(Oi(),t.child=e.child,t.flags|=128,t=null):(Oi(),s=i.fallback,u=t.mode,i=ao({mode:"visible",children:i.children},u),(s=Vl(s,u,n,null)).flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,wi(t,e.child,null,n),(i=t.child).memoizedState=no(n),i.childLanes=ro(e,r,n),t.memoizedState=to,t=s);else if(Ii(t),"$!"===u.data){if(r=u.nextSibling&&u.nextSibling.dataset)var c=r.dgst;r=c,(i=Error(a(419))).stack="",i.digest=r,si({value:i,source:null,stack:null}),t=oo(e,t,n)}else if(Ba||So(e,t,n,!1),r=0!==(n&e.childLanes),Ba||r){if(null!==(r=tu)){if(0!==(42&(i=n&-n)))i=1;else switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=64;break;case 268435456:i=134217728;break;default:i=0}if(0!==(i=0!==(i&(r.suspendedLanes|n))?0:i)&&i!==l.retryLane)throw l.retryLane=i,Cr(e,i),Ou(r,e,i),ja}"$?"===u.data||Uu(),t=oo(e,t,n)}else"$?"===u.data?(t.flags|=128,t.child=e.child,t=oc.bind(null,e),u._reactRetry=t,t=null):(e=l.treeContext,qr=oh(u.nextSibling),Xr=t,Yr=!0,Jr=null,Qr=!1,null!==e&&(Fr[Vr++]=jr,Fr[Vr++]=Br,Fr[Vr++]=Kr,jr=e.id,Br=e.overflow,Kr=t),(t=so(t,i.children)).flags|=4096);return t}return s?(Oi(),s=i.fallback,u=t.mode,c=(l=e.child).sibling,(i=Ml(l,{mode:"hidden",children:i.children})).subtreeFlags=31457280&l.subtreeFlags,null!==c?s=Ml(c,s):(s=Vl(s,u,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,null===(u=e.child.memoizedState)?u=no(n):(null!==(l=u.cachePool)?(c=Fi._currentValue,l=l.parent!==c?{parent:c,pool:c}:l):l=Ji(),u={baseLanes:u.baseLanes|n,cachePool:l}),s.memoizedState=u,s.childLanes=ro(e,r,n),t.memoizedState=to,i):(Ii(t),e=(n=e.child).sibling,(n=Ml(n,{mode:"visible",children:i.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function so(e,t){return(t=ao({mode:"visible",children:t},e.mode)).return=e,e.child=t}function ao(e,t){return Kl(e,t,0,null)}function oo(e,t,n){return wi(t,e.child,null,n),(e=so(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function lo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),vo(e.return,t,n)}function uo(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function co(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Ua(e,t,r.children,n),0!==(2&(r=Di.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&lo(e,n,t);else if(19===e.tag)lo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(X(Di,r),i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===zi(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),uo(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===zi(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}uo(t,!0,n,null,s);break;case"together":uo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ho(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),hu|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(So(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Ml(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ml(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function po(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!ko(e))}function fo(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Ba=!0;else{if(!po(e,n)&&0===(128&t.flags))return Ba=!1,function(e,t,n){switch(t.tag){case 3:Z(t,t.stateNode.containerInfo),bo(t,Fi,e.memoizedState.cache),ii();break;case 27:case 5:te(t);break;case 4:Z(t,t.stateNode.containerInfo);break;case 10:bo(t,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(Ii(t),t.flags|=128,null):0!==(n&t.child.childLanes)?io(e,t,n):(Ii(t),null!==(e=ho(e,t,n))?e.sibling:null);Ii(t);break;case 19:var i=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(So(e,t,n,!1),r=0!==(n&t.childLanes)),i){if(r)return co(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),X(Di,Di.current),r)break;return null;case 22:case 23:return t.lanes=0,Xa(e,t,n);case 24:bo(t,Fi,e.memoizedState.cache)}return ho(e,t,n)}(e,t,n);Ba=0!==(131072&e.flags)}else Ba=!1,Yr&&0!==(1048576&t.flags)&&Gr(t,Nr,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,i=r._init;if(r=i(r._payload),t.type=r,"function"!==typeof r){if(void 0!==r&&null!==r){if((i=r.$$typeof)===y){t.tag=11,t=Ga(null,t,r,e,n);break e}if(i===v){t.tag=14,t=Wa(null,t,r,e,n);break e}}throw t=_(r)||r,Error(a(306,t,""))}Pl(r)?(e=Oa(r,e),t.tag=1,t=Za(null,t,r,e,n)):(t.tag=0,t=Ja(null,t,r,e,n))}return t;case 0:return Ja(e,t,t.type,t.pendingProps,n);case 1:return Za(e,t,r=t.type,i=Oa(r,t.pendingProps),n);case 3:e:{if(Z(t,t.stateNode.containerInfo),null===e)throw Error(a(387));var s=t.pendingProps;r=(i=t.memoizedState).element,Io(e,t),Mo(t,s,null,n);var o=t.memoizedState;if(s=o.cache,bo(t,Fi,s),s!==i.cache&&wo(t,[Fi],n,!0),Po(),s=o.element,i.isDehydrated){if(i={element:s,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=eo(e,t,s,n);break e}if(s!==r){si(r=Dr(Error(a(424)),t)),t=eo(e,t,s,n);break e}for(qr=oh(t.stateNode.containerInfo.firstChild),Xr=t,Yr=!0,Jr=null,Qr=!0,n=Si(t,null,s,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ii(),s===r){t=ho(e,t,n);break e}Ua(e,t,s,n)}t=t.child}return t;case 26:return Ya(e,t),null===e?(n=gh(t.type,null,t.pendingProps,null))?t.memoizedState=n:Yr||(n=t.type,e=t.pendingProps,(r=qc(J.current).createElement(n))[Ne]=t,r[Fe]=e,Wc(r,n,e),Je(r),t.stateNode=r):t.memoizedState=gh(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return te(t),null===e&&Yr&&(r=t.stateNode=uh(t.type,t.pendingProps,J.current),Xr=t,Qr=!0,qr=oh(r.firstChild)),r=t.pendingProps.children,null!==e||Yr?Ua(e,t,r,n):t.child=wi(t,null,r,n),Ya(e,t),t.child;case 5:return null===e&&Yr&&((i=r=qr)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Ge])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(s=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(s!==i.rel||e.getAttribute("href")!==(null==i.href?null:i.href)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin)||e.getAttribute("title")!==(null==i.title?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((s=e.getAttribute("src"))!==(null==i.src?null:i.src)||e.getAttribute("type")!==(null==i.type?null:i.type)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var s=null==i.name?null:""+i.name;if("hidden"===i.type&&e.getAttribute("name")===s)return e}if(null===(e=oh(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,Qr))?(t.stateNode=r,Xr=t,qr=oh(r.firstChild),Qr=!1,i=!0):i=!1),i||ei(t)),te(t),i=t.type,s=t.pendingProps,o=null!==e?e.memoizedProps:null,r=s.children,Qc(i,s)?r=null:null!==o&&Qc(i,o)&&(t.flags|=32),null!==t.memoizedState&&(i=hs(e,t,fs,null,null,n),Ph._currentValue=i),Ya(e,t),Ua(e,t,r,n),t.child;case 6:return null===e&&Yr&&((e=n=qr)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=oh(e.nextSibling)))return null}return e}(n,t.pendingProps,Qr))?(t.stateNode=n,Xr=t,qr=null,e=!0):e=!1),e||ei(t)),null;case 13:return io(e,t,n);case 4:return Z(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=wi(t,null,r,n):Ua(e,t,r,n),t.child;case 11:return Ga(e,t,t.type,t.pendingProps,n);case 7:return Ua(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ua(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,bo(t,t.type,r.value),Ua(e,t,r.children,n),t.child;case 9:return i=t.type._context,r=t.pendingProps.children,To(t),r=r(i=Ao(i)),t.flags|=1,Ua(e,t,r,n),t.child;case 14:return Wa(e,t,t.type,t.pendingProps,n);case 15:return Ha(e,t,t.type,t.pendingProps,n);case 19:return co(e,t,n);case 22:return Xa(e,t,n);case 24:return To(t),r=Ao(Fi),null===e?(null===(i=qi())&&(i=tu,s=Vi(),i.pooledCache=s,s.refCount++,null!==s&&(i.pooledCacheLanes|=n),i=s),t.memoizedState={parent:r,cache:i},Co(t),bo(t,Fi,i)):(0!==(e.lanes&n)&&(Io(e,t),Mo(t,null,null,n),Po()),i=e.memoizedState,s=t.memoizedState,i.parent!==r?(i={parent:r,cache:r},t.memoizedState=i,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=i),bo(t,Fi,r)):(r=s.cache,bo(t,Fi,r),r!==i.cache&&wo(t,[Fi],n,!0))),Ua(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(a(156,t.tag))}var mo=W(null),go=null,yo=null;function bo(e,t,n){X(mo,t._currentValue),t._currentValue=n}function xo(e){e._currentValue=mo.current,H(mo)}function vo(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function wo(e,t,n,r){var i=e.child;for(null!==i&&(i.return=e);null!==i;){var s=i.dependencies;if(null!==s){var o=i.child;s=s.firstContext;e:for(;null!==s;){var l=s;s=i;for(var u=0;u<t.length;u++)if(l.context===t[u]){s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),vo(s.return,n,e),r||(o=null);break e}s=l.next}}else if(18===i.tag){if(null===(o=i.return))throw Error(a(341));o.lanes|=n,null!==(s=o.alternate)&&(s.lanes|=n),vo(o,n,e),o=null}else o=i.child;if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===e){o=null;break}if(null!==(i=o.sibling)){i.return=o.return,o=i;break}o=o.return}i=o}}function So(e,t,n,r){e=null;for(var i=t,s=!1;null!==i;){if(!s)if(0!==(524288&i.flags))s=!0;else if(0!==(262144&i.flags))break;if(10===i.tag){var o=i.alternate;if(null===o)throw Error(a(387));if(null!==(o=o.memoizedProps)){var l=i.type;Xn(i.pendingProps.value,o.value)||(null!==e?e.push(l):e=[l])}}else if(i===Q.current){if(null===(o=i.alternate))throw Error(a(387));o.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(null!==e?e.push(Ph):e=[Ph])}i=i.return}null!==e&&wo(t,e,n,r),t.flags|=262144}function ko(e){for(e=e.firstContext;null!==e;){if(!Xn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function To(e){go=e,yo=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Ao(e){return _o(go,e)}function Eo(e,t){return null===go&&To(e),_o(e,t)}function _o(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===yo){if(null===e)throw Error(a(308));yo=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else yo=yo.next=t;return n}var Lo=!1;function Co(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Io(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function $o(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Oo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&eu)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=$r(e),Ir(e,null,n),t}return _r(e,r,t,n),$r(e)}function Ro(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194176&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,De(e,n)}}function Do(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===s?i=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var zo=!1;function Po(){if(zo){if(null!==Gi)throw Gi}}function Mo(e,t,n,r){zo=!1;var i=e.updateQueue;Lo=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,u=l.next;l.next=null,null===a?s=u:a.next=u,a=l;var c=e.alternate;null!==c&&((o=(c=c.updateQueue).lastBaseUpdate)!==a&&(null===o?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=l))}if(null!==s){var h=i.baseState;for(a=0,c=u=l=null,o=s;;){var p=-536870913&o.lane,d=p!==o.lane;if(d?(ru&p)===p:(r&p)===p){0!==p&&p===Ui&&(zo=!0),null!==c&&(c=c.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var f=e,m=o;p=t;var g=n;switch(m.tag){case 1:if("function"===typeof(f=m.payload)){h=f.call(g,h,p);break e}h=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(p="function"===typeof(f=m.payload)?f.call(g,h,p):f)||void 0===p)break e;h=$({},h,p);break e;case 2:Lo=!0}}null!==(p=o.callback)&&(e.flags|=64,d&&(e.flags|=8192),null===(d=i.callbacks)?i.callbacks=[p]:d.push(p))}else d={lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===c?(u=c=d,l=h):c=c.next=d,a|=p;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(d=o).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}null===c&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null===s&&(i.shared.lanes=0),hu|=a,e.lanes=a,e.memoizedState=h}}function No(e,t){if("function"!==typeof e)throw Error(a(191,e));e.call(t)}function Fo(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)No(n[e],t)}function Vo(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var s=n.create,a=n.inst;r=s(),a.destroy=r}n=n.next}while(n!==i)}}catch(o){rc(t,t.return,o)}}function Ko(e,t,n){try{var r=t.updateQueue,i=null!==r?r.lastEffect:null;if(null!==i){var s=i.next;r=s;do{if((r.tag&e)===e){var a=r.inst,o=a.destroy;if(void 0!==o){a.destroy=void 0,i=t;var l=n;try{o()}catch(u){rc(i,l,u)}}}r=r.next}while(r!==s)}}catch(u){rc(t,t.return,u)}}function jo(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{Fo(t,n)}catch(r){rc(e,e.return,r)}}}function Bo(e,t,n){n.props=Oa(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){rc(e,t,r)}}function Uo(e,t){try{var n=e.ref;if(null!==n){var r=e.stateNode;switch(e.tag){case 26:case 27:case 5:var i=r;break;default:i=r}"function"===typeof n?e.refCleanup=n(i):n.current=i}}catch(s){rc(e,t,s)}}function Go(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(i){rc(e,t,i)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(s){rc(e,t,s)}else n.current=null}function Wo(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(i){rc(e,e.return,i)}}function Ho(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,s=null,o=null,l=null,u=null,c=null,h=null;for(f in n){var p=n[f];if(n.hasOwnProperty(f)&&null!=p)switch(f){case"checked":case"value":break;case"defaultValue":u=p;default:r.hasOwnProperty(f)||Uc(e,t,f,null,r,p)}}for(var d in r){var f=r[d];if(p=n[d],r.hasOwnProperty(d)&&(null!=f||null!=p))switch(d){case"type":s=f;break;case"name":i=f;break;case"checked":c=f;break;case"defaultChecked":h=f;break;case"value":o=f;break;case"defaultValue":l=f;break;case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(a(137,t));break;default:f!==p&&Uc(e,t,d,f,r,p)}}return void gt(e,o,l,u,c,h,s,i);case"select":for(s in f=o=l=d=null,n)if(u=n[s],n.hasOwnProperty(s)&&null!=u)switch(s){case"value":break;case"multiple":f=u;default:r.hasOwnProperty(s)||Uc(e,t,s,null,r,u)}for(i in r)if(s=r[i],u=n[i],r.hasOwnProperty(i)&&(null!=s||null!=u))switch(i){case"value":d=s;break;case"defaultValue":l=s;break;case"multiple":o=s;default:s!==u&&Uc(e,t,i,s,r,u)}return t=l,n=o,r=f,void(null!=d?xt(e,!!n,d,!1):!!r!==!!n&&(null!=t?xt(e,!!n,t,!0):xt(e,!!n,n?[]:"",!1)));case"textarea":for(l in f=d=null,n)if(i=n[l],n.hasOwnProperty(l)&&null!=i&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:Uc(e,t,l,null,r,i)}for(o in r)if(i=r[o],s=n[o],r.hasOwnProperty(o)&&(null!=i||null!=s))switch(o){case"value":d=i;break;case"defaultValue":f=i;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=i)throw Error(a(91));break;default:i!==s&&Uc(e,t,o,i,r,s)}return void vt(e,d,f);case"option":for(var m in n)if(d=n[m],n.hasOwnProperty(m)&&null!=d&&!r.hasOwnProperty(m))if("selected"===m)e.selected=!1;else Uc(e,t,m,null,r,d);for(u in r)if(d=r[u],f=n[u],r.hasOwnProperty(u)&&d!==f&&(null!=d||null!=f))if("selected"===u)e.selected=d&&"function"!==typeof d&&"symbol"!==typeof d;else Uc(e,t,u,d,r,f);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)d=n[g],n.hasOwnProperty(g)&&null!=d&&!r.hasOwnProperty(g)&&Uc(e,t,g,null,r,d);for(c in r)if(d=r[c],f=n[c],r.hasOwnProperty(c)&&d!==f&&(null!=d||null!=f))switch(c){case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(a(137,t));break;default:Uc(e,t,c,d,r,f)}return;default:if(Et(t)){for(var y in n)d=n[y],n.hasOwnProperty(y)&&void 0!==d&&!r.hasOwnProperty(y)&&Gc(e,t,y,void 0,r,d);for(h in r)d=r[h],f=n[h],!r.hasOwnProperty(h)||d===f||void 0===d&&void 0===f||Gc(e,t,h,d,r,f);return}}for(var b in n)d=n[b],n.hasOwnProperty(b)&&null!=d&&!r.hasOwnProperty(b)&&Uc(e,t,b,null,r,d);for(p in r)d=r[p],f=n[p],!r.hasOwnProperty(p)||d===f||null==d&&null==f||Uc(e,t,p,d,r,f)}(r,e.type,n,t),r[Fe]=t}catch(i){rc(e,e.return,i)}}function Xo(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag||4===e.tag}function qo(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Xo(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&27!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Yo(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Bc));else if(4!==r&&27!==r&&null!==(e=e.child))for(Yo(e,t,n),e=e.sibling;null!==e;)Yo(e,t,n),e=e.sibling}function Jo(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&27!==r&&null!==(e=e.child))for(Jo(e,t,n),e=e.sibling;null!==e;)Jo(e,t,n),e=e.sibling}var Qo=!1,Zo=!1,el=!1,tl="function"===typeof WeakSet?WeakSet:Set,nl=null,rl=!1;function il(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:yl(e,n),4&r&&Vo(5,n);break;case 1:if(yl(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(o){rc(n,n.return,o)}else{var i=Oa(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(l){rc(n,n.return,l)}}64&r&&jo(n),512&r&&Uo(n,n.return);break;case 3:if(yl(e,n),64&r&&null!==(r=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:e=n.child.stateNode}try{Fo(r,e)}catch(o){rc(n,n.return,o)}}break;case 26:yl(e,n),512&r&&Uo(n,n.return);break;case 27:case 5:yl(e,n),null===t&&4&r&&Wo(n),512&r&&Uo(n,n.return);break;case 12:default:yl(e,n);break;case 13:yl(e,n),4&r&&cl(e,n);break;case 22:if(!(i=null!==n.memoizedState||Qo)){t=null!==t&&null!==t.memoizedState||Zo;var s=Qo,a=Zo;Qo=i,(Zo=t)&&!a?xl(e,n,0!==(8772&n.subtreeFlags)):yl(e,n),Qo=s,Zo=a}512&r&&("manual"===n.memoizedProps.mode?Uo(n,n.return):Go(n,n.return))}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&We(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var al=null,ol=!1;function ll(e,t,n){for(n=n.child;null!==n;)ul(e,t,n),n=n.sibling}function ul(e,t,n){if(be&&"function"===typeof be.onCommitFiberUnmount)try{be.onCommitFiberUnmount(ye,n)}catch(a){}switch(n.tag){case 26:Zo||Go(n,t),ll(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:Zo||Go(n,t);var r=al,i=ol;for(al=n.stateNode,ll(e,t,n),t=(n=n.stateNode).attributes;t.length;)n.removeAttributeNode(t[0]);We(n),al=r,ol=i;break;case 5:Zo||Go(n,t);case 6:i=al;var s=ol;if(al=null,ll(e,t,n),ol=s,null!==(al=i))if(ol)try{e=al,r=n.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)}catch(o){rc(n,t,o)}else try{al.removeChild(n.stateNode)}catch(o){rc(n,t,o)}break;case 18:null!==al&&(ol?(t=al,n=n.stateNode,8===t.nodeType?sh(t.parentNode,n):1===t.nodeType&&sh(t,n),mp(t)):sh(al,n.stateNode));break;case 4:r=al,i=ol,al=n.stateNode.containerInfo,ol=!0,ll(e,t,n),al=r,ol=i;break;case 0:case 11:case 14:case 15:Zo||Ko(2,n,t),Zo||Ko(4,n,t),ll(e,t,n);break;case 1:Zo||(Go(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&Bo(n,t,r)),ll(e,t,n);break;case 21:ll(e,t,n);break;case 22:Zo||Go(n,t),Zo=(r=Zo)||null!==n.memoizedState,ll(e,t,n),Zo=r;break;default:ll(e,t,n)}}function cl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{mp(e)}catch(n){rc(t,t.return,n)}}function hl(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new tl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new tl),t;default:throw Error(a(435,e.tag))}}(e);t.forEach((function(t){var r=lc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}function pl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r],s=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 27:case 5:al=l.stateNode,ol=!1;break e;case 3:case 4:al=l.stateNode.containerInfo,ol=!0;break e}l=l.return}if(null===al)throw Error(a(160));ul(s,o,i),al=null,ol=!1,null!==(s=i.alternate)&&(s.return=null),i.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)fl(t,e),t=t.sibling}var dl=null;function fl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:pl(t,e),ml(e),4&r&&(Ko(3,e,e.return),Vo(3,e),Ko(5,e,e.return));break;case 1:pl(t,e),ml(e),512&r&&(Zo||null===n||Go(n,n.return)),64&r&&Qo&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var i=dl;if(pl(t,e),ml(e),512&r&&(Zo||null===n||Go(n,n.return)),4&r){var s=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,i=i.ownerDocument||i;t:switch(r){case"title":(!(s=i.getElementsByTagName("title")[0])||s[Ge]||s[Ne]||"http://www.w3.org/2000/svg"===s.namespaceURI||s.hasAttribute("itemprop"))&&(s=i.createElement(r),i.head.insertBefore(s,i.querySelector("head > title"))),Wc(s,r,n),s[Ne]=e,Je(s),r=s;break e;case"link":var o=_h("link","href",i).get(r+(n.href||""));if(o)for(var l=0;l<o.length;l++)if((s=o[l]).getAttribute("href")===(null==n.href?null:n.href)&&s.getAttribute("rel")===(null==n.rel?null:n.rel)&&s.getAttribute("title")===(null==n.title?null:n.title)&&s.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){o.splice(l,1);break t}Wc(s=i.createElement(r),r,n),i.head.appendChild(s);break;case"meta":if(o=_h("meta","content",i).get(r+(n.content||"")))for(l=0;l<o.length;l++)if((s=o[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&s.getAttribute("name")===(null==n.name?null:n.name)&&s.getAttribute("property")===(null==n.property?null:n.property)&&s.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&s.getAttribute("charset")===(null==n.charSet?null:n.charSet)){o.splice(l,1);break t}Wc(s=i.createElement(r),r,n),i.head.appendChild(s);break;default:throw Error(a(468,r))}s[Ne]=e,Je(s),r=s}e.stateNode=r}else Lh(i,e.type,e.stateNode);else e.stateNode=Sh(i,r,e.memoizedProps);else s!==r?(null===s?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):s.count--,null===r?Lh(i,e.type,e.stateNode):Sh(i,r,e.memoizedProps)):null===r&&null!==e.stateNode&&Ho(e,e.memoizedProps,n.memoizedProps)}break;case 27:if(4&r&&null===e.alternate){i=e.stateNode,s=e.memoizedProps;try{for(var u=i.firstChild;u;){var c=u.nextSibling,h=u.nodeName;u[Ge]||"HEAD"===h||"BODY"===h||"SCRIPT"===h||"STYLE"===h||"LINK"===h&&"stylesheet"===u.rel.toLowerCase()||i.removeChild(u),u=c}for(var p=e.type,d=i.attributes;d.length;)i.removeAttributeNode(d[0]);Wc(i,p,s),i[Ne]=e,i[Fe]=s}catch(m){rc(e,e.return,m)}}case 5:if(pl(t,e),ml(e),512&r&&(Zo||null===n||Go(n,n.return)),32&e.flags){i=e.stateNode;try{St(i,"")}catch(m){rc(e,e.return,m)}}4&r&&null!=e.stateNode&&Ho(e,i=e.memoizedProps,null!==n?n.memoizedProps:i),1024&r&&(el=!0);break;case 6:if(pl(t,e),ml(e),4&r){if(null===e.stateNode)throw Error(a(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(m){rc(e,e.return,m)}}break;case 3:if(Eh=null,i=dl,dl=ph(t.containerInfo),pl(t,e),dl=i,ml(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{mp(t.containerInfo)}catch(m){rc(e,e.return,m)}el&&(el=!1,gl(e));break;case 4:r=dl,dl=ph(e.stateNode.containerInfo),pl(t,e),ml(e),dl=r;break;case 12:pl(t,e),ml(e);break;case 13:pl(t,e),ml(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(xu=le()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,hl(e,r)));break;case 22:if(512&r&&(Zo||null===n||Go(n,n.return)),u=null!==e.memoizedState,c=null!==n&&null!==n.memoizedState,Qo=(h=Qo)||u,Zo=(p=Zo)||c,pl(t,e),Zo=p,Qo=h,ml(e),(t=e.stateNode)._current=e,t._visibility&=-3,t._visibility|=2&t._pendingVisibility,8192&r&&(t._visibility=u?-2&t._visibility:1|t._visibility,u&&(t=Qo||Zo,null===n||c||t||bl(e)),null===e.memoizedProps||"manual"!==e.memoizedProps.mode))e:for(n=null,t=e;;){if(5===t.tag||26===t.tag||27===t.tag){if(null===n){c=n=t;try{if(i=c.stateNode,u)"function"===typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none";else{o=c.stateNode;var f=void 0!==(l=c.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null;o.style.display=null==f||"boolean"===typeof f?"":(""+f).trim()}}catch(m){rc(c,c.return,m)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=u?"":c.memoizedProps}catch(m){rc(c,c.return,m)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,hl(e,n))));break;case 19:pl(t,e),ml(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,hl(e,r)));break;case 21:break;default:pl(t,e),ml(e)}}function ml(e){var t=e.flags;if(2&t){try{if(27!==e.tag){e:{for(var n=e.return;null!==n;){if(Xo(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 27:var i=r.stateNode;Jo(e,qo(e),i);break;case 5:var s=r.stateNode;32&r.flags&&(St(s,""),r.flags&=-33),Jo(e,qo(e),s);break;case 3:case 4:var o=r.stateNode.containerInfo;Yo(e,qo(e),o);break;default:throw Error(a(161))}}}catch(l){rc(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function gl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;gl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function yl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)il(e,t.alternate,t),t=t.sibling}function bl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Ko(4,t,t.return),bl(t);break;case 1:Go(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&Bo(t,t.return,n),bl(t);break;case 26:case 27:case 5:Go(t,t.return),bl(t);break;case 22:Go(t,t.return),null===t.memoizedState&&bl(t);break;default:bl(t)}e=e.sibling}}function xl(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,i=e,s=t,a=s.flags;switch(s.tag){case 0:case 11:case 15:xl(i,s,n),Vo(4,s);break;case 1:if(xl(i,s,n),"function"===typeof(i=(r=s).stateNode).componentDidMount)try{i.componentDidMount()}catch(u){rc(r,r.return,u)}if(null!==(i=(r=s).updateQueue)){var o=r.stateNode;try{var l=i.shared.hiddenCallbacks;if(null!==l)for(i.shared.hiddenCallbacks=null,i=0;i<l.length;i++)No(l[i],o)}catch(u){rc(r,r.return,u)}}n&&64&a&&jo(s),Uo(s,s.return);break;case 26:case 27:case 5:xl(i,s,n),n&&null===r&&4&a&&Wo(s),Uo(s,s.return);break;case 12:default:xl(i,s,n);break;case 13:xl(i,s,n),n&&4&a&&cl(i,s);break;case 22:null===s.memoizedState&&xl(i,s,n),Uo(s,s.return)}t=t.sibling}}function vl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Ki(n))}function wl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ki(e))}function Sl(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)kl(e,t,n,r),t=t.sibling}function kl(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:Sl(e,t,n,r),2048&i&&Vo(9,t);break;case 3:Sl(e,t,n,r),2048&i&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ki(e)));break;case 12:if(2048&i){Sl(e,t,n,r),e=t.stateNode;try{var s=t.memoizedProps,a=s.id,o=s.onPostCommit;"function"===typeof o&&o(a,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){rc(t,t.return,l)}}else Sl(e,t,n,r);break;case 23:break;case 22:s=t.stateNode,null!==t.memoizedState?4&s._visibility?Sl(e,t,n,r):Al(e,t):4&s._visibility?Sl(e,t,n,r):(s._visibility|=4,Tl(e,t,n,r,0!==(10256&t.subtreeFlags))),2048&i&&vl(t.alternate,t);break;case 24:Sl(e,t,n,r),2048&i&&wl(t.alternate,t);break;default:Sl(e,t,n,r)}}function Tl(e,t,n,r,i){for(i=i&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var s=e,a=t,o=n,l=r,u=a.flags;switch(a.tag){case 0:case 11:case 15:Tl(s,a,o,l,i),Vo(8,a);break;case 23:break;case 22:var c=a.stateNode;null!==a.memoizedState?4&c._visibility?Tl(s,a,o,l,i):Al(s,a):(c._visibility|=4,Tl(s,a,o,l,i)),i&&2048&u&&vl(a.alternate,a);break;case 24:Tl(s,a,o,l,i),i&&2048&u&&wl(a.alternate,a);break;default:Tl(s,a,o,l,i)}t=t.sibling}}function Al(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:Al(n,r),2048&i&&vl(r.alternate,r);break;case 24:Al(n,r),2048&i&&wl(r.alternate,r);break;default:Al(n,r)}t=t.sibling}}var El=8192;function _l(e){if(e.subtreeFlags&El)for(e=e.child;null!==e;)Ll(e),e=e.sibling}function Ll(e){switch(e.tag){case 26:_l(e),e.flags&El&&null!==e.memoizedState&&function(e,t,n){if(null===Ih)throw Error(a(475));var r=Ih;if("stylesheet"===t.type&&("string"!==typeof n.media||!1!==matchMedia(n.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var i=yh(n.href),s=e.querySelector(bh(i));if(s)return null!==(e=s._p)&&"object"===typeof e&&"function"===typeof e.then&&(r.count++,r=Oh.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=s,void Je(s);s=e.ownerDocument||e,n=xh(n),(i=ch.get(i))&&Th(n,i),Je(s=s.createElement("link"));var o=s;o._p=new Promise((function(e,t){o.onload=e,o.onerror=t})),Wc(s,"link",n),t.instance=s}null===r.stylesheets&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(r.count++,t=Oh.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}(dl,e.memoizedState,e.memoizedProps);break;case 5:default:_l(e);break;case 3:case 4:var t=dl;dl=ph(e.stateNode.containerInfo),_l(e),dl=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=El,El=16777216,_l(e),El=t):_l(e))}}function Cl(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Il(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];nl=r,Rl(r,e)}Cl(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)$l(e),e=e.sibling}function $l(e){switch(e.tag){case 0:case 11:case 15:Il(e),2048&e.flags&&Ko(9,e,e.return);break;case 3:case 12:default:Il(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&4&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-5,Ol(e)):Il(e)}}function Ol(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];nl=r,Rl(r,e)}Cl(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:Ko(8,t,t.return),Ol(t);break;case 22:4&(n=t.stateNode)._visibility&&(n._visibility&=-5,Ol(t));break;default:Ol(t)}e=e.sibling}}function Rl(e,t){for(;null!==nl;){var n=nl;switch(n.tag){case 0:case 11:case 15:Ko(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Ki(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,nl=r;else e:for(n=e;null!==nl;){var i=(r=nl).sibling,s=r.return;if(sl(r),r===n){nl=null;break e}if(null!==i){i.return=s,nl=i;break e}nl=s}}}function Dl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zl(e,t,n,r){return new Dl(e,t,n,r)}function Pl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ml(e,t){var n=e.alternate;return null===n?((n=zl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=31457280&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Nl(e,t){e.flags&=31457282;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Fl(e,t,n,r,i,s){var o=0;if(r=e,"function"===typeof e)Pl(e)&&(o=1);else if("string"===typeof e)o=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,q.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case h:return Vl(n.children,i,s,t);case p:o=8,i|=24;break;case d:return(e=zl(12,n,t,2|i)).elementType=d,e.lanes=s,e;case b:return(e=zl(13,n,t,i)).elementType=b,e.lanes=s,e;case x:return(e=zl(19,n,t,i)).elementType=x,e.lanes=s,e;case S:return Kl(n,i,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case f:case g:o=10;break e;case m:o=9;break e;case y:o=11;break e;case v:o=14;break e;case w:o=16,r=null;break e}o=29,n=Error(a(130,null===e?"null":typeof e,"")),r=null}return(t=zl(o,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Vl(e,t,n,r){return(e=zl(7,e,r,t)).lanes=n,e}function Kl(e,t,n,r){(e=zl(22,e,r,t)).elementType=S,e.lanes=n;var i={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var e=i._current;if(null===e)throw Error(a(456));if(0===(2&i._pendingVisibility)){var t=Cr(e,2);null!==t&&(i._pendingVisibility|=2,Ou(t,e,2))}},attach:function(){var e=i._current;if(null===e)throw Error(a(456));if(0!==(2&i._pendingVisibility)){var t=Cr(e,2);null!==t&&(i._pendingVisibility&=-3,Ou(t,e,2))}}};return e.stateNode=i,e}function jl(e,t,n){return(e=zl(6,e,null,t)).lanes=n,e}function Bl(e,t,n){return(t=zl(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ul(e){e.flags|=4}function Gl(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!Ch(t)){if(null!==(t=Li.current)&&((4194176&ru)===ru?null!==Ci:(62914560&ru)!==ru&&0===(536870912&ru)||t!==Ci))throw pi=li,oi;e.flags|=8192}}function Wl(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Ie():536870912,e.lanes|=t,mu|=t)}function Hl(e,t){if(!Yr)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Xl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=31457280&i.subtreeFlags,r|=31457280&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function ql(e,t,n){var r=t.pendingProps;switch(Hr(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return Xl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),xo(Fi),ee(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(ri(t)?Ul(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==Jr&&(Du(Jr),Jr=null))),Xl(t),null;case 26:return n=t.memoizedState,null===e?(Ul(t),null!==n?(Xl(t),Gl(t,n)):(Xl(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Ul(t),Xl(t),Gl(t,n)):(Xl(t),t.flags&=-16777217):(e.memoizedProps!==r&&Ul(t),Xl(t),t.flags&=-16777217),null;case 27:ne(t),n=J.current;var i=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Ul(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Xl(t),null}e=q.current,ri(t)?ti(t):(e=uh(i,r,n),t.stateNode=e,Ul(t))}return Xl(t),null;case 5:if(ne(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Ul(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Xl(t),null}if(e=q.current,ri(t))ti(t);else{switch(i=qc(J.current),e){case 1:e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=i.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof r.is?i.createElement("select",{is:r.is}):i.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e="string"===typeof r.is?i.createElement(n,{is:r.is}):i.createElement(n)}}e[Ne]=t,e[Fe]=r;e:for(i=t.child;null!==i;){if(5===i.tag||6===i.tag)e.appendChild(i.stateNode);else if(4!==i.tag&&27!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;null===i.sibling;){if(null===i.return||i.return===t)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}t.stateNode=e;e:switch(Wc(e,n,r),n){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Ul(t)}}return Xl(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&Ul(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(e=J.current,ri(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(i=Xr))switch(i.tag){case 27:case 5:r=i.memoizedProps}e[Ne]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||jc(e.nodeValue,n)))||ei(t)}else(e=qc(e).createTextNode(r))[Ne]=t,t.stateNode=e}return Xl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(i=ri(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(a(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(a(317));i[Ne]=t}else ii(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Xl(t),i=!1}else null!==Jr&&(Du(Jr),Jr=null),i=!0;if(!i)return 256&t.flags?(Ri(t),t):(Ri(t),null)}if(Ri(t),0!==(128&t.flags))return t.lanes=n,t;if(n=null!==r,e=null!==e&&null!==e.memoizedState,n){i=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(i=r.alternate.memoizedState.cachePool.pool);var s=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(s=r.memoizedState.cachePool.pool),s!==i&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),Wl(t,t.updateQueue),Xl(t),null;case 4:return ee(),null===e&&Oc(t.stateNode.containerInfo),Xl(t),null;case 10:return xo(t.type),Xl(t),null;case 19:if(H(Di),null===(i=t.memoizedState))return Xl(t),null;if(r=0!==(128&t.flags),null===(s=i.rendering))if(r)Hl(i,!1);else{if(0!==cu||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=zi(e))){for(t.flags|=128,Hl(i,!1),e=s.updateQueue,t.updateQueue=e,Wl(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Nl(n,e),n=n.sibling;return X(Di,1&Di.current|2),t.child}e=e.sibling}null!==i.tail&&le()>vu&&(t.flags|=128,r=!0,Hl(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=zi(s))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,Wl(t,e),Hl(i,!0),null===i.tail&&"hidden"===i.tailMode&&!s.alternate&&!Yr)return Xl(t),null}else 2*le()-i.renderingStartTime>vu&&536870912!==n&&(t.flags|=128,r=!0,Hl(i,!1),t.lanes=4194304);i.isBackwards?(s.sibling=t.child,t.child=s):(null!==(e=i.last)?e.sibling=s:t.child=s,i.last=s)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=le(),t.sibling=null,e=Di.current,X(Di,r?1&e|2:1&e),t):(Xl(t),null);case 22:case 23:return Ri(t),_i(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(Xl(t),6&t.subtreeFlags&&(t.flags|=8192)):Xl(t),null!==(n=t.updateQueue)&&Wl(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&H(Xi),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),xo(Fi),Xl(t),null;case 25:return null}throw Error(a(156,t.tag))}function Yl(e,t){switch(Hr(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return xo(Fi),ee(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return ne(t),null;case 13:if(Ri(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));ii()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return H(Di),null;case 4:return ee(),null;case 10:return xo(t.type),null;case 22:case 23:return Ri(t),_i(),null!==e&&H(Xi),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return xo(Fi),null;default:return null}}function Jl(e,t){switch(Hr(t),t.tag){case 3:xo(Fi),ee();break;case 26:case 27:case 5:ne(t);break;case 4:ee();break;case 13:Ri(t);break;case 19:H(Di);break;case 10:xo(t.type);break;case 22:case 23:Ri(t),_i(),null!==e&&H(Xi);break;case 24:xo(Fi)}}var Ql={getCacheForType:function(e){var t=Ao(Fi),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},Zl="function"===typeof WeakMap?WeakMap:Map,eu=0,tu=null,nu=null,ru=0,iu=0,su=null,au=!1,ou=!1,lu=!1,uu=0,cu=0,hu=0,pu=0,du=0,fu=0,mu=0,gu=null,yu=null,bu=!1,xu=0,vu=1/0,wu=null,Su=null,ku=!1,Tu=null,Au=0,Eu=0,_u=null,Lu=0,Cu=null;function Iu(){if(0!==(2&eu)&&0!==ru)return ru&-ru;if(null!==I.T){return 0!==Ui?Ui:wc()}return Pe()}function $u(){0===fu&&(fu=0===(536870912&ru)||Yr?Ce():536870912);var e=Li.current;return null!==e&&(e.flags|=32),fu}function Ou(e,t,n){(e===tu&&2===iu||null!==e.cancelPendingCommit)&&(Vu(e,0),Mu(e,ru,fu,!1)),Oe(e,n),0!==(2&eu)&&e===tu||(e===tu&&(0===(2&eu)&&(pu|=n),4===cu&&Mu(e,ru,fu,!1)),mc(e))}function Ru(e,t,n){if(0!==(6&eu))throw Error(a(327));for(var r=!n&&0===(60&t)&&0===(t&e.expiredLanes)||_e(e,t),i=r?function(e,t){var n=eu;eu|=2;var r=ju(),i=Bu();tu!==e||ru!==t?(wu=null,vu=le()+500,Vu(e,t)):ou=_e(e,t);e:for(;;)try{if(0!==iu&&null!==nu){t=nu;var s=su;t:switch(iu){case 1:iu=0,su=null,Yu(e,t,s,1);break;case 2:if(ui(s)){iu=0,su=null,qu(t);break}t=function(){2===iu&&tu===e&&(iu=7),mc(e)},s.then(t,t);break e;case 3:iu=7;break e;case 4:iu=5;break e;case 7:ui(s)?(iu=0,su=null,qu(t)):(iu=0,su=null,Yu(e,t,s,7));break;case 5:var o=null;switch(nu.tag){case 26:o=nu.memoizedState;case 5:case 27:var l=nu;if(!o||Ch(o)){iu=0,su=null;var u=l.sibling;if(null!==u)nu=u;else{var c=l.return;null!==c?(nu=c,Ju(c)):nu=null}break t}}iu=0,su=null,Yu(e,t,s,5);break;case 6:iu=0,su=null,Yu(e,t,s,6);break;case 8:Fu(),cu=6;break e;default:throw Error(a(462))}}Hu();break}catch(h){Ku(e,h)}return yo=go=null,I.H=r,I.A=i,eu=n,null!==nu?0:(tu=null,ru=0,Er(),cu)}(e,t):Gu(e,t,!0),s=r;;){if(0===i){ou&&!r&&Mu(e,t,0,!1);break}if(6===i)Mu(e,t,0,!au);else{if(n=e.current.alternate,s&&!Pu(n)){i=Gu(e,t,!1),s=!1;continue}if(2===i){if(s=t,e.errorRecoveryDisabledLanes&s)var o=0;else o=0!==(o=-536870913&e.pendingLanes)?o:536870912&o?536870912:0;if(0!==o){t=o;e:{var l=e;i=gu;var u=l.current.memoizedState.isDehydrated;if(u&&(Vu(l,o).flags|=256),2!==(o=Gu(l,o,!1))){if(lu&&!u){l.errorRecoveryDisabledLanes|=s,pu|=s,i=4;break e}s=yu,yu=i,null!==s&&Du(s)}i=o}if(s=!1,2!==i)continue}}if(1===i){Vu(e,0),Mu(e,t,0,!0);break}e:{switch(r=e,i){case 0:case 1:throw Error(a(345));case 4:if((4194176&t)===t){Mu(r,t,fu,!au);break e}break;case 2:yu=null;break;case 3:case 5:break;default:throw Error(a(329))}if(r.finishedWork=n,r.finishedLanes=t,(62914560&t)===t&&10<(s=xu+300-le())){if(Mu(r,t,fu,!au),0!==Ee(r,0))break e;r.timeoutHandle=eh(zu.bind(null,r,n,yu,wu,bu,t,fu,pu,mu,au,2,-0,0),s)}else zu(r,n,yu,wu,bu,t,fu,pu,mu,au,0,-0,0)}}break}mc(e)}function Du(e){null===yu?yu=e:yu.push.apply(yu,e)}function zu(e,t,n,r,i,s,o,l,u,c,h,p,d){var f=t.subtreeFlags;if((8192&f||16785408===(16785408&f))&&(Ih={stylesheets:null,count:0,unsuspend:$h},Ll(t),null!==(t=function(){if(null===Ih)throw Error(a(475));var e=Ih;return e.stylesheets&&0===e.count&&Dh(e,e.stylesheets),0<e.count?function(t){var n=setTimeout((function(){if(e.stylesheets&&Dh(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}}),6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=t(Zu.bind(null,e,n,r,i,o,l,u,1,p,d)),void Mu(e,s,o,!c);Zu(e,n,r,i,o,l,u,h,p,d)}function Pu(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Xn(s(),i))return!1}catch(a){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Mu(e,t,n,r){t&=~du,t&=~pu,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var s=31-ve(i),a=1<<s;r[s]=-1,i&=~a}0!==n&&Re(e,n,t)}function Nu(){return 0!==(6&eu)||(gc(0,!1),!1)}function Fu(){if(null!==nu){if(0===iu)var e=nu.return;else yo=go=null,ys(e=nu),fi=null,mi=0,e=nu;for(;null!==e;)Jl(e.alternate,e),e=e.return;nu=null}}function Vu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,th(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Fu(),tu=e,nu=n=Ml(e.current,null),ru=t,iu=0,su=null,au=!1,ou=_e(e,t),lu=!1,mu=fu=du=pu=hu=cu=0,yu=gu=null,bu=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var i=31-ve(r),s=1<<i;t|=e[i],r&=~s}return uu=t,Er(),n}function Ku(e,t){Zi=null,I.H=Ta,t===ai?(t=di(),iu=3):t===oi?(t=di(),iu=4):iu=t===ja?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,su=t,null===nu&&(cu=1,Ma(e,Dr(t,e.current)))}function ju(){var e=I.H;return I.H=Ta,null===e?Ta:e}function Bu(){var e=I.A;return I.A=Ql,e}function Uu(){cu=4,au||(4194176&ru)!==ru&&null!==Li.current||(ou=!0),0===(134217727&hu)&&0===(134217727&pu)||null===tu||Mu(tu,ru,fu,!1)}function Gu(e,t,n){var r=eu;eu|=2;var i=ju(),s=Bu();tu===e&&ru===t||(wu=null,Vu(e,t)),t=!1;var a=cu;e:for(;;)try{if(0!==iu&&null!==nu){var o=nu,l=su;switch(iu){case 8:Fu(),a=6;break e;case 3:case 2:case 6:null===Li.current&&(t=!0);var u=iu;if(iu=0,su=null,Yu(e,o,l,u),n&&ou){a=0;break e}break;default:u=iu,iu=0,su=null,Yu(e,o,l,u)}}Wu(),a=cu;break}catch(c){Ku(e,c)}return t&&e.shellSuspendCounter++,yo=go=null,eu=r,I.H=i,I.A=s,null===nu&&(tu=null,ru=0,Er()),a}function Wu(){for(;null!==nu;)Xu(nu)}function Hu(){for(;null!==nu&&!ae();)Xu(nu)}function Xu(e){var t=fo(e.alternate,e,uu);e.memoizedProps=e.pendingProps,null===t?Ju(e):nu=t}function qu(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Qa(n,t,t.pendingProps,t.type,void 0,ru);break;case 11:t=Qa(n,t,t.pendingProps,t.type.render,t.ref,ru);break;case 5:ys(t);default:Jl(n,t),t=fo(n,t=nu=Nl(t,uu),uu)}e.memoizedProps=e.pendingProps,null===t?Ju(e):nu=t}function Yu(e,t,n,r){yo=go=null,ys(t),fi=null,mi=0;var i=t.return;try{if(function(e,t,n,r,i){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&So(t,n,i,!0),null!==(n=Li.current)){switch(n.tag){case 13:return null===Ci?Uu():null===n.alternate&&0===cu&&(cu=3),n.flags&=-257,n.flags|=65536,n.lanes=i,r===li?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),ic(e,r,i)),!1;case 22:return n.flags|=65536,r===li?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),ic(e,r,i)),!1}throw Error(a(435,n.tag))}return ic(e,r,i),Uu(),!1}if(Yr)return null!==(t=Li.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=i,r!==Zr&&si(Dr(e=Error(a(422),{cause:r}),n))):(r!==Zr&&si(Dr(t=Error(a(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,i&=-i,e.lanes|=i,r=Dr(r,n),Do(e,i=Fa(e.stateNode,r,i)),4!==cu&&(cu=2)),!1;var s=Error(a(520),{cause:r});if(s=Dr(s,n),null===gu?gu=[s]:gu.push(s),4!==cu&&(cu=2),null===t)return!0;r=Dr(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=i&-i,n.lanes|=e,Do(n,e=Fa(n.stateNode,r,e)),!1;case 1:if(t=n.type,s=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==s&&"function"===typeof s.componentDidCatch&&(null===Su||!Su.has(s))))return n.flags|=65536,i&=-i,n.lanes|=i,Ka(i=Va(i),e,n,r),Do(n,i),!1}n=n.return}while(null!==n);return!1}(e,i,t,n,ru))return cu=1,Ma(e,Dr(n,e.current)),void(nu=null)}catch(s){if(null!==i)throw nu=i,s;return cu=1,Ma(e,Dr(n,e.current)),void(nu=null)}32768&t.flags?(Yr||1===r?e=!0:ou||0!==(536870912&ru)?e=!1:(au=e=!0,(2===r||3===r||6===r)&&(null!==(r=Li.current)&&13===r.tag&&(r.flags|=16384))),Qu(t,e)):Ju(t)}function Ju(e){var t=e;do{if(0!==(32768&t.flags))return void Qu(t,au);e=t.return;var n=ql(t.alternate,t,uu);if(null!==n)return void(nu=n);if(null!==(t=t.sibling))return void(nu=t);nu=t=e}while(null!==t);0===cu&&(cu=5)}function Qu(e,t){do{var n=Yl(e.alternate,e);if(null!==n)return n.flags&=32767,void(nu=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(nu=e);nu=e=n}while(null!==e);cu=6,nu=null}function Zu(e,t,n,r,i,s,o,l,u,c){var h=I.T,p=j.p;try{j.p=2,I.T=null,function(e,t,n,r,i,s,o,l){do{tc()}while(null!==Tu);if(0!==(6&eu))throw Error(a(327));var u=e.finishedWork;if(r=e.finishedLanes,null===u)return null;if(e.finishedWork=null,e.finishedLanes=0,u===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0,e.cancelPendingCommit=null;var c=u.lanes|u.childLanes;if(function(e,t,n,r,i,s){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var o=e.entanglements,l=e.expirationTimes,u=e.hiddenUpdates;for(n=a&~n;0<n;){var c=31-ve(n),h=1<<c;o[c]=0,l[c]=-1;var p=u[c];if(null!==p)for(u[c]=null,c=0;c<p.length;c++){var d=p[c];null!==d&&(d.lane&=-536870913)}n&=~h}0!==r&&Re(e,r,0),0!==s&&0===i&&0!==e.tag&&(e.suspendedLanes|=s&~(a&~t))}(e,r,c|=Ar,s,o,l),e===tu&&(nu=tu=null,ru=0),0===(10256&u.subtreeFlags)&&0===(10256&u.flags)||ku||(ku=!0,Eu=c,_u=n,function(e,t){ie(e,t)}(pe,(function(){return tc(),null}))),n=0!==(15990&u.flags),0!==(15990&u.subtreeFlags)||n?(n=I.T,I.T=null,s=j.p,j.p=2,o=eu,eu|=4,function(e,t){if(e=e.containerInfo,Hc=Uh,er(e=Zn(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(g){n=null;break e}var o=0,l=-1,u=-1,c=0,h=0,p=e,d=null;t:for(;;){for(var f;p!==n||0!==i&&3!==p.nodeType||(l=o+i),p!==s||0!==r&&3!==p.nodeType||(u=o+r),3===p.nodeType&&(o+=p.nodeValue.length),null!==(f=p.firstChild);)d=p,p=f;for(;;){if(p===e)break t;if(d===n&&++c===i&&(l=o),d===s&&++h===r&&(u=o),null!==(f=p.nextSibling))break;d=(p=d).parentNode}p=f}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Xc={focusedElem:e,selectionRange:n},Uh=!1,nl=t;null!==nl;)if(e=(t=nl).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,nl=e;else for(;null!==nl;){switch(s=(t=nl).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==s){e=void 0,n=t,i=s.memoizedProps,s=s.memoizedState,r=n.stateNode;try{var m=Oa(n.type,i,(n.elementType,n.type));e=r.getSnapshotBeforeUpdate(m,s),r.__reactInternalSnapshotBeforeUpdate=e}catch(y){rc(n,n.return,y)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))ah(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":ah(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(a(163))}if(null!==(e=t.sibling)){e.return=t.return,nl=e;break}nl=t.return}m=rl,rl=!1}(e,u),fl(u,e),tr(Xc,e.containerInfo),Uh=!!Hc,Xc=Hc=null,e.current=u,il(e,u.alternate,u),oe(),eu=o,j.p=s,I.T=n):e.current=u,ku?(ku=!1,Tu=e,Au=r):ec(e,c),c=e.pendingLanes,0===c&&(Su=null),function(e){if(be&&"function"===typeof be.onCommitFiberRoot)try{be.onCommitFiberRoot(ye,e,void 0,128===(128&e.current.flags))}catch(t){}}(u.stateNode),mc(e),null!==t)for(i=e.onRecoverableError,u=0;u<t.length;u++)c=t[u],i(c.value,{componentStack:c.stack});0!==(3&Au)&&tc(),c=e.pendingLanes,0!==(4194218&r)&&0!==(42&c)?e===Cu?Lu++:(Lu=0,Cu=e):Lu=0,gc(0,!1)}(e,t,n,r,p,i,s,o)}finally{I.T=h,j.p=p}}function ec(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Ki(t)))}function tc(){if(null!==Tu){var e=Tu,t=Eu;Eu=0;var n=ze(Au),r=I.T,i=j.p;try{if(j.p=32>n?32:n,I.T=null,null===Tu)var s=!1;else{n=_u,_u=null;var o=Tu,l=Au;if(Tu=null,Au=0,0!==(6&eu))throw Error(a(331));var u=eu;if(eu|=4,$l(o.current),kl(o,o.current,l,n),eu=u,gc(0,!1),be&&"function"===typeof be.onPostCommitFiberRoot)try{be.onPostCommitFiberRoot(ye,o)}catch(c){}s=!0}return s}finally{j.p=i,I.T=r,ec(e,t)}}return!1}function nc(e,t,n){t=Dr(n,t),null!==(e=Oo(e,t=Fa(e.stateNode,t,2),2))&&(Oe(e,2),mc(e))}function rc(e,t,n){if(3===e.tag)nc(e,e,n);else for(;null!==t;){if(3===t.tag){nc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Su||!Su.has(r))){e=Dr(n,e),null!==(r=Oo(t,n=Va(2),2))&&(Ka(n,r,t,e),Oe(r,2),mc(r));break}}t=t.return}}function ic(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new Zl;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(lu=!0,i.add(n),e=sc.bind(null,e,t,n),t.then(e,e))}function sc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,tu===e&&(ru&n)===n&&(4===cu||3===cu&&(62914560&ru)===ru&&300>le()-xu?0===(2&eu)&&Vu(e,0):du|=n,mu===ru&&(mu=0)),mc(e)}function ac(e,t){0===t&&(t=Ie()),null!==(e=Cr(e,t))&&(Oe(e,t),mc(e))}function oc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),ac(e,n)}function lc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(a(314))}null!==r&&r.delete(t),ac(e,n)}var uc=null,cc=null,hc=!1,pc=!1,dc=!1,fc=0;function mc(e){var t;e!==cc&&null===e.next&&(null===cc?uc=cc=e:cc=cc.next=e),pc=!0,hc||(hc=!0,t=yc,rh((function(){0!==(6&eu)?ie(ce,t):t()})))}function gc(e,t){if(!dc&&pc){dc=!0;do{for(var n=!1,r=uc;null!==r;){if(!t)if(0!==e){var i=r.pendingLanes;if(0===i)var s=0;else{var a=r.suspendedLanes,o=r.pingedLanes;s=(1<<31-ve(42|e)+1)-1,s=201326677&(s&=i&~(a&~o))?201326677&s|1:s?2|s:0}0!==s&&(n=!0,vc(r,s))}else s=ru,0===(3&(s=Ee(r,r===tu?s:0)))||_e(r,s)||(n=!0,vc(r,s));r=r.next}}while(n);dc=!1}}function yc(){pc=hc=!1;var e=0;0!==fc&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==Zc&&(Zc=e,!0);return Zc=null,!1}()&&(e=fc),fc=0);for(var t=le(),n=null,r=uc;null!==r;){var i=r.next,s=bc(r,t);0===s?(r.next=null,null===n?uc=i:n.next=i,null===i&&(cc=n)):(n=r,(0!==e||0!==(3&s))&&(pc=!0)),r=i}gc(e,!1)}function bc(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=-62914561&e.pendingLanes;0<s;){var a=31-ve(s),o=1<<a,l=i[a];-1===l?0!==(o&n)&&0===(o&r)||(i[a]=Le(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}if(n=ru,n=Ee(e,e===(t=tu)?n:0),r=e.callbackNode,0===n||e===t&&2===iu||null!==e.cancelPendingCommit)return null!==r&&null!==r&&se(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||_e(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&se(r),ze(n)){case 2:case 8:n=he;break;case 32:default:n=pe;break;case 268435456:n=fe}return r=xc.bind(null,e),n=ie(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&se(r),e.callbackPriority=2,e.callbackNode=null,2}function xc(e,t){var n=e.callbackNode;if(tc()&&e.callbackNode!==n)return null;var r=ru;return 0===(r=Ee(e,e===tu?r:0))?null:(Ru(e,r,t),bc(e,le()),null!=e.callbackNode&&e.callbackNode===n?xc.bind(null,e):null)}function vc(e,t){if(tc())return null;Ru(e,t,!0)}function wc(){return 0===fc&&(fc=Ce()),fc}function Sc(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:Ct(""+e)}function kc(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Tc=0;Tc<wr.length;Tc++){var Ac=wr[Tc];Sr(Ac.toLowerCase(),"on"+(Ac[0].toUpperCase()+Ac.slice(1)))}Sr(dr,"onAnimationEnd"),Sr(fr,"onAnimationIteration"),Sr(mr,"onAnimationStart"),Sr("dblclick","onDoubleClick"),Sr("focusin","onFocus"),Sr("focusout","onBlur"),Sr(gr,"onTransitionRun"),Sr(yr,"onTransitionStart"),Sr(br,"onTransitionCancel"),Sr(xr,"onTransitionEnd"),tt("onMouseEnter",["mouseout","mouseover"]),tt("onMouseLeave",["mouseout","mouseover"]),tt("onPointerEnter",["pointerout","pointerover"]),tt("onPointerLeave",["pointerout","pointerover"]),et("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),et("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),et("onBeforeInput",["compositionend","keypress","textInput","paste"]),et("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),et("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),et("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ec="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_c=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ec));function Lc(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;s=o,i.currentTarget=u;try{s(i)}catch(c){Ra(c)}i.currentTarget=null,s=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,u=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;s=o,i.currentTarget=u;try{s(i)}catch(c){Ra(c)}i.currentTarget=null,s=l}}}}function Cc(e,t){var n=t[Ke];void 0===n&&(n=t[Ke]=new Set);var r=e+"__bubble";n.has(r)||(Rc(t,e,2,!1),n.add(r))}function Ic(e,t,n){var r=0;t&&(r|=4),Rc(n,e,r,t)}var $c="_reactListening"+Math.random().toString(36).slice(2);function Oc(e){if(!e[$c]){e[$c]=!0,Qe.forEach((function(t){"selectionchange"!==t&&(_c.has(t)||Ic(t,!1,e),Ic(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[$c]||(t[$c]=!0,Ic("selectionchange",!1,t))}}function Rc(e,t,n,r){switch(Jh(t)){case 2:var i=Gh;break;case 8:i=Wh;break;default:i=Hh}n=i.bind(null,t,n,e),i=void 0,!Nt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Dc(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===i||8===o.nodeType&&o.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==o;){if(null===(a=He(o)))return;if(5===(l=a.tag)||6===l||26===l||27===l){r=s=a;continue e}o=o.parentNode}}r=r.return}Pt((function(){var r=s,i=$t(n),a=[];e:{var o=vr.get(e);if(void 0!==o){var l=Qt,u=e;switch(e){case"keypress":if(0===Ut(n))break e;case"keydown":case"keyup":l=fn;break;case"focusin":u="focus",l=sn;break;case"focusout":u="blur",l=sn;break;case"beforeblur":case"afterblur":l=sn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=nn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=rn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=gn;break;case dr:case fr:case mr:l=an;break;case xr:l=yn;break;case"scroll":case"scrollend":l=en;break;case"wheel":l=bn;break;case"copy":case"cut":case"paste":l=on;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=mn;break;case"toggle":case"beforetoggle":l=xn}var c=0!==(4&t),h=!c&&("scroll"===e||"scrollend"===e),p=c?null!==o?o+"Capture":null:o;c=[];for(var d,f=r;null!==f;){var m=f;if(d=m.stateNode,5!==(m=m.tag)&&26!==m&&27!==m||null===d||null===p||null!=(m=Mt(f,p))&&c.push(zc(f,m,d)),h)break;f=f.return}0<c.length&&(o=new l(o,u,null,n,i),a.push({event:o,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===It||!(u=n.relatedTarget||n.fromElement)||!He(u)&&!u[Ve])&&(l||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?He(u):null)&&(h=M(u),c=u.tag,u!==h||5!==c&&27!==c&&6!==c)&&(u=null)):(l=null,u=r),l!==u)){if(c=nn,m="onMouseLeave",p="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(c=mn,m="onPointerLeave",p="onPointerEnter",f="pointer"),h=null==l?o:qe(l),d=null==u?o:qe(u),(o=new c(m,f+"leave",l,n,i)).target=h,o.relatedTarget=d,m=null,He(i)===r&&((c=new c(p,f+"enter",u,n,i)).target=d,c.relatedTarget=h,m=c),h=m,l&&u)e:{for(p=u,f=0,d=c=l;d;d=Mc(d))f++;for(d=0,m=p;m;m=Mc(m))d++;for(;0<f-d;)c=Mc(c),f--;for(;0<d-f;)p=Mc(p),d--;for(;f--;){if(c===p||null!==p&&c===p.alternate)break e;c=Mc(c),p=Mc(p)}c=null}else c=null;null!==l&&Nc(a,o,l,c,!1),null!==u&&null!==h&&Nc(a,h,u,c,!0)}if("select"===(l=(o=r?qe(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Mn;else if($n(o))if(Nn)g=Hn;else{g=Gn;var y=Un}else!(l=o.nodeName)||"input"!==l.toLowerCase()||"checkbox"!==o.type&&"radio"!==o.type?r&&Et(r.elementType)&&(g=Mn):g=Wn;switch(g&&(g=g(e,r))?On(a,g,n,i):(y&&y(e,o,r),"focusout"===e&&r&&"number"===o.type&&null!=r.memoizedProps.value&&bt(o,"number",o.value)),y=r?qe(r):window,e){case"focusin":($n(y)||"true"===y.contentEditable)&&(rr=y,ir=r,sr=null);break;case"focusout":sr=ir=rr=null;break;case"mousedown":ar=!0;break;case"contextmenu":case"mouseup":case"dragend":ar=!1,or(a,n,i);break;case"selectionchange":if(nr)break;case"keydown":case"keyup":or(a,n,i)}var b;if(wn)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Cn?_n(e,n)&&(x="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(x="onCompositionStart");x&&(Tn&&"ko"!==n.locale&&(Cn||"onCompositionStart"!==x?"onCompositionEnd"===x&&Cn&&(b=Bt()):(Kt="value"in(Vt=i)?Vt.value:Vt.textContent,Cn=!0)),0<(y=Pc(r,x)).length&&(x=new ln(x,e,null,n,i),a.push({event:x,listeners:y}),b?x.data=b:null!==(b=Ln(n))&&(x.data=b))),(b=kn?function(e,t){switch(e){case"compositionend":return Ln(t);case"keypress":return 32!==t.which?null:(En=!0,An);case"textInput":return(e=t.data)===An&&En?null:e;default:return null}}(e,n):function(e,t){if(Cn)return"compositionend"===e||!wn&&_n(e,t)?(e=Bt(),jt=Kt=Vt=null,Cn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Tn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(x=Pc(r,"onBeforeInput")).length&&(y=new ln("onBeforeInput","beforeinput",null,n,i),a.push({event:y,listeners:x}),y.data=b)),function(e,t,n,r,i){if("submit"===t&&n&&n.stateNode===i){var s=Sc((i[Fe]||null).action),a=r.submitter;a&&null!==(t=(t=a[Fe]||null)?Sc(t.formAction):a.getAttribute("formAction"))&&(s=t,a=null);var o=new Qt("action","action",null,r,i);e.push({event:o,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==fc){var e=a?kc(i,a):new FormData(i);ca(n,{pending:!0,data:e,method:i.method,action:s},null,e)}}else"function"===typeof s&&(o.preventDefault(),e=a?kc(i,a):new FormData(i),ca(n,{pending:!0,data:e,method:i.method,action:s},s,e))},currentTarget:i}]})}}(a,e,r,n,i)}Lc(a,t)}))}function zc(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Pc(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5!==(i=i.tag)&&26!==i&&27!==i||null===s||(null!=(i=Mt(e,n))&&r.unshift(zc(e,i,s)),null!=(i=Mt(e,t))&&r.push(zc(e,i,s))),e=e.return}return r}function Mc(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Nc(e,t,n,r,i){for(var s=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,u=o.stateNode;if(o=o.tag,null!==l&&l===r)break;5!==o&&26!==o&&27!==o||null===u||(l=u,i?null!=(u=Mt(n,s))&&a.unshift(zc(n,u,l)):i||null!=(u=Mt(n,s))&&a.push(zc(n,u,l))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Fc=/\r\n?/g,Vc=/\u0000|\uFFFD/g;function Kc(e){return("string"===typeof e?e:""+e).replace(Fc,"\n").replace(Vc,"")}function jc(e,t){return t=Kc(t),Kc(e)===t}function Bc(){}function Uc(e,t,n,r,i,s){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||St(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&St(e,""+r);break;case"className":ot(e,"class",r);break;case"tabIndex":ot(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":ot(e,n,r);break;case"style":At(e,r,s);break;case"data":if("object"!==t){ot(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Ct(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof s&&("formAction"===n?("input"!==t&&Uc(e,t,"name",i.name,i,null),Uc(e,t,"formEncType",i.formEncType,i,null),Uc(e,t,"formMethod",i.formMethod,i,null),Uc(e,t,"formTarget",i.formTarget,i,null)):(Uc(e,t,"encType",i.encType,i,null),Uc(e,t,"method",i.method,i,null),Uc(e,t,"target",i.target,i,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Ct(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Bc);break;case"onScroll":null!=r&&Cc("scroll",e);break;case"onScrollEnd":null!=r&&Cc("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(a(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(a(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=Ct(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Cc("beforetoggle",e),Cc("toggle",e),at(e,"popover",r);break;case"xlinkActuate":lt(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":lt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":lt(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":lt(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":lt(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":lt(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":lt(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":lt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":lt(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":at(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&at(e,n=_t.get(n)||n,r)}}function Gc(e,t,n,r,i,s){switch(n){case"style":At(e,r,s);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(a(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(a(60));e.innerHTML=n}}break;case"children":"string"===typeof r?St(e,r):("number"===typeof r||"bigint"===typeof r)&&St(e,""+r);break;case"onScroll":null!=r&&Cc("scroll",e);break;case"onScrollEnd":null!=r&&Cc("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Bc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Ze.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(i=n.endsWith("Capture"),t=n.slice(2,i?n.length-7:void 0),"function"===typeof(s=null!=(s=e[Fe]||null)?s[n]:null)&&e.removeEventListener(t,s,i),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):at(e,n,r):("function"!==typeof s&&null!==s&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,i)))}}function Wc(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Cc("error",e),Cc("load",e);var r,i=!1,s=!1;for(r in n)if(n.hasOwnProperty(r)){var o=n[r];if(null!=o)switch(r){case"src":i=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:Uc(e,t,r,o,n,null)}}return s&&Uc(e,t,"srcSet",n.srcSet,n,null),void(i&&Uc(e,t,"src",n.src,n,null));case"input":Cc("invalid",e);var l=r=o=s=null,u=null,c=null;for(i in n)if(n.hasOwnProperty(i)){var h=n[i];if(null!=h)switch(i){case"name":s=h;break;case"type":o=h;break;case"checked":u=h;break;case"defaultChecked":c=h;break;case"value":r=h;break;case"defaultValue":l=h;break;case"children":case"dangerouslySetInnerHTML":if(null!=h)throw Error(a(137,t));break;default:Uc(e,t,i,h,n,null)}}return yt(e,r,l,u,c,o,s,!1),void ht(e);case"select":for(s in Cc("invalid",e),i=o=r=null,n)if(n.hasOwnProperty(s)&&null!=(l=n[s]))switch(s){case"value":r=l;break;case"defaultValue":o=l;break;case"multiple":i=l;default:Uc(e,t,s,l,n,null)}return t=r,n=o,e.multiple=!!i,void(null!=t?xt(e,!!i,t,!1):null!=n&&xt(e,!!i,n,!0));case"textarea":for(o in Cc("invalid",e),r=s=i=null,n)if(n.hasOwnProperty(o)&&null!=(l=n[o]))switch(o){case"value":i=l;break;case"defaultValue":s=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(a(91));break;default:Uc(e,t,o,l,n,null)}return wt(e,i,s,r),void ht(e);case"option":for(u in n)if(n.hasOwnProperty(u)&&null!=(i=n[u]))if("selected"===u)e.selected=i&&"function"!==typeof i&&"symbol"!==typeof i;else Uc(e,t,u,i,n,null);return;case"dialog":Cc("cancel",e),Cc("close",e);break;case"iframe":case"object":Cc("load",e);break;case"video":case"audio":for(i=0;i<Ec.length;i++)Cc(Ec[i],e);break;case"image":Cc("error",e),Cc("load",e);break;case"details":Cc("toggle",e);break;case"embed":case"source":case"link":Cc("error",e),Cc("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&null!=(i=n[c]))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:Uc(e,t,c,i,n,null)}return;default:if(Et(t)){for(h in n)n.hasOwnProperty(h)&&(void 0!==(i=n[h])&&Gc(e,t,h,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(i=n[l])&&Uc(e,t,l,i,n,null))}var Hc=null,Xc=null;function qc(e){return 9===e.nodeType?e:e.ownerDocument}function Yc(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Jc(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function Qc(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Zc=null;var eh="function"===typeof setTimeout?setTimeout:void 0,th="function"===typeof clearTimeout?clearTimeout:void 0,nh="function"===typeof Promise?Promise:void 0,rh="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof nh?function(e){return nh.resolve(null).then(e).catch(ih)}:eh;function ih(e){setTimeout((function(){throw e}))}function sh(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void mp(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);mp(t)}function ah(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":ah(n),We(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function oh(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}function lh(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function uh(e,t,n){switch(t=qc(n),e){case"html":if(!(e=t.documentElement))throw Error(a(452));return e;case"head":if(!(e=t.head))throw Error(a(453));return e;case"body":if(!(e=t.body))throw Error(a(454));return e;default:throw Error(a(451))}}var ch=new Map,hh=new Set;function ph(e){return"function"===typeof e.getRootNode?e.getRootNode():e.ownerDocument}var dh=j.d;j.d={f:function(){var e=dh.f(),t=Nu();return e||t},r:function(e){var t=Xe(e);null!==t&&5===t.tag&&"form"===t.type?pa(t):dh.r(e)},D:function(e){dh.D(e),mh("dns-prefetch",e,null)},C:function(e,t){dh.C(e,t),mh("preconnect",e,t)},L:function(e,t,n){dh.L(e,t,n);var r=fh;if(r&&e&&t){var i='link[rel="preload"][as="'+mt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(i+='[imagesrcset="'+mt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(i+='[imagesizes="'+mt(n.imageSizes)+'"]')):i+='[href="'+mt(e)+'"]';var s=i;switch(t){case"style":s=yh(e);break;case"script":s=vh(e)}ch.has(s)||(e=$({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),ch.set(s,e),null!==r.querySelector(i)||"style"===t&&r.querySelector(bh(s))||"script"===t&&r.querySelector(wh(s))||(Wc(t=r.createElement("link"),"link",e),Je(t),r.head.appendChild(t)))}},m:function(e,t){dh.m(e,t);var n=fh;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",i='link[rel="modulepreload"][as="'+mt(r)+'"][href="'+mt(e)+'"]',s=i;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=vh(e)}if(!ch.has(s)&&(e=$({rel:"modulepreload",href:e},t),ch.set(s,e),null===n.querySelector(i))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(wh(s)))return}Wc(r=n.createElement("link"),"link",e),Je(r),n.head.appendChild(r)}}},X:function(e,t){dh.X(e,t);var n=fh;if(n&&e){var r=Ye(n).hoistableScripts,i=vh(e),s=r.get(i);s||((s=n.querySelector(wh(i)))||(e=$({src:e,async:!0},t),(t=ch.get(i))&&Ah(e,t),Je(s=n.createElement("script")),Wc(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}},S:function(e,t,n){dh.S(e,t,n);var r=fh;if(r&&e){var i=Ye(r).hoistableStyles,s=yh(e);t=t||"default";var a=i.get(s);if(!a){var o={loading:0,preload:null};if(a=r.querySelector(bh(s)))o.loading=5;else{e=$({rel:"stylesheet",href:e,"data-precedence":t},n),(n=ch.get(s))&&Th(e,n);var l=a=r.createElement("link");Je(l),Wc(l,"link",e),l._p=new Promise((function(e,t){l.onload=e,l.onerror=t})),l.addEventListener("load",(function(){o.loading|=1})),l.addEventListener("error",(function(){o.loading|=2})),o.loading|=4,kh(a,t,r)}a={type:"stylesheet",instance:a,count:1,state:o},i.set(s,a)}}},M:function(e,t){dh.M(e,t);var n=fh;if(n&&e){var r=Ye(n).hoistableScripts,i=vh(e),s=r.get(i);s||((s=n.querySelector(wh(i)))||(e=$({src:e,async:!0,type:"module"},t),(t=ch.get(i))&&Ah(e,t),Je(s=n.createElement("script")),Wc(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}}};var fh="undefined"===typeof document?null:document;function mh(e,t,n){var r=fh;if(r&&"string"===typeof t&&t){var i=mt(t);i='link[rel="'+e+'"][href="'+i+'"]',"string"===typeof n&&(i+='[crossorigin="'+n+'"]'),hh.has(i)||(hh.add(i),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(i)&&(Wc(t=r.createElement("link"),"link",e),Je(t),r.head.appendChild(t)))}}function gh(e,t,n,r){var i,s,o,l,u=(u=J.current)?ph(u):null;if(!u)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=yh(n.href),(r=(n=Ye(u).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=yh(n.href);var c=Ye(u).hoistableStyles,h=c.get(e);if(h||(u=u.ownerDocument||u,h={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(e,h),(c=u.querySelector(bh(e)))&&!c._p&&(h.instance=c,h.state.loading=5),ch.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},ch.set(e,n),c||(i=u,s=e,o=n,l=h.state,i.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=i.createElement("link"),l.preload=s,s.addEventListener("load",(function(){return l.loading|=1})),s.addEventListener("error",(function(){return l.loading|=2})),Wc(s,"link",o),Je(s),i.head.appendChild(s))))),t&&null===r)throw Error(a(528,""));return h}if(t&&null!==r)throw Error(a(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=vh(n),(r=(n=Ye(u).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function yh(e){return'href="'+mt(e)+'"'}function bh(e){return'link[rel="stylesheet"]['+e+"]"}function xh(e){return $({},e,{"data-precedence":e.precedence,precedence:null})}function vh(e){return'[src="'+mt(e)+'"]'}function wh(e){return"script[async]"+e}function Sh(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+mt(n.href)+'"]');if(r)return t.instance=r,Je(r),r;var i=$({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return Je(r=(e.ownerDocument||e).createElement("style")),Wc(r,"style",i),kh(r,n.precedence,e),t.instance=r;case"stylesheet":i=yh(n.href);var s=e.querySelector(bh(i));if(s)return t.state.loading|=4,t.instance=s,Je(s),s;r=xh(n),(i=ch.get(i))&&Th(r,i),Je(s=(e.ownerDocument||e).createElement("link"));var o=s;return o._p=new Promise((function(e,t){o.onload=e,o.onerror=t})),Wc(s,"link",r),t.state.loading|=4,kh(s,n.precedence,e),t.instance=s;case"script":return s=vh(n.src),(i=e.querySelector(wh(s)))?(t.instance=i,Je(i),i):(r=n,(i=ch.get(s))&&Ah(r=$({},n),i),Je(i=(e=e.ownerDocument||e).createElement("script")),Wc(i,"link",r),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(a(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,kh(r,n.precedence,e));return t.instance}function kh(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=r.length?r[r.length-1]:null,s=i,a=0;a<r.length;a++){var o=r[a];if(o.dataset.precedence===t)s=o;else if(s!==i)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Th(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Ah(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Eh=null;function _h(e,t,n){if(null===Eh){var r=new Map,i=Eh=new Map;i.set(n,r)}else(r=(i=Eh).get(n))||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var s=n[i];if(!(s[Ge]||s[Ne]||"link"===e&&"stylesheet"===s.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==s.namespaceURI){var a=s.getAttribute(t)||"";a=e+a;var o=r.get(a);o?o.push(s):r.set(a,[s])}}return r}function Lh(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function Ch(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var Ih=null;function $h(){}function Oh(){if(this.count--,0===this.count)if(this.stylesheets)Dh(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Rh=null;function Dh(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Rh=new Map,t.forEach(zh,e),Rh=null,Oh.call(e))}function zh(e,t){if(!(4&t.state.loading)){var n=Rh.get(e);if(n)var r=n.get(null);else{n=new Map,Rh.set(e,n);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<i.length;s++){var a=i[s];"LINK"!==a.nodeName&&"not all"===a.getAttribute("media")||(n.set(a.dataset.precedence,a),r=a)}r&&n.set(null,r)}a=(i=t.instance).getAttribute("data-precedence"),(s=n.get(a)||r)===r&&n.set(null,i),n.set(a,i),this.count++,r=Oh.bind(this),i.addEventListener("load",r),i.addEventListener("error",r),s?s.parentNode.insertBefore(i,s.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(i,e.firstChild),t.state.loading|=4}}var Ph={$$typeof:g,Provider:null,Consumer:null,_currentValue:B,_currentValue2:B,_threadCount:0};function Mh(e,t,n,r,i,s,a,o){this.tag=1,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=$e(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$e(0),this.hiddenUpdates=$e(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=s,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function Nh(e,t,n,r,i,s,a,o,l,u,c,h){return e=new Mh(e,t,n,a,o,l,u,h),t=1,!0===s&&(t|=24),s=zl(3,null,null,t),e.current=s,s.stateNode=e,(t=Vi()).refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:r,isDehydrated:n,cache:t},Co(s),e}function Fh(e){return e?e=Or:Or}function Vh(e,t,n,r,i,s){i=Fh(i),null===r.context?r.context=i:r.pendingContext=i,(r=$o(t)).payload={element:n},null!==(s=void 0===s?null:s)&&(r.callback=s),null!==(n=Oo(e,r,t))&&(Ou(n,0,t),Ro(n,e,t))}function Kh(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function jh(e,t){Kh(e,t),(e=e.alternate)&&Kh(e,t)}function Bh(e){if(13===e.tag){var t=Cr(e,67108864);null!==t&&Ou(t,0,67108864),jh(e,67108864)}}var Uh=!0;function Gh(e,t,n,r){var i=I.T;I.T=null;var s=j.p;try{j.p=2,Hh(e,t,n,r)}finally{j.p=s,I.T=i}}function Wh(e,t,n,r){var i=I.T;I.T=null;var s=j.p;try{j.p=8,Hh(e,t,n,r)}finally{j.p=s,I.T=i}}function Hh(e,t,n,r){if(Uh){var i=Xh(r);if(null===i)Dc(e,t,r,qh,n),ap(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Zh=op(Zh,e,t,n,r,i),!0;case"dragenter":return ep=op(ep,e,t,n,r,i),!0;case"mouseover":return tp=op(tp,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return np.set(s,op(np.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,rp.set(s,op(rp.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(ap(e,r),4&t&&-1<sp.indexOf(e)){for(;null!==i;){var s=Xe(i);if(null!==s)switch(s.tag){case 3:if((s=s.stateNode).current.memoizedState.isDehydrated){var a=Ae(s.pendingLanes);if(0!==a){var o=s;for(o.pendingLanes|=2,o.entangledLanes|=2;a;){var l=1<<31-ve(a);o.entanglements[1]|=l,a&=~l}mc(s),0===(6&eu)&&(vu=le()+500,gc(0,!1))}}break;case 13:null!==(o=Cr(s,2))&&Ou(o,0,2),Nu(),jh(s,2)}if(null===(s=Xh(r))&&Dc(e,t,r,qh,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Dc(e,t,r,null,n)}}function Xh(e){return Yh(e=$t(e))}var qh=null;function Yh(e){if(qh=null,null!==(e=He(e))){var t=M(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=N(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return qh=e,null}function Jh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ue()){case ce:return 2;case he:return 8;case pe:case de:return 32;case fe:return 268435456;default:return 32}default:return 32}}var Qh=!1,Zh=null,ep=null,tp=null,np=new Map,rp=new Map,ip=[],sp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ap(e,t){switch(e){case"focusin":case"focusout":Zh=null;break;case"dragenter":case"dragleave":ep=null;break;case"mouseover":case"mouseout":tp=null;break;case"pointerover":case"pointerout":np.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":rp.delete(t.pointerId)}}function op(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=Xe(t))&&Bh(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function lp(e){var t=He(e.target);if(null!==t){var n=M(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=N(n)))return e.blockedOn=t,void function(e,t){var n=j.p;try{return j.p=e,t()}finally{j.p=n}}(e.priority,(function(){if(13===n.tag){var e=Iu(),t=Cr(n,e);null!==t&&Ou(t,0,e),jh(n,e)}}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function up(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xh(e.nativeEvent);if(null!==n)return null!==(t=Xe(n))&&Bh(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);It=r,n.target.dispatchEvent(r),It=null,t.shift()}return!0}function cp(e,t,n){up(e)&&n.delete(t)}function hp(){Qh=!1,null!==Zh&&up(Zh)&&(Zh=null),null!==ep&&up(ep)&&(ep=null),null!==tp&&up(tp)&&(tp=null),np.forEach(cp),rp.forEach(cp)}function pp(e,t){e.blockedOn===t&&(e.blockedOn=null,Qh||(Qh=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,hp)))}var dp=null;function fp(e){dp!==e&&(dp=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,(function(){dp===e&&(dp=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if("function"!==typeof r){if(null===Yh(r||n))continue;break}var s=Xe(n);null!==s&&(e.splice(t,3),t-=3,ca(s,{pending:!0,data:i,method:n.method,action:r},r,i))}})))}function mp(e){function t(t){return pp(t,e)}null!==Zh&&pp(Zh,e),null!==ep&&pp(ep,e),null!==tp&&pp(tp,e),np.forEach(t),rp.forEach(t);for(var n=0;n<ip.length;n++){var r=ip[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<ip.length&&null===(n=ip[0]).blockedOn;)lp(n),null===n.blockedOn&&ip.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var i=n[r],s=n[r+1],a=i[Fe]||null;if("function"===typeof s)a||fp(n);else if(a){var o=null;if(s&&s.hasAttribute("formAction")){if(i=s,a=s[Fe]||null)o=a.formAction;else if(null!==Yh(i))continue}else o=a.action;"function"===typeof o?n[r+1]=o:(n.splice(r,3),r-=3),fp(n)}}}function gp(e){this._internalRoot=e}function yp(e){this._internalRoot=e}yp.prototype.render=gp.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Vh(t.current,Iu(),e,t,null,null)},yp.prototype.unmount=gp.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;0===e.tag&&tc(),Vh(e.current,2,null,e,null,null),Nu(),t[Ve]=null}},yp.prototype.unstable_scheduleHydration=function(e){if(e){var t=Pe();e={blockedOn:null,target:e,priority:t};for(var n=0;n<ip.length&&0!==t&&t<ip[n].priority;n++);ip.splice(n,0,e),0===n&&lp(e)}};var bp=i.version;if("19.0.0"!==bp)throw Error(a(527,bp,"19.0.0"));j.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=M(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return F(i),e;if(s===r)return F(i),t;s=s.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?V(e):null)?null:e.stateNode};var xp={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:I,findFiberByHostInstance:He,reconcilerVersion:"19.0.0"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var vp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vp.isDisabled&&vp.supportsFiber)try{ye=vp.inject(xp),be=vp}catch(Sp){}}t.createRoot=function(e,t){if(!o(e))throw Error(a(299));var n=!1,r="",i=Da,s=za,l=Pa;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(i=t.onUncaughtError),void 0!==t.onCaughtError&&(s=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Nh(e,1,!1,null,0,n,r,i,s,l,0,null),e[Ve]=t.current,Oc(8===e.nodeType?e.parentNode:e),new gp(t)},t.hydrateRoot=function(e,t,n){if(!o(e))throw Error(a(299));var r=!1,i="",s=Da,l=za,u=Pa,c=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onUncaughtError&&(s=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(u=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(c=n.formState)),(t=Nh(e,1,!0,t,0,r,i,s,l,u,0,c)).context=Fh(null),n=t.current,(i=$o(r=Iu())).callback=null,Oo(n,i,r),t.current.lanes=r,Oe(t,r),mc(t),e[Ve]=t.current,Oc(e),new yp(t)},t.version="19.0.0"},43:(e,t,n)=>{"use strict";e.exports=n(288)},191:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler");Symbol.for("react.provider");var o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.for("react.offscreen"),m=Symbol.for("react.client.reference");function g(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case i:case a:case s:case c:case h:return e;default:switch(e=e&&e.$$typeof){case l:case u:case d:case p:case o:return e;default:return t}}case r:return t}}}t.Hy=function(e){return"string"===typeof e||"function"===typeof e||e===i||e===a||e===s||e===c||e===h||e===f||"object"===typeof e&&null!==e&&(e.$$typeof===d||e.$$typeof===p||e.$$typeof===l||e.$$typeof===o||e.$$typeof===u||e.$$typeof===m||void 0!==e.getModuleId)}},219:(e,t,n)=>{"use strict";var r=n(763),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o={};function l(e){return r.isMemo(e)?a:o[e.$$typeof]||i}o[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},o[r.Memo]=a;var u=Object.defineProperty,c=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,f=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(f){var i=d(n);i&&i!==f&&e(t,i,r)}var a=c(n);h&&(a=a.concat(h(n)));for(var o=l(t),m=l(n),g=0;g<a.length;++g){var y=a[g];if(!s[y]&&(!r||!r[y])&&(!m||!m[y])&&(!o||!o[y])){var b=p(n,y);try{u(t,y,b)}catch(x){}}}}return t}},277:function(e){e.exports=function(){"use strict";function e(e,t){if("undefined"===typeof document)return;const n=document.createElement("textarea");n.value=e,n.setAttribute("readonly",""),n.style={position:"absolute",left:"-9999px"},document.body.appendChild(n);const r=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);n.select();let i=!1;try{i=!!document.execCommand("copy")}catch(s){i=!1}document.body.removeChild(n),r&&document.getSelection&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(r)),t&&t(i)}return e}()},288:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),d=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function b(){}function x(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=y.prototype;var v=x.prototype=new b;v.constructor=x,m(v,y.prototype),v.isPureReactComponent=!0;var w=Array.isArray,S={H:null,A:null,T:null,S:null},k=Object.prototype.hasOwnProperty;function T(e,t,r,i,s,a){return r=a.ref,{$$typeof:n,type:e,key:t,ref:void 0!==r?r:null,props:a}}function A(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var E=/\/+/g;function _(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function L(){}function C(e,t,i,s,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l,u,c=!1;if(null===e)c=!0;else switch(o){case"bigint":case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case n:case r:c=!0;break;case p:return C((c=e._init)(e._payload),t,i,s,a)}}if(c)return a=a(e),c=""===s?"."+_(e,0):s,w(a)?(i="",null!=c&&(i=c.replace(E,"$&/")+"/"),C(a,t,i,"",(function(e){return e}))):null!=a&&(A(a)&&(l=a,u=i+(null==a.key||e&&e.key===a.key?"":(""+a.key).replace(E,"$&/")+"/")+c,a=T(l.type,u,void 0,0,0,l.props)),t.push(a)),1;c=0;var h,f=""===s?".":s+":";if(w(e))for(var m=0;m<e.length;m++)c+=C(s=e[m],t,i,o=f+_(s,m),a);else if("function"===typeof(m=null===(h=e)||"object"!==typeof h?null:"function"===typeof(h=d&&h[d]||h["@@iterator"])?h:null))for(e=m.call(e),m=0;!(s=e.next()).done;)c+=C(s=s.value,t,i,o=f+_(s,m++),a);else if("object"===o){if("function"===typeof e.then)return C(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(L,L):(e.status="pending",e.then((function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)}),(function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)}))),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,i,s,a);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return c}function I(e,t,n){if(null==e)return e;var r=[],i=0;return C(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function $(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function R(){}t.Children={map:I,forEach:function(e,t,n){I(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return I(e,(function(){t++})),t},toArray:function(e){return I(e,(function(e){return e}))||[]},only:function(e){if(!A(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=a,t.PureComponent=x,t.StrictMode=s,t.Suspense=c,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,t.act=function(){throw Error("act(...) is not supported in production builds of React.")},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=m({},e.props),i=e.key;if(null!=t)for(s in void 0!==t.ref&&void 0,void 0!==t.key&&(i=""+t.key),t)!k.call(t,s)||"key"===s||"__self"===s||"__source"===s||"ref"===s&&void 0===t.ref||(r[s]=t[s]);var s=arguments.length-2;if(1===s)r.children=n;else if(1<s){for(var a=Array(s),o=0;o<s;o++)a[o]=arguments[o+2];r.children=a}return T(e.type,i,void 0,0,0,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:o,_context:e},e},t.createElement=function(e,t,n){var r,i={},s=null;if(null!=t)for(r in void 0!==t.key&&(s=""+t.key),t)k.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(i[r]=t[r]);var a=arguments.length-2;if(1===a)i.children=n;else if(1<a){for(var o=Array(a),l=0;l<a;l++)o[l]=arguments[l+2];i.children=o}if(e&&e.defaultProps)for(r in a=e.defaultProps)void 0===i[r]&&(i[r]=a[r]);return T(e,s,void 0,0,0,i)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=A,t.lazy=function(e){return{$$typeof:p,_payload:{_status:-1,_result:e},_init:$}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=S.T,n={};S.T=n;try{var r=e(),i=S.S;null!==i&&i(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(R,O)}catch(s){O(s)}finally{S.T=t}},t.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},t.use=function(e){return S.H.use(e)},t.useActionState=function(e,t,n){return S.H.useActionState(e,t,n)},t.useCallback=function(e,t){return S.H.useCallback(e,t)},t.useContext=function(e){return S.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return S.H.useDeferredValue(e,t)},t.useEffect=function(e,t){return S.H.useEffect(e,t)},t.useId=function(){return S.H.useId()},t.useImperativeHandle=function(e,t,n){return S.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return S.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return S.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return S.H.useMemo(e,t)},t.useOptimistic=function(e,t){return S.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return S.H.useReducer(e,t,n)},t.useRef=function(e){return S.H.useRef(e)},t.useState=function(e){return S.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return S.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return S.H.useTransition()},t.version="19.0.0"},391:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},579:(e,t,n)=>{"use strict";e.exports=n(799)},672:(e,t,n)=>{"use strict";var r=n(43);function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var a={d:{f:s,r:function(){throw Error(i(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},o=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(i(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:o,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=a.p;try{if(l.T=null,a.p=2,e)return e()}finally{l.T=t,a.p=n,a.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,a.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&a.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=u(n,t.crossOrigin),i="string"===typeof t.integrity?t.integrity:void 0,s="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?a.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:i,fetchPriority:s}):"script"===n&&a.d.X(e,{crossOrigin:r,integrity:i,fetchPriority:s,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=u(t.as,t.crossOrigin);a.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&a.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=u(n,t.crossOrigin);a.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=u(t.as,t.crossOrigin);a.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else a.d.m(e)},t.requestFormReset=function(e){a.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.0.0"},763:(e,t,n)=>{"use strict";e.exports=n(983)},790:function(e,t,n){!function(e){"use strict";function t(e){return Math.max(0,e)}function r(e,t){return e<=0?0:t}var i=Object.freeze({__proto__:null,activate:t,measure:r});function s(e){return 1/(1+Math.exp(-e))}function a(e,t){return e*(1-e)*t}var o=Object.freeze({__proto__:null,activate:s,measure:a});function l(e){return Math.tanh(e)}function u(e,t){return(1-e*e)*t}var c=Object.freeze({__proto__:null,activate:l,measure:u});function h(e){return e>0?e:.01*e}function p(e,t){return e>0?t:.01*t}var d=Object.freeze({__proto__:null,activate:h,measure:p}),f=Object.freeze({__proto__:null,relu:i,sigmoid:o,tanh:c,leakyRelu:d}),m="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{};function g(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return y(e,void 0===t||null===t?n.path:t)}},n.exports),n.exports}function y(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var b=g((function(e,t){var n;n=function(){return function(){function e(t,n,r){function i(a,o){if(!n[a]){if(!t[a]){var l="function"==typeof y&&y;if(!o&&l)return l(a,!0);if(s)return s(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};t[a][0].call(c.exports,(function(e){return i(t[a][1][e]||e)}),c,c.exports,e,t,n,r)}return n[a].exports}for(var s="function"==typeof y&&y,a=0;a<r.length;a++)i(r[a]);return i}return e}()({1:[function(e,t,n){!function(e,r){r("object"===typeof n&&"undefined"!==typeof t?n:(e=e||self).acorn={})}(this,(function(e){var t={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},n="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",r={5:n,"5module":n+" export import",6:n+" const class extends export import super"},i=/^in(stanceof)?$/,s="\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0560-\u0588\u05d0-\u05ea\u05ef-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u0860-\u086a\u08a0-\u08b4\u08b6-\u08bd\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u09fc\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0af9\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c60\u0c61\u0c80\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d54-\u0d56\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e86-\u0e8a\u0e8c-\u0ea3\u0ea5\u0ea7-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1878\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1c80-\u1c88\u1c90-\u1cba\u1cbd-\u1cbf\u1ce9-\u1cec\u1cee-\u1cf3\u1cf5\u1cf6\u1cfa\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2118-\u211d\u2124\u2126\u2128\u212a-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309b-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312f\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fef\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua7bf\ua7c2-\ua7c6\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd\ua8fe\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab67\uab70-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",a="\u200c\u200d\xb7\u0300-\u036f\u0387\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u07fd\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08d3-\u08e1\u08e3-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u09fe\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0afa-\u0aff\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c00-\u0c04\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d00-\u0d03\u0d3b\u0d3c\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1369-\u1371\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19d0-\u19da\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1ab0-\u1abd\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf4\u1cf7-\u1cf9\u1dc0-\u1df9\u1dfb-\u1dff\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69e\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c5\ua8d0-\ua8d9\ua8e0-\ua8f1\ua8ff-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\ua9e5\ua9f0-\ua9f9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b-\uaa7d\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f",o=new RegExp("["+s+"]"),l=new RegExp("["+s+a+"]");s=a=null;var u=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,477,28,11,0,9,21,155,22,13,52,76,44,33,24,27,35,30,0,12,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,0,33,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,230,43,117,63,32,0,161,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,270,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,754,9486,286,50,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,2357,44,11,6,17,0,370,43,1301,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42710,42,4148,12,221,3,5761,15,7472,3104,541],c=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,525,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,4,9,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,232,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1014,0,2,54,8,3,19723,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,419,13,1495,6,110,6,6,9,792487,239];function h(e,t){for(var n=65536,r=0;r<t.length;r+=2){if((n+=t[r])>e)return!1;if((n+=t[r+1])>=e)return!0}}function p(e,t){return e<65?36===e:e<91||(e<97?95===e:e<123||(e<=65535?e>=170&&o.test(String.fromCharCode(e)):!1!==t&&h(e,u)))}function d(e,t){return e<48?36===e:e<58||!(e<65)&&(e<91||(e<97?95===e:e<123||(e<=65535?e>=170&&l.test(String.fromCharCode(e)):!1!==t&&(h(e,u)||h(e,c)))))}var f=function(e,t){void 0===t&&(t={}),this.label=e,this.keyword=t.keyword,this.beforeExpr=!!t.beforeExpr,this.startsExpr=!!t.startsExpr,this.isLoop=!!t.isLoop,this.isAssign=!!t.isAssign,this.prefix=!!t.prefix,this.postfix=!!t.postfix,this.binop=t.binop||null,this.updateContext=null};function m(e,t){return new f(e,{beforeExpr:!0,binop:t})}var g={beforeExpr:!0},y={startsExpr:!0},b={};function x(e,t){return void 0===t&&(t={}),t.keyword=e,b[e]=new f(e,t)}var v={num:new f("num",y),regexp:new f("regexp",y),string:new f("string",y),name:new f("name",y),eof:new f("eof"),bracketL:new f("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new f("]"),braceL:new f("{",{beforeExpr:!0,startsExpr:!0}),braceR:new f("}"),parenL:new f("(",{beforeExpr:!0,startsExpr:!0}),parenR:new f(")"),comma:new f(",",g),semi:new f(";",g),colon:new f(":",g),dot:new f("."),question:new f("?",g),arrow:new f("=>",g),template:new f("template"),invalidTemplate:new f("invalidTemplate"),ellipsis:new f("...",g),backQuote:new f("`",y),dollarBraceL:new f("${",{beforeExpr:!0,startsExpr:!0}),eq:new f("=",{beforeExpr:!0,isAssign:!0}),assign:new f("_=",{beforeExpr:!0,isAssign:!0}),incDec:new f("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new f("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:m("||",1),logicalAND:m("&&",2),bitwiseOR:m("|",3),bitwiseXOR:m("^",4),bitwiseAND:m("&",5),equality:m("==/!=/===/!==",6),relational:m("</>/<=/>=",7),bitShift:m("<</>>/>>>",8),plusMin:new f("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:m("%",10),star:m("*",10),slash:m("/",10),starstar:new f("**",{beforeExpr:!0}),_break:x("break"),_case:x("case",g),_catch:x("catch"),_continue:x("continue"),_debugger:x("debugger"),_default:x("default",g),_do:x("do",{isLoop:!0,beforeExpr:!0}),_else:x("else",g),_finally:x("finally"),_for:x("for",{isLoop:!0}),_function:x("function",y),_if:x("if"),_return:x("return",g),_switch:x("switch"),_throw:x("throw",g),_try:x("try"),_var:x("var"),_const:x("const"),_while:x("while",{isLoop:!0}),_with:x("with"),_new:x("new",{beforeExpr:!0,startsExpr:!0}),_this:x("this",y),_super:x("super",y),_class:x("class",y),_extends:x("extends",g),_export:x("export"),_import:x("import",y),_null:x("null",y),_true:x("true",y),_false:x("false",y),_in:x("in",{beforeExpr:!0,binop:7}),_instanceof:x("instanceof",{beforeExpr:!0,binop:7}),_typeof:x("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:x("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:x("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},w=/\r\n?|\n|\u2028|\u2029/,S=new RegExp(w.source,"g");function k(e,t){return 10===e||13===e||!t&&(8232===e||8233===e)}var T=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,A=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,E=Object.prototype,_=E.hasOwnProperty,L=E.toString;function C(e,t){return _.call(e,t)}var I=Array.isArray||function(e){return"[object Array]"===L.call(e)};function $(e){return new RegExp("^(?:"+e.replace(/ /g,"|")+")$")}var O=function(e,t){this.line=e,this.column=t};O.prototype.offset=function(e){return new O(this.line,this.column+e)};var R=function(e,t,n){this.start=t,this.end=n,null!==e.sourceFile&&(this.source=e.sourceFile)};function D(e,t){for(var n=1,r=0;;){S.lastIndex=r;var i=S.exec(e);if(!(i&&i.index<t))return new O(n,t-r);++n,r=i.index+i[0].length}}var z={ecmaVersion:10,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1};function P(e){var t={};for(var n in z)t[n]=e&&C(e,n)?e[n]:z[n];if(t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),null==t.allowReserved&&(t.allowReserved=t.ecmaVersion<5),I(t.onToken)){var r=t.onToken;t.onToken=function(e){return r.push(e)}}return I(t.onComment)&&(t.onComment=M(t,t.onComment)),t}function M(e,t){return function(n,r,i,s,a,o){var l={type:n?"Block":"Line",value:r,start:i,end:s};e.locations&&(l.loc=new R(this,a,o)),e.ranges&&(l.range=[i,s]),t.push(l)}}var N=1,F=2,V=N|F,K=4,j=8,B=16,U=32,G=64,W=128;function H(e,t){return F|(e?K:0)|(t?j:0)}var X=0,q=1,Y=2,J=3,Q=4,Z=5,ee=function(e,n,i){this.options=e=P(e),this.sourceFile=e.sourceFile,this.keywords=$(r[e.ecmaVersion>=6?6:"module"===e.sourceType?"5module":5]);var s="";if(!0!==e.allowReserved){for(var a=e.ecmaVersion;!(s=t[a]);a--);"module"===e.sourceType&&(s+=" await")}this.reservedWords=$(s);var o=(s?s+" ":"")+t.strict;this.reservedWordsStrict=$(o),this.reservedWordsStrictBind=$(o+" "+t.strictBind),this.input=String(n),this.containsEsc=!1,i?(this.pos=i,this.lineStart=this.input.lastIndexOf("\n",i-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(w).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=v.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===e.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports={},0===this.pos&&e.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(N),this.regexpState=null},te={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0}};ee.prototype.parse=function(){var e=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(e)},te.inFunction.get=function(){return(this.currentVarScope().flags&F)>0},te.inGenerator.get=function(){return(this.currentVarScope().flags&j)>0},te.inAsync.get=function(){return(this.currentVarScope().flags&K)>0},te.allowSuper.get=function(){return(this.currentThisScope().flags&G)>0},te.allowDirectSuper.get=function(){return(this.currentThisScope().flags&W)>0},te.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},ee.prototype.inNonArrowFunction=function(){return(this.currentThisScope().flags&F)>0},ee.extend=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var n=this,r=0;r<e.length;r++)n=e[r](n);return n},ee.parse=function(e,t){return new this(t,e).parse()},ee.parseExpressionAt=function(e,t,n){var r=new this(n,e,t);return r.nextToken(),r.parseExpression()},ee.tokenizer=function(e,t){return new this(t,e)},Object.defineProperties(ee.prototype,te);var ne=ee.prototype,re=/^(?:'((?:\\.|[^'])*?)'|"((?:\\.|[^"])*?)")/;function ie(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}ne.strictDirective=function(e){for(;;){A.lastIndex=e,e+=A.exec(this.input)[0].length;var t=re.exec(this.input.slice(e));if(!t)return!1;if("use strict"===(t[1]||t[2]))return!0;e+=t[0].length,A.lastIndex=e,e+=A.exec(this.input)[0].length,";"===this.input[e]&&e++}},ne.eat=function(e){return this.type===e&&(this.next(),!0)},ne.isContextual=function(e){return this.type===v.name&&this.value===e&&!this.containsEsc},ne.eatContextual=function(e){return!!this.isContextual(e)&&(this.next(),!0)},ne.expectContextual=function(e){this.eatContextual(e)||this.unexpected()},ne.canInsertSemicolon=function(){return this.type===v.eof||this.type===v.braceR||w.test(this.input.slice(this.lastTokEnd,this.start))},ne.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},ne.semicolon=function(){this.eat(v.semi)||this.insertSemicolon()||this.unexpected()},ne.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0},ne.expect=function(e){this.eat(e)||this.unexpected()},ne.unexpected=function(e){this.raise(null!=e?e:this.start,"Unexpected token")},ne.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,"Parenthesized pattern")}},ne.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")},ne.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},ne.isSimpleAssignTarget=function(e){return"ParenthesizedExpression"===e.type?this.isSimpleAssignTarget(e.expression):"Identifier"===e.type||"MemberExpression"===e.type};var se=ee.prototype;se.parseTopLevel=function(e){var t={};for(e.body||(e.body=[]);this.type!==v.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var s=i[r];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var ae={kind:"loop"},oe={kind:"switch"};se.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;A.lastIndex=this.pos;var t=A.exec(this.input),n=this.pos+t[0].length,r=this.input.charCodeAt(n);if(91===r)return!0;if(e)return!1;if(123===r)return!0;if(p(r,!0)){for(var s=n+1;d(this.input.charCodeAt(s),!0);)++s;var a=this.input.slice(n,s);if(!i.test(a))return!0}return!1},se.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;A.lastIndex=this.pos;var e=A.exec(this.input),t=this.pos+e[0].length;return!w.test(this.input.slice(this.pos,t))&&"function"===this.input.slice(t,t+8)&&(t+8===this.input.length||!d(this.input.charAt(t+8)))},se.parseStatement=function(e,t,n){var r,i=this.type,s=this.startNode();switch(this.isLet(e)&&(i=v._var,r="let"),i){case v._break:case v._continue:return this.parseBreakContinueStatement(s,i.keyword);case v._debugger:return this.parseDebuggerStatement(s);case v._do:return this.parseDoStatement(s);case v._for:return this.parseForStatement(s);case v._function:return e&&(this.strict||"if"!==e&&"label"!==e)&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(s,!1,!e);case v._class:return e&&this.unexpected(),this.parseClass(s,!0);case v._if:return this.parseIfStatement(s);case v._return:return this.parseReturnStatement(s);case v._switch:return this.parseSwitchStatement(s);case v._throw:return this.parseThrowStatement(s);case v._try:return this.parseTryStatement(s);case v._const:case v._var:return r=r||this.value,e&&"var"!==r&&this.unexpected(),this.parseVarStatement(s,r);case v._while:return this.parseWhileStatement(s);case v._with:return this.parseWithStatement(s);case v.braceL:return this.parseBlock(!0,s);case v.semi:return this.parseEmptyStatement(s);case v._export:case v._import:if(this.options.ecmaVersion>10&&i===v._import){A.lastIndex=this.pos;var a=A.exec(this.input),o=this.pos+a[0].length;if(40===this.input.charCodeAt(o))return this.parseExpressionStatement(s,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),i===v._import?this.parseImport(s):this.parseExport(s,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(s,!0,!e);var l=this.value,u=this.parseExpression();return i===v.name&&"Identifier"===u.type&&this.eat(v.colon)?this.parseLabeledStatement(s,l,u,e):this.parseExpressionStatement(s,u)}},se.parseBreakContinueStatement=function(e,t){var n="break"===t;this.next(),this.eat(v.semi)||this.insertSemicolon()?e.label=null:this.type!==v.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if(null==e.label||i.name===e.label.name){if(null!=i.kind&&(n||"loop"===i.kind))break;if(e.label&&n)break}}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")},se.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")},se.parseDoStatement=function(e){return this.next(),this.labels.push(ae),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(v._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(v.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")},se.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(ae),this.enterScope(0),this.expect(v.parenL),this.type===v.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===v._var||this.type===v._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),(this.type===v._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&1===r.declarations.length?(this.options.ecmaVersion>=9&&(this.type===v._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r)):(t>-1&&this.unexpected(t),this.parseFor(e,r))}var s=new ie,a=this.parseExpression(!0,s);return this.type===v._in||this.options.ecmaVersion>=6&&this.isContextual("of")?(this.options.ecmaVersion>=9&&(this.type===v._in?t>-1&&this.unexpected(t):e.await=t>-1),this.toAssignable(a,!1,s),this.checkLVal(a),this.parseForIn(e,a)):(this.checkExpressionErrors(s,!0),t>-1&&this.unexpected(t),this.parseFor(e,a))},se.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,ue|(n?0:ce),!1,t)},se.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(v._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")},se.parseReturnStatement=function(e){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(v.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")},se.parseSwitchStatement=function(e){var t;this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(v.braceL),this.labels.push(oe),this.enterScope(0);for(var n=!1;this.type!==v.braceR;)if(this.type===v._case||this.type===v._default){var r=this.type===v._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(v.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")},se.parseThrowStatement=function(e){return this.next(),w.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var le=[];se.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===v._catch){var t=this.startNode();if(this.next(),this.eat(v.parenL)){t.param=this.parseBindingAtom();var n="Identifier"===t.param.type;this.enterScope(n?U:0),this.checkLVal(t.param,n?Q:Y),this.expect(v.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0);t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(v._finally)?this.parseBlock():null,e.handler||e.finalizer||this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")},se.parseVarStatement=function(e,t){return this.next(),this.parseVar(e,!1,t),this.semicolon(),this.finishNode(e,"VariableDeclaration")},se.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(ae),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")},se.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")},se.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")},se.parseLabeledStatement=function(e,t,n,r){for(var i=0,s=this.labels;i<s.length;i+=1)s[i].name===t&&this.raise(n.start,"Label '"+t+"' is already declared");for(var a=this.type.isLoop?"loop":this.type===v._switch?"switch":null,o=this.labels.length-1;o>=0;o--){var l=this.labels[o];if(l.statementStart!==e.start)break;l.statementStart=this.start,l.kind=a}return this.labels.push({name:t,kind:a,statementStart:this.start}),e.body=this.parseStatement(r?-1===r.indexOf("label")?r+"label":r:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")},se.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")},se.parseBlock=function(e,t){for(void 0===e&&(e=!0),void 0===t&&(t=this.startNode()),t.body=[],this.expect(v.braceL),e&&this.enterScope(0);!this.eat(v.braceR);){var n=this.parseStatement(null);t.body.push(n)}return e&&this.exitScope(),this.finishNode(t,"BlockStatement")},se.parseFor=function(e,t){return e.init=t,this.expect(v.semi),e.test=this.type===v.semi?null:this.parseExpression(),this.expect(v.semi),e.update=this.type===v.parenR?null:this.parseExpression(),this.expect(v.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")},se.parseForIn=function(e,t){var n=this.type===v._in;return this.next(),"VariableDeclaration"===t.type&&null!=t.declarations[0].init&&(!n||this.options.ecmaVersion<8||this.strict||"var"!==t.kind||"Identifier"!==t.declarations[0].id.type)?this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"):"AssignmentPattern"===t.type&&this.raise(t.start,"Invalid left-hand side in for-loop"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(v.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")},se.parseVar=function(e,t,n){for(e.declarations=[],e.kind=n;;){var r=this.startNode();if(this.parseVarId(r,n),this.eat(v.eq)?r.init=this.parseMaybeAssign(t):"const"!==n||this.type===v._in||this.options.ecmaVersion>=6&&this.isContextual("of")?"Identifier"===r.id.type||t&&(this.type===v._in||this.isContextual("of"))?r.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),e.declarations.push(this.finishNode(r,"VariableDeclarator")),!this.eat(v.comma))break}return e},se.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLVal(e.id,"var"===t?q:Y,!1)};var ue=1,ce=2,he=4;se.parseFunction=function(e,t,n,r){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===v.star&&t&ce&&this.unexpected(),e.generator=this.eat(v.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&ue&&(e.id=t&he&&this.type!==v.name?null:this.parseIdent(),!e.id||t&ce||this.checkLVal(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?q:Y:J));var i=this.yieldPos,s=this.awaitPos,a=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(H(e.async,e.generator)),t&ue||(e.id=this.type===v.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=a,this.finishNode(e,t&ue?"FunctionDeclaration":"FunctionExpression")},se.parseFunctionParams=function(e){this.expect(v.parenL),e.params=this.parseBindingList(v.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},se.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.startNode(),i=!1;for(r.body=[],this.expect(v.braceL);!this.eat(v.braceR);){var s=this.parseClassElement(null!==e.superClass);s&&(r.body.push(s),"MethodDefinition"===s.type&&"constructor"===s.kind&&(i&&this.raise(s.start,"Duplicate constructor in the same class"),i=!0))}return e.body=this.finishNode(r,"ClassBody"),this.strict=n,this.finishNode(e,t?"ClassDeclaration":"ClassExpression")},se.parseClassElement=function(e){var t=this;if(this.eat(v.semi))return null;var n=this.startNode(),r=function(e,r){void 0===r&&(r=!1);var i=t.start,s=t.startLoc;return!!t.eatContextual(e)&&(!(t.type===v.parenL||r&&t.canInsertSemicolon())||(n.key&&t.unexpected(),n.computed=!1,n.key=t.startNodeAt(i,s),n.key.name=e,t.finishNode(n.key,"Identifier"),!1))};n.kind="method",n.static=r("static");var i=this.eat(v.star),s=!1;i||(this.options.ecmaVersion>=8&&r("async",!0)?(s=!0,i=this.options.ecmaVersion>=9&&this.eat(v.star)):r("get")?n.kind="get":r("set")&&(n.kind="set")),n.key||this.parsePropertyName(n);var a=n.key,o=!1;return n.computed||n.static||!("Identifier"===a.type&&"constructor"===a.name||"Literal"===a.type&&"constructor"===a.value)?n.static&&"Identifier"===a.type&&"prototype"===a.name&&this.raise(a.start,"Classes may not have a static property named prototype"):("method"!==n.kind&&this.raise(a.start,"Constructor can't have get/set modifier"),i&&this.raise(a.start,"Constructor can't be a generator"),s&&this.raise(a.start,"Constructor can't be an async method"),n.kind="constructor",o=e),this.parseClassMethod(n,i,s,o),"get"===n.kind&&0!==n.value.params.length&&this.raiseRecoverable(n.value.start,"getter should have no params"),"set"===n.kind&&1!==n.value.params.length&&this.raiseRecoverable(n.value.start,"setter should have exactly one param"),"set"===n.kind&&"RestElement"===n.value.params[0].type&&this.raiseRecoverable(n.value.params[0].start,"Setter cannot use rest params"),n},se.parseClassMethod=function(e,t,n,r){return e.value=this.parseMethod(t,n,r),this.finishNode(e,"MethodDefinition")},se.parseClassId=function(e,t){this.type===v.name?(e.id=this.parseIdent(),t&&this.checkLVal(e.id,Y,!1)):(!0===t&&this.unexpected(),e.id=null)},se.parseClassSuper=function(e){e.superClass=this.eat(v._extends)?this.parseExprSubscripts():null},se.parseExport=function(e,t){if(this.next(),this.eat(v.star))return this.expectContextual("from"),this.type!==v.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration");if(this.eat(v._default)){var n;if(this.checkExport(t,"default",this.lastTokStart),this.type===v._function||(n=this.isAsyncFunction())){var r=this.startNode();this.next(),n&&this.next(),e.declaration=this.parseFunction(r,ue|he,!1,n)}else if(this.type===v._class){var i=this.startNode();e.declaration=this.parseClass(i,"nullableID")}else e.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(e,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())e.declaration=this.parseStatement(null),"VariableDeclaration"===e.declaration.type?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id.name,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==v.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var s=0,a=e.specifiers;s<a.length;s+=1){var o=a[s];this.checkUnreserved(o.local),this.checkLocalExport(o.local)}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")},se.checkExport=function(e,t,n){e&&(C(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)},se.checkPatternExport=function(e,t){var n=t.type;if("Identifier"===n)this.checkExport(e,t.name,t.start);else if("ObjectPattern"===n)for(var r=0,i=t.properties;r<i.length;r+=1){var s=i[r];this.checkPatternExport(e,s)}else if("ArrayPattern"===n)for(var a=0,o=t.elements;a<o.length;a+=1){var l=o[a];l&&this.checkPatternExport(e,l)}else"Property"===n?this.checkPatternExport(e,t.value):"AssignmentPattern"===n?this.checkPatternExport(e,t.left):"RestElement"===n?this.checkPatternExport(e,t.argument):"ParenthesizedExpression"===n&&this.checkPatternExport(e,t.expression)},se.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}},se.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},se.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(v.braceL);!this.eat(v.braceR);){if(n)n=!1;else if(this.expect(v.comma),this.afterTrailingComma(v.braceR))break;var r=this.startNode();r.local=this.parseIdent(!0),r.exported=this.eatContextual("as")?this.parseIdent(!0):r.local,this.checkExport(e,r.exported.name,r.exported.start),t.push(this.finishNode(r,"ExportSpecifier"))}return t},se.parseImport=function(e){return this.next(),this.type===v.string?(e.specifiers=le,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===v.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")},se.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===v.name){var n=this.startNode();if(n.local=this.parseIdent(),this.checkLVal(n.local,Y),e.push(this.finishNode(n,"ImportDefaultSpecifier")),!this.eat(v.comma))return e}if(this.type===v.star){var r=this.startNode();return this.next(),this.expectContextual("as"),r.local=this.parseIdent(),this.checkLVal(r.local,Y),e.push(this.finishNode(r,"ImportNamespaceSpecifier")),e}for(this.expect(v.braceL);!this.eat(v.braceR);){if(t)t=!1;else if(this.expect(v.comma),this.afterTrailingComma(v.braceR))break;var i=this.startNode();i.imported=this.parseIdent(!0),this.eatContextual("as")?i.local=this.parseIdent():(this.checkUnreserved(i.imported),i.local=i.imported),this.checkLVal(i.local,Y),e.push(this.finishNode(i,"ImportSpecifier"))}return e},se.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)},se.isDirectiveCandidate=function(e){return"ExpressionStatement"===e.type&&"Literal"===e.expression.type&&"string"===typeof e.expression.value&&('"'===this.input[e.start]||"'"===this.input[e.start])};var pe=ee.prototype;pe.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&"await"===e.name&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.toAssignable(s,t),"RestElement"!==s.type||"ArrayPattern"!==s.argument.type&&"ObjectPattern"!==s.argument.type||this.raise(s.argument.start,"Unexpected token")}break;case"Property":"init"!==e.kind&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),"AssignmentPattern"===e.argument.type&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":"="!==e.operator&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);case"AssignmentPattern":break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e},pe.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var s=e[n-1];6===this.options.ecmaVersion&&t&&s&&"RestElement"===s.type&&"Identifier"!==s.argument.type&&this.unexpected(s.argument.start)}return e},pe.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")},pe.parseRestBinding=function(){var e=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==v.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")},pe.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case v.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(v.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case v.braceL:return this.parseObj(!0)}return this.parseIdent()},pe.parseBindingList=function(e,t,n){for(var r=[],i=!0;!this.eat(e);)if(i?i=!1:this.expect(v.comma),t&&this.type===v.comma)r.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===v.ellipsis){var s=this.parseRestBinding();this.parseBindingListItem(s),r.push(s),this.type===v.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}var a=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(a),r.push(a)}return r},pe.parseBindingListItem=function(e){return e},pe.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(v.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")},pe.checkLVal=function(e,t,n){switch(void 0===t&&(t=X),e.type){case"Identifier":t===Y&&"let"===e.name&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(t?"Binding ":"Assigning to ")+e.name+" in strict mode"),n&&(C(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==X&&t!==Z&&this.declareName(e.name,t,e.start);break;case"MemberExpression":t&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.checkLVal(s,t,n)}break;case"Property":this.checkLVal(e.value,t,n);break;case"ArrayPattern":for(var a=0,o=e.elements;a<o.length;a+=1){var l=o[a];l&&this.checkLVal(l,t,n)}break;case"AssignmentPattern":this.checkLVal(e.left,t,n);break;case"RestElement":this.checkLVal(e.argument,t,n);break;case"ParenthesizedExpression":this.checkLVal(e.expression,t,n);break;default:this.raise(e.start,(t?"Binding":"Assigning to")+" rvalue")}};var de=ee.prototype;de.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&"SpreadElement"===e.type)&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r,i=e.key;switch(i.type){case"Identifier":r=i.name;break;case"Literal":r=String(i.value);break;default:return}var s=e.kind;if(this.options.ecmaVersion>=6)"__proto__"===r&&"init"===s&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=i.start):this.raiseRecoverable(i.start,"Redefinition of __proto__ property")),t.proto=!0);else{var a=t[r="$"+r];a?("init"===s?this.strict&&a.init||a.get||a.set:a.init||a[s])&&this.raiseRecoverable(i.start,"Redefinition of property"):a=t[r]={init:!1,get:!1,set:!1},a[s]=!0}}},de.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===v.comma){var s=this.startNodeAt(n,r);for(s.expressions=[i];this.eat(v.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return i},de.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,i=-1,s=-1;t?(i=t.parenthesizedAssign,s=t.trailingComma,t.parenthesizedAssign=t.trailingComma=-1):(t=new ie,r=!0);var a=this.start,o=this.startLoc;this.type!==v.parenL&&this.type!==v.name||(this.potentialArrowAt=this.start);var l=this.parseMaybeConditional(e,t);if(n&&(l=n.call(this,l,a,o)),this.type.isAssign){var u=this.startNodeAt(a,o);return u.operator=this.value,u.left=this.type===v.eq?this.toAssignable(l,!1,t):l,r||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=u.left.start&&(t.shorthandAssign=-1),this.checkLVal(l),this.next(),u.right=this.parseMaybeAssign(e),this.finishNode(u,"AssignmentExpression")}return r&&this.checkExpressionErrors(t,!0),i>-1&&(t.parenthesizedAssign=i),s>-1&&(t.trailingComma=s),l},de.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(v.question)){var s=this.startNodeAt(n,r);return s.test=i,s.consequent=this.parseMaybeAssign(),this.expect(v.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return i},de.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1);return this.checkExpressionErrors(t)||i.start===n&&"ArrowFunctionExpression"===i.type?i:this.parseExprOp(i,n,r,-1,e)},de.parseExprOp=function(e,t,n,r,i){var s=this.type.binop;if(null!=s&&(!i||this.type!==v._in)&&s>r){var a=this.type===v.logicalOR||this.type===v.logicalAND,o=this.value;this.next();var l=this.start,u=this.startLoc,c=this.parseExprOp(this.parseMaybeUnary(null,!1),l,u,s,i),h=this.buildBinary(t,n,e,c,o,a);return this.parseExprOp(h,t,n,r,i)}return e},de.buildBinary=function(e,t,n,r,i,s){var a=this.startNodeAt(e,t);return a.left=n,a.operator=i,a.right=r,this.finishNode(a,s?"LogicalExpression":"BinaryExpression")},de.parseMaybeUnary=function(e,t){var n,r=this.start,i=this.startLoc;if(this.isContextual("await")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction))n=this.parseAwait(),t=!0;else if(this.type.prefix){var s=this.startNode(),a=this.type===v.incDec;s.operator=this.value,s.prefix=!0,this.next(),s.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(e,!0),a?this.checkLVal(s.argument):this.strict&&"delete"===s.operator&&"Identifier"===s.argument.type?this.raiseRecoverable(s.start,"Deleting local variable in strict mode"):t=!0,n=this.finishNode(s,a?"UpdateExpression":"UnaryExpression")}else{if(n=this.parseExprSubscripts(e),this.checkExpressionErrors(e))return n;for(;this.type.postfix&&!this.canInsertSemicolon();){var o=this.startNodeAt(r,i);o.operator=this.value,o.prefix=!1,o.argument=n,this.checkLVal(n),this.next(),n=this.finishNode(o,"UpdateExpression")}}return!t&&this.eat(v.starstar)?this.buildBinary(r,i,n,this.parseMaybeUnary(null,!1),"**",!1):n},de.parseExprSubscripts=function(e){var t=this.start,n=this.startLoc,r=this.parseExprAtom(e);if("ArrowFunctionExpression"===r.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd))return r;var i=this.parseSubscripts(r,t,n);return e&&"MemberExpression"===i.type&&(e.parenthesizedAssign>=i.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=i.start&&(e.parenthesizedBind=-1)),i},de.parseSubscripts=function(e,t,n,r){for(var i=this.options.ecmaVersion>=8&&"Identifier"===e.type&&"async"===e.name&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&"async"===this.input.slice(e.start,e.end);;){var s=this.parseSubscript(e,t,n,r,i);if(s===e||"ArrowFunctionExpression"===s.type)return s;e=s}},de.parseSubscript=function(e,t,n,r,i){var s=this.eat(v.bracketL);if(s||this.eat(v.dot)){var a=this.startNodeAt(t,n);a.object=e,a.property=s?this.parseExpression():this.parseIdent("never"!==this.options.allowReserved),a.computed=!!s,s&&this.expect(v.bracketR),e=this.finishNode(a,"MemberExpression")}else if(!r&&this.eat(v.parenL)){var o=new ie,l=this.yieldPos,u=this.awaitPos,c=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var h=this.parseExprList(v.parenR,this.options.ecmaVersion>=8,!1,o);if(i&&!this.canInsertSemicolon()&&this.eat(v.arrow))return this.checkPatternErrors(o,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=l,this.awaitPos=u,this.awaitIdentPos=c,this.parseArrowExpression(this.startNodeAt(t,n),h,!0);this.checkExpressionErrors(o,!0),this.yieldPos=l||this.yieldPos,this.awaitPos=u||this.awaitPos,this.awaitIdentPos=c||this.awaitIdentPos;var p=this.startNodeAt(t,n);p.callee=e,p.arguments=h,e=this.finishNode(p,"CallExpression")}else if(this.type===v.backQuote){var d=this.startNodeAt(t,n);d.tag=e,d.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(d,"TaggedTemplateExpression")}return e},de.parseExprAtom=function(e){this.type===v.slash&&this.readRegexp();var t,n=this.potentialArrowAt===this.start;switch(this.type){case v._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),t=this.startNode(),this.next(),this.type!==v.parenL||this.allowDirectSuper||this.raise(t.start,"super() call outside constructor of a subclass"),this.type!==v.dot&&this.type!==v.bracketL&&this.type!==v.parenL&&this.unexpected(),this.finishNode(t,"Super");case v._this:return t=this.startNode(),this.next(),this.finishNode(t,"ThisExpression");case v.name:var r=this.start,i=this.startLoc,s=this.containsEsc,a=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!s&&"async"===a.name&&!this.canInsertSemicolon()&&this.eat(v._function))return this.parseFunction(this.startNodeAt(r,i),0,!1,!0);if(n&&!this.canInsertSemicolon()){if(this.eat(v.arrow))return this.parseArrowExpression(this.startNodeAt(r,i),[a],!1);if(this.options.ecmaVersion>=8&&"async"===a.name&&this.type===v.name&&!s)return a=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(v.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(r,i),[a],!0)}return a;case v.regexp:var o=this.value;return(t=this.parseLiteral(o.value)).regex={pattern:o.pattern,flags:o.flags},t;case v.num:case v.string:return this.parseLiteral(this.value);case v._null:case v._true:case v._false:return(t=this.startNode()).value=this.type===v._null?null:this.type===v._true,t.raw=this.type.keyword,this.next(),this.finishNode(t,"Literal");case v.parenL:var l=this.start,u=this.parseParenAndDistinguishExpression(n);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(u)&&(e.parenthesizedAssign=l),e.parenthesizedBind<0&&(e.parenthesizedBind=l)),u;case v.bracketL:return t=this.startNode(),this.next(),t.elements=this.parseExprList(v.bracketR,!0,!0,e),this.finishNode(t,"ArrayExpression");case v.braceL:return this.parseObj(!1,e);case v._function:return t=this.startNode(),this.next(),this.parseFunction(t,0);case v._class:return this.parseClass(this.startNode(),!1);case v._new:return this.parseNew();case v.backQuote:return this.parseTemplate();case v._import:return this.options.ecmaVersion>=11?this.parseExprImport():this.unexpected();default:this.unexpected()}},de.parseExprImport=function(){var e=this.startNode();if(this.next(),this.type===v.parenL)return this.parseDynamicImport(e);this.unexpected()},de.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(v.parenR)){var t=this.start;this.eat(v.comma)&&this.eat(v.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")},de.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),110===t.raw.charCodeAt(t.raw.length-1)&&(t.bigint=t.raw.slice(0,-1)),this.next(),this.finishNode(t,"Literal")},de.parseParenExpression=function(){this.expect(v.parenL);var e=this.parseExpression();return this.expect(v.parenR),e},de.parseParenAndDistinguishExpression=function(e){var t,n=this.start,r=this.startLoc,i=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var s,a=this.start,o=this.startLoc,l=[],u=!0,c=!1,h=new ie,p=this.yieldPos,d=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==v.parenR;){if(u?u=!1:this.expect(v.comma),i&&this.afterTrailingComma(v.parenR,!0)){c=!0;break}if(this.type===v.ellipsis){s=this.start,l.push(this.parseParenItem(this.parseRestBinding())),this.type===v.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}l.push(this.parseMaybeAssign(!1,h,this.parseParenItem))}var f=this.start,m=this.startLoc;if(this.expect(v.parenR),e&&!this.canInsertSemicolon()&&this.eat(v.arrow))return this.checkPatternErrors(h,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=p,this.awaitPos=d,this.parseParenArrowList(n,r,l);l.length&&!c||this.unexpected(this.lastTokStart),s&&this.unexpected(s),this.checkExpressionErrors(h,!0),this.yieldPos=p||this.yieldPos,this.awaitPos=d||this.awaitPos,l.length>1?((t=this.startNodeAt(a,o)).expressions=l,this.finishNodeAt(t,"SequenceExpression",f,m)):t=l[0]}else t=this.parseParenExpression();if(this.options.preserveParens){var g=this.startNodeAt(n,r);return g.expression=t,this.finishNode(g,"ParenthesizedExpression")}return t},de.parseParenItem=function(e){return e},de.parseParenArrowList=function(e,t,n){return this.parseArrowExpression(this.startNodeAt(e,t),n)};var fe=[];de.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode(),t=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(v.dot)){e.meta=t;var n=this.containsEsc;return e.property=this.parseIdent(!0),("target"!==e.property.name||n)&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is new.target"),this.inNonArrowFunction()||this.raiseRecoverable(e.start,"new.target can only be used in functions"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc,s=this.type===v._import;return e.callee=this.parseSubscripts(this.parseExprAtom(),r,i,!0),s&&"ImportExpression"===e.callee.type&&this.raise(r,"Cannot use new with import()"),this.eat(v.parenL)?e.arguments=this.parseExprList(v.parenR,this.options.ecmaVersion>=8,!1):e.arguments=fe,this.finishNode(e,"NewExpression")},de.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===v.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),n.tail=this.type===v.backQuote,this.finishNode(n,"TemplateElement")},de.parseTemplate=function(e){void 0===e&&(e={});var t=e.isTagged;void 0===t&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===v.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(v.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(v.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")},de.isAsyncProp=function(e){return!e.computed&&"Identifier"===e.key.type&&"async"===e.key.name&&(this.type===v.name||this.type===v.num||this.type===v.string||this.type===v.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===v.star)&&!w.test(this.input.slice(this.lastTokEnd,this.start))},de.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(v.braceR);){if(r)r=!1;else if(this.expect(v.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(v.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,i,t),n.properties.push(s)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")},de.parseProperty=function(e,t){var n,r,i,s,a=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(v.ellipsis))return e?(a.argument=this.parseIdent(!1),this.type===v.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(a,"RestElement")):(this.type===v.parenL&&t&&(t.parenthesizedAssign<0&&(t.parenthesizedAssign=this.start),t.parenthesizedBind<0&&(t.parenthesizedBind=this.start)),a.argument=this.parseMaybeAssign(!1,t),this.type===v.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(a,"SpreadElement"));this.options.ecmaVersion>=6&&(a.method=!1,a.shorthand=!1,(e||t)&&(i=this.start,s=this.startLoc),e||(n=this.eat(v.star)));var o=this.containsEsc;return this.parsePropertyName(a),!e&&!o&&this.options.ecmaVersion>=8&&!n&&this.isAsyncProp(a)?(r=!0,n=this.options.ecmaVersion>=9&&this.eat(v.star),this.parsePropertyName(a,t)):r=!1,this.parsePropertyValue(a,e,n,r,i,s,t,o),this.finishNode(a,"Property")},de.parsePropertyValue=function(e,t,n,r,i,s,a,o){if((n||r)&&this.type===v.colon&&this.unexpected(),this.eat(v.colon))e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,a),e.kind="init";else if(this.options.ecmaVersion>=6&&this.type===v.parenL)t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r);else if(t||o||!(this.options.ecmaVersion>=5)||e.computed||"Identifier"!==e.key.type||"get"!==e.key.name&&"set"!==e.key.name||this.type===v.comma||this.type===v.braceR)this.options.ecmaVersion>=6&&!e.computed&&"Identifier"===e.key.type?((n||r)&&this.unexpected(),this.checkUnreserved(e.key),"await"!==e.key.name||this.awaitIdentPos||(this.awaitIdentPos=i),e.kind="init",t?e.value=this.parseMaybeDefault(i,s,e.key):this.type===v.eq&&a?(a.shorthandAssign<0&&(a.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,s,e.key)):e.value=e.key,e.shorthand=!0):this.unexpected();else{(n||r)&&this.unexpected(),e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var l="get"===e.kind?0:1;if(e.value.params.length!==l){var u=e.value.start;"get"===e.kind?this.raiseRecoverable(u,"getter should have no params"):this.raiseRecoverable(u,"setter should have exactly one param")}else"set"===e.kind&&"RestElement"===e.value.params[0].type&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")}},de.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(v.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(v.bracketR),e.key;e.computed=!1}return e.key=this.type===v.num||this.type===v.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)},de.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)},de.parseMethod=function(e,t,n){var r=this.startNode(),i=this.yieldPos,s=this.awaitPos,a=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(H(t,r.generator)|G|(n?W:0)),this.expect(v.parenL),r.params=this.parseBindingList(v.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=a,this.finishNode(r,"FunctionExpression")},de.parseArrowExpression=function(e,t,n){var r=this.yieldPos,i=this.awaitPos,s=this.awaitIdentPos;return this.enterScope(H(n,!1)|B),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1),this.yieldPos=r,this.awaitPos=i,this.awaitIdentPos=s,this.finishNode(e,"ArrowFunctionExpression")},de.parseFunctionBody=function(e,t,n){var r=t&&this.type!==v.braceL,i=this.strict,s=!1;if(r)e.body=this.parseMaybeAssign(),e.expression=!0,this.checkParams(e,!1);else{var a=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);i&&!a||(s=this.strictDirective(this.end))&&a&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list");var o=this.labels;this.labels=[],s&&(this.strict=!0),this.checkParams(e,!i&&!s&&!t&&!n&&this.isSimpleParamList(e.params)),e.body=this.parseBlock(!1),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=o}this.exitScope(),this.strict&&e.id&&this.checkLVal(e.id,Z),this.strict=i},de.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1)if("Identifier"!==n[t].type)return!1;return!0},de.checkParams=function(e,t){for(var n={},r=0,i=e.params;r<i.length;r+=1){var s=i[r];this.checkLVal(s,q,t?null:n)}},de.parseExprList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(v.comma),t&&this.afterTrailingComma(e))break;var a=void 0;n&&this.type===v.comma?a=null:this.type===v.ellipsis?(a=this.parseSpread(r),r&&this.type===v.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):a=this.parseMaybeAssign(!1,r),i.push(a)}return i},de.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;this.inGenerator&&"yield"===r&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&"await"===r&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),this.options.ecmaVersion<6&&-1!==this.input.slice(t,n).indexOf("\\")||(this.strict?this.reservedWordsStrict:this.reservedWords).test(r)&&(this.inAsync||"await"!==r||this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))},de.parseIdent=function(e,t){var n=this.startNode();return this.type===v.name?n.name=this.value:this.type.keyword?(n.name=this.type.keyword,"class"!==n.name&&"function"!==n.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected(),this.next(!!e),this.finishNode(n,"Identifier"),e||(this.checkUnreserved(n),"await"!==n.name||this.awaitIdentPos||(this.awaitIdentPos=n.start)),n},de.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===v.semi||this.canInsertSemicolon()||this.type!==v.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(v.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")},de.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var e=this.startNode();return this.next(),e.argument=this.parseMaybeUnary(null,!1),this.finishNode(e,"AwaitExpression")};var me=ee.prototype;me.raise=function(e,t){var n=D(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r},me.raiseRecoverable=me.raise,me.curPosition=function(){if(this.options.locations)return new O(this.curLine,this.pos-this.lineStart)};var ge=ee.prototype,ye=function(e){this.flags=e,this.var=[],this.lexical=[],this.functions=[]};ge.enterScope=function(e){this.scopeStack.push(new ye(e))},ge.exitScope=function(){this.scopeStack.pop()},ge.treatFunctionsAsVarInScope=function(e){return e.flags&F||!this.inModule&&e.flags&N},ge.declareName=function(e,t,n){var r=!1;if(t===Y){var i=this.currentScope();r=i.lexical.indexOf(e)>-1||i.functions.indexOf(e)>-1||i.var.indexOf(e)>-1,i.lexical.push(e),this.inModule&&i.flags&N&&delete this.undefinedExports[e]}else if(t===Q)this.currentScope().lexical.push(e);else if(t===J){var s=this.currentScope();r=this.treatFunctionsAsVar?s.lexical.indexOf(e)>-1:s.lexical.indexOf(e)>-1||s.var.indexOf(e)>-1,s.functions.push(e)}else for(var a=this.scopeStack.length-1;a>=0;--a){var o=this.scopeStack[a];if(o.lexical.indexOf(e)>-1&&!(o.flags&U&&o.lexical[0]===e)||!this.treatFunctionsAsVarInScope(o)&&o.functions.indexOf(e)>-1){r=!0;break}if(o.var.push(e),this.inModule&&o.flags&N&&delete this.undefinedExports[e],o.flags&V)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")},ge.checkLocalExport=function(e){-1===this.scopeStack[0].lexical.indexOf(e.name)&&-1===this.scopeStack[0].var.indexOf(e.name)&&(this.undefinedExports[e.name]=e)},ge.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},ge.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&V)return t}},ge.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&V&&!(t.flags&B))return t}};var be=function(e,t,n){this.type="",this.start=t,this.end=0,e.options.locations&&(this.loc=new R(e,n)),e.options.directSourceFile&&(this.sourceFile=e.options.directSourceFile),e.options.ranges&&(this.range=[t,0])},xe=ee.prototype;function ve(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}xe.startNode=function(){return new be(this,this.start,this.startLoc)},xe.startNodeAt=function(e,t){return new be(this,e,t)},xe.finishNode=function(e,t){return ve.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)},xe.finishNodeAt=function(e,t,n,r){return ve.call(this,e,t,n,r)};var we=function(e,t,n,r,i){this.token=e,this.isExpr=!!t,this.preserveSpace=!!n,this.override=r,this.generator=!!i},Se={b_stat:new we("{",!1),b_expr:new we("{",!0),b_tmpl:new we("${",!1),p_stat:new we("(",!1),p_expr:new we("(",!0),q_tmpl:new we("`",!0,!0,(function(e){return e.tryReadTemplateToken()})),f_stat:new we("function",!1),f_expr:new we("function",!0),f_expr_gen:new we("function",!0,!1,null,!0),f_gen:new we("function",!1,!1,null,!0)},ke=ee.prototype;ke.initialContext=function(){return[Se.b_stat]},ke.braceIsBlock=function(e){var t=this.curContext();return t===Se.f_expr||t===Se.f_stat||(e!==v.colon||t!==Se.b_stat&&t!==Se.b_expr?e===v._return||e===v.name&&this.exprAllowed?w.test(this.input.slice(this.lastTokEnd,this.start)):e===v._else||e===v.semi||e===v.eof||e===v.parenR||e===v.arrow||(e===v.braceL?t===Se.b_stat:e!==v._var&&e!==v._const&&e!==v.name&&!this.exprAllowed):!t.isExpr)},ke.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if("function"===t.token)return t.generator}return!1},ke.updateContext=function(e){var t,n=this.type;n.keyword&&e===v.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr},v.parenR.updateContext=v.braceR.updateContext=function(){if(1!==this.context.length){var e=this.context.pop();e===Se.b_stat&&"function"===this.curContext().token&&(e=this.context.pop()),this.exprAllowed=!e.isExpr}else this.exprAllowed=!0},v.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?Se.b_stat:Se.b_expr),this.exprAllowed=!0},v.dollarBraceL.updateContext=function(){this.context.push(Se.b_tmpl),this.exprAllowed=!0},v.parenL.updateContext=function(e){var t=e===v._if||e===v._for||e===v._with||e===v._while;this.context.push(t?Se.p_stat:Se.p_expr),this.exprAllowed=!0},v.incDec.updateContext=function(){},v._function.updateContext=v._class.updateContext=function(e){!e.beforeExpr||e===v.semi||e===v._else||e===v._return&&w.test(this.input.slice(this.lastTokEnd,this.start))||(e===v.colon||e===v.braceL)&&this.curContext()===Se.b_stat?this.context.push(Se.f_stat):this.context.push(Se.f_expr),this.exprAllowed=!1},v.backQuote.updateContext=function(){this.curContext()===Se.q_tmpl?this.context.pop():this.context.push(Se.q_tmpl),this.exprAllowed=!1},v.star.updateContext=function(e){if(e===v._function){var t=this.context.length-1;this.context[t]===Se.f_expr?this.context[t]=Se.f_expr_gen:this.context[t]=Se.f_gen}this.exprAllowed=!0},v.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==v.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var Te="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",Ae=Te+" Extended_Pictographic",Ee={9:Te,10:Ae,11:Ae},_e="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",Le="Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",Ce=Le+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",Ie={9:Le,10:Ce,11:Ce+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho"},$e={};function Oe(e){var t=$e[e]={binary:$(Ee[e]+" "+_e),nonBinary:{General_Category:$(_e),Script:$(Ie[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}Oe(9),Oe(10),Oe(11);var Re=ee.prototype,De=function(e){this.parser=e,this.validFlags="gim"+(e.options.ecmaVersion>=6?"uy":"")+(e.options.ecmaVersion>=9?"s":""),this.unicodeProperties=$e[e.options.ecmaVersion>=11?11:e.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};function ze(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}function Pe(e){return 36===e||e>=40&&e<=43||46===e||63===e||e>=91&&e<=94||e>=123&&e<=125}function Me(e){return p(e,!0)||36===e||95===e}function Ne(e){return d(e,!0)||36===e||95===e||8204===e||8205===e}function Fe(e){return e>=65&&e<=90||e>=97&&e<=122}function Ve(e){return e>=0&&e<=1114111}function Ke(e){return 100===e||68===e||115===e||83===e||119===e||87===e}function je(e){return Fe(e)||95===e}function Be(e){return je(e)||Ue(e)}function Ue(e){return e>=48&&e<=57}function Ge(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function We(e){return e>=65&&e<=70?e-65+10:e>=97&&e<=102?e-97+10:e-48}function He(e){return e>=48&&e<=55}De.prototype.reset=function(e,t,n){var r=-1!==n.indexOf("u");this.start=0|e,this.source=t+"",this.flags=n,this.switchU=r&&this.parser.options.ecmaVersion>=6,this.switchN=r&&this.parser.options.ecmaVersion>=9},De.prototype.raise=function(e){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+e)},De.prototype.at=function(e){var t=this.source,n=t.length;if(e>=n)return-1;var r=t.charCodeAt(e);if(!this.switchU||r<=55295||r>=57344||e+1>=n)return r;var i=t.charCodeAt(e+1);return i>=56320&&i<=57343?(r<<10)+i-56613888:r},De.prototype.nextIndex=function(e){var t=this.source,n=t.length;if(e>=n)return n;var r,i=t.charCodeAt(e);return!this.switchU||i<=55295||i>=57344||e+1>=n||(r=t.charCodeAt(e+1))<56320||r>57343?e+1:e+2},De.prototype.current=function(){return this.at(this.pos)},De.prototype.lookahead=function(){return this.at(this.nextIndex(this.pos))},De.prototype.advance=function(){this.pos=this.nextIndex(this.pos)},De.prototype.eat=function(e){return this.current()===e&&(this.advance(),!0)},Re.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=0;r<n.length;r++){var i=n.charAt(r);-1===t.indexOf(i)&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(i,r+1)>-1&&this.raise(e.start,"Duplicate regular expression flag")}},Re.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))},Re.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];-1===e.groupNames.indexOf(r)&&e.raise("Invalid named capture referenced")}},Re.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")},Re.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););},Re.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):!!(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))&&(this.regexp_eatQuantifier(e),!0)},Re.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1},Re.regexp_eatQuantifier=function(e,t){return void 0===t&&(t=!1),!!this.regexp_eatQuantifierPrefix(e,t)&&(e.eat(63),!0)},Re.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)},Re.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return-1!==i&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1},Re.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)},Re.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1},Re.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1},Re.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):63===e.current()&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1},Re.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)},Re.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1},Re.regexp_eatSyntaxCharacter=function(e){var t=e.current();return!!Pe(t)&&(e.lastIntValue=t,e.advance(),!0)},Re.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;-1!==(n=e.current())&&!Pe(n);)e.advance();return e.pos!==t},Re.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return!(-1===t||36===t||t>=40&&t<=43||46===t||63===t||91===t||94===t||124===t)&&(e.advance(),!0)},Re.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e))return-1!==e.groupNames.indexOf(e.lastStringValue)&&e.raise("Duplicate capture group name"),void e.groupNames.push(e.lastStringValue);e.raise("Invalid group")}},Re.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1},Re.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=ze(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=ze(e.lastIntValue);return!0}return!1},Re.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=e.current();return e.advance(),92===n&&this.regexp_eatRegExpUnicodeEscapeSequence(e)&&(n=e.lastIntValue),Me(n)?(e.lastIntValue=n,!0):(e.pos=t,!1)},Re.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=e.current();return e.advance(),92===n&&this.regexp_eatRegExpUnicodeEscapeSequence(e)&&(n=e.lastIntValue),Ne(n)?(e.lastIntValue=n,!0):(e.pos=t,!1)},Re.regexp_eatAtomEscape=function(e){return!!(this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e))||(e.switchU&&(99===e.current()&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)},Re.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1},Re.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1},Re.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)},Re.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1},Re.regexp_eatZero=function(e){return 48===e.current()&&!Ue(e.lookahead())&&(e.lastIntValue=0,e.advance(),!0)},Re.regexp_eatControlEscape=function(e){var t=e.current();return 116===t?(e.lastIntValue=9,e.advance(),!0):110===t?(e.lastIntValue=10,e.advance(),!0):118===t?(e.lastIntValue=11,e.advance(),!0):102===t?(e.lastIntValue=12,e.advance(),!0):114===t&&(e.lastIntValue=13,e.advance(),!0)},Re.regexp_eatControlLetter=function(e){var t=e.current();return!!Fe(t)&&(e.lastIntValue=t%32,e.advance(),!0)},Re.regexp_eatRegExpUnicodeEscapeSequence=function(e){var t=e.pos;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var n=e.lastIntValue;if(e.switchU&&n>=55296&&n<=56319){var r=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var i=e.lastIntValue;if(i>=56320&&i<=57343)return e.lastIntValue=1024*(n-55296)+(i-56320)+65536,!0}e.pos=r,e.lastIntValue=n}return!0}if(e.switchU&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&Ve(e.lastIntValue))return!0;e.switchU&&e.raise("Invalid unicode escape"),e.pos=t}return!1},Re.regexp_eatIdentityEscape=function(e){if(e.switchU)return!!this.regexp_eatSyntaxCharacter(e)||!!e.eat(47)&&(e.lastIntValue=47,!0);var t=e.current();return!(99===t||e.switchN&&107===t)&&(e.lastIntValue=t,e.advance(),!0)},Re.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do{e.lastIntValue=10*e.lastIntValue+(t-48),e.advance()}while((t=e.current())>=48&&t<=57);return!0}return!1},Re.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(Ke(t))return e.lastIntValue=-1,e.advance(),!0;if(e.switchU&&this.options.ecmaVersion>=9&&(80===t||112===t)){if(e.lastIntValue=-1,e.advance(),e.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(e)&&e.eat(125))return!0;e.raise("Invalid property name")}return!1},Re.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),!0}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i),!0}return!1},Re.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){C(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")},Re.regexp_validateUnicodePropertyNameOrValue=function(e,t){e.unicodeProperties.binary.test(t)||e.raise("Invalid property name")},Re.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";je(t=e.current());)e.lastStringValue+=ze(t),e.advance();return""!==e.lastStringValue},Re.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";Be(t=e.current());)e.lastStringValue+=ze(t),e.advance();return""!==e.lastStringValue},Re.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)},Re.regexp_eatCharacterClass=function(e){if(e.eat(91)){if(e.eat(94),this.regexp_classRanges(e),e.eat(93))return!0;e.raise("Unterminated character class")}return!1},Re.regexp_classRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;!e.switchU||-1!==t&&-1!==n||e.raise("Invalid character class"),-1!==t&&-1!==n&&t>n&&e.raise("Range out of order in character class")}}},Re.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(99===n||He(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return 93!==r&&(e.lastIntValue=r,e.advance(),!0)},Re.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)},Re.regexp_eatClassControlLetter=function(e){var t=e.current();return!(!Ue(t)&&95!==t)&&(e.lastIntValue=t%32,e.advance(),!0)},Re.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1},Re.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;Ue(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t},Re.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;Ge(n=e.current());)e.lastIntValue=16*e.lastIntValue+We(n),e.advance();return e.pos!==t},Re.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=64*t+8*n+e.lastIntValue:e.lastIntValue=8*t+n}else e.lastIntValue=t;return!0}return!1},Re.regexp_eatOctalDigit=function(e){var t=e.current();return He(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)},Re.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!Ge(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+We(i),e.advance()}return!0};var Xe=function(e){this.type=e.type,this.value=e.value,this.start=e.start,this.end=e.end,e.options.locations&&(this.loc=new R(e,e.startLoc,e.endLoc)),e.options.ranges&&(this.range=[e.start,e.end])},qe=ee.prototype;function Ye(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}qe.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new Xe(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},qe.getToken=function(){return this.next(),new Xe(this)},"undefined"!==typeof Symbol&&(qe[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===v.eof,value:t}}}}),qe.curContext=function(){return this.context[this.context.length-1]},qe.nextToken=function(){var e=this.curContext();return e&&e.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(v.eof):e.override?e.override(this):void this.readToken(this.fullCharCodeAtPos())},qe.readToken=function(e){return p(e,this.options.ecmaVersion>=6)||92===e?this.readWord():this.getTokenFromCode(e)},qe.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);return e<=55295||e>=57344?e:(e<<10)+this.input.charCodeAt(this.pos+1)-56613888},qe.skipBlockComment=function(){var e,t=this.options.onComment&&this.curPosition(),n=this.pos,r=this.input.indexOf("*/",this.pos+=2);if(-1===r&&this.raise(this.pos-2,"Unterminated comment"),this.pos=r+2,this.options.locations)for(S.lastIndex=n;(e=S.exec(this.input))&&e.index<this.pos;)++this.curLine,this.lineStart=e.index+e[0].length;this.options.onComment&&this.options.onComment(!0,this.input.slice(n+2,r),n,this.pos,t,this.curPosition())},qe.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!k(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())},qe.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(!(e>8&&e<14||e>=5760&&T.test(String.fromCharCode(e))))break e;++this.pos}}},qe.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)},qe.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===e&&46===t?(this.pos+=3,this.finishToken(v.ellipsis)):(++this.pos,this.finishToken(v.dot))},qe.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===e?this.finishOp(v.assign,2):this.finishOp(v.slash,1)},qe.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=42===e?v.star:v.modulo;return this.options.ecmaVersion>=7&&42===e&&42===t&&(++n,r=v.starstar,t=this.input.charCodeAt(this.pos+2)),61===t?this.finishOp(v.assign,n+1):this.finishOp(r,n)},qe.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?this.finishOp(124===e?v.logicalOR:v.logicalAND,2):61===t?this.finishOp(v.assign,2):this.finishOp(124===e?v.bitwiseOR:v.bitwiseAND,1)},qe.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(v.assign,2):this.finishOp(v.bitwiseXOR,1)},qe.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?45!==t||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!w.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(v.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===t?this.finishOp(v.assign,2):this.finishOp(v.plusMin,1)},qe.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=62===e&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+n)?this.finishOp(v.assign,n+1):this.finishOp(v.bitShift,n)):33!==t||60!==e||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===t&&(n=2),this.finishOp(v.relational,n)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},qe.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return 61===t?this.finishOp(v.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===e&&62===t&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(v.arrow)):this.finishOp(61===e?v.eq:v.prefix,1)},qe.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(v.parenL);case 41:return++this.pos,this.finishToken(v.parenR);case 59:return++this.pos,this.finishToken(v.semi);case 44:return++this.pos,this.finishToken(v.comma);case 91:return++this.pos,this.finishToken(v.bracketL);case 93:return++this.pos,this.finishToken(v.bracketR);case 123:return++this.pos,this.finishToken(v.braceL);case 125:return++this.pos,this.finishToken(v.braceR);case 58:return++this.pos,this.finishToken(v.colon);case 63:return++this.pos,this.finishToken(v.question);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(v.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(120===t||88===t)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===t||79===t)return this.readRadixNumber(8);if(98===t||66===t)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 126:return this.finishOp(v.prefix,1)}this.raise(this.pos,"Unexpected character '"+Ye(e)+"'")},qe.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)},qe.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(w.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if("["===r)t=!0;else if("]"===r&&t)t=!1;else if("/"===r&&!t)break;e="\\"===r}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var s=this.pos,a=this.readWord1();this.containsEsc&&this.unexpected(s);var o=this.regexpState||(this.regexpState=new De(this));o.reset(n,i,a),this.validateRegExpFlags(o),this.validateRegExpPattern(o);var l=null;try{l=new RegExp(i,a)}catch(u){}return this.finishToken(v.regexp,{pattern:i,flags:a,value:l})},qe.readInt=function(e,t){for(var n=this.pos,r=0,i=0,s=null==t?1/0:t;i<s;++i){var a=this.input.charCodeAt(this.pos),o=void 0;if((o=a>=97?a-97+10:a>=65?a-65+10:a>=48&&a<=57?a-48:1/0)>=e)break;++this.pos,r=r*e+o}return this.pos===n||null!=t&&this.pos-n!==t?null:r},qe.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return null==n&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&110===this.input.charCodeAt(this.pos)?(n="undefined"!==typeof BigInt?BigInt(this.input.slice(t,this.pos)):null,++this.pos):p(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(v.num,n)},qe.readNumber=function(e){var t=this.pos;e||null!==this.readInt(10)||this.raise(t,"Invalid number");var n=this.pos-t>=2&&48===this.input.charCodeAt(t);n&&this.strict&&this.raise(t,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&110===r){var i=this.input.slice(t,this.pos),s="undefined"!==typeof BigInt?BigInt(i):null;return++this.pos,p(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(v.num,s)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),46!==r||n||(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),69!==r&&101!==r||n||(43!==(r=this.input.charCodeAt(++this.pos))&&45!==r||++this.pos,null===this.readInt(10)&&this.raise(t,"Invalid number")),p(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var a=this.input.slice(t,this.pos),o=n?parseInt(a,8):parseFloat(a);return this.finishToken(v.num,o)},qe.readCodePoint=function(){var e;if(123===this.input.charCodeAt(this.pos)){this.options.ecmaVersion<6&&this.unexpected();var t=++this.pos;e=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,e>1114111&&this.invalidStringToken(t,"Code point out of bounds")}else e=this.readHexChar(4);return e},qe.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;92===r?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):(k(r,this.options.ecmaVersion>=10)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(v.string,t)};var Je={};qe.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e!==Je)throw e;this.readInvalidTemplateToken()}this.inTemplateElement=!1},qe.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw Je;this.raise(e,t)},qe.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(96===n||36===n&&123===this.input.charCodeAt(this.pos+1))return this.pos!==this.start||this.type!==v.template&&this.type!==v.invalidTemplate?(e+=this.input.slice(t,this.pos),this.finishToken(v.template,e)):36===n?(this.pos+=2,this.finishToken(v.dollarBraceL)):(++this.pos,this.finishToken(v.backQuote));if(92===n)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(k(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:e+="\n";break;default:e+=String.fromCharCode(n)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}},qe.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if("{"!==this.input[this.pos+1])break;case"`":return this.finishToken(v.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},qe.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Ye(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(e){var n=this.pos-1;return this.invalidStringToken(n,"Invalid escape sequence in template string"),null}default:if(t>=48&&t<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(r,8);return i>255&&(r=r.slice(0,-1),i=parseInt(r,8)),this.pos+=r.length-1,t=this.input.charCodeAt(this.pos),"0"===r&&56!==t&&57!==t||!this.strict&&!e||this.invalidStringToken(this.pos-1-r.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return k(t)?"":String.fromCharCode(t)}},qe.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return null===n&&this.invalidStringToken(t,"Bad character escape sequence"),n},qe.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(d(i,r))this.pos+=i<=65535?1:2;else{if(92!==i)break;this.containsEsc=!0,e+=this.input.slice(n,this.pos);var s=this.pos;117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var a=this.readCodePoint();(t?p:d)(a,r)||this.invalidStringToken(s,"Invalid Unicode escape"),e+=Ye(a),n=this.pos}t=!1}return e+this.input.slice(n,this.pos)},qe.readWord=function(){var e=this.readWord1(),t=v.name;return this.keywords.test(e)&&(t=b[e]),this.finishToken(t,e)};var Qe="7.1.0";function Ze(e,t){return ee.parse(e,t)}function et(e,t,n){return ee.parseExpressionAt(e,t,n)}function tt(e,t){return ee.tokenizer(e,t)}ee.acorn={Parser:ee,version:Qe,defaultOptions:z,Position:O,SourceLocation:R,getLineInfo:D,Node:be,TokenType:f,tokTypes:v,keywordTypes:b,TokContext:we,tokContexts:Se,isIdentifierChar:d,isIdentifierStart:p,Token:Xe,isNewLine:k,lineBreak:w,lineBreakG:S,nonASCIIwhitespace:T},e.Node=be,e.Parser=ee,e.Position=O,e.SourceLocation=R,e.TokContext=we,e.Token=Xe,e.TokenType=f,e.defaultOptions=z,e.getLineInfo=D,e.isIdentifierChar=d,e.isIdentifierStart=p,e.isNewLine=k,e.keywordTypes=b,e.lineBreak=w,e.lineBreakG=S,e.nonASCIIwhitespace=T,e.parse=Ze,e.parseExpressionAt=et,e.tokContexts=Se,e.tokTypes=v,e.tokenizer=tt,e.version=Qe,Object.defineProperty(e,"__esModule",{value:!0})}))},{}],2:[function(e,t,n){},{}],3:[function(e,t,n){function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{contextName:n="gl",throwGetError:r,useTrackablePrimitives:a,readPixelsFile:l,recording:u=[],variables:c={},onReadPixels:h,onUnrecognizedArgumentLookup:p}=t,d=new Proxy(e,{get:x}),f=[],m={};let g,y=0,b="";return d;function x(t,d){switch(d){case"addComment":return _;case"checkThrowError":return L;case"getReadPixelsVariableName":return g;case"insertVariable":return S;case"reset":return w;case"setIndent":return T;case"toString":return v;case"getContextVariableName":return $}return"function"===typeof e[d]?function(){switch(d){case"getError":return r?u.push(`${b}if (${n}.getError() !== ${n}.NONE) throw new Error('error');`):u.push(`${b}${n}.getError();`),e.getError();case"getExtension":{const t=`${n}Variables${f.length}`;u.push(`${b}const ${t} = ${n}.getExtension('${arguments[0]}');`);const r=e.getExtension(arguments[0]);if(r&&"object"===typeof r){const e=i(r,{getEntity:k,useTrackablePrimitives:a,recording:u,contextName:t,contextVariables:f,variables:c,indent:b,onUnrecognizedArgumentLookup:p});return f.push(e),e}return f.push(null),r}case"readPixels":const t=f.indexOf(arguments[6]);let o;if(-1===t){const e=I(arguments[6]);e?(o=e,u.push(`${b}${e}`)):(o=`${n}Variable${f.length}`,f.push(arguments[6]),u.push(`${b}const ${o} = new ${arguments[6].constructor.name}(${arguments[6].length});`))}else o=`${n}Variable${t}`;g=o;const d=[arguments[0],arguments[1],arguments[2],arguments[3],k(arguments[4]),k(arguments[5]),o];return u.push(`${b}${n}.readPixels(${d.join(", ")});`),l&&E(arguments[2],arguments[3]),h&&h(o,d),e.readPixels.apply(e,arguments);case"drawBuffers":return u.push(`${b}${n}.drawBuffers([${s(arguments[0],{contextName:n,contextVariables:f,getEntity:k,addVariable:A,variables:c,onUnrecognizedArgumentLookup:p})}]);`),e.drawBuffers(arguments[0])}let t=e[d].apply(e,arguments);switch(typeof t){case"undefined":return void u.push(`${b}${C(d,arguments)};`);case"number":case"boolean":if(a&&-1===f.indexOf(o(t))){u.push(`${b}const ${n}Variable${f.length} = ${C(d,arguments)};`),f.push(t=o(t));break}default:null===t?u.push(`${C(d,arguments)};`):u.push(`${b}const ${n}Variable${f.length} = ${C(d,arguments)};`),f.push(t)}return t}:(m[e[d]]=d,e[d])}function v(){return u.join("\n")}function w(){for(;u.length>0;)u.pop()}function S(e,t){c[e]=t}function k(e){const t=m[e];return t?n+"."+t:e}function T(e){b=" ".repeat(e)}function A(e,t){const r=`${n}Variable${f.length}`;return u.push(`${b}const ${r} = ${t};`),f.push(e),r}function E(e,t){const r=`${n}Variable${f.length}`,i=`imageDatum${y}`;u.push(`${b}let ${i} = ["P3\\n# ${l}.ppm\\n", ${e}, ' ', ${t}, "\\n255\\n"].join("");`),u.push(`${b}for (let i = 0; i < ${i}.length; i += 4) {`),u.push(`${b}  ${i} += ${r}[i] + ' ' + ${r}[i + 1] + ' ' + ${r}[i + 2] + ' ';`),u.push(`${b}}`),u.push(`${b}if (typeof require !== "undefined") {`),u.push(`${b}  require('fs').writeFileSync('./${l}.ppm', ${i});`),u.push(`${b}}`),y++}function _(e){u.push(`${b}// ${e}`)}function L(){u.push(`${b}(() => {\n${b}const error = ${n}.getError();\n${b}if (error !== ${n}.NONE) {\n${b}  const names = Object.getOwnPropertyNames(gl);\n${b}  for (let i = 0; i < names.length; i++) {\n${b}    const name = names[i];\n${b}    if (${n}[name] === error) {\n${b}      throw new Error('${n} threw ' + name);\n${b}    }\n${b}  }\n${b}}\n${b}})();`)}function C(e,t){return`${n}.${e}(${s(t,{contextName:n,contextVariables:f,getEntity:k,addVariable:A,variables:c,onUnrecognizedArgumentLookup:p})})`}function I(e){if(c)for(const t in c)if(c[t]===e)return t;return null}function $(e){const t=f.indexOf(e);return-1!==t?`${n}Variable${t}`:null}}function i(e,t){const n=new Proxy(e,{get:f}),r={},{contextName:i,contextVariables:a,getEntity:l,useTrackablePrimitives:u,recording:c,variables:h,indent:p,onUnrecognizedArgumentLookup:d}=t;return n;function f(t,n){return"function"===typeof t[n]?function(){if("drawBuffersWEBGL"===n)return c.push(`${p}${i}.drawBuffersWEBGL([${s(arguments[0],{contextName:i,contextVariables:a,getEntity:m,addVariable:y,variables:h,onUnrecognizedArgumentLookup:d})}]);`),e.drawBuffersWEBGL(arguments[0]);let t=e[n].apply(e,arguments);switch(typeof t){case"undefined":return void c.push(`${p}${g(n,arguments)};`);case"number":case"boolean":u&&-1===a.indexOf(o(t))?(c.push(`${p}const ${i}Variable${a.length} = ${g(n,arguments)};`),a.push(t=o(t))):(c.push(`${p}const ${i}Variable${a.length} = ${g(n,arguments)};`),a.push(t));break;default:null===t?c.push(`${g(n,arguments)};`):c.push(`${p}const ${i}Variable${a.length} = ${g(n,arguments)};`),a.push(t)}return t}:(r[e[n]]=n,e[n])}function m(e){return r.hasOwnProperty(e)?`${i}.${r[e]}`:l(e)}function g(e,t){return`${i}.${e}(${s(t,{contextName:i,contextVariables:a,getEntity:m,addVariable:y,variables:h,onUnrecognizedArgumentLookup:d})})`}function y(e,t){const n=`${i}Variable${a.length}`;return a.push(e),c.push(`${p}const ${n} = ${t};`),n}}function s(e,t){const{variables:n,onUnrecognizedArgumentLookup:r}=t;return Array.from(e).map((e=>{const n=i(e);return n||a(e,t)})).join(", ");function i(e){if(n)for(const t in n)if(n.hasOwnProperty(t)&&n[t]===e)return t;return r?r(e):null}}function a(e,t){const{contextName:n,contextVariables:r,getEntity:i,addVariable:s,onUnrecognizedArgumentLookup:a}=t;if("undefined"===typeof e)return"undefined";if(null===e)return"null";const o=r.indexOf(e);if(o>-1)return`${n}Variable${o}`;switch(e.constructor.name){case"String":const t=/\n/.test(e),n=/'/.test(e),r=/"/.test(e);return t?"`"+e+"`":n&&!r?'"'+e+'"':"'"+e+"'";case"Number":case"Boolean":return i(e);case"Array":return s(e,`new ${e.constructor.name}([${Array.from(e).join(",")}])`);case"Float32Array":case"Uint8Array":case"Uint16Array":case"Int32Array":return s(e,`new ${e.constructor.name}(${JSON.stringify(Array.from(e))})`);default:if(a){const t=a(e);if(t)return t}throw new Error(`unrecognized argument type ${e.constructor.name}`)}}function o(e){return new e.constructor(e)}"undefined"!==typeof t&&(t.exports={glWiretap:r,glExtensionWiretap:i}),"undefined"!==typeof window&&(r.glExtensionWiretap=i,window.glWiretap=r)},{}],4:[function(e,t,n){function r(e){const t=new Array(e.length);for(let n=0;n<e.length;n++){const r=e[n];r.toArray?t[n]=r.toArray():t[n]=r}return t}function i(){const e=r(arguments),t=new Float32Array(this.output.x);for(let n=0;n<this.output.x;n++)this.thread.x=n,this.thread.y=0,this.thread.z=0,t[n]=this._fn.apply(this,e);return t}function s(){const e=r(arguments),t=new Array(this.output.y);for(let n=0;n<this.output.y;n++){const r=new Float32Array(this.output.x);for(let t=0;t<this.output.x;t++)this.thread.x=t,this.thread.y=n,this.thread.z=0,r[t]=this._fn.apply(this,e);t[n]=r}return t}function a(){const e=r(arguments);for(let t=0;t<this.output.y;t++)for(let n=0;n<this.output.x;n++)this.thread.x=n,this.thread.y=t,this.thread.z=0,this._fn.apply(this,e)}function o(){const e=r(arguments),t=new Array(this.output.z);for(let n=0;n<this.output.z;n++){const r=new Array(this.output.y);for(let t=0;t<this.output.y;t++){const i=new Float32Array(this.output.x);for(let r=0;r<this.output.x;r++)this.thread.x=r,this.thread.y=t,this.thread.z=n,i[r]=this._fn.apply(this,e);r[t]=i}t[n]=r}return t}function l(e){e.setOutput=t=>{e.output=c(t),e.graphical&&u(e)},e.toJSON=()=>{throw new Error("Not usable with gpuMock")},e.setConstants=t=>(e.constants=t,e),e.setGraphical=t=>(e.graphical=t,e),e.setCanvas=t=>(e.canvas=t,e),e.setContext=t=>(e.context=t,e),e.destroy=()=>{},e.validateSettings=()=>{},e.graphical&&e.output&&u(e),e.exec=function(){return new Promise(((t,n)=>{try{t(e.apply(e,arguments))}catch(r){n(r)}}))},e.getPixels=t=>{const{x:n,y:r}=e.output;return t?p(e._imageData.data,n,r):e._imageData.data.slice(0)},e.color=function(t,n,r,i){"undefined"===typeof i&&(i=1),t=Math.floor(255*t),n=Math.floor(255*n),r=Math.floor(255*r),i=Math.floor(255*i);const s=e.output.x,a=e.output.y,o=e.thread.x+(a-e.thread.y-1)*s;e._colorData[4*o+0]=t,e._colorData[4*o+1]=n,e._colorData[4*o+2]=r,e._colorData[4*o+3]=i};const t=()=>e,n=["setWarnVarUsage","setArgumentTypes","setTactic","setOptimizeFloatMemory","setDebug","setLoopMaxIterations","setConstantTypes","setFunctions","setNativeFunctions","setInjectedNative","setPipeline","setPrecision","setOutputToTexture","setImmutable","setStrictIntegers","setDynamicOutput","setHardcodeConstants","setDynamicArguments","setUseLegacyEncoder","setWarnVarUsage","addSubKernel"];for(let r=0;r<n.length;r++)e[n[r]]=t;return e}function u(e){const{x:t,y:n}=e.output;if(e.context&&e.context.createImageData){const r=new Uint8ClampedArray(t*n*4);e._imageData=e.context.createImageData(t,n),e._colorData=r}else{const r=new Uint8ClampedArray(t*n*4);e._imageData={data:r},e._colorData=r}}function c(e){let t=null;if(e.length)if(3===e.length){const[n,r,i]=e;t={x:n,y:r,z:i}}else if(2===e.length){const[n,r]=e;t={x:n,y:r}}else{const[n]=e;t={x:n}}else t=e;return t}function h(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=t.output?c(t.output):null;function r(){return r.output.z?o.apply(r,arguments):r.output.y?r.graphical?a.apply(r,arguments):s.apply(r,arguments):i.apply(r,arguments)}return r._fn=e,r.constants=t.constants||null,r.context=t.context||null,r.canvas=t.canvas||null,r.graphical=t.graphical||!1,r._imageData=null,r._colorData=null,r.output=n,r.thread={x:0,y:0,z:0},l(r)}function p(e,t,n){const r=n/2|0,i=4*t,s=new Uint8ClampedArray(4*t),a=e.slice(0);for(let o=0;o<r;++o){const e=o*i,t=(n-o-1)*i;s.set(a.subarray(e,e+i)),a.copyWithin(e,t,t+i),a.set(s,t)}return a}t.exports={gpuMock:h}},{}],5:[function(e,t,n){const{utils:r}=e("./utils");function i(e,t){const n=t.toString();return new Function(`return function ${e} (${r.getArgumentNamesFromString(n).join(", ")}) {\n  ${r.getFunctionBodyFromString(n)}\n}`)()}t.exports={alias:i}},{"./utils":114}],6:[function(e,t,n){const{FunctionNode:r}=e("../function-node");class i extends r{astFunction(e,t){if(!this.isRootKernel){t.push("function"),t.push(" "),t.push(this.name),t.push("(");for(let e=0;e<this.argumentNames.length;++e){const n=this.argumentNames[e];e>0&&t.push(", "),t.push("user_"),t.push(n)}t.push(") {\n")}for(let n=0;n<e.body.body.length;++n)this.astGeneric(e.body.body[n],t),t.push("\n");return this.isRootKernel||t.push("}\n"),t}astReturnStatement(e,t){const n=this.returnType||this.getType(e.argument);return this.returnType||(this.returnType=n),this.isRootKernel?(t.push(this.leadingReturnStatement),this.astGeneric(e.argument,t),t.push(";\n"),t.push(this.followingReturnStatement),t.push("continue;\n")):this.isSubKernel?(t.push(`subKernelResult_${this.name} = `),this.astGeneric(e.argument,t),t.push(";"),t.push(`return subKernelResult_${this.name};`)):(t.push("return "),this.astGeneric(e.argument,t),t.push(";")),t}astLiteral(e,t){if(isNaN(e.value))throw this.astErrorOutput("Non-numeric literal not supported : "+e.value,e);return t.push(e.value),t}astBinaryExpression(e,t){return t.push("("),this.astGeneric(e.left,t),t.push(e.operator),this.astGeneric(e.right,t),t.push(")"),t}astIdentifierExpression(e,t){if("Identifier"!==e.type)throw this.astErrorOutput("IdentifierExpression - not an Identifier",e);return"Infinity"===e.name?t.push("Infinity"):this.constants&&this.constants.hasOwnProperty(e.name)?t.push("constants_"+e.name):t.push("user_"+e.name),t}astForStatement(e,t){if("ForStatement"!==e.type)throw this.astErrorOutput("Invalid for statement",e);const n=[],r=[],i=[],s=[];let a=null;if(e.init){this.pushState("in-for-loop-init"),this.astGeneric(e.init,n);for(let e=0;e<n.length;e++)n[e].includes&&n[e].includes(",")&&(a=!1);this.popState("in-for-loop-init")}else a=!1;if(e.test?this.astGeneric(e.test,r):a=!1,e.update?this.astGeneric(e.update,i):a=!1,e.body&&(this.pushState("loop-body"),this.astGeneric(e.body,s),this.popState("loop-body")),null===a&&(a=this.isSafe(e.init)&&this.isSafe(e.test)),a)t.push(`for (${n.join("")};${r.join("")};${i.join("")}){\n`),t.push(s.join("")),t.push("}\n");else{const e=this.getInternalVariableName("safeI");n.length>0&&t.push(n.join(""),";\n"),t.push(`for (let ${e}=0;${e}<LOOP_MAX;${e}++){\n`),r.length>0&&t.push(`if (!${r.join("")}) break;\n`),t.push(s.join("")),t.push(`\n${i.join("")};`),t.push("}\n")}return t}astWhileStatement(e,t){if("WhileStatement"!==e.type)throw this.astErrorOutput("Invalid while statement",e);return t.push("for (let i = 0; i < LOOP_MAX; i++) {"),t.push("if ("),this.astGeneric(e.test,t),t.push(") {\n"),this.astGeneric(e.body,t),t.push("} else {\n"),t.push("break;\n"),t.push("}\n"),t.push("}\n"),t}astDoWhileStatement(e,t){if("DoWhileStatement"!==e.type)throw this.astErrorOutput("Invalid while statement",e);return t.push("for (let i = 0; i < LOOP_MAX; i++) {"),this.astGeneric(e.body,t),t.push("if (!"),this.astGeneric(e.test,t),t.push(") {\n"),t.push("break;\n"),t.push("}\n"),t.push("}\n"),t}astAssignmentExpression(e,t){const n=this.getDeclaration(e.left);if(n&&!n.assignable)throw this.astErrorOutput(`Variable ${e.left.name} is not assignable here`,e);return this.astGeneric(e.left,t),t.push(e.operator),this.astGeneric(e.right,t),t}astBlockStatement(e,t){if(this.isState("loop-body")){this.pushState("block-body");for(let n=0;n<e.body.length;n++)this.astGeneric(e.body[n],t);this.popState("block-body")}else{t.push("{\n");for(let n=0;n<e.body.length;n++)this.astGeneric(e.body[n],t);t.push("}\n")}return t}astVariableDeclaration(e,t){t.push(`${e.kind} `);const{declarations:n}=e;for(let r=0;r<n.length;r++){r>0&&t.push(",");const e=n[r],i=this.getDeclaration(e.id);i.valueType||(i.valueType=this.getType(e.init)),this.astGeneric(e,t)}return this.isState("in-for-loop-init")||t.push(";"),t}astIfStatement(e,t){return t.push("if ("),this.astGeneric(e.test,t),t.push(")"),"BlockStatement"===e.consequent.type?this.astGeneric(e.consequent,t):(t.push(" {\n"),this.astGeneric(e.consequent,t),t.push("\n}\n")),e.alternate&&(t.push("else "),"BlockStatement"===e.alternate.type||"IfStatement"===e.alternate.type?this.astGeneric(e.alternate,t):(t.push(" {\n"),this.astGeneric(e.alternate,t),t.push("\n}\n"))),t}astSwitchStatement(e,t){const{discriminant:n,cases:r}=e;t.push("switch ("),this.astGeneric(n,t),t.push(") {\n");for(let i=0;i<r.length;i++)null!==r[i].test?(t.push("case "),this.astGeneric(r[i].test,t),t.push(":\n"),r[i].consequent&&r[i].consequent.length>0&&(this.astGeneric(r[i].consequent,t),t.push("break;\n"))):(t.push("default:\n"),this.astGeneric(r[i].consequent,t),r[i].consequent&&r[i].consequent.length>0&&t.push("break;\n"));t.push("\n}")}astThisExpression(e,t){return t.push("_this"),t}astMemberExpression(e,t){const{signature:n,type:r,property:i,xProperty:s,yProperty:a,zProperty:o,name:l,origin:u}=this.getMemberExpressionDetails(e);switch(n){case"this.thread.value":return t.push(`_this.thread.${l}`),t;case"this.output.value":switch(l){case"x":t.push("outputX");break;case"y":t.push("outputY");break;case"z":t.push("outputZ");break;default:throw this.astErrorOutput("Unexpected expression",e)}return t;case"value":default:throw this.astErrorOutput("Unexpected expression",e);case"value[]":case"value[][]":case"value[][][]":case"value.value":if("Math"===u)return t.push(Math[l]),t;switch(i){case"r":return t.push(`user_${l}[0]`),t;case"g":return t.push(`user_${l}[1]`),t;case"b":return t.push(`user_${l}[2]`),t;case"a":return t.push(`user_${l}[3]`),t}break;case"this.constants.value":case"this.constants.value[]":case"this.constants.value[][]":case"this.constants.value[][][]":break;case"fn()[]":return this.astGeneric(e.object,t),t.push("["),this.astGeneric(e.property,t),t.push("]"),t;case"fn()[][]":return this.astGeneric(e.object.object,t),t.push("["),this.astGeneric(e.object.property,t),t.push("]"),t.push("["),this.astGeneric(e.property,t),t.push("]"),t}if(!e.computed)switch(r){case"Number":case"Integer":case"Float":case"Boolean":return t.push(`${u}_${l}`),t}const c=`${u}_${l}`;{let e,n;if("constants"===u){const t=this.constants[l];n="Input"===this.constantTypes[l],e=n?t.size:null}else n=this.isInput(l),e=n?this.argumentSizes[this.argumentNames.indexOf(l)]:null;t.push(`${c}`),o&&a?n?(t.push("[("),this.astGeneric(o,t),t.push(`*${this.dynamicArguments?"(outputY * outputX)":e[1]*e[0]})+(`),this.astGeneric(a,t),t.push(`*${this.dynamicArguments?"outputX":e[0]})+`),this.astGeneric(s,t),t.push("]")):(t.push("["),this.astGeneric(o,t),t.push("]"),t.push("["),this.astGeneric(a,t),t.push("]"),t.push("["),this.astGeneric(s,t),t.push("]")):a?n?(t.push("[("),this.astGeneric(a,t),t.push(`*${this.dynamicArguments?"outputX":e[0]})+`),this.astGeneric(s,t),t.push("]")):(t.push("["),this.astGeneric(a,t),t.push("]"),t.push("["),this.astGeneric(s,t),t.push("]")):"undefined"!==typeof s&&(t.push("["),this.astGeneric(s,t),t.push("]"))}return t}astCallExpression(e,t){if("CallExpression"!==e.type)throw this.astErrorOutput("Unknown CallExpression",e);let n=this.astMemberExpressionUnroll(e.callee);this.calledFunctions.indexOf(n)<0&&this.calledFunctions.push(n),this.isAstMathFunction(e),this.onFunctionCall&&this.onFunctionCall(this.name,n,e.arguments),t.push(n),t.push("(");const r=this.lookupFunctionArgumentTypes(n)||[];for(let i=0;i<e.arguments.length;++i){const s=e.arguments[i];let a=this.getType(s);r[i]||this.triggerImplyArgumentType(n,i,a,this),i>0&&t.push(", "),this.astGeneric(s,t)}return t.push(")"),t}astArrayExpression(e,t){const n=this.getType(e),r=e.elements.length,i=[];for(let s=0;s<r;++s){const t=[];this.astGeneric(e.elements[s],t),i.push(t.join(""))}switch(n){case"Matrix(2)":case"Matrix(3)":case"Matrix(4)":t.push(`[${i.join(", ")}]`);break;default:t.push(`new Float32Array([${i.join(", ")}])`)}return t}astDebuggerStatement(e,t){return t.push("debugger;"),t}}t.exports={CPUFunctionNode:i}},{"../function-node":10}],7:[function(e,t,n){const{utils:r}=e("../../utils");function i(e,t){const n=[];for(const r in t){if(!t.hasOwnProperty(r))continue;const i=t[r],s=e[r];switch(i){case"Number":case"Integer":case"Float":case"Boolean":n.push(`${r}:${s}`);break;case"Array(2)":case"Array(3)":case"Array(4)":case"Matrix(2)":case"Matrix(3)":case"Matrix(4)":n.push(`${r}:new ${s.constructor.name}(${JSON.stringify(Array.from(s))})`)}}return`{ ${n.join()} }`}function s(e,t){const n=[],s=[],a=[],o=!/^function/.test(e.color.toString());if(n.push("  const { context, canvas, constants: incomingConstants } = settings;",`  const output = new Int32Array(${JSON.stringify(Array.from(e.output))});`,`  const _constantTypes = ${JSON.stringify(e.constantTypes)};`,`  const _constants = ${i(e.constants,e.constantTypes)};`),s.push("    constants: _constants,","    context,","    output,","    thread: {x: 0, y: 0, z: 0},"),e.graphical){n.push(`  const _imageData = context.createImageData(${e.output[0]}, ${e.output[1]});`),n.push(`  const _colorData = new Uint8ClampedArray(${e.output[0]} * ${e.output[1]} * 4);`);const t=r.flattenFunctionToString((o?"function ":"")+e.color.toString(),{thisLookup:t=>{switch(t){case"_colorData":return"_colorData";case"_imageData":return"_imageData";case"output":return"output";case"thread":return"this.thread"}return JSON.stringify(e[t])},findDependency:(e,t)=>null}),i=r.flattenFunctionToString((o?"function ":"")+e.getPixels.toString(),{thisLookup:t=>{switch(t){case"_colorData":return"_colorData";case"_imageData":return"_imageData";case"output":return"output";case"thread":return"this.thread"}return JSON.stringify(e[t])},findDependency:()=>null});s.push("    _imageData,","    _colorData,",`    color: ${t},`),a.push(`  kernel.getPixels = ${i};`)}const l=[],u=Object.keys(e.constantTypes);for(let r=0;r<u.length;r++)l.push(e.constantTypes[u]);if(-1!==e.argumentTypes.indexOf("HTMLImageArray")||-1!==l.indexOf("HTMLImageArray")){const t=r.flattenFunctionToString((o?"function ":"")+e._imageTo3DArray.toString(),{doNotDefine:["canvas"],findDependency:(t,n)=>"this"===t?(o?"function ":"")+e[n].toString():null,thisLookup:e=>{switch(e){case"canvas":return;case"context":return"context"}}});a.push(t),s.push("    _mediaTo2DArray,"),s.push("    _imageTo3DArray,")}else if(-1!==e.argumentTypes.indexOf("HTMLImage")||-1!==l.indexOf("HTMLImage")){const t=r.flattenFunctionToString((o?"function ":"")+e._mediaTo2DArray.toString(),{findDependency:(e,t)=>null,thisLookup:e=>{switch(e){case"canvas":return"settings.canvas";case"context":return"settings.context"}throw new Error("unhandled thisLookup")}});a.push(t),s.push("    _mediaTo2DArray,")}return`function(settings) {\n${n.join("\n")}\n  for (const p in _constantTypes) {\n    if (!_constantTypes.hasOwnProperty(p)) continue;\n    const type = _constantTypes[p];\n    switch (type) {\n      case 'Number':\n      case 'Integer':\n      case 'Float':\n      case 'Boolean':\n      case 'Array(2)':\n      case 'Array(3)':\n      case 'Array(4)':\n      case 'Matrix(2)':\n      case 'Matrix(3)':\n      case 'Matrix(4)':\n        if (incomingConstants.hasOwnProperty(p)) {\n          console.warn('constant ' + p + ' of type ' + type + ' cannot be resigned');\n        }\n        continue;\n    }\n    if (!incomingConstants.hasOwnProperty(p)) {\n      throw new Error('constant ' + p + ' not found');\n    }\n    _constants[p] = incomingConstants[p];\n  }\n  const kernel = (function() {\n${e._kernelString}\n  })\n    .apply({ ${s.join("\n")} });\n  ${a.join("\n")}\n  return kernel;\n}`}t.exports={cpuKernelString:s}},{"../../utils":114}],8:[function(e,t,n){const{Kernel:r}=e("../kernel"),{FunctionBuilder:i}=e("../function-builder"),{CPUFunctionNode:s}=e("./function-node"),{utils:a}=e("../../utils"),{cpuKernelString:o}=e("./kernel-string");class l extends r{static getFeatures(){return this.features}static get features(){return Object.freeze({kernelMap:!0,isIntegerDivisionAccurate:!0})}static get isSupported(){return!0}static isContextMatch(e){return!1}static get mode(){return"cpu"}static nativeFunctionArguments(){return null}static nativeFunctionReturnType(){throw new Error(`Looking up native function return type not supported on ${this.name}`)}static combineKernels(e){return e}static getSignature(e,t){return"cpu"+(t.length>0?":"+t.join(","):"")}constructor(e,t){super(e,t),this.mergeSettings(e.settings||t),this._imageData=null,this._colorData=null,this._kernelString=null,this._prependedString=[],this.thread={x:0,y:0,z:0},this.translatedSources=null}initCanvas(){return"undefined"!==typeof document?document.createElement("canvas"):"undefined"!==typeof OffscreenCanvas?new OffscreenCanvas(0,0):void 0}initContext(){return this.canvas?this.canvas.getContext("2d"):null}initPlugins(e){return[]}validateSettings(e){if(!this.output||0===this.output.length){if(1!==e.length)throw new Error("Auto output only supported for kernels with only one input");const t=a.getVariableType(e[0],this.strictIntegers);if("Array"===t)this.output=a.getDimensions(t);else{if("NumberTexture"!==t&&"ArrayTexture(4)"!==t)throw new Error("Auto output not supported for input type: "+t);this.output=e[0].output}}if(this.graphical&&2!==this.output.length)throw new Error("Output must have 2 dimensions on graphical mode");this.checkOutput()}translateSource(){if(this.leadingReturnStatement=this.output.length>1?"resultX[x] = ":"result[x] = ",this.subKernels){const e=[];for(let t=0;t<this.subKernels.length;t++){const{name:n}=this.subKernels[t];e.push(this.output.length>1?`resultX_${n}[x] = subKernelResult_${n};\n`:`result_${n}[x] = subKernelResult_${n};\n`)}this.followingReturnStatement=e.join("")}const e=i.fromKernel(this,s);this.translatedSources=e.getPrototypes("kernel"),this.graphical||this.returnType||(this.returnType=e.getKernelResultType())}build(){if(this.built)return;if(this.setupConstants(),this.setupArguments(arguments),this.validateSettings(arguments),this.translateSource(),this.graphical){const{canvas:e,output:t}=this;if(!e)throw new Error("no canvas available for using graphical output");const n=t[0],r=t[1]||1;e.width=n,e.height=r,this._imageData=this.context.createImageData(n,r),this._colorData=new Uint8ClampedArray(n*r*4)}const e=this.getKernelString();this.kernelString=e,this.debug&&(console.log("Function output:"),console.log(e));try{this.run=new Function([],e).bind(this)()}catch(t){console.error("An error occurred compiling the javascript: ",t)}this.buildSignature(arguments),this.built=!0}color(e,t,n,r){"undefined"===typeof r&&(r=1),e=Math.floor(255*e),t=Math.floor(255*t),n=Math.floor(255*n),r=Math.floor(255*r);const i=this.output[0],s=this.output[1],a=this.thread.x+(s-this.thread.y-1)*i;this._colorData[4*a+0]=e,this._colorData[4*a+1]=t,this._colorData[4*a+2]=n,this._colorData[4*a+3]=r}getKernelString(){if(null!==this._kernelString)return this._kernelString;let e=null,{translatedSources:t}=this;return t.length>1?t=t.filter((t=>/^function/.test(t)?t:(e=t,!1))):e=t.shift(),this._kernelString=`  const LOOP_MAX = ${this._getLoopMaxString()};\n  ${this.injectedNative||""}\n  const _this = this;\n  ${this._resultKernelHeader()}\n  ${this._processConstants()}\n  return (${this.argumentNames.map((e=>"user_"+e)).join(", ")}) => {\n    ${this._prependedString.join("")}\n    ${this._earlyThrows()}\n    ${this._processArguments()}\n    ${this.graphical?this._graphicalKernelBody(e):this._resultKernelBody(e)}\n    ${t.length>0?t.join("\n"):""}\n  };`}toString(){return o(this)}_getLoopMaxString(){return this.loopMaxIterations?` ${parseInt(this.loopMaxIterations)};`:" 1000;"}_processConstants(){if(!this.constants)return"";const e=[];for(let t in this.constants)switch(this.constantTypes[t]){case"HTMLCanvas":case"OffscreenCanvas":case"HTMLImage":case"ImageBitmap":case"ImageData":case"HTMLVideo":e.push(`    const constants_${t} = this._mediaTo2DArray(this.constants.${t});\n`);break;case"HTMLImageArray":e.push(`    const constants_${t} = this._imageTo3DArray(this.constants.${t});\n`);break;case"Input":e.push(`    const constants_${t} = this.constants.${t}.value;\n`);break;default:e.push(`    const constants_${t} = this.constants.${t};\n`)}return e.join("")}_earlyThrows(){if(this.graphical)return"";if(this.immutable)return"";if(!this.pipeline)return"";const e=[];for(let n=0;n<this.argumentTypes.length;n++)"Array"===this.argumentTypes[n]&&e.push(this.argumentNames[n]);if(0===e.length)return"";const t=[];for(let n=0;n<e.length;n++){const r=e[n],i=this._mapSubKernels((e=>`user_${r} === result_${e.name}`)).join(" || ");t.push(`user_${r} === result${i?` || ${i}`:""}`)}return`if (${t.join(" || ")}) throw new Error('Source and destination arrays are the same.  Use immutable = true');`}_processArguments(){const e=[];for(let t=0;t<this.argumentTypes.length;t++){const n=`user_${this.argumentNames[t]}`;switch(this.argumentTypes[t]){case"HTMLCanvas":case"OffscreenCanvas":case"HTMLImage":case"ImageBitmap":case"ImageData":case"HTMLVideo":e.push(`    ${n} = this._mediaTo2DArray(${n});\n`);break;case"HTMLImageArray":e.push(`    ${n} = this._imageTo3DArray(${n});\n`);break;case"Input":e.push(`    ${n} = ${n}.value;\n`);break;case"ArrayTexture(1)":case"ArrayTexture(2)":case"ArrayTexture(3)":case"ArrayTexture(4)":case"NumberTexture":case"MemoryOptimizedNumberTexture":e.push(`\n    if (${n}.toArray) {\n      if (!_this.textureCache) {\n        _this.textureCache = [];\n        _this.arrayCache = [];\n      }\n      const textureIndex = _this.textureCache.indexOf(${n});\n      if (textureIndex !== -1) {\n        ${n} = _this.arrayCache[textureIndex];\n      } else {\n        _this.textureCache.push(${n});\n        ${n} = ${n}.toArray();\n        _this.arrayCache.push(${n});\n      }\n    }`)}}return e.join("")}_mediaTo2DArray(e){const t=this.canvas,n=e.width>0?e.width:e.videoWidth,r=e.height>0?e.height:e.videoHeight;t.width<n&&(t.width=n),t.height<r&&(t.height=r);const i=this.context;let s;e.constructor===ImageData?s=e.data:(i.drawImage(e,0,0,n,r),s=i.getImageData(0,0,n,r).data);const a=new Array(r);let o=0;for(let l=r-1;l>=0;l--){const e=a[l]=new Array(n);for(let t=0;t<n;t++){const n=new Float32Array(4);n[0]=s[o++]/255,n[1]=s[o++]/255,n[2]=s[o++]/255,n[3]=s[o++]/255,e[t]=n}}return a}getPixels(e){const[t,n]=this.output;return e?a.flipPixels(this._imageData.data,t,n):this._imageData.data.slice(0)}_imageTo3DArray(e){const t=new Array(e.length);for(let n=0;n<e.length;n++)t[n]=this._mediaTo2DArray(e[n]);return t}_resultKernelHeader(){if(this.graphical)return"";if(this.immutable)return"";if(!this.pipeline)return"";switch(this.output.length){case 1:return this._mutableKernel1DResults();case 2:return this._mutableKernel2DResults();case 3:return this._mutableKernel3DResults()}}_resultKernelBody(e){switch(this.output.length){case 1:return(!this.immutable&&this.pipeline?this._resultMutableKernel1DLoop(e):this._resultImmutableKernel1DLoop(e))+this._kernelOutput();case 2:return(!this.immutable&&this.pipeline?this._resultMutableKernel2DLoop(e):this._resultImmutableKernel2DLoop(e))+this._kernelOutput();case 3:return(!this.immutable&&this.pipeline?this._resultMutableKernel3DLoop(e):this._resultImmutableKernel3DLoop(e))+this._kernelOutput();default:throw new Error("unsupported size kernel")}}_graphicalKernelBody(e){if(2===this.output.length)return this._graphicalKernel2DLoop(e)+this._graphicalOutput();throw new Error("unsupported size kernel")}_graphicalOutput(){return"\n    this._imageData.data.set(this._colorData);\n    this.context.putImageData(this._imageData, 0, 0);\n    return;"}_getKernelResultTypeConstructorString(){switch(this.returnType){case"LiteralInteger":case"Number":case"Integer":case"Float":return"Float32Array";case"Array(2)":case"Array(3)":case"Array(4)":return"Array";default:if(this.graphical)return"Float32Array";throw new Error(`unhandled returnType ${this.returnType}`)}}_resultImmutableKernel1DLoop(e){const t=this._getKernelResultTypeConstructorString();return`  const outputX = _this.output[0];\n    const result = new ${t}(outputX);\n    ${this._mapSubKernels((e=>`const result_${e.name} = new ${t}(outputX);\n`)).join("    ")}\n    ${this._mapSubKernels((e=>`let subKernelResult_${e.name};\n`)).join("    ")}\n    for (let x = 0; x < outputX; x++) {\n      this.thread.x = x;\n      this.thread.y = 0;\n      this.thread.z = 0;\n      ${e}\n    }`}_mutableKernel1DResults(){const e=this._getKernelResultTypeConstructorString();return`  const outputX = _this.output[0];\n    const result = new ${e}(outputX);\n    ${this._mapSubKernels((t=>`const result_${t.name} = new ${e}(outputX);\n`)).join("    ")}\n    ${this._mapSubKernels((e=>`let subKernelResult_${e.name};\n`)).join("    ")}`}_resultMutableKernel1DLoop(e){return`  const outputX = _this.output[0];\n    for (let x = 0; x < outputX; x++) {\n      this.thread.x = x;\n      this.thread.y = 0;\n      this.thread.z = 0;\n      ${e}\n    }`}_resultImmutableKernel2DLoop(e){const t=this._getKernelResultTypeConstructorString();return`  const outputX = _this.output[0];\n    const outputY = _this.output[1];\n    const result = new Array(outputY);\n    ${this._mapSubKernels((e=>`const result_${e.name} = new Array(outputY);\n`)).join("    ")}\n    ${this._mapSubKernels((e=>`let subKernelResult_${e.name};\n`)).join("    ")}\n    for (let y = 0; y < outputY; y++) {\n      this.thread.z = 0;\n      this.thread.y = y;\n      const resultX = result[y] = new ${t}(outputX);\n      ${this._mapSubKernels((e=>`const resultX_${e.name} = result_${e.name}[y] = new ${t}(outputX);\n`)).join("")}\n      for (let x = 0; x < outputX; x++) {\n        this.thread.x = x;\n        ${e}\n      }\n    }`}_mutableKernel2DResults(){const e=this._getKernelResultTypeConstructorString();return`  const outputX = _this.output[0];\n    const outputY = _this.output[1];\n    const result = new Array(outputY);\n    ${this._mapSubKernels((e=>`const result_${e.name} = new Array(outputY);\n`)).join("    ")}\n    ${this._mapSubKernels((e=>`let subKernelResult_${e.name};\n`)).join("    ")}\n    for (let y = 0; y < outputY; y++) {\n      const resultX = result[y] = new ${e}(outputX);\n      ${this._mapSubKernels((t=>`const resultX_${t.name} = result_${t.name}[y] = new ${e}(outputX);\n`)).join("")}\n    }`}_resultMutableKernel2DLoop(e){const t=this._getKernelResultTypeConstructorString();return`  const outputX = _this.output[0];\n    const outputY = _this.output[1];\n    for (let y = 0; y < outputY; y++) {\n      this.thread.z = 0;\n      this.thread.y = y;\n      const resultX = result[y];\n      ${this._mapSubKernels((e=>`const resultX_${e.name} = result_${e.name}[y] = new ${t}(outputX);\n`)).join("")}\n      for (let x = 0; x < outputX; x++) {\n        this.thread.x = x;\n        ${e}\n      }\n    }`}_graphicalKernel2DLoop(e){return`  const outputX = _this.output[0];\n    const outputY = _this.output[1];\n    for (let y = 0; y < outputY; y++) {\n      this.thread.z = 0;\n      this.thread.y = y;\n      for (let x = 0; x < outputX; x++) {\n        this.thread.x = x;\n        ${e}\n      }\n    }`}_resultImmutableKernel3DLoop(e){const t=this._getKernelResultTypeConstructorString();return`  const outputX = _this.output[0];\n    const outputY = _this.output[1];\n    const outputZ = _this.output[2];\n    const result = new Array(outputZ);\n    ${this._mapSubKernels((e=>`const result_${e.name} = new Array(outputZ);\n`)).join("    ")}\n    ${this._mapSubKernels((e=>`let subKernelResult_${e.name};\n`)).join("    ")}\n    for (let z = 0; z < outputZ; z++) {\n      this.thread.z = z;\n      const resultY = result[z] = new Array(outputY);\n      ${this._mapSubKernels((e=>`const resultY_${e.name} = result_${e.name}[z] = new Array(outputY);\n`)).join("      ")}\n      for (let y = 0; y < outputY; y++) {\n        this.thread.y = y;\n        const resultX = resultY[y] = new ${t}(outputX);\n        ${this._mapSubKernels((e=>`const resultX_${e.name} = resultY_${e.name}[y] = new ${t}(outputX);\n`)).join("        ")}\n        for (let x = 0; x < outputX; x++) {\n          this.thread.x = x;\n          ${e}\n        }\n      }\n    }`}_mutableKernel3DResults(){const e=this._getKernelResultTypeConstructorString();return`  const outputX = _this.output[0];\n    const outputY = _this.output[1];\n    const outputZ = _this.output[2];\n    const result = new Array(outputZ);\n    ${this._mapSubKernels((e=>`const result_${e.name} = new Array(outputZ);\n`)).join("    ")}\n    ${this._mapSubKernels((e=>`let subKernelResult_${e.name};\n`)).join("    ")}\n    for (let z = 0; z < outputZ; z++) {\n      const resultY = result[z] = new Array(outputY);\n      ${this._mapSubKernels((e=>`const resultY_${e.name} = result_${e.name}[z] = new Array(outputY);\n`)).join("      ")}\n      for (let y = 0; y < outputY; y++) {\n        const resultX = resultY[y] = new ${e}(outputX);\n        ${this._mapSubKernels((t=>`const resultX_${t.name} = resultY_${t.name}[y] = new ${e}(outputX);\n`)).join("        ")}\n      }\n    }`}_resultMutableKernel3DLoop(e){return`  const outputX = _this.output[0];\n    const outputY = _this.output[1];\n    const outputZ = _this.output[2];\n    for (let z = 0; z < outputZ; z++) {\n      this.thread.z = z;\n      const resultY = result[z];\n      for (let y = 0; y < outputY; y++) {\n        this.thread.y = y;\n        const resultX = resultY[y];\n        for (let x = 0; x < outputX; x++) {\n          this.thread.x = x;\n          ${e}\n        }\n      }\n    }`}_kernelOutput(){return this.subKernels?`\n    return {\n      result: result,\n      ${this.subKernels.map((e=>`${e.property}: result_${e.name}`)).join(",\n      ")}\n    };`:"\n    return result;"}_mapSubKernels(e){return null===this.subKernels?[""]:this.subKernels.map(e)}destroy(e){e&&delete this.canvas}static destroyContext(e){}toJSON(){const e=super.toJSON();return e.functionNodes=i.fromKernel(this,s).toJSON(),e}setOutput(e){super.setOutput(e);const[t,n]=this.output;this.graphical&&(this._imageData=this.context.createImageData(t,n),this._colorData=new Uint8ClampedArray(t*n*4))}prependString(e){if(this._kernelString)throw new Error("Kernel already built");this._prependedString.push(e)}hasPrependString(e){return this._prependedString.indexOf(e)>-1}}t.exports={CPUKernel:l}},{"../../utils":114,"../function-builder":9,"../kernel":36,"./function-node":6,"./kernel-string":7}],9:[function(e,t,n){class r{static fromKernel(e,t,n){const{kernelArguments:i,kernelConstants:s,argumentNames:a,argumentSizes:o,argumentBitRatios:l,constants:u,constantBitRatios:c,debug:h,loopMaxIterations:p,nativeFunctions:d,output:f,optimizeFloatMemory:m,precision:g,plugins:y,source:b,subKernels:x,functions:v,leadingReturnStatement:w,followingReturnStatement:S,dynamicArguments:k,dynamicOutput:T}=e,A=new Array(i.length),E={};for(let r=0;r<i.length;r++)A[r]=i[r].type;for(let r=0;r<s.length;r++){const e=s[r];E[e.name]=e.type}const _=(e,t)=>j.needsArgumentType(e,t),L=(e,t,n)=>{j.assignArgumentType(e,t,n)},C=(e,t,n)=>j.lookupReturnType(e,t,n),I=e=>j.lookupFunctionArgumentTypes(e),$=(e,t)=>j.lookupFunctionArgumentName(e,t),O=(e,t)=>j.lookupFunctionArgumentBitRatio(e,t),R=(e,t,n,r)=>{j.assignArgumentType(e,t,n,r)},D=(e,t,n,r)=>{j.assignArgumentBitRatio(e,t,n,r)},z=(e,t,n)=>{j.trackFunctionCall(e,t,n)},P=(e,n)=>{const r=[];for(let t=0;t<e.params.length;t++)r.push(e.params[t].name);const i=new t(n,Object.assign({},M,{returnType:null,ast:e,name:e.id.name,argumentNames:r,lookupReturnType:C,lookupFunctionArgumentTypes:I,lookupFunctionArgumentName:$,lookupFunctionArgumentBitRatio:O,needsArgumentType:_,assignArgumentType:L,triggerImplyArgumentType:R,triggerImplyArgumentBitRatio:D,onFunctionCall:z}));i.traceFunctionAST(e),j.addFunctionNode(i)},M=Object.assign({isRootKernel:!1,onNestedFunction:P,lookupReturnType:C,lookupFunctionArgumentTypes:I,lookupFunctionArgumentName:$,lookupFunctionArgumentBitRatio:O,needsArgumentType:_,assignArgumentType:L,triggerImplyArgumentType:R,triggerImplyArgumentBitRatio:D,onFunctionCall:z,optimizeFloatMemory:m,precision:g,constants:u,constantTypes:E,constantBitRatios:c,debug:h,loopMaxIterations:p,output:f,plugins:y,dynamicArguments:k,dynamicOutput:T},n||{}),N=Object.assign({},M,{isRootKernel:!0,name:"kernel",argumentNames:a,argumentTypes:A,argumentSizes:o,argumentBitRatios:l,leadingReturnStatement:w,followingReturnStatement:S});if("object"===typeof b&&b.functionNodes)return(new r).fromJSON(b.functionNodes,t);const F=new t(b,N);let V=null;v&&(V=v.map((e=>new t(e.source,{returnType:e.returnType,argumentTypes:e.argumentTypes,output:f,plugins:y,constants:u,constantTypes:E,constantBitRatios:c,optimizeFloatMemory:m,precision:g,lookupReturnType:C,lookupFunctionArgumentTypes:I,lookupFunctionArgumentName:$,lookupFunctionArgumentBitRatio:O,needsArgumentType:_,assignArgumentType:L,triggerImplyArgumentType:R,triggerImplyArgumentBitRatio:D,onFunctionCall:z,onNestedFunction:P}))));let K=null;x&&(K=x.map((e=>{const{name:n,source:r}=e;return new t(r,Object.assign({},M,{name:n,isSubKernel:!0,isRootKernel:!1}))})));const j=new r({kernel:e,rootNode:F,functionNodes:V,nativeFunctions:d,subKernelNodes:K});return j}constructor(e){if(e=e||{},this.kernel=e.kernel,this.rootNode=e.rootNode,this.functionNodes=e.functionNodes||[],this.subKernelNodes=e.subKernelNodes||[],this.nativeFunctions=e.nativeFunctions||[],this.functionMap={},this.nativeFunctionNames=[],this.lookupChain=[],this.functionNodeDependencies={},this.functionCalls={},this.rootNode&&(this.functionMap.kernel=this.rootNode),this.functionNodes)for(let t=0;t<this.functionNodes.length;t++)this.functionMap[this.functionNodes[t].name]=this.functionNodes[t];if(this.subKernelNodes)for(let t=0;t<this.subKernelNodes.length;t++)this.functionMap[this.subKernelNodes[t].name]=this.subKernelNodes[t];if(this.nativeFunctions)for(let t=0;t<this.nativeFunctions.length;t++){const e=this.nativeFunctions[t];this.nativeFunctionNames.push(e.name)}}addFunctionNode(e){if(!e.name)throw new Error("functionNode.name needs set");this.functionMap[e.name]=e,e.isRootKernel&&(this.rootNode=e)}traceFunctionCalls(e,t){if(e=e||"kernel",t=t||[],this.nativeFunctionNames.indexOf(e)>-1){const n=t.indexOf(e);if(-1===n)t.push(e);else{const e=t.splice(n,1)[0];t.push(e)}return t}const n=this.functionMap[e];if(n){const r=t.indexOf(e);if(-1===r){t.push(e),n.toString();for(let e=0;e<n.calledFunctions.length;++e)this.traceFunctionCalls(n.calledFunctions[e],t)}else{const e=t.splice(r,1)[0];t.push(e)}}return t}getPrototypeString(e){return this.getPrototypes(e).join("\n")}getPrototypes(e){return this.rootNode&&this.rootNode.toString(),e?this.getPrototypesFromFunctionNames(this.traceFunctionCalls(e,[]).reverse()):this.getPrototypesFromFunctionNames(Object.keys(this.functionMap))}getStringFromFunctionNames(e){const t=[];for(let n=0;n<e.length;++n)this.functionMap[e[n]]&&t.push(this.functionMap[e[n]].toString());return t.join("\n")}getPrototypesFromFunctionNames(e){const t=[];for(let n=0;n<e.length;++n){const r=e[n],i=this.nativeFunctionNames.indexOf(r);if(i>-1){t.push(this.nativeFunctions[i].source);continue}const s=this.functionMap[r];s&&t.push(s.toString())}return t}toJSON(){return this.traceFunctionCalls(this.rootNode.name).reverse().map((e=>{const t=this.nativeFunctions.indexOf(e);if(t>-1)return{name:e,source:this.nativeFunctions[t].source};if(this.functionMap[e])return this.functionMap[e].toJSON();throw new Error(`function ${e} not found`)}))}fromJSON(e,t){this.functionMap={};for(let n=0;n<e.length;n++){const r=e[n];this.functionMap[r.settings.name]=new t(r.ast,r.settings)}return this}getString(e){return e?this.getStringFromFunctionNames(this.traceFunctionCalls(e).reverse()):this.getStringFromFunctionNames(Object.keys(this.functionMap))}lookupReturnType(e,t,n){if("CallExpression"!==t.type)throw new Error(`expected ast type of "CallExpression", but is ${t.type}`);if(this._isNativeFunction(e))return this._lookupNativeFunctionReturnType(e);if(this._isFunction(e)){const r=this._getFunction(e);if(r.returnType)return r.returnType;{for(let i=0;i<this.lookupChain.length;i++)if(this.lookupChain[i].ast===t){if(0===r.argumentTypes.length&&t.arguments.length>0){const e=t.arguments;for(let t=0;t<e.length;t++)this.lookupChain.push({name:n.name,ast:e[i],requestingNode:n}),r.argumentTypes[t]=n.getType(e[t]),this.lookupChain.pop();return r.returnType=r.getType(r.getJsAST())}throw new Error("circlical logic detected!")}this.lookupChain.push({name:n.name,ast:t,requestingNode:n});const e=r.getType(r.getJsAST());return this.lookupChain.pop(),r.returnType=e}}return null}_getFunction(e){return this._isFunction(e),this.functionMap[e]}_isFunction(e){return Boolean(this.functionMap[e])}_getNativeFunction(e){for(let t=0;t<this.nativeFunctions.length;t++)if(this.nativeFunctions[t].name===e)return this.nativeFunctions[t];return null}_isNativeFunction(e){return Boolean(this._getNativeFunction(e))}_lookupNativeFunctionReturnType(e){let t=this._getNativeFunction(e);if(t)return t.returnType;throw new Error(`Native function ${e} not found`)}lookupFunctionArgumentTypes(e){return this._isNativeFunction(e)?this._getNativeFunction(e).argumentTypes:this._isFunction(e)?this._getFunction(e).argumentTypes:null}lookupFunctionArgumentName(e,t){return this._getFunction(e).argumentNames[t]}lookupFunctionArgumentBitRatio(e,t){if(!this._isFunction(e))throw new Error("function not found");if(this.rootNode.name===e){const e=this.rootNode.argumentNames.indexOf(t);if(-1!==e)return this.rootNode.argumentBitRatios[e]}const n=this._getFunction(e),r=n.argumentNames.indexOf(t);if(-1===r)throw new Error("argument not found");const i=n.argumentBitRatios[r];if("number"!==typeof i)throw new Error("argument bit ratio not found");return i}needsArgumentType(e,t){return!!this._isFunction(e)&&!this._getFunction(e).argumentTypes[t]}assignArgumentType(e,t,n,r){if(!this._isFunction(e))return;const i=this._getFunction(e);i.argumentTypes[t]||(i.argumentTypes[t]=n)}assignArgumentBitRatio(e,t,n,r){const i=this._getFunction(e);if(this._isNativeFunction(n))return null;const s=this._getFunction(n),a=i.argumentNames.indexOf(t);if(-1===a)throw new Error(`Argument ${t} not found in arguments from function ${e}`);const o=i.argumentBitRatios[a];if("number"!==typeof o)throw new Error(`Bit ratio for argument ${t} not found in function ${e}`);s.argumentBitRatios||(s.argumentBitRatios=new Array(s.argumentNames.length));const l=s.argumentBitRatios[a];if("number"===typeof l){if(l!==o)throw new Error(`Incompatible bit ratio found at function ${e} at argument ${t}`);return l}return s.argumentBitRatios[a]=o,o}trackFunctionCall(e,t,n){this.functionNodeDependencies[e]||(this.functionNodeDependencies[e]=new Set,this.functionCalls[e]=[]),this.functionNodeDependencies[e].add(t),this.functionCalls[e].push(n)}getKernelResultType(){return this.rootNode.returnType||this.rootNode.getType(this.rootNode.ast)}getSubKernelResultType(e){const t=this.subKernelNodes[e];let n=!1;for(let r=0;r<this.rootNode.functionCalls.length;r++)this.rootNode.functionCalls[r].ast.callee.name===t.name&&(n=!0);if(!n)throw new Error(`SubKernel ${t.name} never called by kernel`);return t.returnType||t.getType(t.getJsAST())}getReturnTypes(){const e={[this.rootNode.name]:this.rootNode.getType(this.rootNode.ast)},t=this.traceFunctionCalls(this.rootNode.name);for(let n=0;n<t.length;n++){const r=t[n],i=this.functionMap[r];e[r]=i.getType(i.ast)}return e}}t.exports={FunctionBuilder:r}},{}],10:[function(e,t,n){const r=e("acorn"),{utils:i}=e("../utils"),{FunctionTracer:s}=e("./function-tracer");class a{constructor(e,t){if(!e&&!t.ast)throw new Error("source parameter is missing");if(t=t||{},this.source=e,this.ast=null,this.name="string"===typeof e?t.isRootKernel?"kernel":t.name||i.getFunctionNameFromString(e):null,this.calledFunctions=[],this.constants={},this.constantTypes={},this.constantBitRatios={},this.isRootKernel=!1,this.isSubKernel=!1,this.debug=null,this.functions=null,this.identifiers=null,this.contexts=null,this.functionCalls=null,this.states=[],this.needsArgumentType=null,this.assignArgumentType=null,this.lookupReturnType=null,this.lookupFunctionArgumentTypes=null,this.lookupFunctionArgumentBitRatio=null,this.triggerImplyArgumentType=null,this.triggerImplyArgumentBitRatio=null,this.onNestedFunction=null,this.onFunctionCall=null,this.optimizeFloatMemory=null,this.precision=null,this.loopMaxIterations=null,this.argumentNames="string"===typeof this.source?i.getArgumentNamesFromString(this.source):null,this.argumentTypes=[],this.argumentSizes=[],this.argumentBitRatios=null,this.returnType=null,this.output=[],this.plugins=null,this.leadingReturnStatement=null,this.followingReturnStatement=null,this.dynamicOutput=null,this.dynamicArguments=null,this.strictTypingChecking=!1,this.fixIntegerDivisionAccuracy=null,t)for(const n in t)t.hasOwnProperty(n)&&this.hasOwnProperty(n)&&(this[n]=t[n]);this.literalTypes={},this.validate(),this._string=null,this._internalVariableNames={}}validate(){if("string"!==typeof this.source&&!this.ast)throw new Error("this.source not a string");if(!this.ast&&!i.isFunctionString(this.source))throw new Error("this.source not a function string");if(!this.name)throw new Error("this.name could not be set");if(this.argumentTypes.length>0&&this.argumentTypes.length!==this.argumentNames.length)throw new Error(`argumentTypes count of ${this.argumentTypes.length} exceeds ${this.argumentNames.length}`);if(this.output.length<1)throw new Error("this.output is not big enough")}isIdentifierConstant(e){return!!this.constants&&this.constants.hasOwnProperty(e)}isInput(e){return"Input"===this.argumentTypes[this.argumentNames.indexOf(e)]}pushState(e){this.states.push(e)}popState(e){if(this.state!==e)throw new Error(`Cannot popState ${e} when in ${this.state}`);this.states.pop()}isState(e){return this.state===e}get state(){return this.states[this.states.length-1]}astMemberExpressionUnroll(e){if("Identifier"===e.type)return e.name;if("ThisExpression"===e.type)return"this";if("MemberExpression"===e.type&&e.object&&e.property)return e.object.hasOwnProperty("name")&&"Math"!==e.object.name?this.astMemberExpressionUnroll(e.property):this.astMemberExpressionUnroll(e.object)+"."+this.astMemberExpressionUnroll(e.property);if(e.hasOwnProperty("expressions")){const t=e.expressions[0];if("Literal"===t.type&&0===t.value&&2===e.expressions.length)return this.astMemberExpressionUnroll(e.expressions[1])}throw this.astErrorOutput("Unknown astMemberExpressionUnroll",e)}getJsAST(e){if(this.ast)return this.ast;if("object"===typeof this.source)return this.traceFunctionAST(this.source),this.ast=this.source;if(null===(e=e||r))throw new Error("Missing JS to AST parser");const t=Object.freeze(e.parse(`const parser_${this.name} = ${this.source};`,{locations:!0})),n=t.body[0].declarations[0].init;if(this.traceFunctionAST(n),!t)throw new Error("Failed to parse JS code");return this.ast=n}traceFunctionAST(e){const{contexts:t,declarations:n,functions:r,identifiers:i,functionCalls:a}=new s(e);this.contexts=t,this.identifiers=i,this.functionCalls=a,this.functions=r;for(let s=0;s<n.length;s++){const e=n[s],{ast:t,inForLoopInit:r,inForLoopTest:i}=e,{init:a}=t,o=this.getDependencies(a);let l=null;if(r&&i)l="Integer";else if(a){const e=this.getType(a);switch(e){case"Integer":case"Float":case"Number":l="MemberExpression"===a.type?e:"Number";break;case"LiteralInteger":l="Number";break;default:l=e}}e.valueType=l,e.dependencies=o,e.isSafe=this.isSafeDependencies(o)}for(let s=0;s<r.length;s++)this.onNestedFunction(r[s],this.source)}getDeclaration(e){for(let t=0;t<this.identifiers.length;t++){const n=this.identifiers[t];if(e===n.ast)return n.declaration}return null}getVariableType(e){if("Identifier"!==e.type)throw new Error(`ast of ${e.type} not "Identifier"`);let t=null;const n=this.argumentNames.indexOf(e.name);if(-1===n){const t=this.getDeclaration(e);if(t)return t.valueType}else{const e=this.argumentTypes[n];e&&(t=e)}if(!t&&this.strictTypingChecking)throw new Error(`Declaration of ${name} not found`);return t}getLookupType(e){if(!o.hasOwnProperty(e))throw new Error(`unknown typeLookupMap ${e}`);return o[e]}getConstantType(e){if(this.constantTypes[e]){const t=this.constantTypes[e];return"Float"===t?"Number":t}throw new Error(`Type for constant "${e}" not declared`)}toString(){return this._string?this._string:this._string=this.astGeneric(this.getJsAST(),[]).join("").trim()}toJSON(){const e={source:this.source,name:this.name,constants:this.constants,constantTypes:this.constantTypes,isRootKernel:this.isRootKernel,isSubKernel:this.isSubKernel,debug:this.debug,output:this.output,loopMaxIterations:this.loopMaxIterations,argumentNames:this.argumentNames,argumentTypes:this.argumentTypes,argumentSizes:this.argumentSizes,returnType:this.returnType,leadingReturnStatement:this.leadingReturnStatement,followingReturnStatement:this.followingReturnStatement};return{ast:this.ast,settings:e}}getType(e){if(Array.isArray(e))return this.getType(e[e.length-1]);switch(e.type){case"BlockStatement":return this.getType(e.body);case"ArrayExpression":switch(this.getType(e.elements[0])){case"Array(2)":case"Array(3)":case"Array(4)":return`Matrix(${e.elements.length})`}return`Array(${e.elements.length})`;case"Literal":const t=this.astKey(e);return this.literalTypes[t]?this.literalTypes[t]:Number.isInteger(e.value)?"LiteralInteger":!0===e.value||!1===e.value?"Boolean":"Number";case"AssignmentExpression":return this.getType(e.left);case"CallExpression":if(this.isAstMathFunction(e))return"Number";if(!e.callee||!e.callee.name){if("SequenceExpression"===e.callee.type&&e.callee.expressions[e.callee.expressions.length-1].property.name){const t=e.callee.expressions[e.callee.expressions.length-1].property.name;return this.inferArgumentTypesIfNeeded(t,e.arguments),this.lookupReturnType(t,e,this)}if("this.color"===this.getVariableSignature(e.callee,!0))return null;if("MemberExpression"===e.callee.type&&e.callee.object&&e.callee.property&&e.callee.property.name&&e.arguments){const t=e.callee.property.name;return this.inferArgumentTypesIfNeeded(t,e.arguments),this.lookupReturnType(t,e,this)}throw this.astErrorOutput("Unknown call expression",e)}if(e.callee&&e.callee.name){const t=e.callee.name;return this.inferArgumentTypesIfNeeded(t,e.arguments),this.lookupReturnType(t,e,this)}throw this.astErrorOutput(`Unhandled getType Type "${e.type}"`,e);case"LogicalExpression":return"Boolean";case"BinaryExpression":switch(e.operator){case"%":case"/":if(this.fixIntegerDivisionAccuracy)return"Number";break;case">":case"<":return"Boolean";case"&":case"|":case"^":case"<<":case">>":case">>>":return"Integer"}const n=this.getType(e.left);if(this.isState("skip-literal-correction"))return n;if("LiteralInteger"===n){const t=this.getType(e.right);return"LiteralInteger"===t?e.left.value%1===0?"Integer":"Float":t}return o[n]||n;case"UpdateExpression":case"ReturnStatement":return this.getType(e.argument);case"UnaryExpression":return"~"===e.operator?"Integer":this.getType(e.argument);case"VariableDeclaration":{const t=e.declarations;let n;for(let e=0;e<t.length;e++){const r=t[e];n=this.getType(r)}if(!n)throw this.astErrorOutput("Unable to find type for declaration",e);return n}case"VariableDeclarator":const r=this.getDeclaration(e.id);if(!r)throw this.astErrorOutput("Unable to find declarator",e);if(!r.valueType)throw this.astErrorOutput("Unable to find declarator valueType",e);return r.valueType;case"Identifier":if("Infinity"===e.name)return"Number";if(this.isAstVariable(e)&&"value"===this.getVariableSignature(e))return this.getCheckVariableType(e);const i=this.findIdentifierOrigin(e);return i&&i.init?this.getType(i.init):null;case"MemberExpression":if(this.isAstMathFunction(e)){switch(e.property.name){case"ceil":case"floor":case"round":return"Integer"}return"Number"}if(this.isAstVariable(e)){switch(this.getVariableSignature(e)){case"value[]":return this.getLookupType(this.getCheckVariableType(e.object));case"value[][]":return this.getLookupType(this.getCheckVariableType(e.object.object));case"value[][][]":return this.getLookupType(this.getCheckVariableType(e.object.object.object));case"value[][][][]":return this.getLookupType(this.getCheckVariableType(e.object.object.object.object));case"value.thread.value":case"this.thread.value":return"Integer";case"this.output.value":return this.dynamicOutput?"Integer":"LiteralInteger";case"this.constants.value":return this.getConstantType(e.property.name);case"this.constants.value[]":return this.getLookupType(this.getConstantType(e.object.property.name));case"this.constants.value[][]":return this.getLookupType(this.getConstantType(e.object.object.property.name));case"this.constants.value[][][]":return this.getLookupType(this.getConstantType(e.object.object.object.property.name));case"this.constants.value[][][][]":return this.getLookupType(this.getConstantType(e.object.object.object.object.property.name));case"fn()[]":case"fn()[][]":case"fn()[][][]":return this.getLookupType(this.getType(e.object));case"value.value":if(this.isAstMathVariable(e))return"Number";switch(e.property.name){case"r":case"g":case"b":case"a":return this.getLookupType(this.getCheckVariableType(e.object))}case"[][]":return"Number"}throw this.astErrorOutput("Unhandled getType MemberExpression",e)}throw this.astErrorOutput("Unhandled getType MemberExpression",e);case"ConditionalExpression":case"IfStatement":return this.getType(e.consequent);case"FunctionDeclaration":case"FunctionExpression":const s=this.findLastReturn(e.body);return s?this.getType(s):null;case"SequenceExpression":return this.getType(e.expressions[e.expressions.length-1]);default:throw this.astErrorOutput(`Unhandled getType Type "${e.type}"`,e)}}getCheckVariableType(e){const t=this.getVariableType(e);if(!t)throw this.astErrorOutput(`${e.type} is not defined`,e);return t}inferArgumentTypesIfNeeded(e,t){for(let n=0;n<t.length;n++){if(!this.needsArgumentType(e,n))continue;const r=this.getType(t[n]);if(!r)throw this.astErrorOutput(`Unable to infer argument ${n}`,t[n]);this.assignArgumentType(e,n,r)}}isAstMathVariable(e){const t=["E","PI","SQRT2","SQRT1_2","LN2","LN10","LOG2E","LOG10E"];return"MemberExpression"===e.type&&e.object&&"Identifier"===e.object.type&&"Math"===e.object.name&&e.property&&"Identifier"===e.property.type&&t.indexOf(e.property.name)>-1}isAstMathFunction(e){const t=["abs","acos","acosh","asin","asinh","atan","atan2","atanh","cbrt","ceil","clz32","cos","cosh","expm1","exp","floor","fround","imul","log","log2","log10","log1p","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc"];return"CallExpression"===e.type&&e.callee&&"MemberExpression"===e.callee.type&&e.callee.object&&"Identifier"===e.callee.object.type&&"Math"===e.callee.object.name&&e.callee.property&&"Identifier"===e.callee.property.type&&t.indexOf(e.callee.property.name)>-1}isAstVariable(e){return"Identifier"===e.type||"MemberExpression"===e.type}isSafe(e){return this.isSafeDependencies(this.getDependencies(e))}isSafeDependencies(e){return!e||!e.every||e.every((e=>e.isSafe))}getDependencies(e,t,n){if(t||(t=[]),!e)return null;if(Array.isArray(e)){for(let r=0;r<e.length;r++)this.getDependencies(e[r],t,n);return t}switch(e.type){case"AssignmentExpression":return this.getDependencies(e.left,t,n),this.getDependencies(e.right,t,n),t;case"ConditionalExpression":return this.getDependencies(e.test,t,n),this.getDependencies(e.alternate,t,n),this.getDependencies(e.consequent,t,n),t;case"Literal":t.push({origin:"literal",value:e.value,isSafe:!0!==n&&e.value>-1/0&&e.value<1/0&&!isNaN(e.value)});break;case"VariableDeclarator":return this.getDependencies(e.init,t,n);case"Identifier":const r=this.getDeclaration(e);if(r)t.push({name:e.name,origin:"declaration",isSafe:!n&&this.isSafeDependencies(r.dependencies)});else if(this.argumentNames.indexOf(e.name)>-1)t.push({name:e.name,origin:"argument",isSafe:!1});else if(this.strictTypingChecking)throw new Error(`Cannot find identifier origin "${e.name}"`);break;case"FunctionDeclaration":return this.getDependencies(e.body.body[e.body.body.length-1],t,n);case"ReturnStatement":return this.getDependencies(e.argument,t);case"BinaryExpression":case"LogicalExpression":return n="/"===e.operator||"*"===e.operator,this.getDependencies(e.left,t,n),this.getDependencies(e.right,t,n),t;case"UnaryExpression":case"UpdateExpression":return this.getDependencies(e.argument,t,n);case"VariableDeclaration":return this.getDependencies(e.declarations,t,n);case"ArrayExpression":return t.push({origin:"declaration",isSafe:!0}),t;case"CallExpression":return t.push({origin:"function",isSafe:!0}),t;case"MemberExpression":const i=this.getMemberExpressionDetails(e);switch(i.signature){case"value[]":this.getDependencies(e.object,t,n);break;case"value[][]":this.getDependencies(e.object.object,t,n);break;case"value[][][]":this.getDependencies(e.object.object.object,t,n);break;case"this.output.value":this.dynamicOutput&&t.push({name:i.name,origin:"output",isSafe:!1})}if(i)return i.property&&this.getDependencies(i.property,t,n),i.xProperty&&this.getDependencies(i.xProperty,t,n),i.yProperty&&this.getDependencies(i.yProperty,t,n),i.zProperty&&this.getDependencies(i.zProperty,t,n),t;case"SequenceExpression":return this.getDependencies(e.expressions,t,n);default:throw this.astErrorOutput(`Unhandled type ${e.type} in getDependencies`,e)}return t}getVariableSignature(e,t){if(!this.isAstVariable(e))throw new Error(`ast of type "${e.type}" is not a variable signature`);if("Identifier"===e.type)return"value";const n=[];for(;e;)e.computed?n.push("[]"):"ThisExpression"===e.type?n.unshift("this"):e.property&&e.property.name?"x"===e.property.name||"y"===e.property.name||"z"===e.property.name?n.unshift(t?"."+e.property.name:".value"):"constants"===e.property.name||"thread"===e.property.name||"output"===e.property.name?n.unshift("."+e.property.name):n.unshift(t?"."+e.property.name:".value"):e.name?n.unshift(t?e.name:"value"):e.callee&&e.callee.name?n.unshift(t?e.callee.name+"()":"fn()"):e.elements?n.unshift("[]"):n.unshift("unknown"),e=e.object;const r=n.join("");return t||["value","value[]","value[][]","value[][][]","value[][][][]","value.value","value.thread.value","this.thread.value","this.output.value","this.constants.value","this.constants.value[]","this.constants.value[][]","this.constants.value[][][]","this.constants.value[][][][]","fn()[]","fn()[][]","fn()[][][]","[][]"].indexOf(r)>-1?r:null}build(){return this.toString().length>0}astGeneric(e,t){if(null===e)throw this.astErrorOutput("NULL ast",e);if(Array.isArray(e)){for(let n=0;n<e.length;n++)this.astGeneric(e[n],t);return t}switch(e.type){case"FunctionDeclaration":return this.astFunctionDeclaration(e,t);case"FunctionExpression":return this.astFunctionExpression(e,t);case"ReturnStatement":return this.astReturnStatement(e,t);case"Literal":return this.astLiteral(e,t);case"BinaryExpression":return this.astBinaryExpression(e,t);case"Identifier":return this.astIdentifierExpression(e,t);case"AssignmentExpression":return this.astAssignmentExpression(e,t);case"ExpressionStatement":return this.astExpressionStatement(e,t);case"EmptyStatement":return this.astEmptyStatement(e,t);case"BlockStatement":return this.astBlockStatement(e,t);case"IfStatement":return this.astIfStatement(e,t);case"SwitchStatement":return this.astSwitchStatement(e,t);case"BreakStatement":return this.astBreakStatement(e,t);case"ContinueStatement":return this.astContinueStatement(e,t);case"ForStatement":return this.astForStatement(e,t);case"WhileStatement":return this.astWhileStatement(e,t);case"DoWhileStatement":return this.astDoWhileStatement(e,t);case"VariableDeclaration":return this.astVariableDeclaration(e,t);case"VariableDeclarator":return this.astVariableDeclarator(e,t);case"ThisExpression":return this.astThisExpression(e,t);case"SequenceExpression":return this.astSequenceExpression(e,t);case"UnaryExpression":return this.astUnaryExpression(e,t);case"UpdateExpression":return this.astUpdateExpression(e,t);case"LogicalExpression":return this.astLogicalExpression(e,t);case"MemberExpression":return this.astMemberExpression(e,t);case"CallExpression":return this.astCallExpression(e,t);case"ArrayExpression":return this.astArrayExpression(e,t);case"DebuggerStatement":return this.astDebuggerStatement(e,t);case"ConditionalExpression":return this.astConditionalExpression(e,t)}throw this.astErrorOutput("Unknown ast type : "+e.type,e)}astErrorOutput(e,t){if("string"!==typeof this.source)return new Error(e);const n=i.getAstString(this.source,t),r=this.source.substr(t.start).split(/\n/),s=r.length>0?r[r.length-1]:0;return new Error(`${e} on line ${r.length}, position ${s.length}:\n ${n}`)}astDebuggerStatement(e,t){return t}astConditionalExpression(e,t){if("ConditionalExpression"!==e.type)throw this.astErrorOutput("Not a conditional expression",e);return t.push("("),this.astGeneric(e.test,t),t.push("?"),this.astGeneric(e.consequent,t),t.push(":"),this.astGeneric(e.alternate,t),t.push(")"),t}astFunction(e,t){throw new Error(`"astFunction" not defined on ${this.constructor.name}`)}astFunctionDeclaration(e,t){return this.isChildFunction(e)?t:this.astFunction(e,t)}astFunctionExpression(e,t){return this.isChildFunction(e)?t:this.astFunction(e,t)}isChildFunction(e){for(let t=0;t<this.functions.length;t++)if(this.functions[t]===e)return!0;return!1}astReturnStatement(e,t){return t}astLiteral(e,t){return this.literalTypes[this.astKey(e)]="Number",t}astBinaryExpression(e,t){return t}astIdentifierExpression(e,t){return t}astAssignmentExpression(e,t){return t}astExpressionStatement(e,t){return this.astGeneric(e.expression,t),t.push(";"),t}astEmptyStatement(e,t){return t}astBlockStatement(e,t){return t}astIfStatement(e,t){return t}astSwitchStatement(e,t){return t}astBreakStatement(e,t){return t.push("break;"),t}astContinueStatement(e,t){return t.push("continue;\n"),t}astForStatement(e,t){return t}astWhileStatement(e,t){return t}astDoWhileStatement(e,t){return t}astVariableDeclarator(e,t){return this.astGeneric(e.id,t),null!==e.init&&(t.push("="),this.astGeneric(e.init,t)),t}astThisExpression(e,t){return t}astSequenceExpression(e,t){const{expressions:n}=e,r=[];for(let i=0;i<n.length;i++){const e=n[i],t=[];this.astGeneric(e,t),r.push(t.join(""))}return r.length>1?t.push("(",r.join(","),")"):t.push(r[0]),t}astUnaryExpression(e,t){return this.checkAndUpconvertBitwiseUnary(e,t)||(e.prefix?(t.push(e.operator),this.astGeneric(e.argument,t)):(this.astGeneric(e.argument,t),t.push(e.operator))),t}checkAndUpconvertBitwiseUnary(e,t){}astUpdateExpression(e,t){return e.prefix?(t.push(e.operator),this.astGeneric(e.argument,t)):(this.astGeneric(e.argument,t),t.push(e.operator)),t}astLogicalExpression(e,t){return t.push("("),this.astGeneric(e.left,t),t.push(e.operator),this.astGeneric(e.right,t),t.push(")"),t}astMemberExpression(e,t){return t}astCallExpression(e,t){return t}astArrayExpression(e,t){return t}getMemberExpressionDetails(e){if("MemberExpression"!==e.type)throw this.astErrorOutput(`Expression ${e.type} not a MemberExpression`,e);let t=null,n=null;const r=this.getVariableSignature(e);switch(r){case"value":return null;case"value.thread.value":case"this.thread.value":case"this.output.value":return{signature:r,type:"Integer",name:e.property.name};case"value[]":if("string"!==typeof e.object.name)throw this.astErrorOutput("Unexpected expression",e);return t=e.object.name,{name:t,origin:"user",signature:r,type:this.getVariableType(e.object),xProperty:e.property};case"value[][]":if("string"!==typeof e.object.object.name)throw this.astErrorOutput("Unexpected expression",e);return t=e.object.object.name,{name:t,origin:"user",signature:r,type:this.getVariableType(e.object.object),yProperty:e.object.property,xProperty:e.property};case"value[][][]":if("string"!==typeof e.object.object.object.name)throw this.astErrorOutput("Unexpected expression",e);return t=e.object.object.object.name,{name:t,origin:"user",signature:r,type:this.getVariableType(e.object.object.object),zProperty:e.object.object.property,yProperty:e.object.property,xProperty:e.property};case"value[][][][]":if("string"!==typeof e.object.object.object.object.name)throw this.astErrorOutput("Unexpected expression",e);return t=e.object.object.object.object.name,{name:t,origin:"user",signature:r,type:this.getVariableType(e.object.object.object.object),zProperty:e.object.object.property,yProperty:e.object.property,xProperty:e.property};case"value.value":if("string"!==typeof e.property.name)throw this.astErrorOutput("Unexpected expression",e);if(this.isAstMathVariable(e))return t=e.property.name,{name:t,origin:"Math",type:"Number",signature:r};switch(e.property.name){case"r":case"g":case"b":case"a":return t=e.object.name,{name:t,property:e.property.name,origin:"user",signature:r,type:"Number"};default:throw this.astErrorOutput("Unexpected expression",e)}case"this.constants.value":if("string"!==typeof e.property.name)throw this.astErrorOutput("Unexpected expression",e);if(t=e.property.name,n=this.getConstantType(t),!n)throw this.astErrorOutput("Constant has no type",e);return{name:t,type:n,origin:"constants",signature:r};case"this.constants.value[]":if("string"!==typeof e.object.property.name)throw this.astErrorOutput("Unexpected expression",e);if(t=e.object.property.name,n=this.getConstantType(t),!n)throw this.astErrorOutput("Constant has no type",e);return{name:t,type:n,origin:"constants",signature:r,xProperty:e.property};case"this.constants.value[][]":if("string"!==typeof e.object.object.property.name)throw this.astErrorOutput("Unexpected expression",e);if(t=e.object.object.property.name,n=this.getConstantType(t),!n)throw this.astErrorOutput("Constant has no type",e);return{name:t,type:n,origin:"constants",signature:r,yProperty:e.object.property,xProperty:e.property};case"this.constants.value[][][]":if("string"!==typeof e.object.object.object.property.name)throw this.astErrorOutput("Unexpected expression",e);if(t=e.object.object.object.property.name,n=this.getConstantType(t),!n)throw this.astErrorOutput("Constant has no type",e);return{name:t,type:n,origin:"constants",signature:r,zProperty:e.object.object.property,yProperty:e.object.property,xProperty:e.property};case"fn()[]":case"fn()[][]":case"[][]":return{signature:r,property:e.property};default:throw this.astErrorOutput("Unexpected expression",e)}}findIdentifierOrigin(e){const t=[this.ast];for(;t.length>0;){const n=t[0];if("VariableDeclarator"===n.type&&n.id&&n.id.name&&n.id.name===e.name)return n;if(t.shift(),n.argument)t.push(n.argument);else if(n.body)t.push(n.body);else if(n.declarations)t.push(n.declarations);else if(Array.isArray(n))for(let e=0;e<n.length;e++)t.push(n[e])}return null}findLastReturn(e){const t=[e||this.ast];for(;t.length>0;){const e=t.pop();if("ReturnStatement"===e.type)return e;if("FunctionDeclaration"!==e.type)if(e.argument)t.push(e.argument);else if(e.body)t.push(e.body);else if(e.declarations)t.push(e.declarations);else if(Array.isArray(e))for(let n=0;n<e.length;n++)t.push(e[n]);else e.consequent?t.push(e.consequent):e.cases&&t.push(e.cases)}return null}getInternalVariableName(e){return this._internalVariableNames.hasOwnProperty(e)||(this._internalVariableNames[e]=0),this._internalVariableNames[e]++,1===this._internalVariableNames[e]?e:e+this._internalVariableNames[e]}astKey(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";if(!e.start||!e.end)throw new Error("AST start and end needed");return`${e.start}${t}${e.end}`}}const o={Number:"Number",Float:"Float",Integer:"Integer",Array:"Number","Array(2)":"Number","Array(3)":"Number","Array(4)":"Number","Matrix(2)":"Number","Matrix(3)":"Number","Matrix(4)":"Number",Array2D:"Number",Array3D:"Number",Input:"Number",HTMLCanvas:"Array(4)",OffscreenCanvas:"Array(4)",HTMLImage:"Array(4)",ImageBitmap:"Array(4)",ImageData:"Array(4)",HTMLVideo:"Array(4)",HTMLImageArray:"Array(4)",NumberTexture:"Number",MemoryOptimizedNumberTexture:"Number","Array1D(2)":"Array(2)","Array1D(3)":"Array(3)","Array1D(4)":"Array(4)","Array2D(2)":"Array(2)","Array2D(3)":"Array(3)","Array2D(4)":"Array(4)","Array3D(2)":"Array(2)","Array3D(3)":"Array(3)","Array3D(4)":"Array(4)","ArrayTexture(1)":"Number","ArrayTexture(2)":"Array(2)","ArrayTexture(3)":"Array(3)","ArrayTexture(4)":"Array(4)"};t.exports={FunctionNode:a}},{"../utils":114,"./function-tracer":11,acorn:1}],11:[function(e,t,n){const{utils:r}=e("../utils");function i(e){return e.length>0?e[e.length-1]:null}const s={trackIdentifiers:"trackIdentifiers",memberExpression:"memberExpression",inForLoopInit:"inForLoopInit"};class a{constructor(e){this.runningContexts=[],this.functionContexts=[],this.contexts=[],this.functionCalls=[],this.declarations=[],this.identifiers=[],this.functions=[],this.returnStatements=[],this.trackedIdentifiers=null,this.states=[],this.newFunctionContext(),this.scan(e)}isState(e){return this.states[this.states.length-1]===e}hasState(e){return this.states.indexOf(e)>-1}pushState(e){this.states.push(e)}popState(e){if(!this.isState(e))throw new Error(`Cannot pop the non-active state "${e}"`);this.states.pop()}get currentFunctionContext(){return i(this.functionContexts)}get currentContext(){return i(this.runningContexts)}newFunctionContext(){const e={"@contextType":"function"};this.contexts.push(e),this.functionContexts.push(e)}newContext(e){const t=Object.assign({"@contextType":"const/let"},this.currentContext);this.contexts.push(t),this.runningContexts.push(t),e();const{currentFunctionContext:n}=this;for(const r in n)n.hasOwnProperty(r)&&!t.hasOwnProperty(r)&&(t[r]=n[r]);return this.runningContexts.pop(),t}useFunctionContext(e){const t=i(this.functionContexts);this.runningContexts.push(t),e(),this.runningContexts.pop()}getIdentifiers(e){const t=this.trackedIdentifiers=[];return this.pushState(s.trackIdentifiers),e(),this.trackedIdentifiers=null,this.popState(s.trackIdentifiers),t}getDeclaration(e){const{currentContext:t,currentFunctionContext:n,runningContexts:r}=this,i=t[e]||n[e]||null;if(!i&&t===n&&r.length>0){const t=r[r.length-2];if(t[e])return t[e]}return i}scan(e){if(e)if(Array.isArray(e))for(let t=0;t<e.length;t++)this.scan(e[t]);else switch(e.type){case"Program":this.useFunctionContext((()=>{this.scan(e.body)}));break;case"BlockStatement":this.newContext((()=>{this.scan(e.body)}));break;case"AssignmentExpression":case"LogicalExpression":case"BinaryExpression":this.scan(e.left),this.scan(e.right);break;case"UpdateExpression":if("++"===e.operator){const t=this.getDeclaration(e.argument.name);t&&(t.suggestedType="Integer")}this.scan(e.argument);break;case"UnaryExpression":this.scan(e.argument);break;case"VariableDeclaration":"var"===e.kind?this.useFunctionContext((()=>{e.declarations=r.normalizeDeclarations(e),this.scan(e.declarations)})):(e.declarations=r.normalizeDeclarations(e),this.scan(e.declarations));break;case"VariableDeclarator":{const{currentContext:t}=this,n=this.hasState(s.inForLoopInit),r={ast:e,context:t,name:e.id.name,origin:"declaration",inForLoopInit:n,inForLoopTest:null,assignable:t===this.currentFunctionContext||!n&&!t.hasOwnProperty(e.id.name),suggestedType:null,valueType:null,dependencies:null,isSafe:null};t[e.id.name]||(t[e.id.name]=r),this.declarations.push(r),this.scan(e.id),this.scan(e.init);break}case"FunctionExpression":case"FunctionDeclaration":0===this.runningContexts.length?this.scan(e.body):this.functions.push(e);break;case"IfStatement":this.scan(e.test),this.scan(e.consequent),e.alternate&&this.scan(e.alternate);break;case"ForStatement":{let t;const n=this.newContext((()=>{this.pushState(s.inForLoopInit),this.scan(e.init),this.popState(s.inForLoopInit),t=this.getIdentifiers((()=>{this.scan(e.test)})),this.scan(e.update),this.newContext((()=>{this.scan(e.body)}))}));if(t)for(const e in n)"@contextType"!==e&&t.indexOf(e)>-1&&(n[e].inForLoopTest=!0);break}case"DoWhileStatement":case"WhileStatement":this.newContext((()=>{this.scan(e.body),this.scan(e.test)}));break;case"Identifier":this.isState(s.trackIdentifiers)&&this.trackedIdentifiers.push(e.name),this.identifiers.push({context:this.currentContext,declaration:this.getDeclaration(e.name),ast:e});break;case"ReturnStatement":this.returnStatements.push(e),this.scan(e.argument);break;case"MemberExpression":this.pushState(s.memberExpression),this.scan(e.object),this.scan(e.property),this.popState(s.memberExpression);break;case"ExpressionStatement":this.scan(e.expression);break;case"SequenceExpression":this.scan(e.expressions);break;case"CallExpression":this.functionCalls.push({context:this.currentContext,ast:e}),this.scan(e.arguments);break;case"ArrayExpression":this.scan(e.elements);break;case"ConditionalExpression":this.scan(e.test),this.scan(e.alternate),this.scan(e.consequent);break;case"SwitchStatement":this.scan(e.discriminant),this.scan(e.cases);break;case"SwitchCase":this.scan(e.test),this.scan(e.consequent);break;case"ThisExpression":case"Literal":case"DebuggerStatement":case"EmptyStatement":case"BreakStatement":case"ContinueStatement":break;default:throw new Error(`unhandled type "${e.type}"`)}}}t.exports={FunctionTracer:a}},{"../utils":114}],12:[function(e,t,n){const{glWiretap:r}=e("gl-wiretap"),{utils:i}=e("../../utils");function s(e){return e.toString().replace("=>","").replace(/^function /,"").replace(/utils[.]/g,"/*utils.*/")}function a(e,t,n,a,h){n.built||n.build.apply(n,t),t=t?Array.from(t).map((e=>{switch(typeof e){case"boolean":return new Boolean(e);case"number":return new Number(e);default:return e}})):null;const p=[],d=r(n.context,{useTrackablePrimitives:!0,onReadPixels:e=>{if(z.subKernels){if(f){const t=z.subKernels[m++].property;p.push(`    result${isNaN(t)?"."+t:`[${t}]`} = ${o(e,z)};`)}else p.push(`    const result = { result: ${o(e,z)} };`),f=!0;m===z.subKernels.length&&p.push("    return result;")}else e?p.push(`    return ${o(e,z)};`):p.push("    return null;")},onUnrecognizedArgumentLookup:e=>{const t=c(e,z.kernelArguments,[],d);if(t)return t;const n=c(e,z.kernelConstants,S?Object.keys(S).map((e=>S[e])):[],d);return n||null}});let f=!1,m=0;const{source:g,canvas:y,output:b,pipeline:x,graphical:v,loopMaxIterations:w,constants:S,optimizeFloatMemory:k,precision:T,fixIntegerDivisionAccuracy:A,functions:E,nativeFunctions:_,subKernels:L,immutable:C,argumentTypes:I,constantTypes:$,kernelArguments:O,kernelConstants:R,tactic:D}=n,z=new e(g,{canvas:y,context:d,checkContext:!1,output:b,pipeline:x,graphical:v,loopMaxIterations:w,constants:S,optimizeFloatMemory:k,precision:T,fixIntegerDivisionAccuracy:A,functions:E,nativeFunctions:_,subKernels:L,immutable:C,argumentTypes:I,constantTypes:$,tactic:D});let P=[];if(d.setIndent(2),z.build.apply(z,t),P.push(d.toString()),d.reset(),z.kernelArguments.forEach(((e,n)=>{switch(e.type){case"Integer":case"Boolean":case"Number":case"Float":case"Array":case"Array(2)":case"Array(3)":case"Array(4)":case"HTMLCanvas":case"HTMLImage":case"HTMLVideo":case"Input":d.insertVariable(`uploadValue_${e.name}`,e.uploadValue);break;case"HTMLImageArray":for(let r=0;r<t[n].length;r++){const i=t[n];d.insertVariable(`uploadValue_${e.name}[${r}]`,i[r])}break;case"MemoryOptimizedNumberTexture":case"NumberTexture":case"Array1D(2)":case"Array1D(3)":case"Array1D(4)":case"Array2D(2)":case"Array2D(3)":case"Array2D(4)":case"Array3D(2)":case"Array3D(3)":case"Array3D(4)":case"ArrayTexture(1)":case"ArrayTexture(2)":case"ArrayTexture(3)":case"ArrayTexture(4)":d.insertVariable(`uploadValue_${e.name}`,t[n].texture);break;default:throw new Error(`unhandled kernelArgumentType insertion for glWiretap of type ${e.type}`)}})),P.push("/** start of injected functions **/"),P.push(`function ${s(i.flattenTo)}`),P.push(`function ${s(i.flatten2dArrayTo)}`),P.push(`function ${s(i.flatten3dArrayTo)}`),P.push(`function ${s(i.flatten4dArrayTo)}`),P.push(`function ${s(i.isArray)}`),z.renderOutput!==z.renderTexture&&z.formatValues&&P.push(`  const renderOutput = function ${s(z.formatValues)};`),P.push("/** end of injected functions **/"),P.push(`  const innerKernel = function (${z.kernelArguments.map((e=>e.varName)).join(", ")}) {`),d.setIndent(4),z.run.apply(z,t),z.renderKernels?z.renderKernels():z.renderOutput&&z.renderOutput(),P.push("    /** start setup uploads for kernel values **/"),z.kernelArguments.forEach((e=>{P.push("    "+e.getStringValueHandler().split("\n").join("\n    "))})),P.push("    /** end setup uploads for kernel values **/"),P.push(d.toString()),z.renderOutput===z.renderTexture){d.reset();const e=d.getContextVariableName(z.framebuffer);if(z.renderKernels){const t=z.renderKernels(),n=d.getContextVariableName(z.texture.texture);P.push(`    return {\n      result: {\n        texture: ${n},\n        type: '${t.result.type}',\n        toArray: ${u(t.result,n,e)}\n      },`);const{subKernels:r,mappedTextures:i}=z;for(let s=0;s<r.length;s++){const n=i[s],a=r[s],o=t[a.property],l=d.getContextVariableName(n.texture);P.push(`\n      ${a.property}: {\n        texture: ${l},\n        type: '${o.type}',\n        toArray: ${u(o,l,e)}\n      },`)}P.push("    };")}else{const t=z.renderOutput(),n=d.getContextVariableName(z.texture.texture);P.push(`    return {\n        texture: ${n},\n        type: '${t.type}',\n        toArray: ${u(t,n,e)}\n      };`)}}P.push("    "+(h?"\n"+h+"    ":"")),P.push(p.join("\n")),P.push("  };"),z.graphical&&(P.push(l(z)),P.push("  innerKernel.getPixels = getPixels;")),P.push("  return innerKernel;");let M=[];return R.forEach((e=>{M.push(`${e.getStringValueHandler()}`)})),`function kernel(settings) {\n  const { context, constants } = settings;\n  ${M.join("")}\n  ${a||""}\n${P.join("\n")}\n}`}function o(e,t){const n="single"===t.precision?e:`new Float32Array(${e}.buffer)`;return t.output[2]?`renderOutput(${n}, ${t.output[0]}, ${t.output[1]}, ${t.output[2]})`:t.output[1]?`renderOutput(${n}, ${t.output[0]}, ${t.output[1]})`:`renderOutput(${n}, ${t.output[0]})`}function l(e){const t=e.getPixels.toString(),n=!/^function/.test(t);return i.flattenFunctionToString(`${n?"function ":""}${t}`,{findDependency:(e,t)=>"utils"===e?`const ${t} = ${i[t].toString()};`:null,thisLookup:t=>{if("context"===t)return null;if(e.hasOwnProperty(t))return JSON.stringify(e[t]);throw new Error(`unhandled thisLookup ${t}`)}})}function u(e,t,n){const r=e.toArray.toString(),s=!/^function/.test(r);return`() => {\n  function framebuffer() { return ${n}; };\n  ${i.flattenFunctionToString(`${s?"function ":""}${r}`,{findDependency:(t,n)=>{if("utils"===t)return`const ${n} = ${i[n].toString()};`;if("this"===t)return"framebuffer"===n?"":`${s?"function ":""}${e[n].toString()}`;throw new Error("unhandled fromObject")},thisLookup:(n,r)=>{if("texture"===n)return t;if("context"===n)return r?null:"gl";if(e.hasOwnProperty(n))return JSON.stringify(e[n]);throw new Error(`unhandled thisLookup ${n}`)}})}\n  return toArray();\n  }`}function c(e,t,n,r,i){if(null===e)return null;if(null===t)return null;switch(typeof e){case"boolean":case"number":return null}if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement)for(let s=0;s<t.length;s++){const i=t[s];if("HTMLImageArray"!==i.type&&i)continue;if(i.uploadValue!==e)continue;const a=n[s].indexOf(e);if(-1===a)continue;const o=`uploadValue_${i.name}[${a}]`;return r.insertVariable(o,e),o}for(let s=0;s<t.length;s++){const n=t[s];if(e!==n.uploadValue)continue;const i=`uploadValue_${n.name}`;return r.insertVariable(i,n),i}return null}t.exports={glKernelString:a}},{"../../utils":114,"gl-wiretap":3}],13:[function(e,t,n){const{Kernel:r}=e("../kernel"),{utils:i}=e("../../utils"),{GLTextureArray2Float:s}=e("./texture/array-2-float"),{GLTextureArray2Float2D:a}=e("./texture/array-2-float-2d"),{GLTextureArray2Float3D:o}=e("./texture/array-2-float-3d"),{GLTextureArray3Float:l}=e("./texture/array-3-float"),{GLTextureArray3Float2D:u}=e("./texture/array-3-float-2d"),{GLTextureArray3Float3D:c}=e("./texture/array-3-float-3d"),{GLTextureArray4Float:h}=e("./texture/array-4-float"),{GLTextureArray4Float2D:p}=e("./texture/array-4-float-2d"),{GLTextureArray4Float3D:d}=e("./texture/array-4-float-3d"),{GLTextureFloat:f}=e("./texture/float"),{GLTextureFloat2D:m}=e("./texture/float-2d"),{GLTextureFloat3D:g}=e("./texture/float-3d"),{GLTextureMemoryOptimized:y}=e("./texture/memory-optimized"),{GLTextureMemoryOptimized2D:b}=e("./texture/memory-optimized-2d"),{GLTextureMemoryOptimized3D:x}=e("./texture/memory-optimized-3d"),{GLTextureUnsigned:v}=e("./texture/unsigned"),{GLTextureUnsigned2D:w}=e("./texture/unsigned-2d"),{GLTextureUnsigned3D:S}=e("./texture/unsigned-3d"),{GLTextureGraphical:k}=e("./texture/graphical");class T extends r{static get mode(){return"gpu"}static getIsFloatRead(){const e=new this("function kernelFunction() {\n      return 1;\n    }",{context:this.testContext,canvas:this.testCanvas,validate:!1,output:[1],precision:"single",returnType:"Number",tactic:"speed"});e.build(),e.run();const t=e.renderOutput();return e.destroy(!0),1===t[0]}static getIsIntegerDivisionAccurate(){function e(e,t){return e[this.thread.x]/t[this.thread.x]}const t=new this(e.toString(),{context:this.testContext,canvas:this.testCanvas,validate:!1,output:[2],returnType:"Number",precision:"unsigned",tactic:"speed"}),n=[[6,6030401],[3,3991]];t.build.apply(t,n),t.run.apply(t,n);const r=t.renderOutput();return t.destroy(!0),2===r[0]&&1511===r[1]}static getIsSpeedTacticSupported(){function e(e){return e[this.thread.x]}const t=new this(e.toString(),{context:this.testContext,canvas:this.testCanvas,validate:!1,output:[4],returnType:"Number",precision:"unsigned",tactic:"speed"}),n=[[0,1,2,3]];t.build.apply(t,n),t.run.apply(t,n);const r=t.renderOutput();return t.destroy(!0),0===Math.round(r[0])&&1===Math.round(r[1])&&2===Math.round(r[2])&&3===Math.round(r[3])}static get testCanvas(){throw new Error(`"testCanvas" not defined on ${this.name}`)}static get testContext(){throw new Error(`"testContext" not defined on ${this.name}`)}static getFeatures(){const e=this.testContext,t=this.getIsDrawBuffers();return Object.freeze({isFloatRead:this.getIsFloatRead(),isIntegerDivisionAccurate:this.getIsIntegerDivisionAccurate(),isSpeedTacticSupported:this.getIsSpeedTacticSupported(),isTextureFloat:this.getIsTextureFloat(),isDrawBuffers:t,kernelMap:t,channelCount:this.getChannelCount(),maxTextureSize:this.getMaxTextureSize(),lowIntPrecision:e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.LOW_INT),lowFloatPrecision:e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.LOW_FLOAT),mediumIntPrecision:e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_INT),mediumFloatPrecision:e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT),highIntPrecision:e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_INT),highFloatPrecision:e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT)})}static setupFeatureChecks(){throw new Error(`"setupFeatureChecks" not defined on ${this.name}`)}static getSignature(e,t){return e.getVariablePrecisionString()+(t.length>0?":"+t.join(","):"")}setFixIntegerDivisionAccuracy(e){return this.fixIntegerDivisionAccuracy=e,this}setPrecision(e){return this.precision=e,this}setFloatTextures(e){return i.warnDeprecated("method","setFloatTextures","setOptimizeFloatMemory"),this.floatTextures=e,this}static nativeFunctionArguments(e){const t=[],n=[],r=[],i=/^[a-zA-Z_]/,s=/[a-zA-Z_0-9]/;let a=0,o=null,l=null;for(;a<e.length;){const u=e[a],c=e[a+1],h=r.length>0?r[r.length-1]:null;if("FUNCTION_ARGUMENTS"!==h||"/"!==u||"*"!==c)if("MULTI_LINE_COMMENT"!==h||"*"!==u||"/"!==c)if("FUNCTION_ARGUMENTS"!==h||"/"!==u||"/"!==c)if("COMMENT"!==h||"\n"!==u)if(null!==h||"("!==u){if("FUNCTION_ARGUMENTS"===h){if(")"===u){r.pop();break}if("f"===u&&"l"===c&&"o"===e[a+2]&&"a"===e[a+3]&&"t"===e[a+4]&&" "===e[a+5]){r.push("DECLARE_VARIABLE"),l="float",o="",a+=6;continue}if("i"===u&&"n"===c&&"t"===e[a+2]&&" "===e[a+3]){r.push("DECLARE_VARIABLE"),l="int",o="",a+=4;continue}if("v"===u&&"e"===c&&"c"===e[a+2]&&"2"===e[a+3]&&" "===e[a+4]){r.push("DECLARE_VARIABLE"),l="vec2",o="",a+=5;continue}if("v"===u&&"e"===c&&"c"===e[a+2]&&"3"===e[a+3]&&" "===e[a+4]){r.push("DECLARE_VARIABLE"),l="vec3",o="",a+=5;continue}if("v"===u&&"e"===c&&"c"===e[a+2]&&"4"===e[a+3]&&" "===e[a+4]){r.push("DECLARE_VARIABLE"),l="vec4",o="",a+=5;continue}}else if("DECLARE_VARIABLE"===h){if(""===o){if(" "===u){a++;continue}if(!i.test(u))throw new Error("variable name is not expected string")}o+=u,s.test(c)||(r.pop(),n.push(o),t.push(A[l]))}a++}else r.push("FUNCTION_ARGUMENTS"),a++;else r.pop(),a++;else r.push("COMMENT"),a+=2;else r.pop(),a+=2;else r.push("MULTI_LINE_COMMENT"),a+=2}if(r.length>0)throw new Error("GLSL function was not parsable");return{argumentNames:n,argumentTypes:t}}static nativeFunctionReturnType(e){return A[e.match(/int|float|vec[2-4]/)[0]]}static combineKernels(e,t){e.apply(null,arguments);const{texSize:n,context:r,threadDim:s}=t.texSize;let a;if("single"===t.precision){const e=n[0],t=Math.ceil(n[1]/4);a=new Float32Array(e*t*4*4),r.readPixels(0,0,e,4*t,r.RGBA,r.FLOAT,a)}else{const e=new Uint8Array(n[0]*n[1]*4);r.readPixels(0,0,n[0],n[1],r.RGBA,r.UNSIGNED_BYTE,e),a=new Float32Array(e.buffer)}return a=a.subarray(0,s[0]*s[1]*s[2]),1===t.output.length?a:2===t.output.length?i.splitArray(a,t.output[0]):3===t.output.length?i.splitArray(a,t.output[0]*t.output[1]).map((function(e){return i.splitArray(e,t.output[0])})):void 0}constructor(e,t){super(e,t),this.transferValues=null,this.formatValues=null,this.TextureConstructor=null,this.renderOutput=null,this.renderRawOutput=null,this.texSize=null,this.translatedSource=null,this.compiledFragmentShader=null,this.compiledVertexShader=null,this.switchingKernels=null,this._textureSwitched=null,this._mappedTextureSwitched=null}checkTextureSize(){const{features:e}=this.constructor;if(this.texSize[0]>e.maxTextureSize||this.texSize[1]>e.maxTextureSize)throw new Error(`Texture size [${this.texSize[0]},${this.texSize[1]}] generated by kernel is larger than supported size [${e.maxTextureSize},${e.maxTextureSize}]`)}translateSource(){throw new Error(`"translateSource" not defined on ${this.constructor.name}`)}pickRenderStrategy(e){if(this.graphical)return this.renderRawOutput=this.readPackedPixelsToUint8Array,this.transferValues=e=>e,this.TextureConstructor=k,null;if("unsigned"===this.precision)if(this.renderRawOutput=this.readPackedPixelsToUint8Array,this.transferValues=this.readPackedPixelsToFloat32Array,this.pipeline)switch(this.renderOutput=this.renderTexture,null!==this.subKernels&&(this.renderKernels=this.renderKernelsToTextures),this.returnType){case"LiteralInteger":case"Float":case"Number":case"Integer":return this.output[2]>0?(this.TextureConstructor=S,null):this.output[1]>0?(this.TextureConstructor=w,null):(this.TextureConstructor=v,null);case"Array(2)":case"Array(3)":case"Array(4)":return this.requestFallback(e)}else switch(null!==this.subKernels&&(this.renderKernels=this.renderKernelsToArrays),this.returnType){case"LiteralInteger":case"Float":case"Number":case"Integer":return this.renderOutput=this.renderValues,this.output[2]>0?(this.TextureConstructor=S,this.formatValues=i.erect3DPackedFloat,null):this.output[1]>0?(this.TextureConstructor=w,this.formatValues=i.erect2DPackedFloat,null):(this.TextureConstructor=v,this.formatValues=i.erectPackedFloat,null);case"Array(2)":case"Array(3)":case"Array(4)":return this.requestFallback(e)}else{if("single"!==this.precision)throw new Error(`unhandled precision of "${this.precision}"`);if(this.renderRawOutput=this.readFloatPixelsToFloat32Array,this.transferValues=this.readFloatPixelsToFloat32Array,this.pipeline)switch(this.renderOutput=this.renderTexture,null!==this.subKernels&&(this.renderKernels=this.renderKernelsToTextures),this.returnType){case"LiteralInteger":case"Float":case"Number":case"Integer":return this.optimizeFloatMemory?this.output[2]>0?(this.TextureConstructor=x,null):this.output[1]>0?(this.TextureConstructor=b,null):(this.TextureConstructor=y,null):this.output[2]>0?(this.TextureConstructor=g,null):this.output[1]>0?(this.TextureConstructor=m,null):(this.TextureConstructor=f,null);case"Array(2)":return this.output[2]>0?(this.TextureConstructor=o,null):this.output[1]>0?(this.TextureConstructor=a,null):(this.TextureConstructor=s,null);case"Array(3)":return this.output[2]>0?(this.TextureConstructor=c,null):this.output[1]>0?(this.TextureConstructor=u,null):(this.TextureConstructor=l,null);case"Array(4)":return this.output[2]>0?(this.TextureConstructor=d,null):this.output[1]>0?(this.TextureConstructor=p,null):(this.TextureConstructor=h,null)}if(this.renderOutput=this.renderValues,null!==this.subKernels&&(this.renderKernels=this.renderKernelsToArrays),this.optimizeFloatMemory)switch(this.returnType){case"LiteralInteger":case"Float":case"Number":case"Integer":return this.output[2]>0?(this.TextureConstructor=x,this.formatValues=i.erectMemoryOptimized3DFloat,null):this.output[1]>0?(this.TextureConstructor=b,this.formatValues=i.erectMemoryOptimized2DFloat,null):(this.TextureConstructor=y,this.formatValues=i.erectMemoryOptimizedFloat,null);case"Array(2)":return this.output[2]>0?(this.TextureConstructor=o,this.formatValues=i.erect3DArray2,null):this.output[1]>0?(this.TextureConstructor=a,this.formatValues=i.erect2DArray2,null):(this.TextureConstructor=s,this.formatValues=i.erectArray2,null);case"Array(3)":return this.output[2]>0?(this.TextureConstructor=c,this.formatValues=i.erect3DArray3,null):this.output[1]>0?(this.TextureConstructor=u,this.formatValues=i.erect2DArray3,null):(this.TextureConstructor=l,this.formatValues=i.erectArray3,null);case"Array(4)":return this.output[2]>0?(this.TextureConstructor=d,this.formatValues=i.erect3DArray4,null):this.output[1]>0?(this.TextureConstructor=p,this.formatValues=i.erect2DArray4,null):(this.TextureConstructor=h,this.formatValues=i.erectArray4,null)}else switch(this.returnType){case"LiteralInteger":case"Float":case"Number":case"Integer":return this.output[2]>0?(this.TextureConstructor=g,this.formatValues=i.erect3DFloat,null):this.output[1]>0?(this.TextureConstructor=m,this.formatValues=i.erect2DFloat,null):(this.TextureConstructor=f,this.formatValues=i.erectFloat,null);case"Array(2)":return this.output[2]>0?(this.TextureConstructor=o,this.formatValues=i.erect3DArray2,null):this.output[1]>0?(this.TextureConstructor=a,this.formatValues=i.erect2DArray2,null):(this.TextureConstructor=s,this.formatValues=i.erectArray2,null);case"Array(3)":return this.output[2]>0?(this.TextureConstructor=c,this.formatValues=i.erect3DArray3,null):this.output[1]>0?(this.TextureConstructor=u,this.formatValues=i.erect2DArray3,null):(this.TextureConstructor=l,this.formatValues=i.erectArray3,null);case"Array(4)":return this.output[2]>0?(this.TextureConstructor=d,this.formatValues=i.erect3DArray4,null):this.output[1]>0?(this.TextureConstructor=p,this.formatValues=i.erect2DArray4,null):(this.TextureConstructor=h,this.formatValues=i.erectArray4,null)}}throw new Error(`unhandled return type "${this.returnType}"`)}getKernelString(){throw new Error("abstract method call")}getMainResultTexture(){switch(this.returnType){case"LiteralInteger":case"Float":case"Integer":case"Number":return this.getMainResultNumberTexture();case"Array(2)":return this.getMainResultArray2Texture();case"Array(3)":return this.getMainResultArray3Texture();case"Array(4)":return this.getMainResultArray4Texture();default:throw new Error(`unhandled returnType type ${this.returnType}`)}}getMainResultKernelNumberTexture(){throw new Error("abstract method call")}getMainResultSubKernelNumberTexture(){throw new Error("abstract method call")}getMainResultKernelArray2Texture(){throw new Error("abstract method call")}getMainResultSubKernelArray2Texture(){throw new Error("abstract method call")}getMainResultKernelArray3Texture(){throw new Error("abstract method call")}getMainResultSubKernelArray3Texture(){throw new Error("abstract method call")}getMainResultKernelArray4Texture(){throw new Error("abstract method call")}getMainResultSubKernelArray4Texture(){throw new Error("abstract method call")}getMainResultGraphical(){throw new Error("abstract method call")}getMainResultMemoryOptimizedFloats(){throw new Error("abstract method call")}getMainResultPackedPixels(){throw new Error("abstract method call")}getMainResultString(){return this.graphical?this.getMainResultGraphical():"single"===this.precision?this.optimizeFloatMemory?this.getMainResultMemoryOptimizedFloats():this.getMainResultTexture():this.getMainResultPackedPixels()}getMainResultNumberTexture(){return i.linesToString(this.getMainResultKernelNumberTexture())+i.linesToString(this.getMainResultSubKernelNumberTexture())}getMainResultArray2Texture(){return i.linesToString(this.getMainResultKernelArray2Texture())+i.linesToString(this.getMainResultSubKernelArray2Texture())}getMainResultArray3Texture(){return i.linesToString(this.getMainResultKernelArray3Texture())+i.linesToString(this.getMainResultSubKernelArray3Texture())}getMainResultArray4Texture(){return i.linesToString(this.getMainResultKernelArray4Texture())+i.linesToString(this.getMainResultSubKernelArray4Texture())}getFloatTacticDeclaration(){return`precision ${this.getVariablePrecisionString(this.texSize,this.tactic)} float;\n`}getIntTacticDeclaration(){return`precision ${this.getVariablePrecisionString(this.texSize,this.tactic,!0)} int;\n`}getSampler2DTacticDeclaration(){return`precision ${this.getVariablePrecisionString(this.texSize,this.tactic)} sampler2D;\n`}getSampler2DArrayTacticDeclaration(){return`precision ${this.getVariablePrecisionString(this.texSize,this.tactic)} sampler2DArray;\n`}renderTexture(){return this.immutable?this.texture.clone():this.texture}readPackedPixelsToUint8Array(){if("unsigned"!==this.precision)throw new Error('Requires this.precision to be "unsigned"');const{texSize:e,context:t}=this,n=new Uint8Array(e[0]*e[1]*4);return t.readPixels(0,0,e[0],e[1],t.RGBA,t.UNSIGNED_BYTE,n),n}readPackedPixelsToFloat32Array(){return new Float32Array(this.readPackedPixelsToUint8Array().buffer)}readFloatPixelsToFloat32Array(){if("single"!==this.precision)throw new Error('Requires this.precision to be "single"');const{texSize:e,context:t}=this,n=e[0],r=e[1],i=new Float32Array(n*r*4);return t.readPixels(0,0,n,r,t.RGBA,t.FLOAT,i),i}getPixels(e){const{context:t,output:n}=this,[r,s]=n,a=new Uint8Array(r*s*4);return t.readPixels(0,0,r,s,t.RGBA,t.UNSIGNED_BYTE,a),new Uint8ClampedArray((e?a:i.flipPixels(a,r,s)).buffer)}renderKernelsToArrays(){const e={result:this.renderOutput()};for(let t=0;t<this.subKernels.length;t++)e[this.subKernels[t].property]=this.mappedTextures[t].toArray();return e}renderKernelsToTextures(){const e={result:this.renderOutput()};if(this.immutable)for(let t=0;t<this.subKernels.length;t++)e[this.subKernels[t].property]=this.mappedTextures[t].clone();else for(let t=0;t<this.subKernels.length;t++)e[this.subKernels[t].property]=this.mappedTextures[t];return e}resetSwitchingKernels(){const e=this.switchingKernels;return this.switchingKernels=null,e}setOutput(e){const t=this.toKernelOutput(e);if(this.program){if(!this.dynamicOutput)throw new Error("Resizing a kernel with dynamicOutput: false is not possible");const n=[t[0],t[1]||1,t[2]||1],r=i.getKernelTextureSize({optimizeFloatMemory:this.optimizeFloatMemory,precision:this.precision},n),s=this.texSize;if(s){const t=this.getVariablePrecisionString(s,this.tactic),n=this.getVariablePrecisionString(r,this.tactic);if(t!==n)return this.debug&&console.warn("Precision requirement changed, asking GPU instance to recompile"),void this.switchKernels({type:"outputPrecisionMismatch",precision:n,needed:e})}this.output=t,this.threadDim=n,this.texSize=r;const{context:a}=this;if(a.bindFramebuffer(a.FRAMEBUFFER,this.framebuffer),this.updateMaxTexSize(),this.framebuffer.width=this.texSize[0],this.framebuffer.height=this.texSize[1],a.viewport(0,0,this.maxTexSize[0],this.maxTexSize[1]),this.canvas.width=this.maxTexSize[0],this.canvas.height=this.maxTexSize[1],this.texture&&this.texture.delete(),this.texture=null,this._setupOutputTexture(),this.mappedTextures&&this.mappedTextures.length>0){for(let e=0;e<this.mappedTextures.length;e++)this.mappedTextures[e].delete();this.mappedTextures=null,this._setupSubOutputTextures()}}else this.output=t;return this}renderValues(){return this.formatValues(this.transferValues(),this.output[0],this.output[1],this.output[2])}switchKernels(e){this.switchingKernels?this.switchingKernels.push(e):this.switchingKernels=[e]}getVariablePrecisionString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.texSize,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.tactic,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!t){if(!this.constructor.features.isSpeedTacticSupported)return"highp";const t=this.constructor.features[n?"lowIntPrecision":"lowFloatPrecision"],r=this.constructor.features[n?"mediumIntPrecision":"mediumFloatPrecision"],i=this.constructor.features[n?"highIntPrecision":"highFloatPrecision"],s=Math.log2(e[0]*e[1]);if(s<=t.rangeMax)return"lowp";if(s<=r.rangeMax)return"mediump";if(s<=i.rangeMax)return"highp";throw new Error("The required size exceeds that of the ability of your system")}switch(t){case"speed":return"lowp";case"balanced":return"mediump";case"precision":return"highp";default:throw new Error(`Unknown tactic "${t}" use "speed", "balanced", "precision", or empty for auto`)}}updateTextureArgumentRefs(e,t){if(this.immutable)if(this.texture.texture===t.texture){const{prevArg:n}=e;n&&(1===n.texture._refs&&(this.texture.delete(),this.texture=n.clone(),this._textureSwitched=!0),n.delete()),e.prevArg=t.clone()}else if(this.mappedTextures&&this.mappedTextures.length>0){const{mappedTextures:n}=this;for(let r=0;r<n.length;r++){const i=n[r];if(i.texture===t.texture){const{prevArg:s}=e;return s&&(1===s.texture._refs&&(i.delete(),n[r]=s.clone(),this._mappedTextureSwitched[r]=!0),s.delete()),void(e.prevArg=t.clone())}}}}onActivate(e){if(this._textureSwitched=!0,this.texture=e.texture,this.mappedTextures){for(let e=0;e<this.mappedTextures.length;e++)this._mappedTextureSwitched[e]=!0;this.mappedTextures=e.mappedTextures}}initCanvas(){}}const A={int:"Integer",float:"Number",vec2:"Array(2)",vec3:"Array(3)",vec4:"Array(4)"};t.exports={GLKernel:T}},{"../../utils":114,"../kernel":36,"./texture/array-2-float":16,"./texture/array-2-float-2d":14,"./texture/array-2-float-3d":15,"./texture/array-3-float":19,"./texture/array-3-float-2d":17,"./texture/array-3-float-3d":18,"./texture/array-4-float":22,"./texture/array-4-float-2d":20,"./texture/array-4-float-3d":21,"./texture/float":25,"./texture/float-2d":23,"./texture/float-3d":24,"./texture/graphical":26,"./texture/memory-optimized":30,"./texture/memory-optimized-2d":28,"./texture/memory-optimized-3d":29,"./texture/unsigned":33,"./texture/unsigned-2d":31,"./texture/unsigned-3d":32}],14:[function(e,t,n){const{utils:r}=e("../../../utils"),{GLTextureFloat:i}=e("./float");class s extends i{constructor(e){super(e),this.type="ArrayTexture(2)"}toArray(){return r.erect2DArray2(this.renderValues(),this.output[0],this.output[1])}}t.exports={GLTextureArray2Float2D:s}},{"../../../utils":114,"./float":25}],15:[function(e,t,n){const{utils:r}=e("../../../utils"),{GLTextureFloat:i}=e("./float");class s extends i{constructor(e){super(e),this.type="ArrayTexture(2)"}toArray(){return r.erect3DArray2(this.renderValues(),this.output[0],this.output[1],this.output[2])}}t.exports={GLTextureArray2Float3D:s}},{"../../../utils":114,"./float":25}],16:[function(e,t,n){const{utils:r}=e("../../../utils"),{GLTextureFloat:i}=e("./float");class s extends i{constructor(e){super(e),this.type="ArrayTexture(2)"}toArray(){return r.erectArray2(this.renderValues(),this.output[0],this.output[1])}}t.exports={GLTextureArray2Float:s}},{"../../../utils":114,"./float":25}],17:[function(e,t,n){const{utils:r}=e("../../../utils"),{GLTextureFloat:i}=e("./float");class s extends i{constructor(e){super(e),this.type="ArrayTexture(3)"}toArray(){return r.erect2DArray3(this.renderValues(),this.output[0],this.output[1])}}t.exports={GLTextureArray3Float2D:s}},{"../../../utils":114,"./float":25}],18:[function(e,t,n){const{utils:r}=e("../../../utils"),{GLTextureFloat:i}=e("./float");class s extends i{constructor(e){super(e),this.type="ArrayTexture(3)"}toArray(){return r.erect3DArray3(this.renderValues(),this.output[0],this.output[1],this.output[2])}}t.exports={GLTextureArray3Float3D:s}},{"../../../utils":114,"./float":25}],19:[function(e,t,n){const{utils:r}=e("../../../utils"),{GLTextureFloat:i}=e("./float");class s extends i{constructor(e){super(e),this.type="ArrayTexture(3)"}toArray(){return r.erectArray3(this.renderValues(),this.output[0])}}t.exports={GLTextureArray3Float:s}},{"../../../utils":114,"./float":25}],20:[function(e,t,n){const{utils:r}=e("../../../utils"),{GLTextureFloat:i}=e("./float");class s extends i{constructor(e){super(e),this.type="ArrayTexture(4)"}toArray(){return r.erect2DArray4(this.renderValues(),this.output[0],this.output[1])}}t.exports={GLTextureArray4Float2D:s}},{"../../../utils":114,"./float":25}],21:[function(e,t,n){const{utils:r}=e("../../../utils"),{GLTextureFloat:i}=e("./float");class s extends i{constructor(e){super(e),this.type="ArrayTexture(4)"}toArray(){return r.erect3DArray4(this.renderValues(),this.output[0],this.output[1],this.output[2])}}t.exports={GLTextureArray4Float3D:s}},{"../../../utils":114,"./float":25}],22:[function(e,t,n){const{utils:r}=e("../../../utils"),{GLTextureFloat:i}=e("./float");class s extends i{constructor(e){super(e),this.type="ArrayTexture(4)"}toArray(){return r.erectArray4(this.renderValues(),this.output[0])}}t.exports={GLTextureArray4Float:s}},{"../../../utils":114,"./float":25}],23:[function(e,t,n){const{utils:r}=e("../../../utils"),{GLTextureFloat:i}=e("./float");class s extends i{constructor(e){super(e),this.type="ArrayTexture(1)"}toArray(){return r.erect2DFloat(this.renderValues(),this.output[0],this.output[1])}}t.exports={GLTextureFloat2D:s}},{"../../../utils":114,"./float":25}],24:[function(e,t,n){const{utils:r}=e("../../../utils"),{GLTextureFloat:i}=e("./float");class s extends i{constructor(e){super(e),this.type="ArrayTexture(1)"}toArray(){return r.erect3DFloat(this.renderValues(),this.output[0],this.output[1],this.output[2])}}t.exports={GLTextureFloat3D:s}},{"../../../utils":114,"./float":25}],25:[function(e,t,n){const{utils:r}=e("../../../utils"),{GLTexture:i}=e("./index");class s extends i{get textureType(){return this.context.FLOAT}constructor(e){super(e),this.type="ArrayTexture(1)"}renderRawOutput(){const e=this.context,t=this.size;e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer()),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture,0);const n=new Float32Array(t[0]*t[1]*4);return e.readPixels(0,0,t[0],t[1],e.RGBA,e.FLOAT,n),n}renderValues(){return this._deleted?null:this.renderRawOutput()}toArray(){return r.erectFloat(this.renderValues(),this.output[0])}}t.exports={GLTextureFloat:s}},{"../../../utils":114,"./index":27}],26:[function(e,t,n){const{GLTextureUnsigned:r}=e("./unsigned");class i extends r{constructor(e){super(e),this.type="ArrayTexture(4)"}toArray(){return this.renderValues()}}t.exports={GLTextureGraphical:i}},{"./unsigned":33}],27:[function(e,t,n){const{Texture:r}=e("../../../texture");class i extends r{get textureType(){throw new Error(`"textureType" not implemented on ${this.name}`)}clone(){return new this.constructor(this)}beforeMutate(){return this.texture._refs>1&&(this.newTexture(),!0)}cloneTexture(){this.texture._refs--;const{context:e,size:t,texture:n,kernel:r}=this;r.debug&&console.warn("cloning internal texture"),e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer()),s(e,n),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);const i=e.createTexture();s(e,i),e.texImage2D(e.TEXTURE_2D,0,this.internalFormat,t[0],t[1],0,this.textureFormat,this.textureType,null),e.copyTexSubImage2D(e.TEXTURE_2D,0,0,0,0,0,t[0],t[1]),i._refs=1,this.texture=i}newTexture(){this.texture._refs--;const e=this.context,t=this.size;this.kernel.debug&&console.warn("new internal texture");const n=e.createTexture();s(e,n),e.texImage2D(e.TEXTURE_2D,0,this.internalFormat,t[0],t[1],0,this.textureFormat,this.textureType,null),n._refs=1,this.texture=n}clear(){if(this.texture._refs){this.texture._refs--;const e=this.context,t=this.texture=e.createTexture();s(e,t);const n=this.size;t._refs=1,e.texImage2D(e.TEXTURE_2D,0,this.internalFormat,n[0],n[1],0,this.textureFormat,this.textureType,null)}const{context:e,texture:t}=this;e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer()),e.bindTexture(e.TEXTURE_2D,t),s(e,t),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)}delete(){this._deleted||(this._deleted=!0,this.texture._refs&&(this.texture._refs--,this.texture._refs)||this.context.deleteTexture(this.texture))}framebuffer(){return this._framebuffer||(this._framebuffer=this.kernel.getRawValueFramebuffer(this.size[0],this.size[1])),this._framebuffer}}function s(e,t){e.activeTexture(e.TEXTURE15),e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST)}t.exports={GLTexture:i}},{"../../../texture":113}],28:[function(e,t,n){const{utils:r}=e("../../../utils"),{GLTextureFloat:i}=e("./float");class s extends i{constructor(e){super(e),this.type="MemoryOptimizedNumberTexture"}toArray(){return r.erectMemoryOptimized2DFloat(this.renderValues(),this.output[0],this.output[1])}}t.exports={GLTextureMemoryOptimized2D:s}},{"../../../utils":114,"./float":25}],29:[function(e,t,n){const{utils:r}=e("../../../utils"),{GLTextureFloat:i}=e("./float");class s extends i{constructor(e){super(e),this.type="MemoryOptimizedNumberTexture"}toArray(){return r.erectMemoryOptimized3DFloat(this.renderValues(),this.output[0],this.output[1],this.output[2])}}t.exports={GLTextureMemoryOptimized3D:s}},{"../../../utils":114,"./float":25}],30:[function(e,t,n){const{utils:r}=e("../../../utils"),{GLTextureFloat:i}=e("./float");class s extends i{constructor(e){super(e),this.type="MemoryOptimizedNumberTexture"}toArray(){return r.erectMemoryOptimizedFloat(this.renderValues(),this.output[0])}}t.exports={GLTextureMemoryOptimized:s}},{"../../../utils":114,"./float":25}],31:[function(e,t,n){const{utils:r}=e("../../../utils"),{GLTextureUnsigned:i}=e("./unsigned");class s extends i{constructor(e){super(e),this.type="NumberTexture"}toArray(){return r.erect2DPackedFloat(this.renderValues(),this.output[0],this.output[1])}}t.exports={GLTextureUnsigned2D:s}},{"../../../utils":114,"./unsigned":33}],32:[function(e,t,n){const{utils:r}=e("../../../utils"),{GLTextureUnsigned:i}=e("./unsigned");class s extends i{constructor(e){super(e),this.type="NumberTexture"}toArray(){return r.erect3DPackedFloat(this.renderValues(),this.output[0],this.output[1],this.output[2])}}t.exports={GLTextureUnsigned3D:s}},{"../../../utils":114,"./unsigned":33}],33:[function(e,t,n){const{utils:r}=e("../../../utils"),{GLTexture:i}=e("./index");class s extends i{get textureType(){return this.context.UNSIGNED_BYTE}constructor(e){super(e),this.type="NumberTexture"}renderRawOutput(){const{context:e}=this;e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer()),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture,0);const t=new Uint8Array(this.size[0]*this.size[1]*4);return e.readPixels(0,0,this.size[0],this.size[1],e.RGBA,e.UNSIGNED_BYTE,t),t}renderValues(){return this._deleted?null:new Float32Array(this.renderRawOutput().buffer)}toArray(){return r.erectPackedFloat(this.renderValues(),this.output[0])}}t.exports={GLTextureUnsigned:s}},{"../../../utils":114,"./index":27}],34:[function(e,t,n){const r=e("gl"),{WebGLKernel:i}=e("../web-gl/kernel"),{glKernelString:s}=e("../gl/kernel-string");let a=null,o=null,l=null,u=null,c=null;class h extends i{static get isSupported(){return null!==a||(this.setupFeatureChecks(),a=null!==l),a}static setupFeatureChecks(){if(o=null,u=null,"function"===typeof r)try{if(l=r(2,2,{preserveDrawingBuffer:!0}),!l||!l.getExtension)return;u={STACKGL_resize_drawingbuffer:l.getExtension("STACKGL_resize_drawingbuffer"),STACKGL_destroy_context:l.getExtension("STACKGL_destroy_context"),OES_texture_float:l.getExtension("OES_texture_float"),OES_texture_float_linear:l.getExtension("OES_texture_float_linear"),OES_element_index_uint:l.getExtension("OES_element_index_uint"),WEBGL_draw_buffers:l.getExtension("WEBGL_draw_buffers"),WEBGL_color_buffer_float:l.getExtension("WEBGL_color_buffer_float")},c=this.getFeatures()}catch(e){console.warn(e)}}static isContextMatch(e){try{return"ANGLE"===e.getParameter(e.RENDERER)}catch(t){return!1}}static getIsTextureFloat(){return Boolean(u.OES_texture_float)}static getIsDrawBuffers(){return Boolean(u.WEBGL_draw_buffers)}static getChannelCount(){return u.WEBGL_draw_buffers?l.getParameter(u.WEBGL_draw_buffers.MAX_DRAW_BUFFERS_WEBGL):1}static getMaxTextureSize(){return l.getParameter(l.MAX_TEXTURE_SIZE)}static get testCanvas(){return o}static get testContext(){return l}static get features(){return c}initCanvas(){return{}}initContext(){return r(2,2,{preserveDrawingBuffer:!0})}initExtensions(){this.extensions={STACKGL_resize_drawingbuffer:this.context.getExtension("STACKGL_resize_drawingbuffer"),STACKGL_destroy_context:this.context.getExtension("STACKGL_destroy_context"),OES_texture_float:this.context.getExtension("OES_texture_float"),OES_texture_float_linear:this.context.getExtension("OES_texture_float_linear"),OES_element_index_uint:this.context.getExtension("OES_element_index_uint"),WEBGL_draw_buffers:this.context.getExtension("WEBGL_draw_buffers")}}build(){super.build.apply(this,arguments),this.fallbackRequested||this.extensions.STACKGL_resize_drawingbuffer.resize(this.maxTexSize[0],this.maxTexSize[1])}destroyExtensions(){this.extensions.STACKGL_resize_drawingbuffer=null,this.extensions.STACKGL_destroy_context=null,this.extensions.OES_texture_float=null,this.extensions.OES_texture_float_linear=null,this.extensions.OES_element_index_uint=null,this.extensions.WEBGL_draw_buffers=null}static destroyContext(e){const t=e.getExtension("STACKGL_destroy_context");t&&t.destroy&&t.destroy()}toString(){const e="const gl = context || require('gl')(1, 1);\n",t="    if (!context) { gl.getExtension('STACKGL_destroy_context').destroy(); }\n";return s(this.constructor,arguments,this,e,t)}setOutput(e){return super.setOutput(e),this.graphical&&this.extensions.STACKGL_resize_drawingbuffer&&this.extensions.STACKGL_resize_drawingbuffer.resize(this.maxTexSize[0],this.maxTexSize[1]),this}}t.exports={HeadlessGLKernel:h}},{"../gl/kernel-string":12,"../web-gl/kernel":70,gl:2}],35:[function(e,t,n){class r{constructor(e,t){const{name:n,kernel:r,context:i,checkContext:s,onRequestContextHandle:a,onUpdateValueMismatch:o,origin:l,strictIntegers:u,type:c,tactic:h}=t;if(!n)throw new Error("name not set");if(!c)throw new Error("type not set");if(!l)throw new Error("origin not set");if("user"!==l&&"constants"!==l)throw new Error(`origin must be "user" or "constants" value is "${l}"`);if(!a)throw new Error("onRequestContextHandle is not set");this.name=n,this.origin=l,this.tactic=h,this.varName="constants"===l?`constants.${n}`:n,this.kernel=r,this.strictIntegers=u,this.type=e.type||c,this.size=e.size||null,this.index=null,this.context=i,this.checkContext=null===s||void 0===s||s,this.contextHandle=null,this.onRequestContextHandle=a,this.onUpdateValueMismatch=o,this.forceUploadEachRun=null}get id(){return`${this.origin}_${name}`}getSource(){throw new Error(`"getSource" not defined on ${this.constructor.name}`)}updateValue(e){throw new Error(`"updateValue" not defined on ${this.constructor.name}`)}}t.exports={KernelValue:r}},{}],36:[function(e,t,n){const{utils:r}=e("../utils"),{Input:i}=e("../input");class s{static get isSupported(){throw new Error(`"isSupported" not implemented on ${this.name}`)}static isContextMatch(e){throw new Error(`"isContextMatch" not implemented on ${this.name}`)}static getFeatures(){throw new Error(`"getFeatures" not implemented on ${this.name}`)}static destroyContext(e){throw new Error(`"destroyContext" called on ${this.name}`)}static nativeFunctionArguments(){throw new Error(`"nativeFunctionArguments" called on ${this.name}`)}static nativeFunctionReturnType(){throw new Error(`"nativeFunctionReturnType" called on ${this.name}`)}static combineKernels(){throw new Error(`"combineKernels" called on ${this.name}`)}constructor(e,t){if("object"!==typeof e){if("string"!==typeof e)throw new Error("source not a string");if(!r.isFunctionString(e))throw new Error("source not a function string")}this.useLegacyEncoder=!1,this.fallbackRequested=!1,this.onRequestFallback=null,this.argumentNames="string"===typeof e?r.getArgumentNamesFromString(e):null,this.argumentTypes=null,this.argumentSizes=null,this.argumentBitRatios=null,this.kernelArguments=null,this.kernelConstants=null,this.forceUploadKernelConstants=null,this.source=e,this.output=null,this.debug=!1,this.graphical=!1,this.loopMaxIterations=0,this.constants=null,this.constantTypes=null,this.constantBitRatios=null,this.dynamicArguments=!1,this.dynamicOutput=!1,this.canvas=null,this.context=null,this.checkContext=null,this.gpu=null,this.functions=null,this.nativeFunctions=null,this.injectedNative=null,this.subKernels=null,this.validate=!0,this.immutable=!1,this.pipeline=!1,this.precision=null,this.tactic=null,this.plugins=null,this.returnType=null,this.leadingReturnStatement=null,this.followingReturnStatement=null,this.optimizeFloatMemory=null,this.strictIntegers=!1,this.fixIntegerDivisionAccuracy=null,this.built=!1,this.signature=null}mergeSettings(e){for(let t in e)if(e.hasOwnProperty(t)&&this.hasOwnProperty(t)){switch(t){case"output":if(!Array.isArray(e.output)){this.setOutput(e.output);continue}break;case"functions":this.functions=[];for(let t=0;t<e.functions.length;t++)this.addFunction(e.functions[t]);continue;case"graphical":e[t]&&!e.hasOwnProperty("precision")&&(this.precision="unsigned"),this[t]=e[t];continue;case"nativeFunctions":if(!e.nativeFunctions)continue;this.nativeFunctions=[];for(let t=0;t<e.nativeFunctions.length;t++){const n=e.nativeFunctions[t],{name:r,source:i}=n;this.addNativeFunction(r,i,n)}continue}this[t]=e[t]}this.canvas||(this.canvas=this.initCanvas()),this.context||(this.context=this.initContext()),this.plugins||(this.plugins=this.initPlugins(e))}build(){throw new Error(`"build" not defined on ${this.constructor.name}`)}run(){throw new Error(`"run" not defined on ${this.constructor.name}`)}initCanvas(){throw new Error(`"initCanvas" not defined on ${this.constructor.name}`)}initContext(){throw new Error(`"initContext" not defined on ${this.constructor.name}`)}initPlugins(e){throw new Error(`"initPlugins" not defined on ${this.constructor.name}`)}addFunction(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.name&&e.source&&e.argumentTypes&&"returnType"in e)this.functions.push(e);else if("settings"in e&&"source"in e)this.functions.push(this.functionToIGPUFunction(e.source,e.settings));else{if("string"!==typeof e&&"function"!==typeof e)throw new Error("function not properly defined");this.functions.push(this.functionToIGPUFunction(e,t))}return this}addNativeFunction(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{argumentTypes:r,argumentNames:i}=n.argumentTypes?a(n.argumentTypes):this.constructor.nativeFunctionArguments(t)||{};return this.nativeFunctions.push({name:e,source:t,settings:n,argumentTypes:r,argumentNames:i,returnType:n.returnType||this.constructor.nativeFunctionReturnType(t)}),this}setupArguments(e){if(this.kernelArguments=[],this.argumentTypes)for(let t=0;t<this.argumentTypes.length;t++)this.kernelArguments.push({type:this.argumentTypes[t]});else if(!this.argumentTypes){this.argumentTypes=[];for(let t=0;t<e.length;t++){const n=r.getVariableType(e[t],this.strictIntegers),i="Integer"===n?"Number":n;this.argumentTypes.push(i),this.kernelArguments.push({type:i})}}this.argumentSizes=new Array(e.length),this.argumentBitRatios=new Int32Array(e.length);for(let t=0;t<e.length;t++){const n=e[t];this.argumentSizes[t]=n.constructor===i?n.size:null,this.argumentBitRatios[t]=this.getBitRatio(n)}if(this.argumentNames.length!==e.length)throw new Error("arguments are miss-aligned")}setupConstants(){this.kernelConstants=[];let e=null===this.constantTypes;if(e&&(this.constantTypes={}),this.constantBitRatios={},this.constants)for(let t in this.constants){if(e){const e=r.getVariableType(this.constants[t],this.strictIntegers);this.constantTypes[t]=e,this.kernelConstants.push({name:t,type:e})}else this.kernelConstants.push({name:t,type:this.constantTypes[t]});this.constantBitRatios[t]=this.getBitRatio(this.constants[t])}}setOptimizeFloatMemory(e){return this.optimizeFloatMemory=e,this}toKernelOutput(e){return e.hasOwnProperty("x")?e.hasOwnProperty("y")?e.hasOwnProperty("z")?[e.x,e.y,e.z]:[e.x,e.y]:[e.x]:e}setOutput(e){return this.output=this.toKernelOutput(e),this}setDebug(e){return this.debug=e,this}setGraphical(e){return this.graphical=e,this.precision="unsigned",this}setLoopMaxIterations(e){return this.loopMaxIterations=e,this}setConstants(e){return this.constants=e,this}setConstantTypes(e){return this.constantTypes=e,this}setFunctions(e){for(let t=0;t<e.length;t++)this.addFunction(e[t]);return this}setNativeFunctions(e){for(let t=0;t<e.length;t++){const n=e[t],{name:r,source:i}=n;this.addNativeFunction(r,i,n)}return this}setInjectedNative(e){return this.injectedNative=e,this}setPipeline(e){return this.pipeline=e,this}setPrecision(e){return this.precision=e,this}setDimensions(e){return r.warnDeprecated("method","setDimensions","setOutput"),this.output=e,this}setOutputToTexture(e){return r.warnDeprecated("method","setOutputToTexture","setPipeline"),this.pipeline=e,this}setImmutable(e){return this.immutable=e,this}setCanvas(e){return this.canvas=e,this}setStrictIntegers(e){return this.strictIntegers=e,this}setDynamicOutput(e){return this.dynamicOutput=e,this}setHardcodeConstants(e){return r.warnDeprecated("method","setHardcodeConstants"),this.setDynamicOutput(e),this.setDynamicArguments(e),this}setDynamicArguments(e){return this.dynamicArguments=e,this}setUseLegacyEncoder(e){return this.useLegacyEncoder=e,this}setWarnVarUsage(e){return r.warnDeprecated("method","setWarnVarUsage"),this}getCanvas(){return r.warnDeprecated("method","getCanvas"),this.canvas}getWebGl(){return r.warnDeprecated("method","getWebGl"),this.context}setContext(e){return this.context=e,this}setArgumentTypes(e){if(Array.isArray(e))this.argumentTypes=e;else{this.argumentTypes=[];for(const t in e){if(!e.hasOwnProperty(t))continue;const n=this.argumentNames.indexOf(t);if(-1===n)throw new Error(`unable to find argument ${t}`);this.argumentTypes[n]=e[t]}}return this}setTactic(e){return this.tactic=e,this}requestFallback(e){if(!this.onRequestFallback)throw new Error(`"onRequestFallback" not defined on ${this.constructor.name}`);return this.fallbackRequested=!0,this.onRequestFallback(e)}validateSettings(){throw new Error(`"validateSettings" not defined on ${this.constructor.name}`)}addSubKernel(e){if(null===this.subKernels&&(this.subKernels=[]),!e.source)throw new Error('subKernel missing "source" property');if(!e.property&&isNaN(e.property))throw new Error('subKernel missing "property" property');if(!e.name)throw new Error('subKernel missing "name" property');return this.subKernels.push(e),this}destroy(e){throw new Error(`"destroy" called on ${this.constructor.name}`)}getBitRatio(e){if("single"===this.precision)return 4;if(Array.isArray(e[0]))return this.getBitRatio(e[0]);if(e.constructor===i)return this.getBitRatio(e.value);switch(e.constructor){case Uint8ClampedArray:case Uint8Array:case Int8Array:return 1;case Uint16Array:case Int16Array:return 2;case Float32Array:case Int32Array:default:return 4}}getPixels(e){throw new Error(`"getPixels" called on ${this.constructor.name}`)}checkOutput(){if(!this.output||!r.isArray(this.output))throw new Error("kernel.output not an array");if(this.output.length<1)throw new Error("kernel.output is empty, needs at least 1 value");for(let e=0;e<this.output.length;e++)if(isNaN(this.output[e])||this.output[e]<1)throw new Error(`${this.constructor.name}.output[${e}] incorrectly defined as \`${this.output[e]}\`, needs to be numeric, and greater than 0`)}prependString(e){throw new Error(`"prependString" called on ${this.constructor.name}`)}hasPrependString(e){throw new Error(`"hasPrependString" called on ${this.constructor.name}`)}toJSON(){return{settings:{output:this.output,pipeline:this.pipeline,argumentNames:this.argumentNames,argumentsTypes:this.argumentTypes,constants:this.constants,pluginNames:this.plugins?this.plugins.map((e=>e.name)):null,returnType:this.returnType}}}buildSignature(e){const t=this.constructor;this.signature=t.getSignature(this,t.getArgumentTypes(this,e))}static getArgumentTypes(e,t){const n=new Array(t.length);for(let i=0;i<t.length;i++){const s=t[i],a=e.argumentTypes[i];if(s.type)n[i]=s.type;else switch(a){case"Number":case"Integer":case"Float":case"ArrayTexture(1)":n[i]=r.getVariableType(s);break;default:n[i]=a}}return n}static getSignature(e,t){throw new Error(`"getSignature" not implemented on ${this.name}`)}functionToIGPUFunction(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"!==typeof e&&"function"!==typeof e)throw new Error("source not a string or function");const n="string"===typeof e?e:e.toString();let i=[];return i=Array.isArray(t.argumentTypes)?t.argumentTypes:"object"===typeof t.argumentTypes?r.getArgumentNamesFromString(n).map((e=>t.argumentTypes[e]))||[]:t.argumentTypes||[],{name:r.getFunctionNameFromString(n)||null,source:n,argumentTypes:i,returnType:t.returnType||null}}onActivate(e){}}function a(e){const t=Object.keys(e),n=[];for(let r=0;r<t.length;r++){const i=t[r];n.push(e[i])}return{argumentTypes:n,argumentNames:t}}t.exports={Kernel:s}},{"../input":110,"../utils":114}],37:[function(e,t,n){const r=`__HEADER__;\n__FLOAT_TACTIC_DECLARATION__;\n__INT_TACTIC_DECLARATION__;\n__SAMPLER_2D_TACTIC_DECLARATION__;\n\nconst int LOOP_MAX = __LOOP_MAX__;\n\n__PLUGINS__;\n__CONSTANTS__;\n\nvarying vec2 vTexCoord;\n\nfloat acosh(float x) {\n  return log(x + sqrt(x * x - 1.0));\n}\n\nfloat sinh(float x) {\n  return (pow(${Math.E}, x) - pow(${Math.E}, -x)) / 2.0;\n}\n\nfloat asinh(float x) {\n  return log(x + sqrt(x * x + 1.0));\n}\n\nfloat atan2(float v1, float v2) {\n  if (v1 == 0.0 || v2 == 0.0) return 0.0;\n  return atan(v1 / v2);\n}\n\nfloat atanh(float x) {\n  x = (x + 1.0) / (x - 1.0);\n  if (x < 0.0) {\n    return 0.5 * log(-x);\n  }\n  return 0.5 * log(x);\n}\n\nfloat cbrt(float x) {\n  if (x >= 0.0) {\n    return pow(x, 1.0 / 3.0);\n  } else {\n    return -pow(x, 1.0 / 3.0);\n  }\n}\n\nfloat cosh(float x) {\n  return (pow(${Math.E}, x) + pow(${Math.E}, -x)) / 2.0; \n}\n\nfloat expm1(float x) {\n  return pow(${Math.E}, x) - 1.0; \n}\n\nfloat fround(highp float x) {\n  return x;\n}\n\nfloat imul(float v1, float v2) {\n  return float(int(v1) * int(v2));\n}\n\nfloat log10(float x) {\n  return log2(x) * (1.0 / log2(10.0));\n}\n\nfloat log1p(float x) {\n  return log(1.0 + x);\n}\n\nfloat _pow(float v1, float v2) {\n  if (v2 == 0.0) return 1.0;\n  return pow(v1, v2);\n}\n\nfloat tanh(float x) {\n  float e = exp(2.0 * x);\n  return (e - 1.0) / (e + 1.0);\n}\n\nfloat trunc(float x) {\n  if (x >= 0.0) {\n    return floor(x); \n  } else {\n    return ceil(x);\n  }\n}\n\nvec4 _round(vec4 x) {\n  return floor(x + 0.5);\n}\n\nfloat _round(float x) {\n  return floor(x + 0.5);\n}\n\nconst int BIT_COUNT = 32;\nint modi(int x, int y) {\n  return x - y * (x / y);\n}\n\nint bitwiseOr(int a, int b) {\n  int result = 0;\n  int n = 1;\n  \n  for (int i = 0; i < BIT_COUNT; i++) {\n    if ((modi(a, 2) == 1) || (modi(b, 2) == 1)) {\n      result += n;\n    }\n    a = a / 2;\n    b = b / 2;\n    n = n * 2;\n    if(!(a > 0 || b > 0)) {\n      break;\n    }\n  }\n  return result;\n}\nint bitwiseXOR(int a, int b) {\n  int result = 0;\n  int n = 1;\n  \n  for (int i = 0; i < BIT_COUNT; i++) {\n    if ((modi(a, 2) == 1) != (modi(b, 2) == 1)) {\n      result += n;\n    }\n    a = a / 2;\n    b = b / 2;\n    n = n * 2;\n    if(!(a > 0 || b > 0)) {\n      break;\n    }\n  }\n  return result;\n}\nint bitwiseAnd(int a, int b) {\n  int result = 0;\n  int n = 1;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if ((modi(a, 2) == 1) && (modi(b, 2) == 1)) {\n      result += n;\n    }\n    a = a / 2;\n    b = b / 2;\n    n = n * 2;\n    if(!(a > 0 && b > 0)) {\n      break;\n    }\n  }\n  return result;\n}\nint bitwiseNot(int a) {\n  int result = 0;\n  int n = 1;\n  \n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (modi(a, 2) == 0) {\n      result += n;    \n    }\n    a = a / 2;\n    n = n * 2;\n  }\n  return result;\n}\nint bitwiseZeroFillLeftShift(int n, int shift) {\n  int maxBytes = BIT_COUNT;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (maxBytes >= n) {\n      break;\n    }\n    maxBytes *= 2;\n  }\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (i >= shift) {\n      break;\n    }\n    n *= 2;\n  }\n\n  int result = 0;\n  int byteVal = 1;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (i >= maxBytes) break;\n    if (modi(n, 2) > 0) { result += byteVal; }\n    n = int(n / 2);\n    byteVal *= 2;\n  }\n  return result;\n}\n\nint bitwiseSignedRightShift(int num, int shifts) {\n  return int(floor(float(num) / pow(2.0, float(shifts))));\n}\n\nint bitwiseZeroFillRightShift(int n, int shift) {\n  int maxBytes = BIT_COUNT;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (maxBytes >= n) {\n      break;\n    }\n    maxBytes *= 2;\n  }\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (i >= shift) {\n      break;\n    }\n    n /= 2;\n  }\n  int result = 0;\n  int byteVal = 1;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (i >= maxBytes) break;\n    if (modi(n, 2) > 0) { result += byteVal; }\n    n = int(n / 2);\n    byteVal *= 2;\n  }\n  return result;\n}\n\nvec2 integerMod(vec2 x, float y) {\n  vec2 res = floor(mod(x, y));\n  return res * step(1.0 - floor(y), -res);\n}\n\nvec3 integerMod(vec3 x, float y) {\n  vec3 res = floor(mod(x, y));\n  return res * step(1.0 - floor(y), -res);\n}\n\nvec4 integerMod(vec4 x, vec4 y) {\n  vec4 res = floor(mod(x, y));\n  return res * step(1.0 - floor(y), -res);\n}\n\nfloat integerMod(float x, float y) {\n  float res = floor(mod(x, y));\n  return res * (res > floor(y) - 1.0 ? 0.0 : 1.0);\n}\n\nint integerMod(int x, int y) {\n  return x - (y * int(x / y));\n}\n\n__DIVIDE_WITH_INTEGER_CHECK__;\n\n// Here be dragons!\n// DO NOT OPTIMIZE THIS CODE\n// YOU WILL BREAK SOMETHING ON SOMEBODY'S MACHINE\n// LEAVE IT AS IT IS, LEST YOU WASTE YOUR OWN TIME\nconst vec2 MAGIC_VEC = vec2(1.0, -256.0);\nconst vec4 SCALE_FACTOR = vec4(1.0, 256.0, 65536.0, 0.0);\nconst vec4 SCALE_FACTOR_INV = vec4(1.0, 0.00390625, 0.0000152587890625, 0.0); // 1, 1/256, 1/65536\nfloat decode32(vec4 texel) {\n  __DECODE32_ENDIANNESS__;\n  texel *= 255.0;\n  vec2 gte128;\n  gte128.x = texel.b >= 128.0 ? 1.0 : 0.0;\n  gte128.y = texel.a >= 128.0 ? 1.0 : 0.0;\n  float exponent = 2.0 * texel.a - 127.0 + dot(gte128, MAGIC_VEC);\n  float res = exp2(_round(exponent));\n  texel.b = texel.b - 128.0 * gte128.x;\n  res = dot(texel, SCALE_FACTOR) * exp2(_round(exponent-23.0)) + res;\n  res *= gte128.y * -2.0 + 1.0;\n  return res;\n}\n\nfloat decode16(vec4 texel, int index) {\n  int channel = integerMod(index, 2);\n  if (channel == 0) return texel.r * 255.0 + texel.g * 65280.0;\n  if (channel == 1) return texel.b * 255.0 + texel.a * 65280.0;\n  return 0.0;\n}\n\nfloat decode8(vec4 texel, int index) {\n  int channel = integerMod(index, 4);\n  if (channel == 0) return texel.r * 255.0;\n  if (channel == 1) return texel.g * 255.0;\n  if (channel == 2) return texel.b * 255.0;\n  if (channel == 3) return texel.a * 255.0;\n  return 0.0;\n}\n\nvec4 legacyEncode32(float f) {\n  float F = abs(f);\n  float sign = f < 0.0 ? 1.0 : 0.0;\n  float exponent = floor(log2(F));\n  float mantissa = (exp2(-exponent) * F);\n  // exponent += floor(log2(mantissa));\n  vec4 texel = vec4(F * exp2(23.0-exponent)) * SCALE_FACTOR_INV;\n  texel.rg = integerMod(texel.rg, 256.0);\n  texel.b = integerMod(texel.b, 128.0);\n  texel.a = exponent*0.5 + 63.5;\n  texel.ba += vec2(integerMod(exponent+127.0, 2.0), sign) * 128.0;\n  texel = floor(texel);\n  texel *= 0.003921569; // 1/255\n  __ENCODE32_ENDIANNESS__;\n  return texel;\n}\n\n// https://github.com/gpujs/gpu.js/wiki/Encoder-details\nvec4 encode32(float value) {\n  if (value == 0.0) return vec4(0, 0, 0, 0);\n\n  float exponent;\n  float mantissa;\n  vec4  result;\n  float sgn;\n\n  sgn = step(0.0, -value);\n  value = abs(value);\n\n  exponent = floor(log2(value));\n\n  mantissa = value*pow(2.0, -exponent)-1.0;\n  exponent = exponent+127.0;\n  result   = vec4(0,0,0,0);\n\n  result.a = floor(exponent/2.0);\n  exponent = exponent - result.a*2.0;\n  result.a = result.a + 128.0*sgn;\n\n  result.b = floor(mantissa * 128.0);\n  mantissa = mantissa - result.b / 128.0;\n  result.b = result.b + exponent*128.0;\n\n  result.g = floor(mantissa*32768.0);\n  mantissa = mantissa - result.g/32768.0;\n\n  result.r = floor(mantissa*8388608.0);\n  return result/255.0;\n}\n// Dragons end here\n\nint index;\nivec3 threadId;\n\nivec3 indexTo3D(int idx, ivec3 texDim) {\n  int z = int(idx / (texDim.x * texDim.y));\n  idx -= z * int(texDim.x * texDim.y);\n  int y = int(idx / texDim.x);\n  int x = int(integerMod(idx, texDim.x));\n  return ivec3(x, y, z);\n}\n\nfloat get32(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture2D(tex, st / vec2(texSize));\n  return decode32(texel);\n}\n\nfloat get16(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int w = texSize.x * 2;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture2D(tex, st / vec2(texSize.x * 2, texSize.y));\n  return decode16(texel, index);\n}\n\nfloat get8(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int w = texSize.x * 4;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture2D(tex, st / vec2(texSize.x * 4, texSize.y));\n  return decode8(texel, index);\n}\n\nfloat getMemoryOptimized32(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int channel = integerMod(index, 4);\n  index = index / 4;\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture2D(tex, st / vec2(texSize));\n  if (channel == 0) return texel.r;\n  if (channel == 1) return texel.g;\n  if (channel == 2) return texel.b;\n  if (channel == 3) return texel.a;\n  return 0.0;\n}\n\nvec4 getImage2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  return texture2D(tex, st / vec2(texSize));\n}\n\nfloat getFloatFromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  vec4 result = getImage2D(tex, texSize, texDim, z, y, x);\n  return result[0];\n}\n\nvec2 getVec2FromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  vec4 result = getImage2D(tex, texSize, texDim, z, y, x);\n  return vec2(result[0], result[1]);\n}\n\nvec2 getMemoryOptimizedVec2(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + (texDim.x * (y + (texDim.y * z)));\n  int channel = integerMod(index, 2);\n  index = index / 2;\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture2D(tex, st / vec2(texSize));\n  if (channel == 0) return vec2(texel.r, texel.g);\n  if (channel == 1) return vec2(texel.b, texel.a);\n  return vec2(0.0, 0.0);\n}\n\nvec3 getVec3FromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  vec4 result = getImage2D(tex, texSize, texDim, z, y, x);\n  return vec3(result[0], result[1], result[2]);\n}\n\nvec3 getMemoryOptimizedVec3(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int fieldIndex = 3 * (x + texDim.x * (y + texDim.y * z));\n  int vectorIndex = fieldIndex / 4;\n  int vectorOffset = fieldIndex - vectorIndex * 4;\n  int readY = vectorIndex / texSize.x;\n  int readX = vectorIndex - readY * texSize.x;\n  vec4 tex1 = texture2D(tex, (vec2(readX, readY) + 0.5) / vec2(texSize));\n  \n  if (vectorOffset == 0) {\n    return tex1.xyz;\n  } else if (vectorOffset == 1) {\n    return tex1.yzw;\n  } else {\n    readX++;\n    if (readX >= texSize.x) {\n      readX = 0;\n      readY++;\n    }\n    vec4 tex2 = texture2D(tex, vec2(readX, readY) / vec2(texSize));\n    if (vectorOffset == 2) {\n      return vec3(tex1.z, tex1.w, tex2.x);\n    } else {\n      return vec3(tex1.w, tex2.x, tex2.y);\n    }\n  }\n}\n\nvec4 getVec4FromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  return getImage2D(tex, texSize, texDim, z, y, x);\n}\n\nvec4 getMemoryOptimizedVec4(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int channel = integerMod(index, 2);\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture2D(tex, st / vec2(texSize));\n  return vec4(texel.r, texel.g, texel.b, texel.a);\n}\n\nvec4 actualColor;\nvoid color(float r, float g, float b, float a) {\n  actualColor = vec4(r,g,b,a);\n}\n\nvoid color(float r, float g, float b) {\n  color(r,g,b,1.0);\n}\n\nvoid color(sampler2D image) {\n  actualColor = texture2D(image, vTexCoord);\n}\n\nfloat modulo(float number, float divisor) {\n  if (number < 0.0) {\n    number = abs(number);\n    if (divisor < 0.0) {\n      divisor = abs(divisor);\n    }\n    return -mod(number, divisor);\n  }\n  if (divisor < 0.0) {\n    divisor = abs(divisor);\n  }\n  return mod(number, divisor);\n}\n\n__INJECTED_NATIVE__;\n__MAIN_CONSTANTS__;\n__MAIN_ARGUMENTS__;\n__KERNEL__;\n\nvoid main(void) {\n  index = int(vTexCoord.s * float(uTexSize.x)) + int(vTexCoord.t * float(uTexSize.y)) * uTexSize.x;\n  __MAIN_RESULT__;\n}`;t.exports={fragmentShader:r}},{}],38:[function(e,t,n){const{utils:r}=e("../../utils"),{FunctionNode:i}=e("../function-node");class s extends i{constructor(e,t){super(e,t),t&&t.hasOwnProperty("fixIntegerDivisionAccuracy")&&(this.fixIntegerDivisionAccuracy=t.fixIntegerDivisionAccuracy)}astConditionalExpression(e,t){if("ConditionalExpression"!==e.type)throw this.astErrorOutput("Not a conditional expression",e);const n=this.getType(e.consequent),r=this.getType(e.alternate);return null===n&&null===r?(t.push("if ("),this.astGeneric(e.test,t),t.push(") {"),this.astGeneric(e.consequent,t),t.push(";"),t.push("} else {"),this.astGeneric(e.alternate,t),t.push(";"),t.push("}"),t):(t.push("("),this.astGeneric(e.test,t),t.push("?"),this.astGeneric(e.consequent,t),t.push(":"),this.astGeneric(e.alternate,t),t.push(")"),t)}astFunction(e,t){if(this.isRootKernel)t.push("void");else{this.returnType||this.findLastReturn()&&(this.returnType=this.getType(e.body),"LiteralInteger"===this.returnType&&(this.returnType="Number"));const{returnType:n}=this;if(n){const e=a[n];if(!e)throw new Error(`unknown type ${n}`);t.push(e)}else t.push("void")}if(t.push(" "),t.push(this.name),t.push("("),!this.isRootKernel)for(let n=0;n<this.argumentNames.length;++n){const i=this.argumentNames[n];n>0&&t.push(", ");let s=this.argumentTypes[this.argumentNames.indexOf(i)];if(!s)throw this.astErrorOutput(`Unknown argument ${i} type`,e);"LiteralInteger"===s&&(this.argumentTypes[n]=s="Number");const o=a[s];if(!o)throw this.astErrorOutput("Unexpected expression",e);const l=r.sanitizeName(i);"sampler2D"===o||"sampler2DArray"===o?t.push(`${o} user_${l},ivec2 user_${l}Size,ivec3 user_${l}Dim`):t.push(`${o} user_${l}`)}t.push(") {\n");for(let n=0;n<e.body.body.length;++n)this.astGeneric(e.body.body[n],t),t.push("\n");return t.push("}\n"),t}astReturnStatement(e,t){if(!e.argument)throw this.astErrorOutput("Unexpected return statement",e);this.pushState("skip-literal-correction");const n=this.getType(e.argument);this.popState("skip-literal-correction");const r=[];switch(this.returnType||(this.returnType="LiteralInteger"===n||"Integer"===n?"Number":n),this.returnType){case"LiteralInteger":case"Number":case"Float":switch(n){case"Integer":r.push("float("),this.astGeneric(e.argument,r),r.push(")");break;case"LiteralInteger":this.castLiteralToFloat(e.argument,r),"Integer"===this.getType(e)&&(r.unshift("float("),r.push(")"));break;default:this.astGeneric(e.argument,r)}break;case"Integer":switch(n){case"Float":case"Number":this.castValueToInteger(e.argument,r);break;case"LiteralInteger":this.castLiteralToInteger(e.argument,r);break;default:this.astGeneric(e.argument,r)}break;case"Array(4)":case"Array(3)":case"Array(2)":case"Matrix(2)":case"Matrix(3)":case"Matrix(4)":case"Input":this.astGeneric(e.argument,r);break;default:throw this.astErrorOutput(`unhandled return type ${this.returnType}`,e)}return this.isRootKernel?(t.push(`kernelResult = ${r.join("")};`),t.push("return;")):this.isSubKernel?(t.push(`subKernelResult_${this.name} = ${r.join("")};`),t.push(`return subKernelResult_${this.name};`)):t.push(`return ${r.join("")};`),t}astLiteral(e,t){if(isNaN(e.value))throw this.astErrorOutput("Non-numeric literal not supported : "+e.value,e);const n=this.astKey(e);return Number.isInteger(e.value)?this.isState("casting-to-integer")||this.isState("building-integer")?(this.literalTypes[n]="Integer",t.push(`${e.value}`)):(this.isState("casting-to-float")||this.isState("building-float"),this.literalTypes[n]="Number",t.push(`${e.value}.0`)):this.isState("casting-to-integer")||this.isState("building-integer")?(this.literalTypes[n]="Integer",t.push(Math.round(e.value))):(this.literalTypes[n]="Number",t.push(`${e.value}`)),t}astBinaryExpression(e,t){if(this.checkAndUpconvertOperator(e,t))return t;if(this.fixIntegerDivisionAccuracy&&"/"===e.operator){switch(t.push("divWithIntCheck("),this.pushState("building-float"),this.getType(e.left)){case"Integer":this.castValueToFloat(e.left,t);break;case"LiteralInteger":this.castLiteralToFloat(e.left,t);break;default:this.astGeneric(e.left,t)}switch(t.push(", "),this.getType(e.right)){case"Integer":this.castValueToFloat(e.right,t);break;case"LiteralInteger":this.castLiteralToFloat(e.right,t);break;default:this.astGeneric(e.right,t)}return this.popState("building-float"),t.push(")"),t}t.push("(");const n=this.getType(e.left)||"Number",r=this.getType(e.right)||"Number";if(!n||!r)throw this.astErrorOutput("Unhandled binary expression",e);const i=n+" & "+r;switch(i){case"Integer & Integer":this.pushState("building-integer"),this.astGeneric(e.left,t),t.push(o[e.operator]||e.operator),this.astGeneric(e.right,t),this.popState("building-integer");break;case"Number & Float":case"Float & Number":case"Float & Float":case"Number & Number":this.pushState("building-float"),this.astGeneric(e.left,t),t.push(o[e.operator]||e.operator),this.astGeneric(e.right,t),this.popState("building-float");break;case"LiteralInteger & LiteralInteger":this.isState("casting-to-integer")||this.isState("building-integer")?(this.pushState("building-integer"),this.astGeneric(e.left,t),t.push(o[e.operator]||e.operator),this.astGeneric(e.right,t),this.popState("building-integer")):(this.pushState("building-float"),this.castLiteralToFloat(e.left,t),t.push(o[e.operator]||e.operator),this.castLiteralToFloat(e.right,t),this.popState("building-float"));break;case"Integer & Float":case"Integer & Number":if((">"===e.operator||"<"===e.operator&&"Literal"===e.right.type)&&!Number.isInteger(e.right.value)){this.pushState("building-float"),this.castValueToFloat(e.left,t),t.push(o[e.operator]||e.operator),this.astGeneric(e.right,t),this.popState("building-float");break}if(this.pushState("building-integer"),this.astGeneric(e.left,t),t.push(o[e.operator]||e.operator),this.pushState("casting-to-integer"),"Literal"===e.right.type){const n=[];if(this.astGeneric(e.right,n),"Integer"!==this.getType(e.right))throw this.astErrorOutput("Unhandled binary expression with literal",e);t.push(n.join(""))}else t.push("int("),this.astGeneric(e.right,t),t.push(")");this.popState("casting-to-integer"),this.popState("building-integer");break;case"Integer & LiteralInteger":this.pushState("building-integer"),this.astGeneric(e.left,t),t.push(o[e.operator]||e.operator),this.castLiteralToInteger(e.right,t),this.popState("building-integer");break;case"Number & Integer":case"Float & Integer":this.pushState("building-float"),this.astGeneric(e.left,t),t.push(o[e.operator]||e.operator),this.castValueToFloat(e.right,t),this.popState("building-float");break;case"Float & LiteralInteger":case"Number & LiteralInteger":this.pushState("building-float"),this.astGeneric(e.left,t),t.push(o[e.operator]||e.operator),this.castLiteralToFloat(e.right,t),this.popState("building-float");break;case"LiteralInteger & Float":case"LiteralInteger & Number":this.isState("casting-to-integer")?(this.pushState("building-integer"),this.castLiteralToInteger(e.left,t),t.push(o[e.operator]||e.operator),this.castValueToInteger(e.right,t),this.popState("building-integer")):(this.pushState("building-float"),this.astGeneric(e.left,t),t.push(o[e.operator]||e.operator),this.pushState("casting-to-float"),this.astGeneric(e.right,t),this.popState("casting-to-float"),this.popState("building-float"));break;case"LiteralInteger & Integer":this.pushState("building-integer"),this.castLiteralToInteger(e.left,t),t.push(o[e.operator]||e.operator),this.astGeneric(e.right,t),this.popState("building-integer");break;case"Boolean & Boolean":this.pushState("building-boolean"),this.astGeneric(e.left,t),t.push(o[e.operator]||e.operator),this.astGeneric(e.right,t),this.popState("building-boolean");break;default:throw this.astErrorOutput(`Unhandled binary expression between ${i}`,e)}return t.push(")"),t}checkAndUpconvertOperator(e,t){const n=this.checkAndUpconvertBitwiseOperators(e,t);if(n)return n;const r={"%":this.fixIntegerDivisionAccuracy?"integerCorrectionModulo":"modulo","**":"pow"}[e.operator];if(!r)return null;switch(t.push(r),t.push("("),this.getType(e.left)){case"Integer":this.castValueToFloat(e.left,t);break;case"LiteralInteger":this.castLiteralToFloat(e.left,t);break;default:this.astGeneric(e.left,t)}switch(t.push(","),this.getType(e.right)){case"Integer":this.castValueToFloat(e.right,t);break;case"LiteralInteger":this.castLiteralToFloat(e.right,t);break;default:this.astGeneric(e.right,t)}return t.push(")"),t}checkAndUpconvertBitwiseOperators(e,t){const n={"&":"bitwiseAnd","|":"bitwiseOr","^":"bitwiseXOR","<<":"bitwiseZeroFillLeftShift",">>":"bitwiseSignedRightShift",">>>":"bitwiseZeroFillRightShift"}[e.operator];if(!n)return null;switch(t.push(n),t.push("("),this.getType(e.left)){case"Number":case"Float":this.castValueToInteger(e.left,t);break;case"LiteralInteger":this.castLiteralToInteger(e.left,t);break;default:this.astGeneric(e.left,t)}switch(t.push(","),this.getType(e.right)){case"Number":case"Float":this.castValueToInteger(e.right,t);break;case"LiteralInteger":this.castLiteralToInteger(e.right,t);break;default:this.astGeneric(e.right,t)}return t.push(")"),t}checkAndUpconvertBitwiseUnary(e,t){const n={"~":"bitwiseNot"}[e.operator];if(!n)return null;switch(t.push(n),t.push("("),this.getType(e.argument)){case"Number":case"Float":this.castValueToInteger(e.argument,t);break;case"LiteralInteger":this.castLiteralToInteger(e.argument,t);break;default:this.astGeneric(e.argument,t)}return t.push(")"),t}castLiteralToInteger(e,t){return this.pushState("casting-to-integer"),this.astGeneric(e,t),this.popState("casting-to-integer"),t}castLiteralToFloat(e,t){return this.pushState("casting-to-float"),this.astGeneric(e,t),this.popState("casting-to-float"),t}castValueToInteger(e,t){return this.pushState("casting-to-integer"),t.push("int("),this.astGeneric(e,t),t.push(")"),this.popState("casting-to-integer"),t}castValueToFloat(e,t){return this.pushState("casting-to-float"),t.push("float("),this.astGeneric(e,t),t.push(")"),this.popState("casting-to-float"),t}astIdentifierExpression(e,t){if("Identifier"!==e.type)throw this.astErrorOutput("IdentifierExpression - not an Identifier",e);const n=this.getType(e),i=r.sanitizeName(e.name);return"Infinity"===e.name?t.push("3.402823466e+38"):"Boolean"===n&&this.argumentNames.indexOf(i)>-1?t.push(`bool(user_${i})`):t.push(`user_${i}`),t}astForStatement(e,t){if("ForStatement"!==e.type)throw this.astErrorOutput("Invalid for statement",e);const n=[],r=[],i=[],s=[];let a=null;if(e.init){const{declarations:t}=e.init;t.length>1&&(a=!1),this.astGeneric(e.init,n);for(let e=0;e<t.length;e++)t[e].init&&"Literal"!==t[e].init.type&&(a=!1)}else a=!1;if(e.test?this.astGeneric(e.test,r):a=!1,e.update?this.astGeneric(e.update,i):a=!1,e.body&&(this.pushState("loop-body"),this.astGeneric(e.body,s),this.popState("loop-body")),null===a&&(a=this.isSafe(e.init)&&this.isSafe(e.test)),a){const e=n.join(""),a=";"!==e[e.length-1];t.push(`for (${e}${a?";":""}${r.join("")};${i.join("")}){\n`),t.push(s.join("")),t.push("}\n")}else{const e=this.getInternalVariableName("safeI");n.length>0&&t.push(n.join(""),"\n"),t.push(`for (int ${e}=0;${e}<LOOP_MAX;${e}++){\n`),r.length>0&&t.push(`if (!${r.join("")}) break;\n`),t.push(s.join("")),t.push(`\n${i.join("")};`),t.push("}\n")}return t}astWhileStatement(e,t){if("WhileStatement"!==e.type)throw this.astErrorOutput("Invalid while statement",e);const n=this.getInternalVariableName("safeI");return t.push(`for (int ${n}=0;${n}<LOOP_MAX;${n}++){\n`),t.push("if (!"),this.astGeneric(e.test,t),t.push(") break;\n"),this.astGeneric(e.body,t),t.push("}\n"),t}astDoWhileStatement(e,t){if("DoWhileStatement"!==e.type)throw this.astErrorOutput("Invalid while statement",e);const n=this.getInternalVariableName("safeI");return t.push(`for (int ${n}=0;${n}<LOOP_MAX;${n}++){\n`),this.astGeneric(e.body,t),t.push("if (!"),this.astGeneric(e.test,t),t.push(") break;\n"),t.push("}\n"),t}astAssignmentExpression(e,t){if("%="===e.operator)this.astGeneric(e.left,t),t.push("="),t.push("mod("),this.astGeneric(e.left,t),t.push(","),this.astGeneric(e.right,t),t.push(")");else{if("**="!==e.operator){const n=this.getType(e.left),r=this.getType(e.right);return this.astGeneric(e.left,t),t.push(e.operator),"Integer"!==n&&"Integer"===r?(t.push("float("),this.astGeneric(e.right,t),t.push(")")):this.astGeneric(e.right,t),t}this.astGeneric(e.left,t),t.push("="),t.push("pow("),this.astGeneric(e.left,t),t.push(","),this.astGeneric(e.right,t),t.push(")")}}astBlockStatement(e,t){if(this.isState("loop-body")){this.pushState("block-body");for(let n=0;n<e.body.length;n++)this.astGeneric(e.body[n],t);this.popState("block-body")}else{t.push("{\n");for(let n=0;n<e.body.length;n++)this.astGeneric(e.body[n],t);t.push("}\n")}return t}astVariableDeclaration(e,t){const n=e.declarations;if(!n||!n[0]||!n[0].init)throw this.astErrorOutput("Unexpected expression",e);const i=[];let s=null;const o=[];let l=[];for(let u=0;u<n.length;u++){const t=n[u],i=t.init,c=this.getDeclaration(t.id),h=this.getType(t.init);let p=h;"LiteralInteger"===p&&(p="Integer"===c.suggestedType?"Integer":"Number");const d=a[p];if(!d)throw this.astErrorOutput(`Markup type ${p} not handled`,e);const f=[];if("Integer"===h&&"Integer"===p){if(c.valueType="Number",0===u||null===s)f.push("float ");else if(p!==s)throw new Error("Unhandled declaration");s=p,f.push(`user_${r.sanitizeName(t.id.name)}=`),f.push("float("),this.astGeneric(i,f),f.push(")")}else c.valueType=p,0===u||null===s?f.push(`${d} `):p!==s&&(o.push(l.join(",")),l=[],f.push(`${d} `)),s=p,f.push(`user_${r.sanitizeName(t.id.name)}=`),"Number"===h&&"Integer"===p?i.left&&"Literal"===i.left.type?this.astGeneric(i,f):(f.push("int("),this.astGeneric(i,f),f.push(")")):"LiteralInteger"===h&&"Integer"===p?this.castLiteralToInteger(i,f):this.astGeneric(i,f);l.push(f.join(""))}return l.length>0&&o.push(l.join(",")),i.push(o.join(";")),t.push(i.join("")),t.push(";"),t}astIfStatement(e,t){return t.push("if ("),this.astGeneric(e.test,t),t.push(")"),"BlockStatement"===e.consequent.type?this.astGeneric(e.consequent,t):(t.push(" {\n"),this.astGeneric(e.consequent,t),t.push("\n}\n")),e.alternate&&(t.push("else "),"BlockStatement"===e.alternate.type||"IfStatement"===e.alternate.type?this.astGeneric(e.alternate,t):(t.push(" {\n"),this.astGeneric(e.alternate,t),t.push("\n}\n"))),t}astSwitchStatement(e,t){if("SwitchStatement"!==e.type)throw this.astErrorOutput("Invalid switch statement",e);const{discriminant:n,cases:r}=e,i=this.getType(n),s=`switchDiscriminant${this.astKey(e,"_")}`;switch(i){case"Float":case"Number":t.push(`float ${s} = `),this.astGeneric(n,t),t.push(";\n");break;case"Integer":t.push(`int ${s} = `),this.astGeneric(n,t),t.push(";\n")}if(1===r.length&&!r[0].test)return this.astGeneric(r[0].consequent,t),t;let a=!1,o=[],l=!1,u=!1;for(let c=0;c<r.length;c++){if(r[c].test){if(0!==c&&u?a?(t.push(`${s} == `),a=!1):t.push(` else if (${s} == `):(u=!0,t.push(`if (${s} == `)),"Integer"===i)switch(this.getType(r[c].test)){case"Number":case"Float":this.castValueToInteger(r[c].test,t);break;case"LiteralInteger":this.castLiteralToInteger(r[c].test,t)}else{if("Float"!==i)throw new Error("unhanlded");switch(this.getType(r[c].test)){case"LiteralInteger":this.castLiteralToFloat(r[c].test,t);break;case"Integer":this.castValueToFloat(r[c].test,t)}}if(!r[c].consequent||0===r[c].consequent.length){a=!0,t.push(" || ");continue}t.push(") {\n")}else{if(r.length>c+1){l=!0,this.astGeneric(r[c].consequent,o);continue}t.push(" else {\n")}this.astGeneric(r[c].consequent,t),t.push("\n}")}return l&&(t.push(" else {"),t.push(o.join("")),t.push("}")),t}astThisExpression(e,t){return t.push("this"),t}astMemberExpression(e,t){const{property:n,name:i,signature:s,origin:a,type:o,xProperty:l,yProperty:u,zProperty:c}=this.getMemberExpressionDetails(e);switch(s){case"value.thread.value":case"this.thread.value":if("x"!==i&&"y"!==i&&"z"!==i)throw this.astErrorOutput("Unexpected expression, expected `this.thread.x`, `this.thread.y`, or `this.thread.z`",e);return t.push(`threadId.${i}`),t;case"this.output.value":if(this.dynamicOutput)switch(i){case"x":this.isState("casting-to-float")?t.push("float(uOutputDim.x)"):t.push("uOutputDim.x");break;case"y":this.isState("casting-to-float")?t.push("float(uOutputDim.y)"):t.push("uOutputDim.y");break;case"z":this.isState("casting-to-float")?t.push("float(uOutputDim.z)"):t.push("uOutputDim.z");break;default:throw this.astErrorOutput("Unexpected expression",e)}else switch(i){case"x":this.isState("casting-to-integer")?t.push(this.output[0]):t.push(this.output[0],".0");break;case"y":this.isState("casting-to-integer")?t.push(this.output[1]):t.push(this.output[1],".0");break;case"z":this.isState("casting-to-integer")?t.push(this.output[2]):t.push(this.output[2],".0");break;default:throw this.astErrorOutput("Unexpected expression",e)}return t;case"value":throw this.astErrorOutput("Unexpected expression",e);case"value[]":case"value[][]":case"value[][][]":case"value[][][][]":case"value.value":if("Math"===a)return t.push(Math[i]),t;const s=r.sanitizeName(i);switch(n){case"r":return t.push(`user_${s}.r`),t;case"g":return t.push(`user_${s}.g`),t;case"b":return t.push(`user_${s}.b`),t;case"a":return t.push(`user_${s}.a`),t}break;case"this.constants.value":if("undefined"===typeof l)switch(o){case"Array(2)":case"Array(3)":case"Array(4)":return t.push(`constants_${r.sanitizeName(i)}`),t}case"this.constants.value[]":case"this.constants.value[][]":case"this.constants.value[][][]":case"this.constants.value[][][][]":break;case"fn()[]":return this.astCallExpression(e.object,t),t.push("["),t.push(this.memberExpressionPropertyMarkup(n)),t.push("]"),t;case"fn()[][]":return this.astCallExpression(e.object.object,t),t.push("["),t.push(this.memberExpressionPropertyMarkup(e.object.property)),t.push("]"),t.push("["),t.push(this.memberExpressionPropertyMarkup(e.property)),t.push("]"),t;case"[][]":return this.astArrayExpression(e.object,t),t.push("["),t.push(this.memberExpressionPropertyMarkup(n)),t.push("]"),t;default:throw this.astErrorOutput("Unexpected expression",e)}if(!1===e.computed)switch(o){case"Number":case"Integer":case"Float":case"Boolean":return t.push(`${a}_${r.sanitizeName(i)}`),t}const h=`${a}_${r.sanitizeName(i)}`;switch(o){case"Array(2)":case"Array(3)":case"Array(4)":this.astGeneric(e.object,t),t.push("["),t.push(this.memberExpressionPropertyMarkup(l)),t.push("]");break;case"HTMLImageArray":t.push(`getImage3D(${h}, ${h}Size, ${h}Dim, `),this.memberExpressionXYZ(l,u,c,t),t.push(")");break;case"ArrayTexture(1)":t.push(`getFloatFromSampler2D(${h}, ${h}Size, ${h}Dim, `),this.memberExpressionXYZ(l,u,c,t),t.push(")");break;case"Array1D(2)":case"Array2D(2)":case"Array3D(2)":t.push(`getMemoryOptimizedVec2(${h}, ${h}Size, ${h}Dim, `),this.memberExpressionXYZ(l,u,c,t),t.push(")");break;case"ArrayTexture(2)":t.push(`getVec2FromSampler2D(${h}, ${h}Size, ${h}Dim, `),this.memberExpressionXYZ(l,u,c,t),t.push(")");break;case"Array1D(3)":case"Array2D(3)":case"Array3D(3)":t.push(`getMemoryOptimizedVec3(${h}, ${h}Size, ${h}Dim, `),this.memberExpressionXYZ(l,u,c,t),t.push(")");break;case"ArrayTexture(3)":t.push(`getVec3FromSampler2D(${h}, ${h}Size, ${h}Dim, `),this.memberExpressionXYZ(l,u,c,t),t.push(")");break;case"Array1D(4)":case"Array2D(4)":case"Array3D(4)":t.push(`getMemoryOptimizedVec4(${h}, ${h}Size, ${h}Dim, `),this.memberExpressionXYZ(l,u,c,t),t.push(")");break;case"ArrayTexture(4)":case"HTMLCanvas":case"OffscreenCanvas":case"HTMLImage":case"ImageBitmap":case"ImageData":case"HTMLVideo":t.push(`getVec4FromSampler2D(${h}, ${h}Size, ${h}Dim, `),this.memberExpressionXYZ(l,u,c,t),t.push(")");break;case"NumberTexture":case"Array":case"Array2D":case"Array3D":case"Array4D":case"Input":case"Number":case"Float":case"Integer":if("single"===this.precision)t.push(`getMemoryOptimized32(${h}, ${h}Size, ${h}Dim, `),this.memberExpressionXYZ(l,u,c,t),t.push(")");else{const e="user"===a?this.lookupFunctionArgumentBitRatio(this.name,i):this.constantBitRatios[i];switch(e){case 1:t.push(`get8(${h}, ${h}Size, ${h}Dim, `);break;case 2:t.push(`get16(${h}, ${h}Size, ${h}Dim, `);break;case 4:case 0:t.push(`get32(${h}, ${h}Size, ${h}Dim, `);break;default:throw new Error(`unhandled bit ratio of ${e}`)}this.memberExpressionXYZ(l,u,c,t),t.push(")")}break;case"MemoryOptimizedNumberTexture":t.push(`getMemoryOptimized32(${h}, ${h}Size, ${h}Dim, `),this.memberExpressionXYZ(l,u,c,t),t.push(")");break;case"Matrix(2)":case"Matrix(3)":case"Matrix(4)":t.push(`${h}[${this.memberExpressionPropertyMarkup(u)}]`),u&&t.push(`[${this.memberExpressionPropertyMarkup(l)}]`);break;default:throw new Error(`unhandled member expression "${o}"`)}return t}astCallExpression(e,t){if(!e.callee)throw this.astErrorOutput("Unknown CallExpression",e);let n=null;const i=this.isAstMathFunction(e);if(n=i||e.callee.object&&"ThisExpression"===e.callee.object.type?e.callee.property.name:"SequenceExpression"!==e.callee.type||"Literal"!==e.callee.expressions[0].type||isNaN(e.callee.expressions[0].raw)?e.callee.name:e.callee.expressions[1].property.name,!n)throw this.astErrorOutput("Unhandled function, couldn't find name",e);switch(n){case"pow":n="_pow";break;case"round":n="_round"}if(this.calledFunctions.indexOf(n)<0&&this.calledFunctions.push(n),"random"===n&&this.plugins&&this.plugins.length>0)for(let r=0;r<this.plugins.length;r++){const e=this.plugins[r];if("Math.random()"===e.functionMatch&&e.functionReplace)return t.push(e.functionReplace),t}if(this.onFunctionCall&&this.onFunctionCall(this.name,n,e.arguments),t.push(n),t.push("("),i)for(let r=0;r<e.arguments.length;++r){const n=e.arguments[r],i=this.getType(n);r>0&&t.push(", "),"Integer"===i?this.castValueToFloat(n,t):this.astGeneric(n,t)}else{const i=this.lookupFunctionArgumentTypes(n)||[];for(let s=0;s<e.arguments.length;++s){const a=e.arguments[s];let o=i[s];s>0&&t.push(", ");const l=this.getType(a);switch(o||(this.triggerImplyArgumentType(n,s,l,this),o=l),l){case"Boolean":this.astGeneric(a,t);continue;case"Number":case"Float":if("Integer"===o){t.push("int("),this.astGeneric(a,t),t.push(")");continue}if("Number"===o||"Float"===o){this.astGeneric(a,t);continue}if("LiteralInteger"===o){this.castLiteralToFloat(a,t);continue}break;case"Integer":if("Number"===o||"Float"===o){t.push("float("),this.astGeneric(a,t),t.push(")");continue}if("Integer"===o){this.astGeneric(a,t);continue}break;case"LiteralInteger":if("Integer"===o){this.castLiteralToInteger(a,t);continue}if("Number"===o||"Float"===o){this.castLiteralToFloat(a,t);continue}if("LiteralInteger"===o){this.astGeneric(a,t);continue}break;case"Array(2)":case"Array(3)":case"Array(4)":if(o===l){if("Identifier"===a.type)t.push(`user_${r.sanitizeName(a.name)}`);else{if("ArrayExpression"!==a.type&&"MemberExpression"!==a.type&&"CallExpression"!==a.type)throw this.astErrorOutput(`Unhandled argument type ${a.type}`,e);this.astGeneric(a,t)}continue}break;case"HTMLCanvas":case"OffscreenCanvas":case"HTMLImage":case"ImageBitmap":case"ImageData":case"HTMLImageArray":case"HTMLVideo":case"ArrayTexture(1)":case"ArrayTexture(2)":case"ArrayTexture(3)":case"ArrayTexture(4)":case"Array":case"Input":if(o===l){if("Identifier"!==a.type)throw this.astErrorOutput(`Unhandled argument type ${a.type}`,e);this.triggerImplyArgumentBitRatio(this.name,a.name,n,s);const i=r.sanitizeName(a.name);t.push(`user_${i},user_${i}Size,user_${i}Dim`);continue}}throw this.astErrorOutput(`Unhandled argument combination of ${l} and ${o} for argument named "${a.name}"`,e)}}return t.push(")"),t}astArrayExpression(e,t){const n=this.getType(e),r=e.elements.length;switch(n){case"Matrix(2)":case"Matrix(3)":case"Matrix(4)":t.push(`mat${r}(`);break;default:t.push(`vec${r}(`)}for(let i=0;i<r;++i){i>0&&t.push(", ");const n=e.elements[i];this.astGeneric(n,t)}return t.push(")"),t}memberExpressionXYZ(e,t,n,r){return n?r.push(this.memberExpressionPropertyMarkup(n),", "):r.push("0, "),t?r.push(this.memberExpressionPropertyMarkup(t),", "):r.push("0, "),r.push(this.memberExpressionPropertyMarkup(e)),r}memberExpressionPropertyMarkup(e){if(!e)throw new Error("Property not set");const t=[];switch(this.getType(e)){case"Number":case"Float":this.castValueToInteger(e,t);break;case"LiteralInteger":this.castLiteralToInteger(e,t);break;default:this.astGeneric(e,t)}return t.join("")}}const a={Array:"sampler2D","Array(2)":"vec2","Array(3)":"vec3","Array(4)":"vec4","Matrix(2)":"mat2","Matrix(3)":"mat3","Matrix(4)":"mat4",Array2D:"sampler2D",Array3D:"sampler2D",Boolean:"bool",Float:"float",Input:"sampler2D",Integer:"int",Number:"float",LiteralInteger:"float",NumberTexture:"sampler2D",MemoryOptimizedNumberTexture:"sampler2D","ArrayTexture(1)":"sampler2D","ArrayTexture(2)":"sampler2D","ArrayTexture(3)":"sampler2D","ArrayTexture(4)":"sampler2D",HTMLVideo:"sampler2D",HTMLCanvas:"sampler2D",OffscreenCanvas:"sampler2D",HTMLImage:"sampler2D",ImageBitmap:"sampler2D",ImageData:"sampler2D",HTMLImageArray:"sampler2DArray"},o={"===":"==","!==":"!="};t.exports={WebGLFunctionNode:s}},{"../../utils":114,"../function-node":10}],39:[function(e,t,n){const{WebGLKernelValueBoolean:r}=e("./kernel-value/boolean"),{WebGLKernelValueFloat:i}=e("./kernel-value/float"),{WebGLKernelValueInteger:s}=e("./kernel-value/integer"),{WebGLKernelValueHTMLImage:a}=e("./kernel-value/html-image"),{WebGLKernelValueDynamicHTMLImage:o}=e("./kernel-value/dynamic-html-image"),{WebGLKernelValueHTMLVideo:l}=e("./kernel-value/html-video"),{WebGLKernelValueDynamicHTMLVideo:u}=e("./kernel-value/dynamic-html-video"),{WebGLKernelValueSingleInput:c}=e("./kernel-value/single-input"),{WebGLKernelValueDynamicSingleInput:h}=e("./kernel-value/dynamic-single-input"),{WebGLKernelValueUnsignedInput:p}=e("./kernel-value/unsigned-input"),{WebGLKernelValueDynamicUnsignedInput:d}=e("./kernel-value/dynamic-unsigned-input"),{WebGLKernelValueMemoryOptimizedNumberTexture:f}=e("./kernel-value/memory-optimized-number-texture"),{WebGLKernelValueDynamicMemoryOptimizedNumberTexture:m}=e("./kernel-value/dynamic-memory-optimized-number-texture"),{WebGLKernelValueNumberTexture:g}=e("./kernel-value/number-texture"),{WebGLKernelValueDynamicNumberTexture:y}=e("./kernel-value/dynamic-number-texture"),{WebGLKernelValueSingleArray:b}=e("./kernel-value/single-array"),{WebGLKernelValueDynamicSingleArray:x}=e("./kernel-value/dynamic-single-array"),{WebGLKernelValueSingleArray1DI:v}=e("./kernel-value/single-array1d-i"),{WebGLKernelValueDynamicSingleArray1DI:w}=e("./kernel-value/dynamic-single-array1d-i"),{WebGLKernelValueSingleArray2DI:S}=e("./kernel-value/single-array2d-i"),{WebGLKernelValueDynamicSingleArray2DI:k}=e("./kernel-value/dynamic-single-array2d-i"),{WebGLKernelValueSingleArray3DI:T}=e("./kernel-value/single-array3d-i"),{WebGLKernelValueDynamicSingleArray3DI:A}=e("./kernel-value/dynamic-single-array3d-i"),{WebGLKernelValueArray2:E}=e("./kernel-value/array2"),{WebGLKernelValueArray3:_}=e("./kernel-value/array3"),{WebGLKernelValueArray4:L}=e("./kernel-value/array4"),{WebGLKernelValueUnsignedArray:C}=e("./kernel-value/unsigned-array"),{WebGLKernelValueDynamicUnsignedArray:I}=e("./kernel-value/dynamic-unsigned-array"),$={unsigned:{dynamic:{Boolean:r,Integer:s,Float:i,Array:I,"Array(2)":E,"Array(3)":_,"Array(4)":L,"Array1D(2)":!1,"Array1D(3)":!1,"Array1D(4)":!1,"Array2D(2)":!1,"Array2D(3)":!1,"Array2D(4)":!1,"Array3D(2)":!1,"Array3D(3)":!1,"Array3D(4)":!1,Input:d,NumberTexture:y,"ArrayTexture(1)":y,"ArrayTexture(2)":y,"ArrayTexture(3)":y,"ArrayTexture(4)":y,MemoryOptimizedNumberTexture:m,HTMLCanvas:o,OffscreenCanvas:o,HTMLImage:o,ImageBitmap:o,ImageData:o,HTMLImageArray:!1,HTMLVideo:u},static:{Boolean:r,Float:i,Integer:s,Array:C,"Array(2)":E,"Array(3)":_,"Array(4)":L,"Array1D(2)":!1,"Array1D(3)":!1,"Array1D(4)":!1,"Array2D(2)":!1,"Array2D(3)":!1,"Array2D(4)":!1,"Array3D(2)":!1,"Array3D(3)":!1,"Array3D(4)":!1,Input:p,NumberTexture:g,"ArrayTexture(1)":g,"ArrayTexture(2)":g,"ArrayTexture(3)":g,"ArrayTexture(4)":g,MemoryOptimizedNumberTexture:f,HTMLCanvas:a,OffscreenCanvas:a,HTMLImage:a,ImageBitmap:a,ImageData:a,HTMLImageArray:!1,HTMLVideo:l}},single:{dynamic:{Boolean:r,Integer:s,Float:i,Array:x,"Array(2)":E,"Array(3)":_,"Array(4)":L,"Array1D(2)":w,"Array1D(3)":w,"Array1D(4)":w,"Array2D(2)":k,"Array2D(3)":k,"Array2D(4)":k,"Array3D(2)":A,"Array3D(3)":A,"Array3D(4)":A,Input:h,NumberTexture:y,"ArrayTexture(1)":y,"ArrayTexture(2)":y,"ArrayTexture(3)":y,"ArrayTexture(4)":y,MemoryOptimizedNumberTexture:m,HTMLCanvas:o,OffscreenCanvas:o,HTMLImage:o,ImageBitmap:o,ImageData:o,HTMLImageArray:!1,HTMLVideo:u},static:{Boolean:r,Float:i,Integer:s,Array:b,"Array(2)":E,"Array(3)":_,"Array(4)":L,"Array1D(2)":v,"Array1D(3)":v,"Array1D(4)":v,"Array2D(2)":S,"Array2D(3)":S,"Array2D(4)":S,"Array3D(2)":T,"Array3D(3)":T,"Array3D(4)":T,Input:c,NumberTexture:g,"ArrayTexture(1)":g,"ArrayTexture(2)":g,"ArrayTexture(3)":g,"ArrayTexture(4)":g,MemoryOptimizedNumberTexture:f,HTMLCanvas:a,OffscreenCanvas:a,HTMLImage:a,ImageBitmap:a,ImageData:a,HTMLImageArray:!1,HTMLVideo:l}}};function O(e,t,n,r){if(!e)throw new Error("type missing");if(!t)throw new Error("dynamic missing");if(!n)throw new Error("precision missing");r.type&&(e=r.type);const i=$[n][t];if(!1===i[e])return null;if(void 0===i[e])throw new Error(`Could not find a KernelValue for ${e}`);return i[e]}t.exports={lookupKernelValueType:O,kernelValueMaps:$}},{"./kernel-value/array2":41,"./kernel-value/array3":42,"./kernel-value/array4":43,"./kernel-value/boolean":44,"./kernel-value/dynamic-html-image":45,"./kernel-value/dynamic-html-video":46,"./kernel-value/dynamic-memory-optimized-number-texture":47,"./kernel-value/dynamic-number-texture":48,"./kernel-value/dynamic-single-array":49,"./kernel-value/dynamic-single-array1d-i":50,"./kernel-value/dynamic-single-array2d-i":51,"./kernel-value/dynamic-single-array3d-i":52,"./kernel-value/dynamic-single-input":53,"./kernel-value/dynamic-unsigned-array":54,"./kernel-value/dynamic-unsigned-input":55,"./kernel-value/float":56,"./kernel-value/html-image":57,"./kernel-value/html-video":58,"./kernel-value/integer":60,"./kernel-value/memory-optimized-number-texture":61,"./kernel-value/number-texture":62,"./kernel-value/single-array":63,"./kernel-value/single-array1d-i":64,"./kernel-value/single-array2d-i":65,"./kernel-value/single-array3d-i":66,"./kernel-value/single-input":67,"./kernel-value/unsigned-array":68,"./kernel-value/unsigned-input":69}],40:[function(e,t,n){const{WebGLKernelValue:r}=e("./index"),{Input:i}=e("../../../input");class s extends r{checkSize(e,t){if(!this.kernel.validate)return;const{maxTextureSize:n}=this.kernel.constructor.features;if(e>n||t>n)throw e>t?new Error(`Argument texture width of ${e} larger than maximum size of ${n} for your GPU`):e<t?new Error(`Argument texture height of ${t} larger than maximum size of ${n} for your GPU`):new Error(`Argument texture height and width of ${t} larger than maximum size of ${n} for your GPU`)}setup(){this.requestTexture(),this.setupTexture(),this.defineTexture()}requestTexture(){this.texture=this.onRequestTexture()}defineTexture(){const{context:e}=this;e.activeTexture(this.contextHandle),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST)}setupTexture(){this.contextHandle=this.onRequestContextHandle(),this.index=this.onRequestIndex(),this.dimensionsId=this.id+"Dim",this.sizeId=this.id+"Size"}getBitRatio(e){if(Array.isArray(e[0]))return this.getBitRatio(e[0]);if(e.constructor===i)return this.getBitRatio(e.value);switch(e.constructor){case Uint8ClampedArray:case Uint8Array:case Int8Array:return 1;case Uint16Array:case Int16Array:return 2;case Float32Array:case Int32Array:default:return 4}}destroy(){this.prevArg&&this.prevArg.delete(),this.context.deleteTexture(this.texture)}}t.exports={WebGLKernelArray:s}},{"../../../input":110,"./index":59}],41:[function(e,t,n){const{WebGLKernelValue:r}=e("./index");class i extends r{constructor(e,t){super(e,t),this.uploadValue=e}getSource(e){return"constants"===this.origin?`const vec2 ${this.id} = vec2(${e[0]},${e[1]});\n`:`uniform vec2 ${this.id};\n`}getStringValueHandler(){return"constants"===this.origin?"":`const uploadValue_${this.name} = ${this.varName};\n`}updateValue(e){"constants"!==this.origin&&this.kernel.setUniform2fv(this.id,this.uploadValue=e)}}t.exports={WebGLKernelValueArray2:i}},{"./index":59}],42:[function(e,t,n){const{WebGLKernelValue:r}=e("./index");class i extends r{constructor(e,t){super(e,t),this.uploadValue=e}getSource(e){return"constants"===this.origin?`const vec3 ${this.id} = vec3(${e[0]},${e[1]},${e[2]});\n`:`uniform vec3 ${this.id};\n`}getStringValueHandler(){return"constants"===this.origin?"":`const uploadValue_${this.name} = ${this.varName};\n`}updateValue(e){"constants"!==this.origin&&this.kernel.setUniform3fv(this.id,this.uploadValue=e)}}t.exports={WebGLKernelValueArray3:i}},{"./index":59}],43:[function(e,t,n){const{WebGLKernelValue:r}=e("./index");class i extends r{constructor(e,t){super(e,t),this.uploadValue=e}getSource(e){return"constants"===this.origin?`const vec4 ${this.id} = vec4(${e[0]},${e[1]},${e[2]},${e[3]});\n`:`uniform vec4 ${this.id};\n`}getStringValueHandler(){return"constants"===this.origin?"":`const uploadValue_${this.name} = ${this.varName};\n`}updateValue(e){"constants"!==this.origin&&this.kernel.setUniform4fv(this.id,this.uploadValue=e)}}t.exports={WebGLKernelValueArray4:i}},{"./index":59}],44:[function(e,t,n){e("../../../utils");const{WebGLKernelValue:r}=e("./index");class i extends r{constructor(e,t){super(e,t),this.uploadValue=e}getSource(e){return"constants"===this.origin?`const bool ${this.id} = ${e};\n`:`uniform bool ${this.id};\n`}getStringValueHandler(){return`const uploadValue_${this.name} = ${this.varName};\n`}updateValue(e){"constants"!==this.origin&&this.kernel.setUniform1i(this.id,this.uploadValue=e)}}t.exports={WebGLKernelValueBoolean:i}},{"../../../utils":114,"./index":59}],45:[function(e,t,n){const{utils:r}=e("../../../utils"),{WebGLKernelValueHTMLImage:i}=e("./html-image");class s extends i{getSource(){return r.linesToString([`uniform sampler2D ${this.id}`,`uniform ivec2 ${this.sizeId}`,`uniform ivec3 ${this.dimensionsId}`])}updateValue(e){const{width:t,height:n}=e;this.checkSize(t,n),this.dimensions=[t,n,1],this.textureSize=[t,n],this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),super.updateValue(e)}}t.exports={WebGLKernelValueDynamicHTMLImage:s}},{"../../../utils":114,"./html-image":57}],46:[function(e,t,n){const{WebGLKernelValueDynamicHTMLImage:r}=e("./dynamic-html-image");class i extends r{}t.exports={WebGLKernelValueDynamicHTMLVideo:i}},{"./dynamic-html-image":45}],47:[function(e,t,n){const{utils:r}=e("../../../utils"),{WebGLKernelValueMemoryOptimizedNumberTexture:i}=e("./memory-optimized-number-texture");class s extends i{getSource(){return r.linesToString([`uniform sampler2D ${this.id}`,`uniform ivec2 ${this.sizeId}`,`uniform ivec3 ${this.dimensionsId}`])}updateValue(e){this.dimensions=e.dimensions,this.checkSize(e.size[0],e.size[1]),this.textureSize=e.size,this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),super.updateValue(e)}}t.exports={WebGLKernelValueDynamicMemoryOptimizedNumberTexture:s}},{"../../../utils":114,"./memory-optimized-number-texture":61}],48:[function(e,t,n){const{utils:r}=e("../../../utils"),{WebGLKernelValueNumberTexture:i}=e("./number-texture");class s extends i{getSource(){return r.linesToString([`uniform sampler2D ${this.id}`,`uniform ivec2 ${this.sizeId}`,`uniform ivec3 ${this.dimensionsId}`])}updateValue(e){this.dimensions=e.dimensions,this.checkSize(e.size[0],e.size[1]),this.textureSize=e.size,this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),super.updateValue(e)}}t.exports={WebGLKernelValueDynamicNumberTexture:s}},{"../../../utils":114,"./number-texture":62}],49:[function(e,t,n){const{utils:r}=e("../../../utils"),{WebGLKernelValueSingleArray:i}=e("./single-array");class s extends i{getSource(){return r.linesToString([`uniform sampler2D ${this.id}`,`uniform ivec2 ${this.sizeId}`,`uniform ivec3 ${this.dimensionsId}`])}updateValue(e){this.dimensions=r.getDimensions(e,!0),this.textureSize=r.getMemoryOptimizedFloatTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*this.bitRatio,this.checkSize(this.textureSize[0],this.textureSize[1]),this.uploadValue=new Float32Array(this.uploadArrayLength),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),super.updateValue(e)}}t.exports={WebGLKernelValueDynamicSingleArray:s}},{"../../../utils":114,"./single-array":63}],50:[function(e,t,n){const{utils:r}=e("../../../utils"),{WebGLKernelValueSingleArray1DI:i}=e("./single-array1d-i");class s extends i{getSource(){return r.linesToString([`uniform sampler2D ${this.id}`,`uniform ivec2 ${this.sizeId}`,`uniform ivec3 ${this.dimensionsId}`])}updateValue(e){this.setShape(e),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),super.updateValue(e)}}t.exports={WebGLKernelValueDynamicSingleArray1DI:s}},{"../../../utils":114,"./single-array1d-i":64}],51:[function(e,t,n){const{utils:r}=e("../../../utils"),{WebGLKernelValueSingleArray2DI:i}=e("./single-array2d-i");class s extends i{getSource(){return r.linesToString([`uniform sampler2D ${this.id}`,`uniform ivec2 ${this.sizeId}`,`uniform ivec3 ${this.dimensionsId}`])}updateValue(e){this.setShape(e),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),super.updateValue(e)}}t.exports={WebGLKernelValueDynamicSingleArray2DI:s}},{"../../../utils":114,"./single-array2d-i":65}],52:[function(e,t,n){const{utils:r}=e("../../../utils"),{WebGLKernelValueSingleArray3DI:i}=e("./single-array3d-i");class s extends i{getSource(){return r.linesToString([`uniform sampler2D ${this.id}`,`uniform ivec2 ${this.sizeId}`,`uniform ivec3 ${this.dimensionsId}`])}updateValue(e){this.setShape(e),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),super.updateValue(e)}}t.exports={WebGLKernelValueDynamicSingleArray3DI:s}},{"../../../utils":114,"./single-array3d-i":66}],53:[function(e,t,n){const{utils:r}=e("../../../utils"),{WebGLKernelValueSingleInput:i}=e("./single-input");class s extends i{getSource(){return r.linesToString([`uniform sampler2D ${this.id}`,`uniform ivec2 ${this.sizeId}`,`uniform ivec3 ${this.dimensionsId}`])}updateValue(e){let[t,n,i]=e.size;this.dimensions=new Int32Array([t||1,n||1,i||1]),this.textureSize=r.getMemoryOptimizedFloatTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*this.bitRatio,this.checkSize(this.textureSize[0],this.textureSize[1]),this.uploadValue=new Float32Array(this.uploadArrayLength),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),super.updateValue(e)}}t.exports={WebGLKernelValueDynamicSingleInput:s}},{"../../../utils":114,"./single-input":67}],54:[function(e,t,n){const{utils:r}=e("../../../utils"),{WebGLKernelValueUnsignedArray:i}=e("./unsigned-array");class s extends i{getSource(){return r.linesToString([`uniform sampler2D ${this.id}`,`uniform ivec2 ${this.sizeId}`,`uniform ivec3 ${this.dimensionsId}`])}updateValue(e){this.dimensions=r.getDimensions(e,!0),this.textureSize=r.getMemoryOptimizedPackedTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*(4/this.bitRatio),this.checkSize(this.textureSize[0],this.textureSize[1]);const t=this.getTransferArrayType(e);this.preUploadValue=new t(this.uploadArrayLength),this.uploadValue=new Uint8Array(this.preUploadValue.buffer),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),super.updateValue(e)}}t.exports={WebGLKernelValueDynamicUnsignedArray:s}},{"../../../utils":114,"./unsigned-array":68}],55:[function(e,t,n){const{utils:r}=e("../../../utils"),{WebGLKernelValueUnsignedInput:i}=e("./unsigned-input");class s extends i{getSource(){return r.linesToString([`uniform sampler2D ${this.id}`,`uniform ivec2 ${this.sizeId}`,`uniform ivec3 ${this.dimensionsId}`])}updateValue(e){let[t,n,i]=e.size;this.dimensions=new Int32Array([t||1,n||1,i||1]),this.textureSize=r.getMemoryOptimizedPackedTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*(4/this.bitRatio),this.checkSize(this.textureSize[0],this.textureSize[1]);const s=this.getTransferArrayType(e.value);this.preUploadValue=new s(this.uploadArrayLength),this.uploadValue=new Uint8Array(this.preUploadValue.buffer),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),super.updateValue(e)}}t.exports={WebGLKernelValueDynamicUnsignedInput:s}},{"../../../utils":114,"./unsigned-input":69}],56:[function(e,t,n){e("../../../utils");const{WebGLKernelValue:r}=e("./index");class i extends r{constructor(e,t){super(e,t),this.uploadValue=e}getStringValueHandler(){return`const uploadValue_${this.name} = ${this.varName};\n`}getSource(e){return"constants"===this.origin?Number.isInteger(e)?`const float ${this.id} = ${e}.0;\n`:`const float ${this.id} = ${e};\n`:`uniform float ${this.id};\n`}updateValue(e){"constants"!==this.origin&&this.kernel.setUniform1f(this.id,this.uploadValue=e)}}t.exports={WebGLKernelValueFloat:i}},{"../../../utils":114,"./index":59}],57:[function(e,t,n){const{utils:r}=e("../../../utils"),{WebGLKernelArray:i}=e("./array");class s extends i{constructor(e,t){super(e,t);const{width:n,height:r}=e;this.checkSize(n,r),this.dimensions=[n,r,1],this.textureSize=[n,r],this.uploadValue=e}getStringValueHandler(){return`const uploadValue_${this.name} = ${this.varName};\n`}getSource(){return r.linesToString([`uniform sampler2D ${this.id}`,`ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,`ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`])}updateValue(e){if(e.constructor!==this.initialValueConstructor)return void this.onUpdateValueMismatch(e.constructor);const{context:t}=this;t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D,this.texture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!0),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this.uploadValue=e),this.kernel.setUniform1i(this.id,this.index)}}t.exports={WebGLKernelValueHTMLImage:s}},{"../../../utils":114,"./array":40}],58:[function(e,t,n){const{WebGLKernelValueHTMLImage:r}=e("./html-image");class i extends r{}t.exports={WebGLKernelValueHTMLVideo:i}},{"./html-image":57}],59:[function(e,t,n){const{utils:r}=e("../../../utils"),{KernelValue:i}=e("../../kernel-value");class s extends i{constructor(e,t){super(e,t),this.dimensionsId=null,this.sizeId=null,this.initialValueConstructor=e.constructor,this.onRequestTexture=t.onRequestTexture,this.onRequestIndex=t.onRequestIndex,this.uploadValue=null,this.textureSize=null,this.bitRatio=null,this.prevArg=null}get id(){return`${this.origin}_${r.sanitizeName(this.name)}`}setup(){}getTransferArrayType(e){if(Array.isArray(e[0]))return this.getTransferArrayType(e[0]);switch(e.constructor){case Array:case Int32Array:case Int16Array:case Int8Array:return Float32Array;case Uint8ClampedArray:case Uint8Array:case Uint16Array:case Uint32Array:case Float32Array:case Float64Array:return e.constructor}return console.warn("Unfamiliar constructor type.  Will go ahead and use, but likley this may result in a transfer of zeros"),e.constructor}getStringValueHandler(){throw new Error(`"getStringValueHandler" not implemented on ${this.constructor.name}`)}getVariablePrecisionString(){return this.kernel.getVariablePrecisionString(this.textureSize||void 0,this.tactic||void 0)}destroy(){}}t.exports={WebGLKernelValue:s}},{"../../../utils":114,"../../kernel-value":35}],60:[function(e,t,n){e("../../../utils");const{WebGLKernelValue:r}=e("./index");class i extends r{constructor(e,t){super(e,t),this.uploadValue=e}getStringValueHandler(){return`const uploadValue_${this.name} = ${this.varName};\n`}getSource(e){return"constants"===this.origin?`const int ${this.id} = ${parseInt(e)};\n`:`uniform int ${this.id};\n`}updateValue(e){"constants"!==this.origin&&this.kernel.setUniform1i(this.id,this.uploadValue=e)}}t.exports={WebGLKernelValueInteger:i}},{"../../../utils":114,"./index":59}],61:[function(e,t,n){const{utils:r}=e("../../../utils"),{WebGLKernelArray:i}=e("./array"),s="Source and destination textures are the same.  Use immutable = true and manually cleanup kernel output texture memory with texture.delete()";class a extends i{constructor(e,t){super(e,t);const[n,r]=e.size;this.checkSize(n,r),this.dimensions=e.dimensions,this.textureSize=e.size,this.uploadValue=e.texture,this.forceUploadEachRun=!0}setup(){this.setupTexture()}getStringValueHandler(){return`const uploadValue_${this.name} = ${this.varName}.texture;\n`}getSource(){return r.linesToString([`uniform sampler2D ${this.id}`,`ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,`ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`])}updateValue(e){if(e.constructor!==this.initialValueConstructor)return void this.onUpdateValueMismatch(e.constructor);if(this.checkContext&&e.context!==this.context)throw new Error(`Value ${this.name} (${this.type}) must be from same context`);const{kernel:t,context:n}=this;if(t.pipeline)if(t.immutable)t.updateTextureArgumentRefs(this,e);else{if(t.texture&&t.texture.texture===e.texture)throw new Error(s);if(t.mappedTextures){const{mappedTextures:n}=t;for(let t=0;t<n.length;t++)if(n[t].texture===e.texture)throw new Error(s)}}n.activeTexture(this.contextHandle),n.bindTexture(n.TEXTURE_2D,this.uploadValue=e.texture),this.kernel.setUniform1i(this.id,this.index)}}t.exports={WebGLKernelValueMemoryOptimizedNumberTexture:a,sameError:s}},{"../../../utils":114,"./array":40}],62:[function(e,t,n){const{utils:r}=e("../../../utils"),{WebGLKernelArray:i}=e("./array"),{sameError:s}=e("./memory-optimized-number-texture");class a extends i{constructor(e,t){super(e,t);const[n,r]=e.size;this.checkSize(n,r);const{size:i,dimensions:s}=e;this.bitRatio=this.getBitRatio(e),this.dimensions=s,this.textureSize=i,this.uploadValue=e.texture,this.forceUploadEachRun=!0}setup(){this.setupTexture()}getStringValueHandler(){return`const uploadValue_${this.name} = ${this.varName}.texture;\n`}getSource(){return r.linesToString([`uniform sampler2D ${this.id}`,`ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,`ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`])}updateValue(e){if(e.constructor!==this.initialValueConstructor)return void this.onUpdateValueMismatch(e.constructor);if(this.checkContext&&e.context!==this.context)throw new Error(`Value ${this.name} (${this.type}) must be from same context`);const{kernel:t,context:n}=this;if(t.pipeline)if(t.immutable)t.updateTextureArgumentRefs(this,e);else{if(t.texture&&t.texture.texture===e.texture)throw new Error(s);if(t.mappedTextures){const{mappedTextures:n}=t;for(let t=0;t<n.length;t++)if(n[t].texture===e.texture)throw new Error(s)}}n.activeTexture(this.contextHandle),n.bindTexture(n.TEXTURE_2D,this.uploadValue=e.texture),this.kernel.setUniform1i(this.id,this.index)}}t.exports={WebGLKernelValueNumberTexture:a}},{"../../../utils":114,"./array":40,"./memory-optimized-number-texture":61}],63:[function(e,t,n){const{utils:r}=e("../../../utils"),{WebGLKernelArray:i}=e("./array");class s extends i{constructor(e,t){super(e,t),this.bitRatio=4,this.dimensions=r.getDimensions(e,!0),this.textureSize=r.getMemoryOptimizedFloatTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*this.bitRatio,this.checkSize(this.textureSize[0],this.textureSize[1]),this.uploadValue=new Float32Array(this.uploadArrayLength)}getStringValueHandler(){return r.linesToString([`const uploadValue_${this.name} = new Float32Array(${this.uploadArrayLength})`,`flattenTo(${this.varName}, uploadValue_${this.name})`])}getSource(){return r.linesToString([`uniform sampler2D ${this.id}`,`ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,`ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`])}updateValue(e){if(e.constructor!==this.initialValueConstructor)return void this.onUpdateValueMismatch(e.constructor);const{context:t}=this;r.flattenTo(e,this.uploadValue),t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D,this.texture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.textureSize[0],this.textureSize[1],0,t.RGBA,t.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}}t.exports={WebGLKernelValueSingleArray:s}},{"../../../utils":114,"./array":40}],64:[function(e,t,n){const{utils:r}=e("../../../utils"),{WebGLKernelArray:i}=e("./array");class s extends i{constructor(e,t){super(e,t),this.bitRatio=4,this.setShape(e)}setShape(e){const t=r.getDimensions(e,!0);this.textureSize=r.getMemoryOptimizedFloatTextureSize(t,this.bitRatio),this.dimensions=new Int32Array([t[1],1,1]),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*this.bitRatio,this.checkSize(this.textureSize[0],this.textureSize[1]),this.uploadValue=new Float32Array(this.uploadArrayLength)}getStringValueHandler(){return r.linesToString([`const uploadValue_${this.name} = new Float32Array(${this.uploadArrayLength})`,`flattenTo(${this.varName}, uploadValue_${this.name})`])}getSource(){return r.linesToString([`uniform sampler2D ${this.id}`,`ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,`ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`])}updateValue(e){if(e.constructor!==this.initialValueConstructor)return void this.onUpdateValueMismatch(e.constructor);const{context:t}=this;r.flatten2dArrayTo(e,this.uploadValue),t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D,this.texture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.textureSize[0],this.textureSize[1],0,t.RGBA,t.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}}t.exports={WebGLKernelValueSingleArray1DI:s}},{"../../../utils":114,"./array":40}],65:[function(e,t,n){const{utils:r}=e("../../../utils"),{WebGLKernelArray:i}=e("./array");class s extends i{constructor(e,t){super(e,t),this.bitRatio=4,this.setShape(e)}setShape(e){const t=r.getDimensions(e,!0);this.textureSize=r.getMemoryOptimizedFloatTextureSize(t,this.bitRatio),this.dimensions=new Int32Array([t[1],t[2],1]),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*this.bitRatio,this.checkSize(this.textureSize[0],this.textureSize[1]),this.uploadValue=new Float32Array(this.uploadArrayLength)}getStringValueHandler(){return r.linesToString([`const uploadValue_${this.name} = new Float32Array(${this.uploadArrayLength})`,`flattenTo(${this.varName}, uploadValue_${this.name})`])}getSource(){return r.linesToString([`uniform sampler2D ${this.id}`,`ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,`ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`])}updateValue(e){if(e.constructor!==this.initialValueConstructor)return void this.onUpdateValueMismatch(e.constructor);const{context:t}=this;r.flatten3dArrayTo(e,this.uploadValue),t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D,this.texture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.textureSize[0],this.textureSize[1],0,t.RGBA,t.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}}t.exports={WebGLKernelValueSingleArray2DI:s}},{"../../../utils":114,"./array":40}],66:[function(e,t,n){const{utils:r}=e("../../../utils"),{WebGLKernelArray:i}=e("./array");class s extends i{constructor(e,t){super(e,t),this.bitRatio=4,this.setShape(e)}setShape(e){const t=r.getDimensions(e,!0);this.textureSize=r.getMemoryOptimizedFloatTextureSize(t,this.bitRatio),this.dimensions=new Int32Array([t[1],t[2],t[3]]),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*this.bitRatio,this.checkSize(this.textureSize[0],this.textureSize[1]),this.uploadValue=new Float32Array(this.uploadArrayLength)}getStringValueHandler(){return r.linesToString([`const uploadValue_${this.name} = new Float32Array(${this.uploadArrayLength})`,`flattenTo(${this.varName}, uploadValue_${this.name})`])}getSource(){return r.linesToString([`uniform sampler2D ${this.id}`,`ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,`ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`])}updateValue(e){if(e.constructor!==this.initialValueConstructor)return void this.onUpdateValueMismatch(e.constructor);const{context:t}=this;r.flatten4dArrayTo(e,this.uploadValue),t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D,this.texture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.textureSize[0],this.textureSize[1],0,t.RGBA,t.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}}t.exports={WebGLKernelValueSingleArray3DI:s}},{"../../../utils":114,"./array":40}],67:[function(e,t,n){const{utils:r}=e("../../../utils"),{WebGLKernelArray:i}=e("./array");class s extends i{constructor(e,t){super(e,t),this.bitRatio=4;let[n,i,s]=e.size;this.dimensions=new Int32Array([n||1,i||1,s||1]),this.textureSize=r.getMemoryOptimizedFloatTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*this.bitRatio,this.checkSize(this.textureSize[0],this.textureSize[1]),this.uploadValue=new Float32Array(this.uploadArrayLength)}getStringValueHandler(){return r.linesToString([`const uploadValue_${this.name} = new Float32Array(${this.uploadArrayLength})`,`flattenTo(${this.varName}.value, uploadValue_${this.name})`])}getSource(){return r.linesToString([`uniform sampler2D ${this.id}`,`ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,`ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`])}updateValue(e){if(e.constructor!==this.initialValueConstructor)return void this.onUpdateValueMismatch(e.constructor);const{context:t}=this;r.flattenTo(e.value,this.uploadValue),t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D,this.texture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.textureSize[0],this.textureSize[1],0,t.RGBA,t.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}}t.exports={WebGLKernelValueSingleInput:s}},{"../../../utils":114,"./array":40}],68:[function(e,t,n){const{utils:r}=e("../../../utils"),{WebGLKernelArray:i}=e("./array");class s extends i{constructor(e,t){super(e,t),this.bitRatio=this.getBitRatio(e),this.dimensions=r.getDimensions(e,!0),this.textureSize=r.getMemoryOptimizedPackedTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*(4/this.bitRatio),this.checkSize(this.textureSize[0],this.textureSize[1]),this.TranserArrayType=this.getTransferArrayType(e),this.preUploadValue=new this.TranserArrayType(this.uploadArrayLength),this.uploadValue=new Uint8Array(this.preUploadValue.buffer)}getStringValueHandler(){return r.linesToString([`const preUploadValue_${this.name} = new ${this.TranserArrayType.name}(${this.uploadArrayLength})`,`const uploadValue_${this.name} = new Uint8Array(preUploadValue_${this.name}.buffer)`,`flattenTo(${this.varName}, preUploadValue_${this.name})`])}getSource(){return r.linesToString([`uniform sampler2D ${this.id}`,`ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,`ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`])}updateValue(e){if(e.constructor!==this.initialValueConstructor)return void this.onUpdateValueMismatch(e.constructor);const{context:t}=this;r.flattenTo(e,this.preUploadValue),t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D,this.texture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.textureSize[0],this.textureSize[1],0,t.RGBA,t.UNSIGNED_BYTE,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}}t.exports={WebGLKernelValueUnsignedArray:s}},{"../../../utils":114,"./array":40}],69:[function(e,t,n){const{utils:r}=e("../../../utils"),{WebGLKernelArray:i}=e("./array");class s extends i{constructor(e,t){super(e,t),this.bitRatio=this.getBitRatio(e);const[n,i,s]=e.size;this.dimensions=new Int32Array([n||1,i||1,s||1]),this.textureSize=r.getMemoryOptimizedPackedTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*(4/this.bitRatio),this.checkSize(this.textureSize[0],this.textureSize[1]),this.TranserArrayType=this.getTransferArrayType(e.value),this.preUploadValue=new this.TranserArrayType(this.uploadArrayLength),this.uploadValue=new Uint8Array(this.preUploadValue.buffer)}getStringValueHandler(){return r.linesToString([`const preUploadValue_${this.name} = new ${this.TranserArrayType.name}(${this.uploadArrayLength})`,`const uploadValue_${this.name} = new Uint8Array(preUploadValue_${this.name}.buffer)`,`flattenTo(${this.varName}.value, preUploadValue_${this.name})`])}getSource(){return r.linesToString([`uniform sampler2D ${this.id}`,`ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,`ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`])}updateValue(e){if(e.constructor!==this.initialValueConstructor)return void this.onUpdateValueMismatch(value.constructor);const{context:t}=this;r.flattenTo(e.value,this.preUploadValue),t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D,this.texture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.textureSize[0],this.textureSize[1],0,t.RGBA,t.UNSIGNED_BYTE,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}}t.exports={WebGLKernelValueUnsignedInput:s}},{"../../../utils":114,"./array":40}],70:[function(e,t,n){const{GLKernel:r}=e("../gl/kernel"),{FunctionBuilder:i}=e("../function-builder"),{WebGLFunctionNode:s}=e("./function-node"),{utils:a}=e("../../utils"),o=e("../../plugins/math-random-uniformly-distributed"),{fragmentShader:l}=e("./fragment-shader"),{vertexShader:u}=e("./vertex-shader"),{glKernelString:c}=e("../gl/kernel-string"),{lookupKernelValueType:h}=e("./kernel-value-maps");let p=null,d=null,f=null,m=null,g=null;const y=[o],b=[],x={};class v extends r{static get isSupported(){return null!==p||(this.setupFeatureChecks(),p=this.isContextMatch(f)),p}static setupFeatureChecks(){"undefined"!==typeof document?d=document.createElement("canvas"):"undefined"!==typeof OffscreenCanvas&&(d=new OffscreenCanvas(0,0)),d&&(f=d.getContext("webgl")||d.getContext("experimental-webgl"),f&&f.getExtension&&(m={OES_texture_float:f.getExtension("OES_texture_float"),OES_texture_float_linear:f.getExtension("OES_texture_float_linear"),OES_element_index_uint:f.getExtension("OES_element_index_uint"),WEBGL_draw_buffers:f.getExtension("WEBGL_draw_buffers")},g=this.getFeatures()))}static isContextMatch(e){return"undefined"!==typeof WebGLRenderingContext&&e instanceof WebGLRenderingContext}static getIsTextureFloat(){return Boolean(m.OES_texture_float)}static getIsDrawBuffers(){return Boolean(m.WEBGL_draw_buffers)}static getChannelCount(){return m.WEBGL_draw_buffers?f.getParameter(m.WEBGL_draw_buffers.MAX_DRAW_BUFFERS_WEBGL):1}static getMaxTextureSize(){return f.getParameter(f.MAX_TEXTURE_SIZE)}static lookupKernelValueType(e,t,n,r){return h(e,t,n,r)}static get testCanvas(){return d}static get testContext(){return f}static get features(){return g}static get fragmentShader(){return l}static get vertexShader(){return u}constructor(e,t){super(e,t),this.program=null,this.pipeline=t.pipeline,this.endianness=a.systemEndianness(),this.extensions={},this.argumentTextureCount=0,this.constantTextureCount=0,this.fragShader=null,this.vertShader=null,this.drawBuffersMap=null,this.maxTexSize=null,this.onRequestSwitchKernel=null,this.texture=null,this.mappedTextures=null,this.mergeSettings(e.settings||t),this.threadDim=null,this.framebuffer=null,this.buffer=null,this.textureCache=[],this.programUniformLocationCache={},this.uniform1fCache={},this.uniform1iCache={},this.uniform2fCache={},this.uniform2fvCache={},this.uniform2ivCache={},this.uniform3fvCache={},this.uniform3ivCache={},this.uniform4fvCache={},this.uniform4ivCache={}}initCanvas(){if("undefined"!==typeof document){const e=document.createElement("canvas");return e.width=2,e.height=2,e}if("undefined"!==typeof OffscreenCanvas)return new OffscreenCanvas(0,0)}initContext(){const e={alpha:!1,depth:!1,antialias:!1};return this.canvas.getContext("webgl",e)||this.canvas.getContext("experimental-webgl",e)}initPlugins(e){const t=[],{source:n}=this;if("string"===typeof n)for(let r=0;r<y.length;r++){const e=y[r];n.match(e.functionMatch)&&t.push(e)}else if("object"===typeof n&&e.pluginNames)for(let r=0;r<y.length;r++){const n=y[r];e.pluginNames.some((e=>e===n.name))&&t.push(n)}return t}initExtensions(){this.extensions={OES_texture_float:this.context.getExtension("OES_texture_float"),OES_texture_float_linear:this.context.getExtension("OES_texture_float_linear"),OES_element_index_uint:this.context.getExtension("OES_element_index_uint"),WEBGL_draw_buffers:this.context.getExtension("WEBGL_draw_buffers"),WEBGL_color_buffer_float:this.context.getExtension("WEBGL_color_buffer_float")}}validateSettings(e){if(!this.validate)return void(this.texSize=a.getKernelTextureSize({optimizeFloatMemory:this.optimizeFloatMemory,precision:this.precision},this.output));const{features:t}=this.constructor;if(!0===this.optimizeFloatMemory&&!t.isTextureFloat)throw new Error("Float textures are not supported");if("single"===this.precision&&!t.isFloatRead)throw new Error("Single precision not supported");if(!this.graphical&&null===this.precision&&t.isTextureFloat&&(this.precision=t.isFloatRead?"single":"unsigned"),this.subKernels&&this.subKernels.length>0&&!this.extensions.WEBGL_draw_buffers)throw new Error("could not instantiate draw buffers extension");if(null===this.fixIntegerDivisionAccuracy?this.fixIntegerDivisionAccuracy=!t.isIntegerDivisionAccurate:this.fixIntegerDivisionAccuracy&&t.isIntegerDivisionAccurate&&(this.fixIntegerDivisionAccuracy=!1),this.checkOutput(),!this.output||0===this.output.length){if(1!==e.length)throw new Error("Auto output only supported for kernels with only one input");const t=a.getVariableType(e[0],this.strictIntegers);switch(t){case"Array":this.output=a.getDimensions(t);break;case"NumberTexture":case"MemoryOptimizedNumberTexture":case"ArrayTexture(1)":case"ArrayTexture(2)":case"ArrayTexture(3)":case"ArrayTexture(4)":this.output=e[0].output;break;default:throw new Error("Auto output not supported for input type: "+t)}}if(this.graphical){if(2!==this.output.length)throw new Error("Output must have 2 dimensions on graphical mode");return"precision"===this.precision&&(this.precision="unsigned",console.warn("Cannot use graphical mode and single precision at the same time")),void(this.texSize=a.clone(this.output))}null===this.precision&&t.isTextureFloat&&(this.precision="single"),this.texSize=a.getKernelTextureSize({optimizeFloatMemory:this.optimizeFloatMemory,precision:this.precision},this.output),this.checkTextureSize()}updateMaxTexSize(){const{texSize:e,canvas:t}=this;if(null===this.maxTexSize){let n=b.indexOf(t);-1===n&&(n=b.length,b.push(t),x[n]=[e[0],e[1]]),this.maxTexSize=x[n]}this.maxTexSize[0]<e[0]&&(this.maxTexSize[0]=e[0]),this.maxTexSize[1]<e[1]&&(this.maxTexSize[1]=e[1])}setupArguments(e){this.kernelArguments=[],this.argumentTextureCount=0;const t=null===this.argumentTypes;if(t&&(this.argumentTypes=[]),this.argumentSizes=[],this.argumentBitRatios=[],e.length<this.argumentNames.length)throw new Error("not enough arguments for kernel");if(e.length>this.argumentNames.length)throw new Error("too many arguments for kernel");const{context:n}=this;let r=0;const i=()=>this.createTexture(),s=()=>this.constantTextureCount+r++,o=e=>{this.switchKernels({type:"argumentMismatch",needed:e})},l=()=>n.TEXTURE0+this.constantTextureCount+this.argumentTextureCount++;for(let u=0;u<e.length;u++){const r=e[u],c=this.argumentNames[u];let h;t?(h=a.getVariableType(r,this.strictIntegers),this.argumentTypes.push(h)):h=this.argumentTypes[u];const p=this.constructor.lookupKernelValueType(h,this.dynamicArguments?"dynamic":"static",this.precision,e[u]);if(null===p)return this.requestFallback(e);const d=new p(r,{name:c,type:h,tactic:this.tactic,origin:"user",context:n,checkContext:this.checkContext,kernel:this,strictIntegers:this.strictIntegers,onRequestTexture:i,onRequestIndex:s,onUpdateValueMismatch:o,onRequestContextHandle:l});this.kernelArguments.push(d),d.setup(),this.argumentSizes.push(d.textureSize),this.argumentBitRatios[u]=d.bitRatio}}createTexture(){const e=this.context.createTexture();return this.textureCache.push(e),e}setupConstants(e){const{context:t}=this;this.kernelConstants=[],this.forceUploadKernelConstants=[];let n=null===this.constantTypes;n&&(this.constantTypes={}),this.constantBitRatios={};let r=0;for(const i in this.constants){const s=this.constants[i];let o;n?(o=a.getVariableType(s,this.strictIntegers),this.constantTypes[i]=o):o=this.constantTypes[i];const l=this.constructor.lookupKernelValueType(o,"static",this.precision,s);if(null===l)return this.requestFallback(e);const u=new l(s,{name:i,type:o,tactic:this.tactic,origin:"constants",context:this.context,checkContext:this.checkContext,kernel:this,strictIntegers:this.strictIntegers,onRequestTexture:()=>this.createTexture(),onRequestIndex:()=>r++,onRequestContextHandle:()=>t.TEXTURE0+this.constantTextureCount++});this.constantBitRatios[i]=u.bitRatio,this.kernelConstants.push(u),u.setup(),u.forceUploadEachRun&&this.forceUploadKernelConstants.push(u)}}build(){if(this.built)return;if(this.initExtensions(),this.validateSettings(arguments),this.setupConstants(arguments),this.fallbackRequested)return;if(this.setupArguments(arguments),this.fallbackRequested)return;this.updateMaxTexSize(),this.translateSource();const e=this.pickRenderStrategy(arguments);if(e)return e;const{texSize:t,context:n,canvas:r}=this;n.enable(n.SCISSOR_TEST),this.pipeline&&this.precision,n.viewport(0,0,this.maxTexSize[0],this.maxTexSize[1]),r.width=this.maxTexSize[0],r.height=this.maxTexSize[1];const i=this.threadDim=Array.from(this.output);for(;i.length<3;)i.push(1);const s=this.getVertexShader(arguments),a=n.createShader(n.VERTEX_SHADER);n.shaderSource(a,s),n.compileShader(a),this.vertShader=a;const o=this.getFragmentShader(arguments),l=n.createShader(n.FRAGMENT_SHADER);if(n.shaderSource(l,o),n.compileShader(l),this.fragShader=l,this.debug&&(console.log("GLSL Shader Output:"),console.log(o)),!n.getShaderParameter(a,n.COMPILE_STATUS))throw new Error("Error compiling vertex shader: "+n.getShaderInfoLog(a));if(!n.getShaderParameter(l,n.COMPILE_STATUS))throw new Error("Error compiling fragment shader: "+n.getShaderInfoLog(l));const u=this.program=n.createProgram();n.attachShader(u,a),n.attachShader(u,l),n.linkProgram(u),this.framebuffer=n.createFramebuffer(),this.framebuffer.width=t[0],this.framebuffer.height=t[1],this.rawValueFramebuffers={};const c=new Float32Array([-1,-1,1,-1,-1,1,1,1]),h=new Float32Array([0,0,1,0,0,1,1,1]),p=c.byteLength;let d=this.buffer;d?n.bindBuffer(n.ARRAY_BUFFER,d):(d=this.buffer=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,d),n.bufferData(n.ARRAY_BUFFER,c.byteLength+h.byteLength,n.STATIC_DRAW)),n.bufferSubData(n.ARRAY_BUFFER,0,c),n.bufferSubData(n.ARRAY_BUFFER,p,h);const f=n.getAttribLocation(this.program,"aPos");n.enableVertexAttribArray(f),n.vertexAttribPointer(f,2,n.FLOAT,!1,0,0);const m=n.getAttribLocation(this.program,"aTexCoord");n.enableVertexAttribArray(m),n.vertexAttribPointer(m,2,n.FLOAT,!1,0,p),n.bindFramebuffer(n.FRAMEBUFFER,this.framebuffer);let g=0;n.useProgram(this.program);for(let y in this.constants)this.kernelConstants[g++].updateValue(this.constants[y]);this._setupOutputTexture(),null!==this.subKernels&&this.subKernels.length>0&&(this._mappedTextureSwitched={},this._setupSubOutputTextures()),this.buildSignature(arguments),this.built=!0}translateSource(){const e=i.fromKernel(this,s,{fixIntegerDivisionAccuracy:this.fixIntegerDivisionAccuracy});this.translatedSource=e.getPrototypeString("kernel"),this.setupReturnTypes(e)}setupReturnTypes(e){if(this.graphical||this.returnType||(this.returnType=e.getKernelResultType()),this.subKernels&&this.subKernels.length>0)for(let t=0;t<this.subKernels.length;t++){const n=this.subKernels[t];n.returnType||(n.returnType=e.getSubKernelResultType(t))}}run(){const{kernelArguments:e,texSize:t,forceUploadKernelConstants:n,context:r}=this;r.useProgram(this.program),r.scissor(0,0,t[0],t[1]),this.dynamicOutput&&(this.setUniform3iv("uOutputDim",new Int32Array(this.threadDim)),this.setUniform2iv("uTexSize",t)),this.setUniform2f("ratio",t[0]/this.maxTexSize[0],t[1]/this.maxTexSize[1]);for(let i=0;i<n.length;i++){const e=n[i];if(e.updateValue(this.constants[e.name]),this.switchingKernels)return}for(let i=0;i<e.length;i++)if(e[i].updateValue(arguments[i]),this.switchingKernels)return;if(this.plugins)for(let i=0;i<this.plugins.length;i++){const e=this.plugins[i];e.onBeforeRun&&e.onBeforeRun(this)}if(this.graphical)return this.pipeline?(r.bindRenderbuffer(r.RENDERBUFFER,null),r.bindFramebuffer(r.FRAMEBUFFER,this.framebuffer),this.immutable&&this._replaceOutputTexture(),r.drawArrays(r.TRIANGLE_STRIP,0,4),this.immutable?this.texture.clone():this.texture):(r.bindRenderbuffer(r.RENDERBUFFER,null),r.bindFramebuffer(r.FRAMEBUFFER,null),void r.drawArrays(r.TRIANGLE_STRIP,0,4));r.bindFramebuffer(r.FRAMEBUFFER,this.framebuffer),this.immutable&&this._replaceOutputTexture(),null!==this.subKernels&&(this.immutable&&this._replaceSubOutputTextures(),this.drawBuffers()),r.drawArrays(r.TRIANGLE_STRIP,0,4)}drawBuffers(){this.extensions.WEBGL_draw_buffers.drawBuffersWEBGL(this.drawBuffersMap)}getInternalFormat(){return this.context.RGBA}getTextureFormat(){const{context:e}=this;if(this.getInternalFormat()===e.RGBA)return e.RGBA;throw new Error("Unknown internal format")}_replaceOutputTexture(){if(this.texture.beforeMutate()||this._textureSwitched){const e=this.context;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture.texture,0),this._textureSwitched=!1}}_setupOutputTexture(){const e=this.context,t=this.texSize;if(this.texture)return void e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture.texture,0);const n=this.createTexture();e.activeTexture(e.TEXTURE0+this.constantTextureCount+this.argumentTextureCount),e.bindTexture(e.TEXTURE_2D,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST);const r=this.getInternalFormat();"single"===this.precision?e.texImage2D(e.TEXTURE_2D,0,r,t[0],t[1],0,e.RGBA,e.FLOAT,null):e.texImage2D(e.TEXTURE_2D,0,r,t[0],t[1],0,r,e.UNSIGNED_BYTE,null),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0),this.texture=new this.TextureConstructor({texture:n,size:t,dimensions:this.threadDim,output:this.output,context:this.context,internalFormat:this.getInternalFormat(),textureFormat:this.getTextureFormat(),kernel:this})}_replaceSubOutputTextures(){const e=this.context;for(let t=0;t<this.mappedTextures.length;t++){const n=this.mappedTextures[t];(n.beforeMutate()||this._mappedTextureSwitched[t])&&(e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t+1,e.TEXTURE_2D,n.texture,0),this._mappedTextureSwitched[t]=!1)}}_setupSubOutputTextures(){const e=this.context;if(this.mappedTextures){for(let t=0;t<this.subKernels.length;t++)e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t+1,e.TEXTURE_2D,this.mappedTextures[t].texture,0);return}const t=this.texSize;this.drawBuffersMap=[e.COLOR_ATTACHMENT0],this.mappedTextures=[];for(let n=0;n<this.subKernels.length;n++){const r=this.createTexture();this.drawBuffersMap.push(e.COLOR_ATTACHMENT0+n+1),e.activeTexture(e.TEXTURE0+this.constantTextureCount+this.argumentTextureCount+n),e.bindTexture(e.TEXTURE_2D,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),"single"===this.precision?e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t[0],t[1],0,e.RGBA,e.FLOAT,null):e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t[0],t[1],0,e.RGBA,e.UNSIGNED_BYTE,null),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+n+1,e.TEXTURE_2D,r,0),this.mappedTextures.push(new this.TextureConstructor({texture:r,size:t,dimensions:this.threadDim,output:this.output,context:this.context,internalFormat:this.getInternalFormat(),textureFormat:this.getTextureFormat(),kernel:this}))}}setUniform1f(e,t){if(this.uniform1fCache.hasOwnProperty(e)&&t===this.uniform1fCache[e])return;this.uniform1fCache[e]=t;const n=this.getUniformLocation(e);this.context.uniform1f(n,t)}setUniform1i(e,t){if(this.uniform1iCache.hasOwnProperty(e)&&t===this.uniform1iCache[e])return;this.uniform1iCache[e]=t;const n=this.getUniformLocation(e);this.context.uniform1i(n,t)}setUniform2f(e,t,n){if(this.uniform2fCache.hasOwnProperty(e)){const r=this.uniform2fCache[e];if(t===r[0]&&n===r[1])return}this.uniform2fCache[e]=[t,n];const r=this.getUniformLocation(e);this.context.uniform2f(r,t,n)}setUniform2fv(e,t){if(this.uniform2fvCache.hasOwnProperty(e)){const n=this.uniform2fvCache[e];if(t[0]===n[0]&&t[1]===n[1])return}this.uniform2fvCache[e]=t;const n=this.getUniformLocation(e);this.context.uniform2fv(n,t)}setUniform2iv(e,t){if(this.uniform2ivCache.hasOwnProperty(e)){const n=this.uniform2ivCache[e];if(t[0]===n[0]&&t[1]===n[1])return}this.uniform2ivCache[e]=t;const n=this.getUniformLocation(e);this.context.uniform2iv(n,t)}setUniform3fv(e,t){if(this.uniform3fvCache.hasOwnProperty(e)){const n=this.uniform3fvCache[e];if(t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2])return}this.uniform3fvCache[e]=t;const n=this.getUniformLocation(e);this.context.uniform3fv(n,t)}setUniform3iv(e,t){if(this.uniform3ivCache.hasOwnProperty(e)){const n=this.uniform3ivCache[e];if(t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2])return}this.uniform3ivCache[e]=t;const n=this.getUniformLocation(e);this.context.uniform3iv(n,t)}setUniform4fv(e,t){if(this.uniform4fvCache.hasOwnProperty(e)){const n=this.uniform4fvCache[e];if(t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3])return}this.uniform4fvCache[e]=t;const n=this.getUniformLocation(e);this.context.uniform4fv(n,t)}setUniform4iv(e,t){if(this.uniform4ivCache.hasOwnProperty(e)){const n=this.uniform4ivCache[e];if(t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3])return}this.uniform4ivCache[e]=t;const n=this.getUniformLocation(e);this.context.uniform4iv(n,t)}getUniformLocation(e){return this.programUniformLocationCache.hasOwnProperty(e)?this.programUniformLocationCache[e]:this.programUniformLocationCache[e]=this.context.getUniformLocation(this.program,e)}_getFragShaderArtifactMap(e){return{HEADER:this._getHeaderString(),LOOP_MAX:this._getLoopMaxString(),PLUGINS:this._getPluginsString(),CONSTANTS:this._getConstantsString(),DECODE32_ENDIANNESS:this._getDecode32EndiannessString(),ENCODE32_ENDIANNESS:this._getEncode32EndiannessString(),DIVIDE_WITH_INTEGER_CHECK:this._getDivideWithIntegerCheckString(),INJECTED_NATIVE:this._getInjectedNative(),MAIN_CONSTANTS:this._getMainConstantsString(),MAIN_ARGUMENTS:this._getMainArgumentsString(e),KERNEL:this.getKernelString(),MAIN_RESULT:this.getMainResultString(),FLOAT_TACTIC_DECLARATION:this.getFloatTacticDeclaration(),INT_TACTIC_DECLARATION:this.getIntTacticDeclaration(),SAMPLER_2D_TACTIC_DECLARATION:this.getSampler2DTacticDeclaration(),SAMPLER_2D_ARRAY_TACTIC_DECLARATION:this.getSampler2DArrayTacticDeclaration()}}_getVertShaderArtifactMap(e){return{FLOAT_TACTIC_DECLARATION:this.getFloatTacticDeclaration(),INT_TACTIC_DECLARATION:this.getIntTacticDeclaration(),SAMPLER_2D_TACTIC_DECLARATION:this.getSampler2DTacticDeclaration(),SAMPLER_2D_ARRAY_TACTIC_DECLARATION:this.getSampler2DArrayTacticDeclaration()}}_getHeaderString(){return null!==this.subKernels?"#extension GL_EXT_draw_buffers : require\n":""}_getLoopMaxString(){return this.loopMaxIterations?` ${parseInt(this.loopMaxIterations)};\n`:" 1000;\n"}_getPluginsString(){return this.plugins?this.plugins.map((e=>e.source&&this.source.match(e.functionMatch)?e.source:"")).join("\n"):"\n"}_getConstantsString(){const e=[],{threadDim:t,texSize:n}=this;return this.dynamicOutput?e.push("uniform ivec3 uOutputDim","uniform ivec2 uTexSize"):e.push(`ivec3 uOutputDim = ivec3(${t[0]}, ${t[1]}, ${t[2]})`,`ivec2 uTexSize = ivec2(${n[0]}, ${n[1]})`),a.linesToString(e)}_getTextureCoordinate(){const e=this.subKernels;return null===e||e.length<1?"varying vec2 vTexCoord;\n":"out vec2 vTexCoord;\n"}_getDecode32EndiannessString(){return"LE"===this.endianness?"":"  texel.rgba = texel.abgr;\n"}_getEncode32EndiannessString(){return"LE"===this.endianness?"":"  texel.rgba = texel.abgr;\n"}_getDivideWithIntegerCheckString(){return this.fixIntegerDivisionAccuracy?"float divWithIntCheck(float x, float y) {\n  if (floor(x) == x && floor(y) == y && integerMod(x, y) == 0.0) {\n    return float(int(x) / int(y));\n  }\n  return x / y;\n}\n\nfloat integerCorrectionModulo(float number, float divisor) {\n  if (number < 0.0) {\n    number = abs(number);\n    if (divisor < 0.0) {\n      divisor = abs(divisor);\n    }\n    return -(number - (divisor * floor(divWithIntCheck(number, divisor))));\n  }\n  if (divisor < 0.0) {\n    divisor = abs(divisor);\n  }\n  return number - (divisor * floor(divWithIntCheck(number, divisor)));\n}":""}_getMainArgumentsString(e){const t=[],{argumentNames:n}=this;for(let r=0;r<n.length;r++)t.push(this.kernelArguments[r].getSource(e[r]));return t.join("")}_getInjectedNative(){return this.injectedNative||""}_getMainConstantsString(){const e=[],{constants:t}=this;if(t){let n=0;for(const r in t)this.constants.hasOwnProperty(r)&&e.push(this.kernelConstants[n++].getSource(this.constants[r]))}return e.join("")}getRawValueFramebuffer(e,t){if(this.rawValueFramebuffers[e]||(this.rawValueFramebuffers[e]={}),!this.rawValueFramebuffers[e][t]){const n=this.context.createFramebuffer();n.width=e,n.height=t,this.rawValueFramebuffers[e][t]=n}return this.rawValueFramebuffers[e][t]}getKernelResultDeclaration(){switch(this.returnType){case"Array(2)":return"vec2 kernelResult";case"Array(3)":return"vec3 kernelResult";case"Array(4)":return"vec4 kernelResult";case"LiteralInteger":case"Float":case"Number":case"Integer":return"float kernelResult";default:if(this.graphical)return"float kernelResult";throw new Error(`unrecognized output type "${this.returnType}"`)}}getKernelString(){const e=[this.getKernelResultDeclaration()],{subKernels:t}=this;if(null!==t)switch(this.returnType){case"Number":case"Float":case"Integer":for(let n=0;n<t.length;n++){const r=t[n];e.push("Integer"===r.returnType?`int subKernelResult_${r.name} = 0`:`float subKernelResult_${r.name} = 0.0`)}break;case"Array(2)":for(let n=0;n<t.length;n++)e.push(`vec2 subKernelResult_${t[n].name}`);break;case"Array(3)":for(let n=0;n<t.length;n++)e.push(`vec3 subKernelResult_${t[n].name}`);break;case"Array(4)":for(let n=0;n<t.length;n++)e.push(`vec4 subKernelResult_${t[n].name}`)}return a.linesToString(e)+this.translatedSource}getMainResultGraphical(){return a.linesToString(["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  gl_FragColor = actualColor"])}getMainResultPackedPixels(){switch(this.returnType){case"LiteralInteger":case"Number":case"Integer":case"Float":return this.getMainResultKernelPackedPixels()+this.getMainResultSubKernelPackedPixels();default:throw new Error(`packed output only usable with Numbers, "${this.returnType}" specified`)}}getMainResultKernelPackedPixels(){return a.linesToString(["  threadId = indexTo3D(index, uOutputDim)","  kernel()",`  gl_FragData[0] = ${this.useLegacyEncoder?"legacyEncode32":"encode32"}(kernelResult)`])}getMainResultSubKernelPackedPixels(){const e=[];if(!this.subKernels)return"";for(let t=0;t<this.subKernels.length;t++)"Integer"===this.subKernels[t].returnType?e.push(`  gl_FragData[${t+1}] = ${this.useLegacyEncoder?"legacyEncode32":"encode32"}(float(subKernelResult_${this.subKernels[t].name}))`):e.push(`  gl_FragData[${t+1}] = ${this.useLegacyEncoder?"legacyEncode32":"encode32"}(subKernelResult_${this.subKernels[t].name})`);return a.linesToString(e)}getMainResultMemoryOptimizedFloats(){const e=["  index *= 4"];switch(this.returnType){case"Number":case"Integer":case"Float":const t=["r","g","b","a"];for(let n=0;n<t.length;n++){const r=t[n];this.getMainResultKernelMemoryOptimizedFloats(e,r),this.getMainResultSubKernelMemoryOptimizedFloats(e,r),n+1<t.length&&e.push("  index += 1")}break;default:throw new Error(`optimized output only usable with Numbers, ${this.returnType} specified`)}return a.linesToString(e)}getMainResultKernelMemoryOptimizedFloats(e,t){e.push("  threadId = indexTo3D(index, uOutputDim)","  kernel()",`  gl_FragData[0].${t} = kernelResult`)}getMainResultSubKernelMemoryOptimizedFloats(e,t){if(!this.subKernels)return e;for(let n=0;n<this.subKernels.length;n++)"Integer"===this.subKernels[n].returnType?e.push(`  gl_FragData[${n+1}].${t} = float(subKernelResult_${this.subKernels[n].name})`):e.push(`  gl_FragData[${n+1}].${t} = subKernelResult_${this.subKernels[n].name}`)}getMainResultKernelNumberTexture(){return["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  gl_FragData[0][0] = kernelResult"]}getMainResultSubKernelNumberTexture(){const e=[];if(!this.subKernels)return e;for(let t=0;t<this.subKernels.length;++t){const n=this.subKernels[t];"Integer"===n.returnType?e.push(`  gl_FragData[${t+1}][0] = float(subKernelResult_${n.name})`):e.push(`  gl_FragData[${t+1}][0] = subKernelResult_${n.name}`)}return e}getMainResultKernelArray2Texture(){return["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  gl_FragData[0][0] = kernelResult[0]","  gl_FragData[0][1] = kernelResult[1]"]}getMainResultSubKernelArray2Texture(){const e=[];if(!this.subKernels)return e;for(let t=0;t<this.subKernels.length;++t)e.push(`  gl_FragData[${t+1}][0] = subKernelResult_${this.subKernels[t].name}[0]`,`  gl_FragData[${t+1}][1] = subKernelResult_${this.subKernels[t].name}[1]`);return e}getMainResultKernelArray3Texture(){return["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  gl_FragData[0][0] = kernelResult[0]","  gl_FragData[0][1] = kernelResult[1]","  gl_FragData[0][2] = kernelResult[2]"]}getMainResultSubKernelArray3Texture(){const e=[];if(!this.subKernels)return e;for(let t=0;t<this.subKernels.length;++t)e.push(`  gl_FragData[${t+1}][0] = subKernelResult_${this.subKernels[t].name}[0]`,`  gl_FragData[${t+1}][1] = subKernelResult_${this.subKernels[t].name}[1]`,`  gl_FragData[${t+1}][2] = subKernelResult_${this.subKernels[t].name}[2]`);return e}getMainResultKernelArray4Texture(){return["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  gl_FragData[0] = kernelResult"]}getMainResultSubKernelArray4Texture(){const e=[];if(!this.subKernels)return e;switch(this.returnType){case"Number":case"Float":case"Integer":for(let t=0;t<this.subKernels.length;++t)"Integer"===this.subKernels[t].returnType?e.push(`  gl_FragData[${t+1}] = float(subKernelResult_${this.subKernels[t].name})`):e.push(`  gl_FragData[${t+1}] = subKernelResult_${this.subKernels[t].name}`);break;case"Array(2)":for(let t=0;t<this.subKernels.length;++t)e.push(`  gl_FragData[${t+1}][0] = subKernelResult_${this.subKernels[t].name}[0]`,`  gl_FragData[${t+1}][1] = subKernelResult_${this.subKernels[t].name}[1]`);break;case"Array(3)":for(let t=0;t<this.subKernels.length;++t)e.push(`  gl_FragData[${t+1}][0] = subKernelResult_${this.subKernels[t].name}[0]`,`  gl_FragData[${t+1}][1] = subKernelResult_${this.subKernels[t].name}[1]`,`  gl_FragData[${t+1}][2] = subKernelResult_${this.subKernels[t].name}[2]`);break;case"Array(4)":for(let t=0;t<this.subKernels.length;++t)e.push(`  gl_FragData[${t+1}][0] = subKernelResult_${this.subKernels[t].name}[0]`,`  gl_FragData[${t+1}][1] = subKernelResult_${this.subKernels[t].name}[1]`,`  gl_FragData[${t+1}][2] = subKernelResult_${this.subKernels[t].name}[2]`,`  gl_FragData[${t+1}][3] = subKernelResult_${this.subKernels[t].name}[3]`)}return e}replaceArtifacts(e,t){return e.replace(/[ ]*__([A-Z]+[0-9]*([_]?[A-Z]*[0-9]?)*)__;\n/g,((e,n)=>{if(t.hasOwnProperty(n))return t[n];throw`unhandled artifact ${n}`}))}getFragmentShader(e){return null!==this.compiledFragmentShader?this.compiledFragmentShader:this.compiledFragmentShader=this.replaceArtifacts(this.constructor.fragmentShader,this._getFragShaderArtifactMap(e))}getVertexShader(e){return null!==this.compiledVertexShader?this.compiledVertexShader:this.compiledVertexShader=this.replaceArtifacts(this.constructor.vertexShader,this._getVertShaderArtifactMap(e))}toString(){const e=a.linesToString(["const gl = context"]);return c(this.constructor,arguments,this,e)}destroy(e){if(!this.context)return;this.buffer&&this.context.deleteBuffer(this.buffer),this.framebuffer&&this.context.deleteFramebuffer(this.framebuffer);for(const n in this.rawValueFramebuffers){for(const e in this.rawValueFramebuffers[n])this.context.deleteFramebuffer(this.rawValueFramebuffers[n][e]),delete this.rawValueFramebuffers[n][e];delete this.rawValueFramebuffers[n]}if(this.vertShader&&this.context.deleteShader(this.vertShader),this.fragShader&&this.context.deleteShader(this.fragShader),this.program&&this.context.deleteProgram(this.program),this.texture){this.texture.delete();const e=this.textureCache.indexOf(this.texture.texture);e>-1&&this.textureCache.splice(e,1),this.texture=null}if(this.mappedTextures&&this.mappedTextures.length){for(let e=0;e<this.mappedTextures.length;e++){const t=this.mappedTextures[e];t.delete();const n=this.textureCache.indexOf(t.texture);n>-1&&this.textureCache.splice(n,1)}this.mappedTextures=null}if(this.kernelArguments)for(let n=0;n<this.kernelArguments.length;n++)this.kernelArguments[n].destroy();if(this.kernelConstants)for(let n=0;n<this.kernelConstants.length;n++)this.kernelConstants[n].destroy();for(;this.textureCache.length>0;){const e=this.textureCache.pop();this.context.deleteTexture(e)}if(e){const e=b.indexOf(this.canvas);e>=0&&(b[e]=null,x[e]=null)}if(this.destroyExtensions(),delete this.context,delete this.canvas,!this.gpu)return;const t=this.gpu.kernels.indexOf(this);-1!==t&&this.gpu.kernels.splice(t,1)}destroyExtensions(){this.extensions.OES_texture_float=null,this.extensions.OES_texture_float_linear=null,this.extensions.OES_element_index_uint=null,this.extensions.WEBGL_draw_buffers=null}static destroyContext(e){const t=e.getExtension("WEBGL_lose_context");t&&t.loseContext()}toJSON(){const e=super.toJSON();return e.functionNodes=i.fromKernel(this,s).toJSON(),e.settings.threadDim=this.threadDim,e}}t.exports={WebGLKernel:v}},{"../../plugins/math-random-uniformly-distributed":112,"../../utils":114,"../function-builder":9,"../gl/kernel":13,"../gl/kernel-string":12,"./fragment-shader":37,"./function-node":38,"./kernel-value-maps":39,"./vertex-shader":71}],71:[function(e,t,n){const r="__FLOAT_TACTIC_DECLARATION__;\n__INT_TACTIC_DECLARATION__;\n__SAMPLER_2D_TACTIC_DECLARATION__;\n\nattribute vec2 aPos;\nattribute vec2 aTexCoord;\n\nvarying vec2 vTexCoord;\nuniform vec2 ratio;\n\nvoid main(void) {\n  gl_Position = vec4((aPos + vec2(1)) * ratio + vec2(-1), 0, 1);\n  vTexCoord = aTexCoord;\n}";t.exports={vertexShader:r}},{}],72:[function(e,t,n){const r=`#version 300 es\n__HEADER__;\n__FLOAT_TACTIC_DECLARATION__;\n__INT_TACTIC_DECLARATION__;\n__SAMPLER_2D_TACTIC_DECLARATION__;\n__SAMPLER_2D_ARRAY_TACTIC_DECLARATION__;\n\nconst int LOOP_MAX = __LOOP_MAX__;\n\n__PLUGINS__;\n__CONSTANTS__;\n\nin vec2 vTexCoord;\n\nfloat atan2(float v1, float v2) {\n  if (v1 == 0.0 || v2 == 0.0) return 0.0;\n  return atan(v1 / v2);\n}\n\nfloat cbrt(float x) {\n  if (x >= 0.0) {\n    return pow(x, 1.0 / 3.0);\n  } else {\n    return -pow(x, 1.0 / 3.0);\n  }\n}\n\nfloat expm1(float x) {\n  return pow(${Math.E}, x) - 1.0; \n}\n\nfloat fround(highp float x) {\n  return x;\n}\n\nfloat imul(float v1, float v2) {\n  return float(int(v1) * int(v2));\n}\n\nfloat log10(float x) {\n  return log2(x) * (1.0 / log2(10.0));\n}\n\nfloat log1p(float x) {\n  return log(1.0 + x);\n}\n\nfloat _pow(float v1, float v2) {\n  if (v2 == 0.0) return 1.0;\n  return pow(v1, v2);\n}\n\nfloat _round(float x) {\n  return floor(x + 0.5);\n}\n\n\nconst int BIT_COUNT = 32;\nint modi(int x, int y) {\n  return x - y * (x / y);\n}\n\nint bitwiseOr(int a, int b) {\n  int result = 0;\n  int n = 1;\n  \n  for (int i = 0; i < BIT_COUNT; i++) {\n    if ((modi(a, 2) == 1) || (modi(b, 2) == 1)) {\n      result += n;\n    }\n    a = a / 2;\n    b = b / 2;\n    n = n * 2;\n    if(!(a > 0 || b > 0)) {\n      break;\n    }\n  }\n  return result;\n}\nint bitwiseXOR(int a, int b) {\n  int result = 0;\n  int n = 1;\n  \n  for (int i = 0; i < BIT_COUNT; i++) {\n    if ((modi(a, 2) == 1) != (modi(b, 2) == 1)) {\n      result += n;\n    }\n    a = a / 2;\n    b = b / 2;\n    n = n * 2;\n    if(!(a > 0 || b > 0)) {\n      break;\n    }\n  }\n  return result;\n}\nint bitwiseAnd(int a, int b) {\n  int result = 0;\n  int n = 1;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if ((modi(a, 2) == 1) && (modi(b, 2) == 1)) {\n      result += n;\n    }\n    a = a / 2;\n    b = b / 2;\n    n = n * 2;\n    if(!(a > 0 && b > 0)) {\n      break;\n    }\n  }\n  return result;\n}\nint bitwiseNot(int a) {\n  int result = 0;\n  int n = 1;\n  \n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (modi(a, 2) == 0) {\n      result += n;    \n    }\n    a = a / 2;\n    n = n * 2;\n  }\n  return result;\n}\nint bitwiseZeroFillLeftShift(int n, int shift) {\n  int maxBytes = BIT_COUNT;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (maxBytes >= n) {\n      break;\n    }\n    maxBytes *= 2;\n  }\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (i >= shift) {\n      break;\n    }\n    n *= 2;\n  }\n\n  int result = 0;\n  int byteVal = 1;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (i >= maxBytes) break;\n    if (modi(n, 2) > 0) { result += byteVal; }\n    n = int(n / 2);\n    byteVal *= 2;\n  }\n  return result;\n}\n\nint bitwiseSignedRightShift(int num, int shifts) {\n  return int(floor(float(num) / pow(2.0, float(shifts))));\n}\n\nint bitwiseZeroFillRightShift(int n, int shift) {\n  int maxBytes = BIT_COUNT;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (maxBytes >= n) {\n      break;\n    }\n    maxBytes *= 2;\n  }\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (i >= shift) {\n      break;\n    }\n    n /= 2;\n  }\n  int result = 0;\n  int byteVal = 1;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (i >= maxBytes) break;\n    if (modi(n, 2) > 0) { result += byteVal; }\n    n = int(n / 2);\n    byteVal *= 2;\n  }\n  return result;\n}\n\nvec2 integerMod(vec2 x, float y) {\n  vec2 res = floor(mod(x, y));\n  return res * step(1.0 - floor(y), -res);\n}\n\nvec3 integerMod(vec3 x, float y) {\n  vec3 res = floor(mod(x, y));\n  return res * step(1.0 - floor(y), -res);\n}\n\nvec4 integerMod(vec4 x, vec4 y) {\n  vec4 res = floor(mod(x, y));\n  return res * step(1.0 - floor(y), -res);\n}\n\nfloat integerMod(float x, float y) {\n  float res = floor(mod(x, y));\n  return res * (res > floor(y) - 1.0 ? 0.0 : 1.0);\n}\n\nint integerMod(int x, int y) {\n  return x - (y * int(x/y));\n}\n\n__DIVIDE_WITH_INTEGER_CHECK__;\n\n// Here be dragons!\n// DO NOT OPTIMIZE THIS CODE\n// YOU WILL BREAK SOMETHING ON SOMEBODY'S MACHINE\n// LEAVE IT AS IT IS, LEST YOU WASTE YOUR OWN TIME\nconst vec2 MAGIC_VEC = vec2(1.0, -256.0);\nconst vec4 SCALE_FACTOR = vec4(1.0, 256.0, 65536.0, 0.0);\nconst vec4 SCALE_FACTOR_INV = vec4(1.0, 0.00390625, 0.0000152587890625, 0.0); // 1, 1/256, 1/65536\nfloat decode32(vec4 texel) {\n  __DECODE32_ENDIANNESS__;\n  texel *= 255.0;\n  vec2 gte128;\n  gte128.x = texel.b >= 128.0 ? 1.0 : 0.0;\n  gte128.y = texel.a >= 128.0 ? 1.0 : 0.0;\n  float exponent = 2.0 * texel.a - 127.0 + dot(gte128, MAGIC_VEC);\n  float res = exp2(round(exponent));\n  texel.b = texel.b - 128.0 * gte128.x;\n  res = dot(texel, SCALE_FACTOR) * exp2(round(exponent-23.0)) + res;\n  res *= gte128.y * -2.0 + 1.0;\n  return res;\n}\n\nfloat decode16(vec4 texel, int index) {\n  int channel = integerMod(index, 2);\n  return texel[channel*2] * 255.0 + texel[channel*2 + 1] * 65280.0;\n}\n\nfloat decode8(vec4 texel, int index) {\n  int channel = integerMod(index, 4);\n  return texel[channel] * 255.0;\n}\n\nvec4 legacyEncode32(float f) {\n  float F = abs(f);\n  float sign = f < 0.0 ? 1.0 : 0.0;\n  float exponent = floor(log2(F));\n  float mantissa = (exp2(-exponent) * F);\n  // exponent += floor(log2(mantissa));\n  vec4 texel = vec4(F * exp2(23.0-exponent)) * SCALE_FACTOR_INV;\n  texel.rg = integerMod(texel.rg, 256.0);\n  texel.b = integerMod(texel.b, 128.0);\n  texel.a = exponent*0.5 + 63.5;\n  texel.ba += vec2(integerMod(exponent+127.0, 2.0), sign) * 128.0;\n  texel = floor(texel);\n  texel *= 0.003921569; // 1/255\n  __ENCODE32_ENDIANNESS__;\n  return texel;\n}\n\n// https://github.com/gpujs/gpu.js/wiki/Encoder-details\nvec4 encode32(float value) {\n  if (value == 0.0) return vec4(0, 0, 0, 0);\n\n  float exponent;\n  float mantissa;\n  vec4  result;\n  float sgn;\n\n  sgn = step(0.0, -value);\n  value = abs(value);\n\n  exponent = floor(log2(value));\n\n  mantissa = value*pow(2.0, -exponent)-1.0;\n  exponent = exponent+127.0;\n  result   = vec4(0,0,0,0);\n\n  result.a = floor(exponent/2.0);\n  exponent = exponent - result.a*2.0;\n  result.a = result.a + 128.0*sgn;\n\n  result.b = floor(mantissa * 128.0);\n  mantissa = mantissa - result.b / 128.0;\n  result.b = result.b + exponent*128.0;\n\n  result.g = floor(mantissa*32768.0);\n  mantissa = mantissa - result.g/32768.0;\n\n  result.r = floor(mantissa*8388608.0);\n  return result/255.0;\n}\n// Dragons end here\n\nint index;\nivec3 threadId;\n\nivec3 indexTo3D(int idx, ivec3 texDim) {\n  int z = int(idx / (texDim.x * texDim.y));\n  idx -= z * int(texDim.x * texDim.y);\n  int y = int(idx / texDim.x);\n  int x = int(integerMod(idx, texDim.x));\n  return ivec3(x, y, z);\n}\n\nfloat get32(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture(tex, st / vec2(texSize));\n  return decode32(texel);\n}\n\nfloat get16(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + (texDim.x * (y + (texDim.y * z)));\n  int w = texSize.x * 2;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture(tex, st / vec2(texSize.x * 2, texSize.y));\n  return decode16(texel, index);\n}\n\nfloat get8(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + (texDim.x * (y + (texDim.y * z)));\n  int w = texSize.x * 4;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture(tex, st / vec2(texSize.x * 4, texSize.y));\n  return decode8(texel, index);\n}\n\nfloat getMemoryOptimized32(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + (texDim.x * (y + (texDim.y * z)));\n  int channel = integerMod(index, 4);\n  index = index / 4;\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  index = index / 4;\n  vec4 texel = texture(tex, st / vec2(texSize));\n  return texel[channel];\n}\n\nvec4 getImage2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  return texture(tex, st / vec2(texSize));\n}\n\nvec4 getImage3D(sampler2DArray tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  return texture(tex, vec3(st / vec2(texSize), z));\n}\n\nfloat getFloatFromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  vec4 result = getImage2D(tex, texSize, texDim, z, y, x);\n  return result[0];\n}\n\nvec2 getVec2FromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  vec4 result = getImage2D(tex, texSize, texDim, z, y, x);\n  return vec2(result[0], result[1]);\n}\n\nvec2 getMemoryOptimizedVec2(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int channel = integerMod(index, 2);\n  index = index / 2;\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture(tex, st / vec2(texSize));\n  if (channel == 0) return vec2(texel.r, texel.g);\n  if (channel == 1) return vec2(texel.b, texel.a);\n  return vec2(0.0, 0.0);\n}\n\nvec3 getVec3FromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  vec4 result = getImage2D(tex, texSize, texDim, z, y, x);\n  return vec3(result[0], result[1], result[2]);\n}\n\nvec3 getMemoryOptimizedVec3(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int fieldIndex = 3 * (x + texDim.x * (y + texDim.y * z));\n  int vectorIndex = fieldIndex / 4;\n  int vectorOffset = fieldIndex - vectorIndex * 4;\n  int readY = vectorIndex / texSize.x;\n  int readX = vectorIndex - readY * texSize.x;\n  vec4 tex1 = texture(tex, (vec2(readX, readY) + 0.5) / vec2(texSize));\n\n  if (vectorOffset == 0) {\n    return tex1.xyz;\n  } else if (vectorOffset == 1) {\n    return tex1.yzw;\n  } else {\n    readX++;\n    if (readX >= texSize.x) {\n      readX = 0;\n      readY++;\n    }\n    vec4 tex2 = texture(tex, vec2(readX, readY) / vec2(texSize));\n    if (vectorOffset == 2) {\n      return vec3(tex1.z, tex1.w, tex2.x);\n    } else {\n      return vec3(tex1.w, tex2.x, tex2.y);\n    }\n  }\n}\n\nvec4 getVec4FromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  return getImage2D(tex, texSize, texDim, z, y, x);\n}\n\nvec4 getMemoryOptimizedVec4(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int channel = integerMod(index, 2);\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture(tex, st / vec2(texSize));\n  return vec4(texel.r, texel.g, texel.b, texel.a);\n}\n\nvec4 actualColor;\nvoid color(float r, float g, float b, float a) {\n  actualColor = vec4(r,g,b,a);\n}\n\nvoid color(float r, float g, float b) {\n  color(r,g,b,1.0);\n}\n\nfloat modulo(float number, float divisor) {\n  if (number < 0.0) {\n    number = abs(number);\n    if (divisor < 0.0) {\n      divisor = abs(divisor);\n    }\n    return -mod(number, divisor);\n  }\n  if (divisor < 0.0) {\n    divisor = abs(divisor);\n  }\n  return mod(number, divisor);\n}\n\n__INJECTED_NATIVE__;\n__MAIN_CONSTANTS__;\n__MAIN_ARGUMENTS__;\n__KERNEL__;\n\nvoid main(void) {\n  index = int(vTexCoord.s * float(uTexSize.x)) + int(vTexCoord.t * float(uTexSize.y)) * uTexSize.x;\n  __MAIN_RESULT__;\n}`;t.exports={fragmentShader:r}},{}],73:[function(e,t,n){const{utils:r}=e("../../utils"),{WebGLFunctionNode:i}=e("../web-gl/function-node");class s extends i{astIdentifierExpression(e,t){if("Identifier"!==e.type)throw this.astErrorOutput("IdentifierExpression - not an Identifier",e);const n=this.getType(e),i=r.sanitizeName(e.name);return"Infinity"===e.name?t.push("intBitsToFloat(2139095039)"):"Boolean"===n&&this.argumentNames.indexOf(i)>-1?t.push(`bool(user_${i})`):t.push(`user_${i}`),t}}t.exports={WebGL2FunctionNode:s}},{"../../utils":114,"../web-gl/function-node":38}],74:[function(e,t,n){const{WebGL2KernelValueBoolean:r}=e("./kernel-value/boolean"),{WebGL2KernelValueFloat:i}=e("./kernel-value/float"),{WebGL2KernelValueInteger:s}=e("./kernel-value/integer"),{WebGL2KernelValueHTMLImage:a}=e("./kernel-value/html-image"),{WebGL2KernelValueDynamicHTMLImage:o}=e("./kernel-value/dynamic-html-image"),{WebGL2KernelValueHTMLImageArray:l}=e("./kernel-value/html-image-array"),{WebGL2KernelValueDynamicHTMLImageArray:u}=e("./kernel-value/dynamic-html-image-array"),{WebGL2KernelValueHTMLVideo:c}=e("./kernel-value/html-video"),{WebGL2KernelValueDynamicHTMLVideo:h}=e("./kernel-value/dynamic-html-video"),{WebGL2KernelValueSingleInput:p}=e("./kernel-value/single-input"),{WebGL2KernelValueDynamicSingleInput:d}=e("./kernel-value/dynamic-single-input"),{WebGL2KernelValueUnsignedInput:f}=e("./kernel-value/unsigned-input"),{WebGL2KernelValueDynamicUnsignedInput:m}=e("./kernel-value/dynamic-unsigned-input"),{WebGL2KernelValueMemoryOptimizedNumberTexture:g}=e("./kernel-value/memory-optimized-number-texture"),{WebGL2KernelValueDynamicMemoryOptimizedNumberTexture:y}=e("./kernel-value/dynamic-memory-optimized-number-texture"),{WebGL2KernelValueNumberTexture:b}=e("./kernel-value/number-texture"),{WebGL2KernelValueDynamicNumberTexture:x}=e("./kernel-value/dynamic-number-texture"),{WebGL2KernelValueSingleArray:v}=e("./kernel-value/single-array"),{WebGL2KernelValueDynamicSingleArray:w}=e("./kernel-value/dynamic-single-array"),{WebGL2KernelValueSingleArray1DI:S}=e("./kernel-value/single-array1d-i"),{WebGL2KernelValueDynamicSingleArray1DI:k}=e("./kernel-value/dynamic-single-array1d-i"),{WebGL2KernelValueSingleArray2DI:T}=e("./kernel-value/single-array2d-i"),{WebGL2KernelValueDynamicSingleArray2DI:A}=e("./kernel-value/dynamic-single-array2d-i"),{WebGL2KernelValueSingleArray3DI:E}=e("./kernel-value/single-array3d-i"),{WebGL2KernelValueDynamicSingleArray3DI:_}=e("./kernel-value/dynamic-single-array3d-i"),{WebGL2KernelValueArray2:L}=e("./kernel-value/array2"),{WebGL2KernelValueArray3:C}=e("./kernel-value/array3"),{WebGL2KernelValueArray4:I}=e("./kernel-value/array4"),{WebGL2KernelValueUnsignedArray:$}=e("./kernel-value/unsigned-array"),{WebGL2KernelValueDynamicUnsignedArray:O}=e("./kernel-value/dynamic-unsigned-array"),R={unsigned:{dynamic:{Boolean:r,Integer:s,Float:i,Array:O,"Array(2)":L,"Array(3)":C,"Array(4)":I,"Array1D(2)":!1,"Array1D(3)":!1,"Array1D(4)":!1,"Array2D(2)":!1,"Array2D(3)":!1,"Array2D(4)":!1,"Array3D(2)":!1,"Array3D(3)":!1,"Array3D(4)":!1,Input:m,NumberTexture:x,"ArrayTexture(1)":x,"ArrayTexture(2)":x,"ArrayTexture(3)":x,"ArrayTexture(4)":x,MemoryOptimizedNumberTexture:y,HTMLCanvas:o,OffscreenCanvas:o,HTMLImage:o,ImageBitmap:o,ImageData:o,HTMLImageArray:u,HTMLVideo:h},static:{Boolean:r,Float:i,Integer:s,Array:$,"Array(2)":L,"Array(3)":C,"Array(4)":I,"Array1D(2)":!1,"Array1D(3)":!1,"Array1D(4)":!1,"Array2D(2)":!1,"Array2D(3)":!1,"Array2D(4)":!1,"Array3D(2)":!1,"Array3D(3)":!1,"Array3D(4)":!1,Input:f,NumberTexture:b,"ArrayTexture(1)":b,"ArrayTexture(2)":b,"ArrayTexture(3)":b,"ArrayTexture(4)":b,MemoryOptimizedNumberTexture:y,HTMLCanvas:a,OffscreenCanvas:a,HTMLImage:a,ImageBitmap:a,ImageData:a,HTMLImageArray:l,HTMLVideo:c}},single:{dynamic:{Boolean:r,Integer:s,Float:i,Array:w,"Array(2)":L,"Array(3)":C,"Array(4)":I,"Array1D(2)":k,"Array1D(3)":k,"Array1D(4)":k,"Array2D(2)":A,"Array2D(3)":A,"Array2D(4)":A,"Array3D(2)":_,"Array3D(3)":_,"Array3D(4)":_,Input:d,NumberTexture:x,"ArrayTexture(1)":x,"ArrayTexture(2)":x,"ArrayTexture(3)":x,"ArrayTexture(4)":x,MemoryOptimizedNumberTexture:y,HTMLCanvas:o,OffscreenCanvas:o,HTMLImage:o,ImageBitmap:o,ImageData:o,HTMLImageArray:u,HTMLVideo:h},static:{Boolean:r,Float:i,Integer:s,Array:v,"Array(2)":L,"Array(3)":C,"Array(4)":I,"Array1D(2)":S,"Array1D(3)":S,"Array1D(4)":S,"Array2D(2)":T,"Array2D(3)":T,"Array2D(4)":T,"Array3D(2)":E,"Array3D(3)":E,"Array3D(4)":E,Input:p,NumberTexture:b,"ArrayTexture(1)":b,"ArrayTexture(2)":b,"ArrayTexture(3)":b,"ArrayTexture(4)":b,MemoryOptimizedNumberTexture:g,HTMLCanvas:a,OffscreenCanvas:a,HTMLImage:a,ImageBitmap:a,ImageData:a,HTMLImageArray:l,HTMLVideo:c}}};function D(e,t,n,r){if(!e)throw new Error("type missing");if(!t)throw new Error("dynamic missing");if(!n)throw new Error("precision missing");r.type&&(e=r.type);const i=R[n][t];if(!1===i[e])return null;if(void 0===i[e])throw new Error(`Could not find a KernelValue for ${e}`);return i[e]}t.exports={kernelValueMaps:R,lookupKernelValueType:D}},{"./kernel-value/array2":75,"./kernel-value/array3":76,"./kernel-value/array4":77,"./kernel-value/boolean":78,"./kernel-value/dynamic-html-image":80,"./kernel-value/dynamic-html-image-array":79,"./kernel-value/dynamic-html-video":81,"./kernel-value/dynamic-memory-optimized-number-texture":82,"./kernel-value/dynamic-number-texture":83,"./kernel-value/dynamic-single-array":84,"./kernel-value/dynamic-single-array1d-i":85,"./kernel-value/dynamic-single-array2d-i":86,"./kernel-value/dynamic-single-array3d-i":87,"./kernel-value/dynamic-single-input":88,"./kernel-value/dynamic-unsigned-array":89,"./kernel-value/dynamic-unsigned-input":90,"./kernel-value/float":91,"./kernel-value/html-image":93,"./kernel-value/html-image-array":92,"./kernel-value/html-video":94,"./kernel-value/integer":95,"./kernel-value/memory-optimized-number-texture":96,"./kernel-value/number-texture":97,"./kernel-value/single-array":98,"./kernel-value/single-array1d-i":99,"./kernel-value/single-array2d-i":100,"./kernel-value/single-array3d-i":101,"./kernel-value/single-input":102,"./kernel-value/unsigned-array":103,"./kernel-value/unsigned-input":104}],75:[function(e,t,n){const{WebGLKernelValueArray2:r}=e("../../web-gl/kernel-value/array2");class i extends r{}t.exports={WebGL2KernelValueArray2:i}},{"../../web-gl/kernel-value/array2":41}],76:[function(e,t,n){const{WebGLKernelValueArray3:r}=e("../../web-gl/kernel-value/array3");class i extends r{}t.exports={WebGL2KernelValueArray3:i}},{"../../web-gl/kernel-value/array3":42}],77:[function(e,t,n){const{WebGLKernelValueArray4:r}=e("../../web-gl/kernel-value/array4");class i extends r{}t.exports={WebGL2KernelValueArray4:i}},{"../../web-gl/kernel-value/array4":43}],78:[function(e,t,n){const{WebGLKernelValueBoolean:r}=e("../../web-gl/kernel-value/boolean");class i extends r{}t.exports={WebGL2KernelValueBoolean:i}},{"../../web-gl/kernel-value/boolean":44}],79:[function(e,t,n){const{utils:r}=e("../../../utils"),{WebGL2KernelValueHTMLImageArray:i}=e("./html-image-array");class s extends i{getSource(){const e=this.getVariablePrecisionString();return r.linesToString([`uniform ${e} sampler2DArray ${this.id}`,`uniform ${e} ivec2 ${this.sizeId}`,`uniform ${e} ivec3 ${this.dimensionsId}`])}updateValue(e){const{width:t,height:n}=e[0];this.checkSize(t,n),this.dimensions=[t,n,e.length],this.textureSize=[t,n],this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),super.updateValue(e)}}t.exports={WebGL2KernelValueDynamicHTMLImageArray:s}},{"../../../utils":114,"./html-image-array":92}],80:[function(e,t,n){const{utils:r}=e("../../../utils"),{WebGLKernelValueDynamicHTMLImage:i}=e("../../web-gl/kernel-value/dynamic-html-image");class s extends i{getSource(){const e=this.getVariablePrecisionString();return r.linesToString([`uniform ${e} sampler2D ${this.id}`,`uniform ${e} ivec2 ${this.sizeId}`,`uniform ${e} ivec3 ${this.dimensionsId}`])}}t.exports={WebGL2KernelValueDynamicHTMLImage:s}},{"../../../utils":114,"../../web-gl/kernel-value/dynamic-html-image":45}],81:[function(e,t,n){e("../../../utils");const{WebGL2KernelValueDynamicHTMLImage:r}=e("./dynamic-html-image");class i extends r{}t.exports={WebGL2KernelValueDynamicHTMLVideo:i}},{"../../../utils":114,"./dynamic-html-image":80}],82:[function(e,t,n){const{utils:r}=e("../../../utils"),{WebGLKernelValueDynamicMemoryOptimizedNumberTexture:i}=e("../../web-gl/kernel-value/dynamic-memory-optimized-number-texture");class s extends i{getSource(){return r.linesToString([`uniform sampler2D ${this.id}`,`uniform ivec2 ${this.sizeId}`,`uniform ivec3 ${this.dimensionsId}`])}}t.exports={WebGL2KernelValueDynamicMemoryOptimizedNumberTexture:s}},{"../../../utils":114,"../../web-gl/kernel-value/dynamic-memory-optimized-number-texture":47}],83:[function(e,t,n){const{utils:r}=e("../../../utils"),{WebGLKernelValueDynamicNumberTexture:i}=e("../../web-gl/kernel-value/dynamic-number-texture");class s extends i{getSource(){const e=this.getVariablePrecisionString();return r.linesToString([`uniform ${e} sampler2D ${this.id}`,`uniform ${e} ivec2 ${this.sizeId}`,`uniform ${e} ivec3 ${this.dimensionsId}`])}}t.exports={WebGL2KernelValueDynamicNumberTexture:s}},{"../../../utils":114,"../../web-gl/kernel-value/dynamic-number-texture":48}],84:[function(e,t,n){const{utils:r}=e("../../../utils"),{WebGL2KernelValueSingleArray:i}=e("../../web-gl2/kernel-value/single-array");class s extends i{getSource(){const e=this.getVariablePrecisionString();return r.linesToString([`uniform ${e} sampler2D ${this.id}`,`uniform ${e} ivec2 ${this.sizeId}`,`uniform ${e} ivec3 ${this.dimensionsId}`])}updateValue(e){this.dimensions=r.getDimensions(e,!0),this.textureSize=r.getMemoryOptimizedFloatTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*this.bitRatio,this.checkSize(this.textureSize[0],this.textureSize[1]),this.uploadValue=new Float32Array(this.uploadArrayLength),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),super.updateValue(e)}}t.exports={WebGL2KernelValueDynamicSingleArray:s}},{"../../../utils":114,"../../web-gl2/kernel-value/single-array":98}],85:[function(e,t,n){const{utils:r}=e("../../../utils"),{WebGL2KernelValueSingleArray1DI:i}=e("../../web-gl2/kernel-value/single-array1d-i");class s extends i{getSource(){const e=this.getVariablePrecisionString();return r.linesToString([`uniform ${e} sampler2D ${this.id}`,`uniform ${e} ivec2 ${this.sizeId}`,`uniform ${e} ivec3 ${this.dimensionsId}`])}updateValue(e){this.setShape(e),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),super.updateValue(e)}}t.exports={WebGL2KernelValueDynamicSingleArray1DI:s}},{"../../../utils":114,"../../web-gl2/kernel-value/single-array1d-i":99}],86:[function(e,t,n){const{utils:r}=e("../../../utils"),{WebGL2KernelValueSingleArray2DI:i}=e("../../web-gl2/kernel-value/single-array2d-i");class s extends i{getSource(){const e=this.getVariablePrecisionString();return r.linesToString([`uniform ${e} sampler2D ${this.id}`,`uniform ${e} ivec2 ${this.sizeId}`,`uniform ${e} ivec3 ${this.dimensionsId}`])}updateValue(e){this.setShape(e),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),super.updateValue(e)}}t.exports={WebGL2KernelValueDynamicSingleArray2DI:s}},{"../../../utils":114,"../../web-gl2/kernel-value/single-array2d-i":100}],87:[function(e,t,n){const{utils:r}=e("../../../utils"),{WebGL2KernelValueSingleArray3DI:i}=e("../../web-gl2/kernel-value/single-array3d-i");class s extends i{getSource(){const e=this.getVariablePrecisionString();return r.linesToString([`uniform ${e} sampler2D ${this.id}`,`uniform ${e} ivec2 ${this.sizeId}`,`uniform ${e} ivec3 ${this.dimensionsId}`])}updateValue(e){this.setShape(e),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),super.updateValue(e)}}t.exports={WebGL2KernelValueDynamicSingleArray3DI:s}},{"../../../utils":114,"../../web-gl2/kernel-value/single-array3d-i":101}],88:[function(e,t,n){const{utils:r}=e("../../../utils"),{WebGL2KernelValueSingleInput:i}=e("../../web-gl2/kernel-value/single-input");class s extends i{getSource(){const e=this.getVariablePrecisionString();return r.linesToString([`uniform ${e} sampler2D ${this.id}`,`uniform ${e} ivec2 ${this.sizeId}`,`uniform ${e} ivec3 ${this.dimensionsId}`])}updateValue(e){let[t,n,i]=e.size;this.dimensions=new Int32Array([t||1,n||1,i||1]),this.textureSize=r.getMemoryOptimizedFloatTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*this.bitRatio,this.checkSize(this.textureSize[0],this.textureSize[1]),this.uploadValue=new Float32Array(this.uploadArrayLength),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),super.updateValue(e)}}t.exports={WebGL2KernelValueDynamicSingleInput:s}},{"../../../utils":114,"../../web-gl2/kernel-value/single-input":102}],89:[function(e,t,n){const{utils:r}=e("../../../utils"),{WebGLKernelValueDynamicUnsignedArray:i}=e("../../web-gl/kernel-value/dynamic-unsigned-array");class s extends i{getSource(){const e=this.getVariablePrecisionString();return r.linesToString([`uniform ${e} sampler2D ${this.id}`,`uniform ${e} ivec2 ${this.sizeId}`,`uniform ${e} ivec3 ${this.dimensionsId}`])}}t.exports={WebGL2KernelValueDynamicUnsignedArray:s}},{"../../../utils":114,"../../web-gl/kernel-value/dynamic-unsigned-array":54}],90:[function(e,t,n){const{utils:r}=e("../../../utils"),{WebGLKernelValueDynamicUnsignedInput:i}=e("../../web-gl/kernel-value/dynamic-unsigned-input");class s extends i{getSource(){const e=this.getVariablePrecisionString();return r.linesToString([`uniform ${e} sampler2D ${this.id}`,`uniform ${e} ivec2 ${this.sizeId}`,`uniform ${e} ivec3 ${this.dimensionsId}`])}}t.exports={WebGL2KernelValueDynamicUnsignedInput:s}},{"../../../utils":114,"../../web-gl/kernel-value/dynamic-unsigned-input":55}],91:[function(e,t,n){e("../../../utils");const{WebGLKernelValueFloat:r}=e("../../web-gl/kernel-value/float");class i extends r{}t.exports={WebGL2KernelValueFloat:i}},{"../../../utils":114,"../../web-gl/kernel-value/float":56}],92:[function(e,t,n){const{utils:r}=e("../../../utils"),{WebGLKernelArray:i}=e("../../web-gl/kernel-value/array");class s extends i{constructor(e,t){super(e,t),this.checkSize(e[0].width,e[0].height),this.dimensions=[e[0].width,e[0].height,e.length],this.textureSize=[e[0].width,e[0].height]}defineTexture(){const{context:e}=this;e.activeTexture(this.contextHandle),e.bindTexture(e.TEXTURE_2D_ARRAY,this.texture),e.texParameteri(e.TEXTURE_2D_ARRAY,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D_ARRAY,e.TEXTURE_MIN_FILTER,e.NEAREST)}getStringValueHandler(){return`const uploadValue_${this.name} = ${this.varName};\n`}getSource(){const e=this.getVariablePrecisionString();return r.linesToString([`uniform ${e} sampler2DArray ${this.id}`,`${e} ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,`${e} ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`])}updateValue(e){const{context:t}=this;t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D_ARRAY,this.texture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!0),t.texImage3D(t.TEXTURE_2D_ARRAY,0,t.RGBA,e[0].width,e[0].height,e.length,0,t.RGBA,t.UNSIGNED_BYTE,null);for(let n=0;n<e.length;n++){const r=0,i=0,s=1;t.texSubImage3D(t.TEXTURE_2D_ARRAY,0,r,i,n,e[n].width,e[n].height,s,t.RGBA,t.UNSIGNED_BYTE,this.uploadValue=e[n])}this.kernel.setUniform1i(this.id,this.index)}}t.exports={WebGL2KernelValueHTMLImageArray:s}},{"../../../utils":114,"../../web-gl/kernel-value/array":40}],93:[function(e,t,n){const{utils:r}=e("../../../utils"),{WebGLKernelValueHTMLImage:i}=e("../../web-gl/kernel-value/html-image");class s extends i{getSource(){const e=this.getVariablePrecisionString();return r.linesToString([`uniform ${e} sampler2D ${this.id}`,`${e} ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,`${e} ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`])}}t.exports={WebGL2KernelValueHTMLImage:s}},{"../../../utils":114,"../../web-gl/kernel-value/html-image":57}],94:[function(e,t,n){e("../../../utils");const{WebGL2KernelValueHTMLImage:r}=e("./html-image");class i extends r{}t.exports={WebGL2KernelValueHTMLVideo:i}},{"../../../utils":114,"./html-image":93}],95:[function(e,t,n){const{WebGLKernelValueInteger:r}=e("../../web-gl/kernel-value/integer");class i extends r{getSource(e){const t=this.getVariablePrecisionString();return"constants"===this.origin?`const ${t} int ${this.id} = ${parseInt(e)};\n`:`uniform ${t} int ${this.id};\n`}updateValue(e){"constants"!==this.origin&&this.kernel.setUniform1i(this.id,this.uploadValue=e)}}t.exports={WebGL2KernelValueInteger:i}},{"../../web-gl/kernel-value/integer":60}],96:[function(e,t,n){const{utils:r}=e("../../../utils"),{WebGLKernelValueMemoryOptimizedNumberTexture:i}=e("../../web-gl/kernel-value/memory-optimized-number-texture");class s extends i{getSource(){const{id:e,sizeId:t,textureSize:n,dimensionsId:i,dimensions:s}=this,a=this.getVariablePrecisionString();return r.linesToString([`uniform sampler2D ${e}`,`${a} ivec2 ${t} = ivec2(${n[0]}, ${n[1]})`,`${a} ivec3 ${i} = ivec3(${s[0]}, ${s[1]}, ${s[2]})`])}}t.exports={WebGL2KernelValueMemoryOptimizedNumberTexture:s}},{"../../../utils":114,"../../web-gl/kernel-value/memory-optimized-number-texture":61}],97:[function(e,t,n){const{utils:r}=e("../../../utils"),{WebGLKernelValueNumberTexture:i}=e("../../web-gl/kernel-value/number-texture");class s extends i{getSource(){const{id:e,sizeId:t,textureSize:n,dimensionsId:i,dimensions:s}=this,a=this.getVariablePrecisionString();return r.linesToString([`uniform ${a} sampler2D ${e}`,`${a} ivec2 ${t} = ivec2(${n[0]}, ${n[1]})`,`${a} ivec3 ${i} = ivec3(${s[0]}, ${s[1]}, ${s[2]})`])}}t.exports={WebGL2KernelValueNumberTexture:s}},{"../../../utils":114,"../../web-gl/kernel-value/number-texture":62}],98:[function(e,t,n){const{utils:r}=e("../../../utils"),{WebGLKernelValueSingleArray:i}=e("../../web-gl/kernel-value/single-array");class s extends i{getSource(){const e=this.getVariablePrecisionString();return r.linesToString([`uniform ${e} sampler2D ${this.id}`,`${e} ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,`${e} ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`])}updateValue(e){if(e.constructor!==this.initialValueConstructor)return void this.onUpdateValueMismatch(e.constructor);const{context:t}=this;r.flattenTo(e,this.uploadValue),t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D,this.texture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.texImage2D(t.TEXTURE_2D,0,t.RGBA32F,this.textureSize[0],this.textureSize[1],0,t.RGBA,t.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}}t.exports={WebGL2KernelValueSingleArray:s}},{"../../../utils":114,"../../web-gl/kernel-value/single-array":63}],99:[function(e,t,n){const{utils:r}=e("../../../utils"),{WebGLKernelValueSingleArray1DI:i}=e("../../web-gl/kernel-value/single-array1d-i");class s extends i{updateValue(e){if(e.constructor!==this.initialValueConstructor)return void this.onUpdateValueMismatch(e.constructor);const{context:t}=this;r.flattenTo(e,this.uploadValue),t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D,this.texture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.texImage2D(t.TEXTURE_2D,0,t.RGBA32F,this.textureSize[0],this.textureSize[1],0,t.RGBA,t.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}}t.exports={WebGL2KernelValueSingleArray1DI:s}},{"../../../utils":114,"../../web-gl/kernel-value/single-array1d-i":64}],100:[function(e,t,n){const{utils:r}=e("../../../utils"),{WebGLKernelValueSingleArray2DI:i}=e("../../web-gl/kernel-value/single-array2d-i");class s extends i{updateValue(e){if(e.constructor!==this.initialValueConstructor)return void this.onUpdateValueMismatch(e.constructor);const{context:t}=this;r.flattenTo(e,this.uploadValue),t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D,this.texture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.texImage2D(t.TEXTURE_2D,0,t.RGBA32F,this.textureSize[0],this.textureSize[1],0,t.RGBA,t.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}}t.exports={WebGL2KernelValueSingleArray2DI:s}},{"../../../utils":114,"../../web-gl/kernel-value/single-array2d-i":65}],101:[function(e,t,n){const{utils:r}=e("../../../utils"),{WebGLKernelValueSingleArray3DI:i}=e("../../web-gl/kernel-value/single-array3d-i");class s extends i{updateValue(e){if(e.constructor!==this.initialValueConstructor)return void this.onUpdateValueMismatch(e.constructor);const{context:t}=this;r.flattenTo(e,this.uploadValue),t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D,this.texture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.texImage2D(t.TEXTURE_2D,0,t.RGBA32F,this.textureSize[0],this.textureSize[1],0,t.RGBA,t.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}}t.exports={WebGL2KernelValueSingleArray3DI:s}},{"../../../utils":114,"../../web-gl/kernel-value/single-array3d-i":66}],102:[function(e,t,n){const{utils:r}=e("../../../utils"),{WebGLKernelValueSingleInput:i}=e("../../web-gl/kernel-value/single-input");class s extends i{getSource(){const e=this.getVariablePrecisionString();return r.linesToString([`uniform ${e} sampler2D ${this.id}`,`${e} ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,`${e} ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`])}updateValue(e){const{context:t}=this;r.flattenTo(e.value,this.uploadValue),t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D,this.texture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.texImage2D(t.TEXTURE_2D,0,t.RGBA32F,this.textureSize[0],this.textureSize[1],0,t.RGBA,t.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}}t.exports={WebGL2KernelValueSingleInput:s}},{"../../../utils":114,"../../web-gl/kernel-value/single-input":67}],103:[function(e,t,n){const{utils:r}=e("../../../utils"),{WebGLKernelValueUnsignedArray:i}=e("../../web-gl/kernel-value/unsigned-array");class s extends i{getSource(){const e=this.getVariablePrecisionString();return r.linesToString([`uniform ${e} sampler2D ${this.id}`,`${e} ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,`${e} ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`])}}t.exports={WebGL2KernelValueUnsignedArray:s}},{"../../../utils":114,"../../web-gl/kernel-value/unsigned-array":68}],104:[function(e,t,n){const{utils:r}=e("../../../utils"),{WebGLKernelValueUnsignedInput:i}=e("../../web-gl/kernel-value/unsigned-input");class s extends i{getSource(){const e=this.getVariablePrecisionString();return r.linesToString([`uniform ${e} sampler2D ${this.id}`,`${e} ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,`${e} ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`])}}t.exports={WebGL2KernelValueUnsignedInput:s}},{"../../../utils":114,"../../web-gl/kernel-value/unsigned-input":69}],105:[function(e,t,n){const{WebGLKernel:r}=e("../web-gl/kernel"),{WebGL2FunctionNode:i}=e("./function-node"),{FunctionBuilder:s}=e("../function-builder"),{utils:a}=e("../../utils"),{fragmentShader:o}=e("./fragment-shader"),{vertexShader:l}=e("./vertex-shader"),{lookupKernelValueType:u}=e("./kernel-value-maps");let c=null,h=null,p=null,d=null;class f extends r{static get isSupported(){return null!==c||(this.setupFeatureChecks(),c=this.isContextMatch(p)),c}static setupFeatureChecks(){"undefined"!==typeof document?h=document.createElement("canvas"):"undefined"!==typeof OffscreenCanvas&&(h=new OffscreenCanvas(0,0)),h&&(p=h.getContext("webgl2"),p&&p.getExtension&&(p.getExtension("EXT_color_buffer_float"),p.getExtension("OES_texture_float_linear"),d=this.getFeatures()))}static isContextMatch(e){return"undefined"!==typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext}static getFeatures(){const e=this.testContext;return Object.freeze({isFloatRead:this.getIsFloatRead(),isIntegerDivisionAccurate:this.getIsIntegerDivisionAccurate(),isSpeedTacticSupported:this.getIsSpeedTacticSupported(),kernelMap:!0,isTextureFloat:!0,isDrawBuffers:!0,channelCount:this.getChannelCount(),maxTextureSize:this.getMaxTextureSize(),lowIntPrecision:e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.LOW_INT),lowFloatPrecision:e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.LOW_FLOAT),mediumIntPrecision:e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_INT),mediumFloatPrecision:e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT),highIntPrecision:e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_INT),highFloatPrecision:e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT)})}static getIsTextureFloat(){return!0}static getChannelCount(){return p.getParameter(p.MAX_DRAW_BUFFERS)}static getMaxTextureSize(){return p.getParameter(p.MAX_TEXTURE_SIZE)}static lookupKernelValueType(e,t,n,r){return u(e,t,n,r)}static get testCanvas(){return h}static get testContext(){return p}static get features(){return d}static get fragmentShader(){return o}static get vertexShader(){return l}initContext(){const e={alpha:!1,depth:!1,antialias:!1};return this.canvas.getContext("webgl2",e)}initExtensions(){this.extensions={EXT_color_buffer_float:this.context.getExtension("EXT_color_buffer_float"),OES_texture_float_linear:this.context.getExtension("OES_texture_float_linear")}}validateSettings(e){if(!this.validate)return void(this.texSize=a.getKernelTextureSize({optimizeFloatMemory:this.optimizeFloatMemory,precision:this.precision},this.output));const{features:t}=this.constructor;if("single"===this.precision&&!t.isFloatRead)throw new Error("Float texture outputs are not supported");if(this.graphical||null!==this.precision||(this.precision=t.isFloatRead?"single":"unsigned"),null===this.fixIntegerDivisionAccuracy?this.fixIntegerDivisionAccuracy=!t.isIntegerDivisionAccurate:this.fixIntegerDivisionAccuracy&&t.isIntegerDivisionAccurate&&(this.fixIntegerDivisionAccuracy=!1),this.checkOutput(),!this.output||0===this.output.length){if(1!==e.length)throw new Error("Auto output only supported for kernels with only one input");const t=a.getVariableType(e[0],this.strictIntegers);switch(t){case"Array":this.output=a.getDimensions(t);break;case"NumberTexture":case"MemoryOptimizedNumberTexture":case"ArrayTexture(1)":case"ArrayTexture(2)":case"ArrayTexture(3)":case"ArrayTexture(4)":this.output=e[0].output;break;default:throw new Error("Auto output not supported for input type: "+t)}}if(this.graphical){if(2!==this.output.length)throw new Error("Output must have 2 dimensions on graphical mode");return"single"===this.precision&&(console.warn("Cannot use graphical mode and single precision at the same time"),this.precision="unsigned"),void(this.texSize=a.clone(this.output))}!this.graphical&&null===this.precision&&t.isTextureFloat&&(this.precision="single"),this.texSize=a.getKernelTextureSize({optimizeFloatMemory:this.optimizeFloatMemory,precision:this.precision},this.output),this.checkTextureSize()}translateSource(){const e=s.fromKernel(this,i,{fixIntegerDivisionAccuracy:this.fixIntegerDivisionAccuracy});this.translatedSource=e.getPrototypeString("kernel"),this.setupReturnTypes(e)}drawBuffers(){this.context.drawBuffers(this.drawBuffersMap)}getTextureFormat(){const{context:e}=this;switch(this.getInternalFormat()){case e.R32F:return e.RED;case e.RG32F:return e.RG;case e.RGBA32F:case e.RGBA:return e.RGBA;default:throw new Error("Unknown internal format")}}getInternalFormat(){const{context:e}=this;if("single"===this.precision){if(this.pipeline)switch(this.returnType){case"Number":case"Float":case"Integer":return this.optimizeFloatMemory?e.RGBA32F:e.R32F;case"Array(2)":return e.RG32F;case"Array(3)":case"Array(4)":return e.RGBA32F;default:throw new Error("Unhandled return type")}return e.RGBA32F}return e.RGBA}_setupOutputTexture(){const e=this.context;if(this.texture)return void e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture.texture,0);e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer);const t=e.createTexture(),n=this.texSize;e.activeTexture(e.TEXTURE0+this.constantTextureCount+this.argumentTextureCount),e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST);const r=this.getInternalFormat();"single"===this.precision?e.texStorage2D(e.TEXTURE_2D,1,r,n[0],n[1]):e.texImage2D(e.TEXTURE_2D,0,r,n[0],n[1],0,r,e.UNSIGNED_BYTE,null),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.texture=new this.TextureConstructor({texture:t,size:n,dimensions:this.threadDim,output:this.output,context:this.context,internalFormat:this.getInternalFormat(),textureFormat:this.getTextureFormat(),kernel:this})}_setupSubOutputTextures(){const e=this.context;if(this.mappedTextures){for(let t=0;t<this.subKernels.length;t++)e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t+1,e.TEXTURE_2D,this.mappedTextures[t].texture,0);return}const t=this.texSize;this.drawBuffersMap=[e.COLOR_ATTACHMENT0],this.mappedTextures=[];for(let n=0;n<this.subKernels.length;n++){const r=this.createTexture();this.drawBuffersMap.push(e.COLOR_ATTACHMENT0+n+1),e.activeTexture(e.TEXTURE0+this.constantTextureCount+this.argumentTextureCount+n),e.bindTexture(e.TEXTURE_2D,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST);const i=this.getInternalFormat();"single"===this.precision?e.texStorage2D(e.TEXTURE_2D,1,i,t[0],t[1]):e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t[0],t[1],0,e.RGBA,e.UNSIGNED_BYTE,null),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+n+1,e.TEXTURE_2D,r,0),this.mappedTextures.push(new this.TextureConstructor({texture:r,size:t,dimensions:this.threadDim,output:this.output,context:this.context,internalFormat:this.getInternalFormat(),textureFormat:this.getTextureFormat(),kernel:this}))}}_getHeaderString(){return""}_getTextureCoordinate(){const e=this.subKernels,t=this.getVariablePrecisionString(this.texSize,this.tactic);return null===e||e.length<1?`in ${t} vec2 vTexCoord;\n`:`out ${t} vec2 vTexCoord;\n`}_getMainArgumentsString(e){const t=[],n=this.argumentNames;for(let r=0;r<n.length;r++)t.push(this.kernelArguments[r].getSource(e[r]));return t.join("")}getKernelString(){const e=[this.getKernelResultDeclaration()],t=this.subKernels;if(null!==t)switch(e.push("layout(location = 0) out vec4 data0"),this.returnType){case"Number":case"Float":case"Integer":for(let n=0;n<t.length;n++){const r=t[n];e.push("Integer"===r.returnType?`int subKernelResult_${r.name} = 0`:`float subKernelResult_${r.name} = 0.0`,`layout(location = ${n+1}) out vec4 data${n+1}`)}break;case"Array(2)":for(let n=0;n<t.length;n++)e.push(`vec2 subKernelResult_${t[n].name}`,`layout(location = ${n+1}) out vec4 data${n+1}`);break;case"Array(3)":for(let n=0;n<t.length;n++)e.push(`vec3 subKernelResult_${t[n].name}`,`layout(location = ${n+1}) out vec4 data${n+1}`);break;case"Array(4)":for(let n=0;n<t.length;n++)e.push(`vec4 subKernelResult_${t[n].name}`,`layout(location = ${n+1}) out vec4 data${n+1}`)}else e.push("out vec4 data0");return a.linesToString(e)+this.translatedSource}getMainResultGraphical(){return a.linesToString(["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  data0 = actualColor"])}getMainResultPackedPixels(){switch(this.returnType){case"LiteralInteger":case"Number":case"Integer":case"Float":return this.getMainResultKernelPackedPixels()+this.getMainResultSubKernelPackedPixels();default:throw new Error(`packed output only usable with Numbers, "${this.returnType}" specified`)}}getMainResultKernelPackedPixels(){return a.linesToString(["  threadId = indexTo3D(index, uOutputDim)","  kernel()",`  data0 = ${this.useLegacyEncoder?"legacyEncode32":"encode32"}(kernelResult)`])}getMainResultSubKernelPackedPixels(){const e=[];if(!this.subKernels)return"";for(let t=0;t<this.subKernels.length;t++)"Integer"===this.subKernels[t].returnType?e.push(`  data${t+1} = ${this.useLegacyEncoder?"legacyEncode32":"encode32"}(float(subKernelResult_${this.subKernels[t].name}))`):e.push(`  data${t+1} = ${this.useLegacyEncoder?"legacyEncode32":"encode32"}(subKernelResult_${this.subKernels[t].name})`);return a.linesToString(e)}getMainResultKernelMemoryOptimizedFloats(e,t){e.push("  threadId = indexTo3D(index, uOutputDim)","  kernel()",`  data0.${t} = kernelResult`)}getMainResultSubKernelMemoryOptimizedFloats(e,t){if(!this.subKernels)return e;for(let n=0;n<this.subKernels.length;n++){const r=this.subKernels[n];"Integer"===r.returnType?e.push(`  data${n+1}.${t} = float(subKernelResult_${r.name})`):e.push(`  data${n+1}.${t} = subKernelResult_${r.name}`)}}getMainResultKernelNumberTexture(){return["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  data0[0] = kernelResult"]}getMainResultSubKernelNumberTexture(){const e=[];if(!this.subKernels)return e;for(let t=0;t<this.subKernels.length;++t){const n=this.subKernels[t];"Integer"===n.returnType?e.push(`  data${t+1}[0] = float(subKernelResult_${n.name})`):e.push(`  data${t+1}[0] = subKernelResult_${n.name}`)}return e}getMainResultKernelArray2Texture(){return["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  data0[0] = kernelResult[0]","  data0[1] = kernelResult[1]"]}getMainResultSubKernelArray2Texture(){const e=[];if(!this.subKernels)return e;for(let t=0;t<this.subKernels.length;++t){const n=this.subKernels[t];e.push(`  data${t+1}[0] = subKernelResult_${n.name}[0]`,`  data${t+1}[1] = subKernelResult_${n.name}[1]`)}return e}getMainResultKernelArray3Texture(){return["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  data0[0] = kernelResult[0]","  data0[1] = kernelResult[1]","  data0[2] = kernelResult[2]"]}getMainResultSubKernelArray3Texture(){const e=[];if(!this.subKernels)return e;for(let t=0;t<this.subKernels.length;++t){const n=this.subKernels[t];e.push(`  data${t+1}[0] = subKernelResult_${n.name}[0]`,`  data${t+1}[1] = subKernelResult_${n.name}[1]`,`  data${t+1}[2] = subKernelResult_${n.name}[2]`)}return e}getMainResultKernelArray4Texture(){return["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  data0 = kernelResult"]}getMainResultSubKernelArray4Texture(){const e=[];if(!this.subKernels)return e;for(let t=0;t<this.subKernels.length;++t)e.push(`  data${t+1} = subKernelResult_${this.subKernels[t].name}`);return e}destroyExtensions(){this.extensions.EXT_color_buffer_float=null,this.extensions.OES_texture_float_linear=null}toJSON(){const e=super.toJSON();return e.functionNodes=s.fromKernel(this,i).toJSON(),e.settings.threadDim=this.threadDim,e}}t.exports={WebGL2Kernel:f}},{"../../utils":114,"../function-builder":9,"../web-gl/kernel":70,"./fragment-shader":72,"./function-node":73,"./kernel-value-maps":74,"./vertex-shader":106}],106:[function(e,t,n){const r="#version 300 es\n__FLOAT_TACTIC_DECLARATION__;\n__INT_TACTIC_DECLARATION__;\n__SAMPLER_2D_TACTIC_DECLARATION__;\n\nin vec2 aPos;\nin vec2 aTexCoord;\n\nout vec2 vTexCoord;\nuniform vec2 ratio;\n\nvoid main(void) {\n  gl_Position = vec4((aPos + vec2(1)) * ratio + vec2(-1), 0, 1);\n  vTexCoord = aTexCoord;\n}";t.exports={vertexShader:r}},{}],107:[function(e,t,n){const r=e("./index"),i=r.GPU;for(const a in r)r.hasOwnProperty(a)&&"GPU"!==a&&(i[a]=r[a]);function s(e){e.GPU||Object.defineProperty(e,"GPU",{get:()=>i})}"undefined"!==typeof window&&s(window),"undefined"!==typeof self&&s(self),t.exports=r},{"./index":109}],108:[function(e,t,n){const{gpuMock:r}=e("gpu-mock.js"),{utils:i}=e("./utils");e("./backend/kernel");const{CPUKernel:s}=e("./backend/cpu/kernel"),{HeadlessGLKernel:a}=e("./backend/headless-gl/kernel"),{WebGL2Kernel:o}=e("./backend/web-gl2/kernel"),{WebGLKernel:l}=e("./backend/web-gl/kernel"),{kernelRunShortcut:u}=e("./kernel-run-shortcut"),c=[a,o,l],h=["gpu","cpu"],p={headlessgl:a,webgl2:o,webgl:l};let d=!0;class f{static disableValidation(){d=!1}static enableValidation(){d=!0}static get isGPUSupported(){return c.some((e=>e.isSupported))}static get isKernelMapSupported(){return c.some((e=>e.isSupported&&e.features.kernelMap))}static get isOffscreenCanvasSupported(){return"undefined"!==typeof Worker&&"undefined"!==typeof OffscreenCanvas||"undefined"!==typeof importScripts}static get isWebGLSupported(){return l.isSupported}static get isWebGL2Supported(){return o.isSupported}static get isHeadlessGLSupported(){return a.isSupported}static get isCanvasSupported(){return"undefined"!==typeof HTMLCanvasElement}static get isGPUHTMLImageArraySupported(){return o.isSupported}static get isSinglePrecisionSupported(){return c.some((e=>e.isSupported&&e.features.isFloatRead&&e.features.isTextureFloat))}constructor(e){if(e=e||{},this.canvas=e.canvas||null,this.context=e.context||null,this.mode=e.mode,this.Kernel=null,this.kernels=[],this.functions=[],this.nativeFunctions=[],this.injectedNative=null,"dev"!==this.mode){if(this.chooseKernel(),e.functions)for(let t=0;t<e.functions.length;t++)this.addFunction(e.functions[t]);if(e.nativeFunctions)for(const t in e.nativeFunctions){if(!e.nativeFunctions.hasOwnProperty(t))continue;const n=e.nativeFunctions[t],{name:r,source:i}=n;this.addNativeFunction(r,i,n)}}}chooseKernel(){if(this.Kernel)return;let e=null;if(this.context){for(let t=0;t<c.length;t++){const n=c[t];if(n.isContextMatch(this.context)){if(!n.isSupported)throw new Error(`Kernel type ${n.name} not supported`);e=n;break}}if(null===e)throw new Error("unknown Context")}else if(this.mode){if(this.mode in p)d&&!p[this.mode].isSupported||(e=p[this.mode]);else if("gpu"===this.mode){for(let t=0;t<c.length;t++)if(c[t].isSupported){e=c[t];break}}else"cpu"===this.mode&&(e=s);if(!e)throw new Error(`A requested mode of "${this.mode}" and is not supported`)}else{for(let t=0;t<c.length;t++)if(c[t].isSupported){e=c[t];break}e||(e=s)}this.mode||(this.mode=e.mode),this.Kernel=e}createKernel(e,t){if("undefined"===typeof e)throw new Error("Missing source parameter");if("object"!==typeof e&&!i.isFunction(e)&&"string"!==typeof e)throw new Error("source parameter not a function");const n=this.kernels;if("dev"===this.mode){const i=r(e,m(t));return n.push(i),i}e="function"===typeof e?e.toString():e;const a={},o=m(t)||{};function l(t){console.warn("Falling back to CPU");const n=new s(e,{argumentTypes:f.argumentTypes,constantTypes:f.constantTypes,graphical:f.graphical,loopMaxIterations:f.loopMaxIterations,constants:f.constants,dynamicOutput:f.dynamicOutput,dynamicArgument:f.dynamicArguments,output:f.output,precision:f.precision,pipeline:f.pipeline,immutable:f.immutable,optimizeFloatMemory:f.optimizeFloatMemory,fixIntegerDivisionAccuracy:f.fixIntegerDivisionAccuracy,functions:f.functions,nativeFunctions:f.nativeFunctions,injectedNative:f.injectedNative,subKernels:f.subKernels,strictIntegers:f.strictIntegers,debug:f.debug});n.build.apply(n,t);const r=n.run.apply(n,t);return f.replaceKernel(n),r}function c(t,r,i){i.debug&&console.warn("Switching kernels");let s=null;if(i.signature&&!a[i.signature]&&(a[i.signature]=i),i.dynamicOutput)for(let e=t.length-1;e>=0;e--){const n=t[e];"outputPrecisionMismatch"===n.type&&(s=n.needed)}const o=i.constructor,u=o.getArgumentTypes(i,r),h=o.getSignature(i,u),p=a[h];if(p)return p.onActivate(i),p;const m=a[h]=new o(e,{argumentTypes:u,constantTypes:i.constantTypes,graphical:i.graphical,loopMaxIterations:i.loopMaxIterations,constants:i.constants,dynamicOutput:i.dynamicOutput,dynamicArgument:i.dynamicArguments,context:i.context,canvas:i.canvas,output:s||i.output,precision:i.precision,pipeline:i.pipeline,immutable:i.immutable,optimizeFloatMemory:i.optimizeFloatMemory,fixIntegerDivisionAccuracy:i.fixIntegerDivisionAccuracy,functions:i.functions,nativeFunctions:i.nativeFunctions,injectedNative:i.injectedNative,subKernels:i.subKernels,strictIntegers:i.strictIntegers,debug:i.debug,gpu:i.gpu,validate:d,returnType:i.returnType,tactic:i.tactic,onRequestFallback:l,onRequestSwitchKernel:c,texture:i.texture,mappedTextures:i.mappedTextures,drawBuffersMap:i.drawBuffersMap});return m.build.apply(m,r),f.replaceKernel(m),n.push(m),m}t&&"object"===typeof t.argumentTypes&&(o.argumentTypes=Object.keys(t.argumentTypes).map((e=>t.argumentTypes[e])));const h=Object.assign({context:this.context,canvas:this.canvas,functions:this.functions,nativeFunctions:this.nativeFunctions,injectedNative:this.injectedNative,gpu:this,validate:d,onRequestFallback:l,onRequestSwitchKernel:c},o),p=new this.Kernel(e,h),f=u(p);return this.canvas||(this.canvas=p.canvas),this.context||(this.context=p.context),n.push(p),f}createKernelMap(){let e,t;const n=typeof arguments[arguments.length-2];if("function"===n||"string"===n?(e=arguments[arguments.length-2],t=arguments[arguments.length-1]):e=arguments[arguments.length-1],"dev"!==this.mode&&(!this.Kernel.isSupported||!this.Kernel.features.kernelMap)&&this.mode&&h.indexOf(this.mode)<0)throw new Error(`kernelMap not supported on ${this.Kernel.name}`);const r=m(t);if(t&&"object"===typeof t.argumentTypes&&(r.argumentTypes=Object.keys(t.argumentTypes).map((e=>t.argumentTypes[e]))),Array.isArray(arguments[0])){r.subKernels=[];const e=arguments[0];for(let t=0;t<e.length;t++){const n=e[t].toString(),s=i.getFunctionNameFromString(n);r.subKernels.push({name:s,source:n,property:t})}}else{r.subKernels=[];const e=arguments[0];for(let t in e){if(!e.hasOwnProperty(t))continue;const n=e[t].toString(),s=i.getFunctionNameFromString(n);r.subKernels.push({name:s||t,source:n,property:t})}}return this.createKernel(e,r)}combineKernels(){const e=arguments[arguments.length-1];if("cpu"===arguments[0].kernel.constructor.mode)return e;const t=arguments[0].canvas,n=arguments[0].context,r=arguments.length-1;for(let i=0;i<r;i++)arguments[i].setCanvas(t).setContext(n).setPipeline(!0);return function(){const t=e.apply(this,arguments);return t.toArray?t.toArray():t}}setFunctions(e){return this.functions=e,this}setNativeFunctions(e){return this.nativeFunctions=e,this}addFunction(e,t){return this.functions.push({source:e,settings:t}),this}addNativeFunction(e,t,n){if(this.kernels.length>0)throw new Error('Cannot call "addNativeFunction" after "createKernels" has been called.');return this.nativeFunctions.push(Object.assign({name:e,source:t},n)),this}injectNative(e){return this.injectedNative=e,this}destroy(){return new Promise(((e,t)=>{this.kernels||e(),setTimeout((()=>{try{for(let t=0;t<this.kernels.length;t++)this.kernels[t].destroy(!0);let e=this.kernels[0];e&&(e.kernel&&(e=e.kernel),e.constructor.destroyContext&&e.constructor.destroyContext(this.context))}catch(n){t(n)}e()}),0)}))}}function m(e){if(!e)return{};const t=Object.assign({},e);return e.hasOwnProperty("floatOutput")&&(i.warnDeprecated("setting","floatOutput","precision"),t.precision=e.floatOutput?"single":"unsigned"),e.hasOwnProperty("outputToTexture")&&(i.warnDeprecated("setting","outputToTexture","pipeline"),t.pipeline=Boolean(e.outputToTexture)),e.hasOwnProperty("outputImmutable")&&(i.warnDeprecated("setting","outputImmutable","immutable"),t.immutable=Boolean(e.outputImmutable)),e.hasOwnProperty("floatTextures")&&(i.warnDeprecated("setting","floatTextures","optimizeFloatMemory"),t.optimizeFloatMemory=Boolean(e.floatTextures)),t}t.exports={GPU:f,kernelOrder:c,kernelTypes:h}},{"./backend/cpu/kernel":8,"./backend/headless-gl/kernel":34,"./backend/kernel":36,"./backend/web-gl/kernel":70,"./backend/web-gl2/kernel":105,"./kernel-run-shortcut":111,"./utils":114,"gpu-mock.js":4}],109:[function(e,t,n){const{GPU:r}=e("./gpu"),{alias:i}=e("./alias"),{utils:s}=e("./utils"),{Input:a,input:o}=e("./input"),{Texture:l}=e("./texture"),{FunctionBuilder:u}=e("./backend/function-builder"),{FunctionNode:c}=e("./backend/function-node"),{CPUFunctionNode:h}=e("./backend/cpu/function-node"),{CPUKernel:p}=e("./backend/cpu/kernel"),{HeadlessGLKernel:d}=e("./backend/headless-gl/kernel"),{WebGLFunctionNode:f}=e("./backend/web-gl/function-node"),{WebGLKernel:m}=e("./backend/web-gl/kernel"),{kernelValueMaps:g}=e("./backend/web-gl/kernel-value-maps"),{WebGL2FunctionNode:y}=e("./backend/web-gl2/function-node"),{WebGL2Kernel:b}=e("./backend/web-gl2/kernel"),{kernelValueMaps:x}=e("./backend/web-gl2/kernel-value-maps"),{GLKernel:v}=e("./backend/gl/kernel"),{Kernel:w}=e("./backend/kernel"),{FunctionTracer:S}=e("./backend/function-tracer"),k=e("./plugins/math-random-uniformly-distributed");t.exports={alias:i,CPUFunctionNode:h,CPUKernel:p,GPU:r,FunctionBuilder:u,FunctionNode:c,HeadlessGLKernel:d,Input:a,input:o,Texture:l,utils:s,WebGL2FunctionNode:y,WebGL2Kernel:b,webGL2KernelValueMaps:x,WebGLFunctionNode:f,WebGLKernel:m,webGLKernelValueMaps:g,GLKernel:v,Kernel:w,FunctionTracer:S,plugins:{mathRandom:k}}},{"./alias":5,"./backend/cpu/function-node":6,"./backend/cpu/kernel":8,"./backend/function-builder":9,"./backend/function-node":10,"./backend/function-tracer":11,"./backend/gl/kernel":13,"./backend/headless-gl/kernel":34,"./backend/kernel":36,"./backend/web-gl/function-node":38,"./backend/web-gl/kernel":70,"./backend/web-gl/kernel-value-maps":39,"./backend/web-gl2/function-node":73,"./backend/web-gl2/kernel":105,"./backend/web-gl2/kernel-value-maps":74,"./gpu":108,"./input":110,"./plugins/math-random-uniformly-distributed":112,"./texture":113,"./utils":114}],110:[function(e,t,n){class r{constructor(e,t){this.value=e,Array.isArray(t)?this.size=t:(this.size=new Int32Array(3),t.z?this.size=new Int32Array([t.x,t.y,t.z]):t.y?this.size=new Int32Array([t.x,t.y]):this.size=new Int32Array([t.x]));const[n,r,i]=this.size;if(i){if(this.value.length!==n*r*i)throw new Error(`Input size ${this.value.length} does not match ${n} * ${r} * ${i} = ${r*n*i}`)}else if(r){if(this.value.length!==n*r)throw new Error(`Input size ${this.value.length} does not match ${n} * ${r} = ${r*n}`)}else if(this.value.length!==n)throw new Error(`Input size ${this.value.length} does not match ${n}`)}toArray(){const{utils:t}=e("./utils"),[n,r,i]=this.size;return i?t.erectMemoryOptimized3DFloat(this.value.subarray?this.value:new Float32Array(this.value),n,r,i):r?t.erectMemoryOptimized2DFloat(this.value.subarray?this.value:new Float32Array(this.value),n,r):this.value}}function i(e,t){return new r(e,t)}t.exports={Input:r,input:i}},{"./utils":114}],111:[function(e,t,n){const{utils:r}=e("./utils");function i(e){let t=function(){return e.build.apply(e,arguments),t=function(){let t=e.run.apply(e,arguments);if(e.switchingKernels){const r=e.resetSwitchingKernels(),i=e.onRequestSwitchKernel(r,arguments,e);n.kernel=e=i,t=i.run.apply(i,arguments)}return e.renderKernels?e.renderKernels():e.renderOutput?e.renderOutput():t},t.apply(e,arguments)};const n=function(){return t.apply(e,arguments)};return n.exec=function(){return new Promise(((e,n)=>{try{e(t.apply(this,arguments))}catch(r){n(r)}}))},n.replaceKernel=function(t){s(e=t,n)},s(e,n),n}function s(e,t){if(t.kernel)return void(t.kernel=e);const n=r.allPropertiesOf(e);for(let r=0;r<n.length;r++){const i=n[r];"_"===i[0]&&"_"===i[1]||("function"===typeof e[i]?"add"===i.substring(0,3)||"set"===i.substring(0,3)?t[i]=function(){return t.kernel[i].apply(t.kernel,arguments),t}:t[i]=function(){return t.kernel[i].apply(t.kernel,arguments)}:(t.__defineGetter__(i,(()=>t.kernel[i])),t.__defineSetter__(i,(e=>{t.kernel[i]=e}))))}t.kernel=e}t.exports={kernelRunShortcut:i}},{"./utils":114}],112:[function(e,t,n){const r={name:"math-random-uniformly-distributed",onBeforeRun:e=>{e.setUniform1f("randomSeed1",Math.random()),e.setUniform1f("randomSeed2",Math.random())},functionMatch:"Math.random()",functionReplace:"nrand(vTexCoord)",functionReturnType:"Number",source:"// https://www.shadertoy.com/view/4t2SDh\n//note: uniformly distributed, normalized rand, [0,1]\nhighp float randomSeedShift = 1.0;\nhighp float slide = 1.0;\nuniform highp float randomSeed1;\nuniform highp float randomSeed2;\n\nhighp float nrand(highp vec2 n) {\n  highp float result = fract(sin(dot((n.xy + 1.0) * vec2(randomSeed1 * slide, randomSeed2 * randomSeedShift), vec2(12.9898, 78.233))) * 43758.5453);\n  randomSeedShift = result;\n  if (randomSeedShift > 0.5) {\n    slide += 0.00009; \n  } else {\n    slide += 0.0009;\n  }\n  return result;\n}"};t.exports=r},{}],113:[function(e,t,n){class r{constructor(e){const{texture:t,size:n,dimensions:r,output:i,context:s,type:a="NumberTexture",kernel:o,internalFormat:l,textureFormat:u}=e;if(!i)throw new Error('settings property "output" required.');if(!s)throw new Error('settings property "context" required.');if(!t)throw new Error('settings property "texture" required.');if(!o)throw new Error('settings property "kernel" required.');this.texture=t,t._refs?t._refs++:t._refs=1,this.size=n,this.dimensions=r,this.output=i,this.context=s,this.kernel=o,this.type=a,this._deleted=!1,this.internalFormat=l,this.textureFormat=u}toArray(){throw new Error(`Not implemented on ${this.constructor.name}`)}clone(){throw new Error(`Not implemented on ${this.constructor.name}`)}delete(){throw new Error(`Not implemented on ${this.constructor.name}`)}clear(){throw new Error(`Not implemented on ${this.constructor.name}`)}}t.exports={Texture:r}},{}],114:[function(e,t,n){const r=e("acorn"),{Input:i}=e("./input"),{Texture:s}=e("./texture"),a=/function ([^(]*)/,o=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,l=/([^\s,]+)/g,u={systemEndianness:()=>d,getSystemEndianness(){const e=new ArrayBuffer(4),t=new Uint32Array(e),n=new Uint8Array(e);if(t[0]=3735928559,239===n[0])return"LE";if(222===n[0])return"BE";throw new Error("unknown endianness")},isFunction:e=>"function"===typeof e,isFunctionString:e=>"string"===typeof e&&"function"===e.slice(0,8).toLowerCase(),getFunctionNameFromString(e){const t=a.exec(e);return t&&0!==t.length?t[1].trim():null},getFunctionBodyFromString:e=>e.substring(e.indexOf("{")+1,e.lastIndexOf("}")),getArgumentNamesFromString(e){const t=e.replace(o,"");let n=t.slice(t.indexOf("(")+1,t.indexOf(")")).match(l);return null===n&&(n=[]),n},clone(e){if(null===e||"object"!==typeof e||e.hasOwnProperty("isActiveClone"))return e;const t=e.constructor();for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e.isActiveClone=null,t[n]=u.clone(e[n]),delete e.isActiveClone);return t},isArray:e=>!isNaN(e.length),getVariableType(e,t){if(u.isArray(e))return e.length>0&&"IMG"===e[0].nodeName?"HTMLImageArray":"Array";switch(e.constructor){case Boolean:return"Boolean";case Number:return t&&Number.isInteger(e)?"Integer":"Float";case s:return e.type;case i:return"Input"}if("nodeName"in e)switch(e.nodeName){case"IMG":case"CANVAS":return"HTMLImage";case"VIDEO":return"HTMLVideo"}else{if(e.hasOwnProperty("type"))return e.type;if("undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas)return"OffscreenCanvas";if("undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap)return"ImageBitmap";if("undefined"!==typeof ImageData&&e instanceof ImageData)return"ImageData"}return"Unknown"},getKernelTextureSize(e,t){let[n,r,i]=t,s=(n||1)*(r||1)*(i||1);return e.optimizeFloatMemory&&"single"===e.precision&&(n=s=Math.ceil(s/4)),r>1&&n*r===s?new Int32Array([n,r]):u.closestSquareDimensions(s)},closestSquareDimensions(e){const t=Math.sqrt(e);let n=Math.ceil(t),r=Math.floor(t);for(;n*r<e;)n--,r=Math.ceil(e/n);return new Int32Array([r,Math.ceil(e/r)])},getMemoryOptimizedFloatTextureSize(e,t){const n=u.roundTo((e[0]||1)*(e[1]||1)*(e[2]||1)*(e[3]||1),4)/t;return u.closestSquareDimensions(n)},getMemoryOptimizedPackedTextureSize(e,t){const[n,r,i]=e,s=u.roundTo((n||1)*(r||1)*(i||1),4)/(4/t);return u.closestSquareDimensions(s)},roundTo:(e,t)=>Math.floor((e+t-1)/t)*t,getDimensions(e,t){let n;if(u.isArray(e)){const t=[];let r=e;for(;u.isArray(r);)t.push(r.length),r=r[0];n=t.reverse()}else if(e instanceof s)n=e.output;else{if(!(e instanceof i))throw new Error(`Unknown dimensions of ${e}`);n=e.size}if(t)for(n=Array.from(n);n.length<3;)n.push(1);return new Int32Array(n)},flatten2dArrayTo(e,t){let n=0;for(let r=0;r<e.length;r++)t.set(e[r],n),n+=e[r].length},flatten3dArrayTo(e,t){let n=0;for(let r=0;r<e.length;r++)for(let i=0;i<e[r].length;i++)t.set(e[r][i],n),n+=e[r][i].length},flatten4dArrayTo(e,t){let n=0;for(let r=0;r<e.length;r++)for(let i=0;i<e[r].length;i++)for(let s=0;s<e[r][i].length;s++)t.set(e[r][i][s],n),n+=e[r][i][s].length},flattenTo(e,t){u.isArray(e[0])?u.isArray(e[0][0])?u.isArray(e[0][0][0])?u.flatten4dArrayTo(e,t):u.flatten3dArrayTo(e,t):u.flatten2dArrayTo(e,t):t.set(e)},splitArray(e,t){const n=[];for(let r=0;r<e.length;r+=t)n.push(new e.constructor(e.buffer,4*r+e.byteOffset,t));return n},getAstString(e,t){const n=Array.isArray(e)?e:e.split(/\r?\n/g),r=t.loc.start,i=t.loc.end,s=[];if(r.line===i.line)s.push(n[r.line-1].substring(r.column,i.column));else{s.push(n[r.line-1].slice(r.column));for(let e=r.line;e<i.line;e++)s.push(n[e]);s.push(n[i.line-1].slice(0,i.column))}return s.join("\n")},allPropertiesOf(e){const t=[];do{t.push.apply(t,Object.getOwnPropertyNames(e))}while(e=Object.getPrototypeOf(e));return t},linesToString:e=>e.length>0?e.join(";\n")+";\n":"\n",warnDeprecated(e,t,n){n?console.warn(`You are using a deprecated ${e} "${t}". It has been replaced with "${n}". Fixing, but please upgrade as it will soon be removed.`):console.warn(`You are using a deprecated ${e} "${t}". It has been removed. Fixing, but please upgrade as it will soon be removed.`)},flipPixels:(e,t,n)=>{const r=n/2|0,i=4*t,s=new Uint8ClampedArray(4*t),a=e.slice(0);for(let o=0;o<r;++o){const e=o*i,t=(n-o-1)*i;s.set(a.subarray(e,e+i)),a.copyWithin(e,t,t+i),a.set(s,t)}return a},erectPackedFloat:(e,t)=>e.subarray(0,t),erect2DPackedFloat:(e,t,n)=>{const r=new Array(n);for(let i=0;i<n;i++){const n=i*t,s=n+t;r[i]=e.subarray(n,s)}return r},erect3DPackedFloat:(e,t,n,r)=>{const i=new Array(r);for(let s=0;s<r;s++){const r=new Array(n);for(let i=0;i<n;i++){const a=s*n*t+i*t,o=a+t;r[i]=e.subarray(a,o)}i[s]=r}return i},erectMemoryOptimizedFloat:(e,t)=>e.subarray(0,t),erectMemoryOptimized2DFloat:(e,t,n)=>{const r=new Array(n);for(let i=0;i<n;i++){const n=i*t;r[i]=e.subarray(n,n+t)}return r},erectMemoryOptimized3DFloat:(e,t,n,r)=>{const i=new Array(r);for(let s=0;s<r;s++){const r=new Array(n);for(let i=0;i<n;i++){const a=s*n*t+i*t;r[i]=e.subarray(a,a+t)}i[s]=r}return i},erectFloat:(e,t)=>{const n=new Float32Array(t);let r=0;for(let i=0;i<t;i++)n[i]=e[r],r+=4;return n},erect2DFloat:(e,t,n)=>{const r=new Array(n);let i=0;for(let s=0;s<n;s++){const n=new Float32Array(t);for(let r=0;r<t;r++)n[r]=e[i],i+=4;r[s]=n}return r},erect3DFloat:(e,t,n,r)=>{const i=new Array(r);let s=0;for(let a=0;a<r;a++){const r=new Array(n);for(let i=0;i<n;i++){const n=new Float32Array(t);for(let r=0;r<t;r++)n[r]=e[s],s+=4;r[i]=n}i[a]=r}return i},erectArray2:(e,t)=>{const n=new Array(t),r=4*t;let i=0;for(let s=0;s<r;s+=4)n[i++]=e.subarray(s,s+2);return n},erect2DArray2:(e,t,n)=>{const r=new Array(n),i=4*t;for(let s=0;s<n;s++){const n=new Array(t),a=s*i;let o=0;for(let t=0;t<i;t+=4)n[o++]=e.subarray(t+a,t+a+2);r[s]=n}return r},erect3DArray2:(e,t,n,r)=>{const i=4*t,s=new Array(r);for(let a=0;a<r;a++){const r=new Array(n);for(let s=0;s<n;s++){const o=new Array(t),l=a*i*n+s*i;let u=0;for(let t=0;t<i;t+=4)o[u++]=e.subarray(t+l,t+l+2);r[s]=o}s[a]=r}return s},erectArray3:(e,t)=>{const n=new Array(t),r=4*t;let i=0;for(let s=0;s<r;s+=4)n[i++]=e.subarray(s,s+3);return n},erect2DArray3:(e,t,n)=>{const r=4*t,i=new Array(n);for(let s=0;s<n;s++){const n=new Array(t),a=s*r;let o=0;for(let t=0;t<r;t+=4)n[o++]=e.subarray(t+a,t+a+3);i[s]=n}return i},erect3DArray3:(e,t,n,r)=>{const i=4*t,s=new Array(r);for(let a=0;a<r;a++){const r=new Array(n);for(let s=0;s<n;s++){const o=new Array(t),l=a*i*n+s*i;let u=0;for(let t=0;t<i;t+=4)o[u++]=e.subarray(t+l,t+l+3);r[s]=o}s[a]=r}return s},erectArray4:(e,t)=>{const n=new Array(e),r=4*t;let i=0;for(let s=0;s<r;s+=4)n[i++]=e.subarray(s,s+4);return n},erect2DArray4:(e,t,n)=>{const r=4*t,i=new Array(n);for(let s=0;s<n;s++){const n=new Array(t),a=s*r;let o=0;for(let t=0;t<r;t+=4)n[o++]=e.subarray(t+a,t+a+4);i[s]=n}return i},erect3DArray4:(e,t,n,r)=>{const i=4*t,s=new Array(r);for(let a=0;a<r;a++){const r=new Array(n);for(let s=0;s<n;s++){const o=new Array(t),l=a*i*n+s*i;let u=0;for(let t=0;t<i;t+=4)o[u++]=e.subarray(t+l,t+l+4);r[s]=o}s[a]=r}return s},flattenFunctionToString:(e,t)=>{const{findDependency:n,thisLookup:i,doNotDefine:s}=t;let a=t.flattened;a||(a=t.flattened={});const o=r.parse(e),l=[];let c=0;function h(e){if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++)t.push(h(e[n]));return t.join("")}switch(e.type){case"Program":return h(e.body)+("VariableDeclaration"===e.body[0].type?";":"");case"FunctionDeclaration":return`function ${e.id.name}(${e.params.map(h).join(", ")}) ${h(e.body)}`;case"BlockStatement":{const t=[];c+=2;for(let n=0;n<e.body.length;n++){const r=h(e.body[n]);r&&t.push(" ".repeat(c)+r,";\n")}return c-=2,`{\n${t.join("")}}`}case"VariableDeclaration":const t=u.normalizeDeclarations(e).map(h).filter((e=>null!==e));return t.length<1?"":`${e.kind} ${t.join(",")}`;case"VariableDeclarator":return e.init.object&&"ThisExpression"===e.init.object.type?i(e.init.property.name,!0)?`${e.id.name} = ${h(e.init)}`:null:`${e.id.name} = ${h(e.init)}`;case"CallExpression":if("subarray"===e.callee.property.name)return`${h(e.callee.object)}.${h(e.callee.property)}(${e.arguments.map((e=>h(e))).join(", ")})`;if("gl"===e.callee.object.name||"context"===e.callee.object.name)return`${h(e.callee.object)}.${h(e.callee.property)}(${e.arguments.map((e=>h(e))).join(", ")})`;if("ThisExpression"===e.callee.object.type)return l.push(n("this",e.callee.property.name)),`${e.callee.property.name}(${e.arguments.map((e=>h(e))).join(", ")})`;if(e.callee.object.name){const t=n(e.callee.object.name,e.callee.property.name);return null===t?`${e.callee.object.name}.${e.callee.property.name}(${e.arguments.map((e=>h(e))).join(", ")})`:(l.push(t),`${e.callee.property.name}(${e.arguments.map((e=>h(e))).join(", ")})`)}if("MemberExpression"===e.callee.object.type)return`${h(e.callee.object)}.${e.callee.property.name}(${e.arguments.map((e=>h(e))).join(", ")})`;throw new Error("unknown ast.callee");case"ReturnStatement":return`return ${h(e.argument)}`;case"BinaryExpression":return`(${h(e.left)}${e.operator}${h(e.right)})`;case"UnaryExpression":return e.prefix?`${e.operator} ${h(e.argument)}`:`${h(e.argument)} ${e.operator}`;case"ExpressionStatement":return`${h(e.expression)}`;case"SequenceExpression":return`(${h(e.expressions)})`;case"ArrowFunctionExpression":return`(${e.params.map(h).join(", ")}) => ${h(e.body)}`;case"Literal":return e.raw;case"Identifier":return e.name;case"MemberExpression":return"ThisExpression"===e.object.type?i(e.property.name):e.computed?`${h(e.object)}[${h(e.property)}]`:h(e.object)+"."+h(e.property);case"ThisExpression":return"this";case"NewExpression":return`new ${h(e.callee)}(${e.arguments.map((e=>h(e))).join(", ")})`;case"ForStatement":return`for (${h(e.init)};${h(e.test)};${h(e.update)}) ${h(e.body)}`;case"AssignmentExpression":return`${h(e.left)}${e.operator}${h(e.right)}`;case"UpdateExpression":return`${h(e.argument)}${e.operator}`;case"IfStatement":return`if (${h(e.test)}) ${h(e.consequent)}`;case"ThrowStatement":return`throw ${h(e.argument)}`;case"ObjectPattern":return e.properties.map(h).join(", ");case"ArrayPattern":return e.elements.map(h).join(", ");case"DebuggerStatement":return"debugger;";case"ConditionalExpression":return`${h(e.test)}?${h(e.consequent)}:${h(e.alternate)}`;case"Property":if("init"===e.kind)return h(e.key)}throw new Error(`unhandled ast.type of ${e.type}`)}const p=h(o);if(l.length>0){const e=[];for(let n=0;n<l.length;n++){const r=l[n];a[r]||(a[r]=!0),r&&e.push(u.flattenFunctionToString(r,t)+"\n")}return e.join("")+p}return p},normalizeDeclarations:e=>{if("VariableDeclaration"!==e.type)throw new Error('Ast is not of type "VariableDeclaration"');const t=[];for(let n=0;n<e.declarations.length;n++){const r=e.declarations[n];if(r.id&&"ObjectPattern"===r.id.type&&r.id.properties){const{properties:e}=r.id;for(let n=0;n<e.length;n++){const i=e[n];if("ObjectPattern"===i.value.type&&i.value.properties)for(let e=0;e<i.value.properties.length;e++){const n=i.value.properties[e];if("Property"!==n.type)throw new Error("unexpected state");t.push({type:"VariableDeclarator",id:{type:"Identifier",name:n.key.name},init:{type:"MemberExpression",object:{type:"MemberExpression",object:r.init,property:{type:"Identifier",name:i.key.name},computed:!1},property:{type:"Identifier",name:n.key.name},computed:!1}})}else{if("Identifier"!==i.value.type)throw new Error("unexpected state");t.push({type:"VariableDeclarator",id:{type:"Identifier",name:i.value&&i.value.name?i.value.name:i.key.name},init:{type:"MemberExpression",object:r.init,property:{type:"Identifier",name:i.key.name},computed:!1}})}}}else if(r.id&&"ArrayPattern"===r.id.type&&r.id.elements){const{elements:e}=r.id;for(let n=0;n<e.length;n++){const i=e[n];if("Identifier"!==i.type)throw new Error("unexpected state");t.push({type:"VariableDeclarator",id:{type:"Identifier",name:i.name},init:{type:"MemberExpression",object:r.init,property:{type:"Literal",value:n,raw:n.toString(),start:i.start,end:i.end},computed:!0}})}}else t.push(r)}return t},splitHTMLImageToRGB:(e,t)=>{const n=e.createKernel((function(e){return 255*e[this.thread.y][this.thread.x].r}),{output:[t.width,t.height],precision:"unsigned",argumentTypes:{a:"HTMLImage"}}),r=e.createKernel((function(e){return 255*e[this.thread.y][this.thread.x].g}),{output:[t.width,t.height],precision:"unsigned",argumentTypes:{a:"HTMLImage"}}),i=e.createKernel((function(e){return 255*e[this.thread.y][this.thread.x].b}),{output:[t.width,t.height],precision:"unsigned",argumentTypes:{a:"HTMLImage"}}),s=e.createKernel((function(e){return 255*e[this.thread.y][this.thread.x].a}),{output:[t.width,t.height],precision:"unsigned",argumentTypes:{a:"HTMLImage"}}),a=[n(t),r(t),i(t),s(t)];return a.rKernel=n,a.gKernel=r,a.bKernel=i,a.aKernel=s,a.gpu=e,a},splitRGBAToCanvases:(e,t,n,r)=>{const i=e.createKernel((function(e){const t=e[this.thread.y][this.thread.x];this.color(t.r/255,0,0,255)}),{output:[n,r],graphical:!0,argumentTypes:{v:"Array2D(4)"}});i(t);const s=e.createKernel((function(e){const t=e[this.thread.y][this.thread.x];this.color(0,t.g/255,0,255)}),{output:[n,r],graphical:!0,argumentTypes:{v:"Array2D(4)"}});s(t);const a=e.createKernel((function(e){const t=e[this.thread.y][this.thread.x];this.color(0,0,t.b/255,255)}),{output:[n,r],graphical:!0,argumentTypes:{v:"Array2D(4)"}});a(t);const o=e.createKernel((function(e){const t=e[this.thread.y][this.thread.x];this.color(255,255,255,t.a/255)}),{output:[n,r],graphical:!0,argumentTypes:{v:"Array2D(4)"}});return o(t),[i.canvas,s.canvas,a.canvas,o.canvas]},getMinifySafeName:e=>{try{const t=r.parse(`const value = ${e.toString()}`),{init:n}=t.body[0].declarations[0];return n.body.name||n.body.body[0].argument.name}catch(t){throw new Error("Unrecognized function type.  Please use `() => yourFunctionVariableHere` or function() { return yourFunctionVariableHere; }")}},sanitizeName:function(e){return c.test(e)&&(e=e.replace(c,"S_S")),h.test(e)?e=e.replace(h,"U_U"):p.test(e)&&(e=e.replace(p,"u_u")),e}},c=/\$/,h=/__/,p=/_/,d=u.getSystemEndianness();t.exports={utils:u}},{"./input":110,"./texture":113,acorn:1}]},{},[107])(107)},e.exports=n()}));const x={toTable(e){const t=e.reduce(((e,t)=>Object.assign(e,t)),{});return x.toHash(t)},toTable2D(e){const t={};let n=0;for(let r=0;r<e.length;r++){const i=e[r];for(let e=0;e<i.length;e++){const r=i[e];for(const e in r)r.hasOwnProperty(e)&&!t.hasOwnProperty(e)&&(t[e]=n++)}}return t},toInputTable2D(e){const t={};let n=0;for(let r=0;r<e.length;r++){const i=e[r].input;for(let e=0;e<i.length;e++){const r=i[e];for(const e in r)r.hasOwnProperty(e)&&(t.hasOwnProperty(e)||(t[e]=n++))}}return t},toOutputTable2D(e){const t={};let n=0;for(let r=0;r<e.length;r++){const i=e[r].output;for(let e=0;e<i.length;e++){const r=i[e];for(const e in r)r.hasOwnProperty(e)&&(t.hasOwnProperty(e)||(t[e]=n++))}}return t},toHash(e){const t={};let n=0;const r=Object.keys(e);for(let i=0;i<r.length;i++)t[r[i]]=n++;return t},toArray(e,t,n){const r=new Float32Array(n);for(const i in e)e.hasOwnProperty(i)&&(r[e[i]]=t.hasOwnProperty(i)?t[i]:0);return r},toArrayShort(e,t){const n=[];for(const r in e)if(e.hasOwnProperty(r)){if(!t.hasOwnProperty(r))break;n[e[r]]=t[r]}return Float32Array.from(n)},toArrays(e,t,n){const r=[];for(let i=0;i<t.length;i++)r.push(this.toArray(e,t[i],n));return r},toObject(e,t){const n={};for(const r in e)e.hasOwnProperty(r)&&(n[r]=t[e[r]]);return n},toObjectPartial(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const i={};let s=0;for(const a in e)e.hasOwnProperty(a)&&(n>0&&s++<n||r>0&&s++>=r||(i[a]=t[e[a]-n]));return i},dataShape(e){const t=[];let n,r;for(e.hasOwnProperty("input")?(t.push("datum"),n=e.input):Array.isArray(e)?e[0]&&e[0].input?(t.push("array","datum"),n=e[0].input):Array.isArray(e[0])?(t.push("array"),n=e[0]):n=e:n=e;n;)if(r=Object.keys(n)[0],Array.isArray(n)||"object"===typeof n.buffer){t.push("array");const e=n[parseInt(r)];if("number"===typeof e){t.push("number");break}n=e}else{if("object"!==typeof n||"object"===typeof n.buffer)throw new Error("unhandled signature");{t.push("object");const e=n[r];if("number"===typeof e){t.push("number");break}n=e}}return t},addKeys(e,t){if(Array.isArray(e))return t;let n=Object.keys(t).length;for(const r in e)e.hasOwnProperty(r)&&(t.hasOwnProperty(r)||(t[r]=n++));return t}};var v=g((function(e,t){var n=m&&m.__assign||function(){return n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.thaw=t.Block=t.Thaw=void 0;var r=function(){function e(t,r){var i=this;void 0===r&&(r={});var s=n(n({},e.defaultSettings),r),a=s.each,o=s.done;this.i=0,this.isStopped=!1,this.items=t,this.options=r,this.tick=function(){if(!i.isStopped&&(i.timeout=setTimeout(i.tick,0),!e.thawing)){var t=i.items[i.i];if(i.i>=i.items.length)return null!==o&&(e.thawing=!0,o(),e.thawing=!1),i.isStopped=!0,void clearTimeout(i.timeout);null!==a?(e.thawing=!0,a(t,i.i),e.thawing=!1):void 0!==t&&t(),i.i++}},e.thaws.push(this),r.delay||this.tick()}return Object.defineProperty(e,"isThawing",{get:function(){return e.thawing},enumerable:!1,configurable:!0}),e.stopAll=function(){for(var t=0;t<e.thaws.length;t++)e.thaws[t].stop()},e.prototype.makeReady=function(){return!!this.isStopped&&(this.isStopped=!1,!0)},e.prototype.add=function(e){return this.items.push(e),this.makeReady()&&this.tick(),this},e.prototype.insert=function(e){return this.items.splice(this.i,0,e),this.makeReady()&&this.tick(),this},e.prototype.addArray=function(e){return this.items=this.items.concat(e),this.makeReady()&&this.tick(),this},e.prototype.insertArray=function(e){var t=this.items.splice(0,this.i),n=this.items;return this.items=t.concat(e,n),this.makeReady()&&this.tick(),this},e.prototype.stop=function(){return this.isStopped=!0,clearTimeout(this.timeout),this.options.done&&this.options.done(),this},e.thawing=!1,e.thaws=[],e.defaultSettings={each:null,done:null},e}();function i(e,t){return new r(e,t)}t.Thaw=r,t.thaw=i;var s=function(){function e(e,t){void 0===t&&(t=200),this.index=0,this.thaws=[],this.count=t,this.options=e}return e.prototype.add=function(e){return this.next().add(e),this},e.prototype.addArray=function(e){return this.next().addArray(e),this},e.prototype.insert=function(e){return this.next().insert(e),this},e.prototype.insertArray=function(e){return this.next().insertArray(e),this},e.prototype.stop=function(){for(var e=0;e<this.thaws.length;e++)this.thaws[e].stop();return this},e.prototype.next=function(){var e,t=this.thaws;return t.length<this.count?(e=new r([],this.options),t.push(e)):e=t[this.index]||null,this.index++,this.index>=this.count&&(this.index=0),e},e}();t.Block=s,"undefined"!==typeof window&&(window.Thaw=r,window.thaw=i,window.Thaw.Block=s)}));function w(e){const t=[];for(let n=0;n<e.length;n++)t.push(Float32Array.from(e[n]));return t}function S(e,t){const n=[];for(let r=0;r<e.length;r++)n.push(Float32Array.from(e[r]));for(let r=0;r<t.length;r++)n.push(Float32Array.from(t[r]));return n}function k(e){const t=[];for(let n=0;n<e.length;n++)t.push(Float32Array.from([e[n]]));return t}function T(e,t){const n=[];for(let r=0;r<e.length;r++)n.push(Float32Array.from([e[r]]));for(let r=0;r<t.length;r++)n.push(Float32Array.from([t[r]]));return n}function A(e){return Float32Array.from(e)}function E(e,t,n,r,i,s){const a=[];for(let o=0;o<e.length;o++){const t=e[o],r=new Float32Array(i);for(const e in t)t.hasOwnProperty(e)&&(r[n[e]]=t[e]);a.push(r)}for(let o=0;o<t.length;o++){const e=t[o],n=new Float32Array(s);for(const t in e)e.hasOwnProperty(t)&&(n[r[t]]=e[t]);a.push(n)}return a}function _(e){const t=[];for(const n in e)e.hasOwnProperty(n)&&t.push(Float32Array.from([e[n]]));return t}function L(e,t){const n=[];for(const r in e)e.hasOwnProperty(r)&&n.push(Float32Array.from([e[r]]));for(const r in t)t.hasOwnProperty(r)&&n.push(Float32Array.from([t[r]]));return n}function C(e,t,n){const r=new Float32Array(n);for(const i in e)e.hasOwnProperty(i)&&(r[t[i]]=e[i]);return r}class I{constructor(e,t){this.prop=null,this.table={},this.length=0;const n=this.table;if(t){this.prop=t;for(let r=0;r<e.length;r++){const i=e[r][t];for(const e in i)i.hasOwnProperty(e)&&(n.hasOwnProperty(e)||(n[e]=this.length++))}}else if(Array.isArray(e)&&Array.isArray(e[0]))for(let r=0;r<e.length;r++){const t=e[r];for(let e=0;e<t.length;e++){const r=t[e];for(const e in r)r.hasOwnProperty(e)&&(n.hasOwnProperty(e)||(n[e]=this.length++))}}else for(let r=0;r<e.length;r++){const t=e[r];for(const e in t)t.hasOwnProperty(e)&&(n.hasOwnProperty(e)||(n[e]=this.length++))}}}function $(e){return Array.isArray(e)||e instanceof Float32Array?Math.max(...e):Math.max(...Object.values(e))}function O(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n]**2;return t/e.length}function R(){return.4*Math.random()-.2}function D(e,t){return Math.random()*(t-e)+e}function z(){if(z.returnV)return z.returnV=!1,z.vVal;const e=2*Math.random()-1,t=2*Math.random()-1,n=e*e+t*t;if(0===n||n>1)return z();const r=Math.sqrt(-2*Math.log(n)/n);return z.vVal=t*r,z.returnV=!0,e*r}function P(e,t){return Math.floor(Math.random()*(t-e)+e)}function M(e,t){return e+z()*t}z.returnV=!1,z.vVal=0;var N=Object.freeze({__proto__:null,randomFloat:D,gaussRandom:z,randomInteger:P,randomN:M});function F(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=new Float32Array(e);if(null===t)for(let r=0;r<e;r++)n[r]=R();else for(let r=0;r<e;r++)n[r]=D(-t,t);return n}function V(e,t,n){const r=new Array(t);for(let i=0;i<t;i++)r[i]=F(e,n);return r}function K(e,t,n,r){const i=new Array(n);for(let s=0;s<n;s++)i[s]=V(e,t,r);return i}function j(e){return new Float32Array(e)}function B(e,t){if(e.buffer instanceof ArrayBuffer)return null;if(Array.isArray(e))return A;if(!t)throw new Error("table is not Object");const{length:n}=Object.keys(t);return e=>{const r=new Float32Array(n);for(const n in t)t.hasOwnProperty(n)&&"number"===typeof e[n]&&(r[t[n]]=e[n]||0);return r}}function U(){return{inputSize:0,outputSize:0,binaryThresh:.5}}function G(){return{activation:"sigmoid",iterations:2e4,errorThresh:.005,log:!1,logPeriod:10,leakyReluAlpha:.01,learningRate:.3,momentum:.1,callbackPeriod:10,timeout:1/0,beta1:.9,beta2:.999,epsilon:1e-8}}class W{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=U(),this.trainOpts=G(),this.sizes=[],this.outputLayer=-1,this.biases=[],this.weights=[],this.outputs=[],this.deltas=[],this.changes=[],this.errors=[],this.errorCheckInterval=1,this.inputLookup=null,this.inputLookupLength=0,this.outputLookup=null,this.outputLookupLength=0,this._formatInput=null,this._formatOutput=null,this.runInput=e=>(this.setActivation(),this.runInput(e)),this.calculateDeltas=e=>(this.setActivation(),this.calculateDeltas(e)),this.biasChangesLow=[],this.biasChangesHigh=[],this.changesLow=[],this.changesHigh=[],this.iterations=0,this.options={...this.options,...e},this.updateTrainingOptions(e);const{inputSize:t,hiddenLayers:n,outputSize:r}=this.options;t&&r&&(this.sizes=[t].concat(null!==n&&void 0!==n?n:[]).concat([r]))}initialize(){if(!this.sizes.length)throw new Error("Sizes must be set before initializing");this.outputLayer=this.sizes.length-1,this.biases=new Array(this.outputLayer),this.weights=new Array(this.outputLayer),this.outputs=new Array(this.outputLayer),this.deltas=new Array(this.outputLayer),this.changes=new Array(this.outputLayer),this.errors=new Array(this.outputLayer);for(let e=0;e<=this.outputLayer;e++){const t=this.sizes[e];if(this.deltas[e]=j(t),this.errors[e]=j(t),this.outputs[e]=j(t),e>0){this.biases[e]=F(t),this.weights[e]=new Array(t),this.changes[e]=new Array(t);for(let n=0;n<t;n++){const t=this.sizes[e-1];this.weights[e][n]=F(t),this.changes[e][n]=j(t)}}}this.setActivation(),"adam"===this.trainOpts.praxis&&this._setupAdam()}setActivation(e){const t=null!==e&&void 0!==e?e:this.trainOpts.activation;switch(t){case"sigmoid":this.runInput=this._runInputSigmoid,this.calculateDeltas=this._calculateDeltasSigmoid;break;case"relu":this.runInput=this._runInputRelu,this.calculateDeltas=this._calculateDeltasRelu;break;case"leaky-relu":this.runInput=this._runInputLeakyRelu,this.calculateDeltas=this._calculateDeltasLeakyRelu;break;case"tanh":this.runInput=this._runInputTanh,this.calculateDeltas=this._calculateDeltasTanh;break;default:throw new Error(`Unknown activation ${t}. Available activations are: 'sigmoid', 'relu', 'leaky-relu', 'tanh'`)}}get isRunnable(){return this.sizes.length>0}run(e){if(!this.isRunnable)throw new Error("network not runnable");let t;t=this.inputLookup?x.toArray(this.inputLookup,e,this.inputLookupLength):e,this.validateInput(t);const n=this.runInput(t).slice(0);return this.outputLookup?x.toObject(this.outputLookup,n):n}_runInputSigmoid(e){this.outputs[0]=e;let t=null;for(let n=1;n<=this.outputLayer;n++){const r=this.sizes[n],i=this.weights[n],s=this.biases[n],a=this.outputs[n];for(let t=0;t<r;t++){const n=i[t];let r=s[t];for(let t=0;t<n.length;t++)r+=n[t]*e[t];a[t]=1/(1+Math.exp(-r))}t=e=a}if(!t)throw new Error("output was empty");return t}_runInputRelu(e){this.outputs[0]=e;let t=null;for(let n=1;n<=this.outputLayer;n++){const r=this.sizes[n],i=this.weights[n],s=this.biases[n],a=this.outputs[n];for(let t=0;t<r;t++){const n=i[t];let r=s[t];for(let t=0;t<n.length;t++)r+=n[t]*e[t];a[t]=r<0?0:r}t=e=a}if(!t)throw new Error("output was empty");return t}_runInputLeakyRelu(e){this.outputs[0]=e;const{leakyReluAlpha:t}=this.trainOpts;let n=null;for(let r=1;r<=this.outputLayer;r++){const i=this.sizes[r],s=this.weights[r],a=this.biases[r],o=this.outputs[r];for(let n=0;n<i;n++){const r=s[n];let i=a[n];for(let t=0;t<r.length;t++)i+=r[t]*e[t];o[n]=Math.max(i,t*i)}n=e=o}if(!n)throw new Error("output was empty");return n}_runInputTanh(e){this.outputs[0]=e;let t=null;for(let n=1;n<=this.outputLayer;n++){const r=this.sizes[n],i=this.weights[n],s=this.biases[n],a=this.outputs[n];for(let t=0;t<r;t++){const n=i[t];let r=s[t];for(let t=0;t<n.length;t++)r+=n[t]*e[t];a[t]=Math.tanh(r)}t=e=a}if(!t)throw new Error("output was empty");return t}verifyIsInitialized(e){this.sizes.length&&this.outputLayer>0||(this.sizes=[],this.sizes.push(e[0].input.length),this.options.hiddenLayers?this.options.hiddenLayers.forEach((e=>{this.sizes.push(e)})):this.sizes.push(Math.max(3,Math.floor(e[0].input.length/2))),this.sizes.push(e[0].output.length),this.initialize())}updateTrainingOptions(e){const t={...this.trainOpts,...e};this.validateTrainingOptions(t),this.trainOpts=t,this.setLogMethod(this.trainOpts.log)}validateTrainingOptions(e){const t={activation:()=>["sigmoid","relu","leaky-relu","tanh"].includes(e.activation),iterations:()=>{const t=e.iterations;return"number"===typeof t&&t>0},errorThresh:()=>{const t=e.errorThresh;return"number"===typeof t&&t>0&&t<1},log:()=>{const t=e.log;return"function"===typeof t||"boolean"===typeof t},logPeriod:()=>{const t=e.logPeriod;return"number"===typeof t&&t>0},leakyReluAlpha:()=>{const t=e.leakyReluAlpha;return"number"===typeof t&&t>0&&t<1},learningRate:()=>{const t=e.learningRate;return"number"===typeof t&&t>0&&t<1},momentum:()=>{const t=e.momentum;return"number"===typeof t&&t>0&&t<1},callback:()=>{const t=e.callback;return"function"===typeof t||void 0===t},callbackPeriod:()=>{const t=e.callbackPeriod;return"number"===typeof t&&t>0},timeout:()=>{const t=e.timeout;return"number"===typeof t&&t>0},praxis:()=>{const t=e.praxis;return!t||"adam"===t},beta1:()=>{const t=e.beta1;return t>0&&t<1},beta2:()=>{const t=e.beta2;return t>0&&t<1},epsilon:()=>{const t=e.epsilon;return t>0&&t<1}};for(const n in t){const r=e;if(!t[n]())throw new Error(`[${n}, ${r[n]}] is out of normal training range, your network will probably not train.`)}}getTrainOptsJSON(){const{activation:e,iterations:t,errorThresh:n,log:r,logPeriod:i,leakyReluAlpha:s,learningRate:a,momentum:o,callbackPeriod:l,timeout:u,praxis:c,beta1:h,beta2:p,epsilon:d}=this.trainOpts;return{activation:e,iterations:t,errorThresh:n,log:"function"===typeof r||"boolean"===typeof r&&r,logPeriod:i,leakyReluAlpha:s,learningRate:a,momentum:o,callbackPeriod:l,timeout:u===1/0?"Infinity":u,praxis:c,beta1:h,beta2:p,epsilon:d}}setLogMethod(e){this.trainOpts.log="function"===typeof e?e:!!e&&this.logTrainingStatus}logTrainingStatus(e){console.log(`iterations: ${e.iterations}, training error: ${e.error}`)}calculateTrainingError(e){let t=0;for(let n=0;n<e.length;++n)t+=this.trainPattern(e[n],!0);return t/e.length}trainPatterns(e){for(let t=0;t<e.length;++t)this.trainPattern(e[t])}trainingTick(e,t,n){const{callback:r,callbackPeriod:i,errorThresh:s,iterations:a,log:o,logPeriod:l}=this.trainOpts;return!(t.iterations>=a||t.error<=s||Date.now()>=n)&&(t.iterations++,o&&t.iterations%l===0?(t.error=this.calculateTrainingError(e),o(t)):t.iterations%this.errorCheckInterval===0?t.error=this.calculateTrainingError(e):this.trainPatterns(e),r&&t.iterations%i===0&&r({iterations:t.iterations,error:t.error}),!0)}prepTraining(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.updateTrainingOptions(t);const n=this.formatData(e),r=Date.now()+this.trainOpts.timeout,i={error:1,iterations:0};return this.verifyIsInitialized(n),this.validateData(n),{preparedData:n,status:i,endTime:r}}train(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{preparedData:n,status:r,endTime:i}=this.prepTraining(e,t);for(;this.trainingTick(n,r,i););return r}async trainAsync(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{preparedData:n,status:r,endTime:i}=this.prepTraining(e,t);return await new Promise(((e,t)=>{try{const t=new v.Thaw(new Array(this.trainOpts.iterations),{delay:!0,each:()=>this.trainingTick(n,r,i)||t.stop(),done:()=>e(r)});t.tick()}catch(s){t(s)}}))}trainPattern(e,t){return this.runInput(e.input),this.calculateDeltas(e.output),this.adjustWeights(),t?O(this.errors[this.outputLayer]):null}_calculateDeltasSigmoid(e){for(let t=this.outputLayer;t>=0;t--){const n=this.sizes[t],r=this.outputs[t],i=this.errors[t],s=this.deltas[t],a=this.weights[t+1];for(let o=0;o<n;o++){const n=r[o];let l=0;if(t===this.outputLayer)l=e[o]-n;else{const e=this.deltas[t+1];for(let t=0;t<e.length;t++)l+=e[t]*a[t][o]}i[o]=l,s[o]=l*n*(1-n)}}}_calculateDeltasRelu(e){for(let t=this.outputLayer;t>=0;t--){const n=this.sizes[t],r=this.outputs[t],i=this.weights[t+1],s=this.deltas[t+1],a=this.errors[t],o=this.deltas[t];for(let l=0;l<n;l++){const n=r[l];let u=0;if(t===this.outputLayer)u=e[l]-n;else for(let e=0;e<s.length;e++)u+=s[e]*i[e][l];a[l]=u,o[l]=n>0?u:0}}}_calculateDeltasLeakyRelu(e){const t=this.trainOpts.leakyReluAlpha;for(let n=this.outputLayer;n>=0;n--){const r=this.sizes[n],i=this.outputs[n],s=this.deltas[n+1],a=this.weights[n+1],o=this.errors[n],l=this.deltas[n];for(let u=0;u<r;u++){const r=i[u];let c=0;if(n===this.outputLayer)c=e[u]-r;else for(let e=0;e<s.length;e++)c+=s[e]*a[e][u];o[u]=c,l[u]=r>0?c:t*c}}}_calculateDeltasTanh(e){for(let t=this.outputLayer;t>=0;t--){const n=this.sizes[t],r=this.outputs[t],i=this.deltas[t+1],s=this.weights[t+1],a=this.errors[t],o=this.deltas[t];for(let l=0;l<n;l++){const n=r[l];let u=0;if(t===this.outputLayer)u=e[l]-n;else for(let e=0;e<i.length;e++)u+=i[e]*s[e][l];a[l]=u,o[l]=(1-n*n)*u}}}adjustWeights(){const{learningRate:e,momentum:t}=this.trainOpts;for(let n=1;n<=this.outputLayer;n++){const r=this.outputs[n-1],i=this.sizes[n],s=this.deltas[n],a=this.changes[n],o=this.weights[n],l=this.biases[n];for(let n=0;n<i;n++){const i=s[n];for(let s=0;s<r.length;s++){let l=a[n][s];l=e*i*r[s]+t*l,a[n][s]=l,o[n][s]+=l}l[n]+=e*i}}}_setupAdam(){this.biasChangesLow=[],this.biasChangesHigh=[],this.changesLow=[],this.changesHigh=[],this.iterations=0;for(let e=0;e<=this.outputLayer;e++){const t=this.sizes[e];if(e>0){this.biasChangesLow[e]=j(t),this.biasChangesHigh[e]=j(t),this.changesLow[e]=new Array(t),this.changesHigh[e]=new Array(t);for(let n=0;n<t;n++){const t=this.sizes[e-1];this.changesLow[e][n]=j(t),this.changesHigh[e][n]=j(t)}}}this.adjustWeights=this._adjustWeightsAdam}_adjustWeightsAdam(){this.iterations++;const{iterations:e}=this,{beta1:t,beta2:n,epsilon:r,learningRate:i}=this.trainOpts;for(let s=1;s<=this.outputLayer;s++){const a=this.outputs[s-1],o=this.sizes[s],l=this.deltas[s],u=this.changesLow[s],c=this.changesHigh[s],h=this.weights[s],p=this.biases[s],d=this.biasChangesLow[s],f=this.biasChangesHigh[s];for(let s=0;s<o;s++){const o=l[s];for(let l=0;l<a.length;l++){const p=o*a[l],d=u[s][l]*t+(1-t)*p,f=c[s][l]*n+(1-n)*p*p,m=d/(1-Math.pow(t,e)),g=f/(1-Math.pow(n,e));u[s][l]=d,c[s][l]=f,h[s][l]+=i*m/(Math.sqrt(g)+r)}const m=l[s],g=d[s]*t+(1-t)*m,y=f[s]*n+(1-n)*m*m,b=d[s]/(1-Math.pow(t,e)),x=f[s]/(1-Math.pow(n,e));d[s]=g,f[s]=y,p[s]+=i*b/(Math.sqrt(x)+r)}}}validateData(e){const t=this.sizes[0],n=this.sizes[this.sizes.length-1],{length:r}=e;for(let i=0;i<r;i++){const{input:r,output:s}=e[i];if(r.length!==t)throw new Error(`input at index ${i} length ${r.length} must be ${t}`);if(e[i].output.length!==n)throw new Error(`output at index ${i} length ${s.length} must be ${n}`)}}validateInput(e){const t=this.sizes[0];if(e.length!==t)throw new Error(`input length ${e.length} must match options.inputSize of ${t}`)}formatData(e){if(!Array.isArray(e[0].input))if(this.inputLookup)this.inputLookupLength=Object.keys(this.inputLookup).length;else{const t=new I(e,"input");this.inputLookup=t.table,this.inputLookupLength=t.length}if(!Array.isArray(e[0].output))if(this.outputLookup)this.outputLookupLength=Object.keys(this.outputLookup).length;else{const t=new I(e,"output");this.outputLookup=t.table,this.outputLookupLength=t.length}if(this._formatInput||(this._formatInput=B(e[0].input,this.inputLookup)),this._formatOutput||(this._formatOutput=B(e[0].output,this.outputLookup)),this._formatInput&&this._formatOutput){const t=[];for(let n=0;n<e.length;n++)t.push({input:this._formatInput(e[n].input),output:this._formatOutput(e[n].output)});return t}if(this._formatInput){const t=[];for(let n=0;n<e.length;n++)t.push({input:this._formatInput(e[n].input),output:e[n].output});return t}if(this._formatOutput){const t=[];for(let n=0;n<e.length;n++)t.push({input:e[n].input,output:this._formatOutput(e[n].output)});return t}return e}addFormat(e){var t,n;Array.isArray(e.input)&&"number"===typeof e.input[0]||(this.inputLookup=x.addKeys(e.input,null!==(t=this.inputLookup)&&void 0!==t?t:{}),this.inputLookup&&(this.inputLookupLength=Object.keys(this.inputLookup).length)),Array.isArray(e.output)&&"number"===typeof e.output[0]||(this.outputLookup=x.addKeys(e.output,null!==(n=this.outputLookup)&&void 0!==n?n:{}),this.outputLookup&&(this.outputLookupLength=Object.keys(this.outputLookup).length))}test(e){const{preparedData:t}=this.prepTraining(e),n=[];let r=0;if(1===t[0].output.length){let e=0,i=0,s=0,a=0;for(let o=0;o<t.length;o++){const l=this.runInput(t[o].input),u=t[o].output,c=l[0]>this.options.binaryThresh?1:0,h=u[0];if(c!==h){const e=t[o];n.push({input:e.input,output:e.output,actual:c,expected:h})}0===c&&0===h?a++:1===c&&1===h?s++:0===c&&1===h?i++:1===c&&0===h&&e++,r+=O(l.map(((e,t)=>u[t]-e)))}return{error:r/t.length,misclasses:n,total:t.length,trueNeg:a,truePos:s,falseNeg:i,falsePos:e,precision:s>0?s/(s+e):0,recall:s>0?s/(s+i):0,accuracy:(a+s)/t.length}}for(let i=0;i<t.length;i++){const e=this.runInput(t[i].input),s=t[i].output,a=e.indexOf($(e)),o=s.indexOf($(s));if(a!==o){const e=t[i];n.push({input:e.input,output:e.output,actual:a,expected:o})}r+=O(e.map(((e,t)=>s[t]-e)))}return{error:r/t.length,misclasses:n,total:t.length}}toJSON(){var e,t;this.isRunnable||this.initialize();const n=this.weights.map((e=>e.map((e=>Array.from(e))))),r=this.biases.map((e=>Array.from(e))),i=[],s=this.sizes.length-1;for(let a=0;a<=s;a++)i.push({weights:null!==(e=n[a])&&void 0!==e?e:[],biases:null!==(t=r[a])&&void 0!==t?t:[]});return{type:"NeuralNetwork",sizes:[...this.sizes],layers:i,inputLookup:this.inputLookup?{...this.inputLookup}:null,inputLookupLength:this.inputLookupLength,outputLookup:this.outputLookup?{...this.outputLookup}:null,outputLookupLength:this.outputLookupLength,options:{...this.options},trainOpts:this.getTrainOptsJSON()}}fromJSON(e){if(this.options={...U(),...e.options},e.hasOwnProperty("trainOpts")){const t={...e.trainOpts,timeout:"Infinity"===e.trainOpts.timeout?1/0:e.trainOpts.timeout};this.updateTrainingOptions(t)}this.sizes=e.sizes,this.initialize(),this.inputLookup=e.inputLookup?{...e.inputLookup}:null,this.inputLookupLength=e.inputLookupLength,this.outputLookup=e.outputLookup?{...e.outputLookup}:null,this.outputLookupLength=e.outputLookupLength;const t=e.layers,n=this.weights.map(((e,n)=>t[n].weights.map((e=>Float32Array.from(e))))),r=this.biases.map(((e,n)=>Float32Array.from(t[n].biases)));for(let i=0;i<=this.outputLayer;i++)this.weights[i]=n[i]||[],this.biases[i]=r[i]||[];return this}toFunction(e){const{activation:t,leakyReluAlpha:n}=this.trainOpts;let r=!1;const i=(e,s)=>{if(0===e)return`(input[${s}]||0)`;const a=this.weights[e][s],o=this.biases[e][s];if(!a)throw new Error(`weights at layerIndex ${e} & nodeIndex ${s} not found`);if(!o)throw new Error(`bias as layerIndex ${e} & nodeIndex ${s} not found`);const l=[];a.forEach(((t,n)=>{t<0?l.push(`${t}*${i(e-1,n)}`):l.push(`+${t}*${i(e-1,n)}`)}));const u=`(${o.toString()}${l.join("")})`;switch(t){case"sigmoid":return`1/(1+1/Math.exp(${u}))`;case"relu":return r=!0,`((v=${u})<0?0:v)`;case"leaky-relu":return r=!0,`Math.max((v=${u}),${n}*v)`;case"tanh":return`Math.tanh(${u})`;default:throw new Error(`Unknown activation ${t}. Available activations are: 'sigmoid', 'relu', 'leaky-relu', 'tanh'`)}};function s(e){if(e.find((e=>e.includes('"'))))throw new Error("key contains '\"', which is not compatible")}const a=[];let o,l="";if(this.inputLookup&&(s(Object.keys(this.inputLookup)),l=`input = new Float32Array([${Object.keys(this.inputLookup).map((e=>`input["${e}"]`)).join(",")}]);`),this.sizes.length<1)throw new Error("No layers");for(let c=0;c<this.sizes[this.outputLayer];c++)a.push(i(this.outputLayer,c));if(this.outputLookup){const e=Object.keys(this.outputLookup);s(e),o=`{${e.map(((e,t)=>`"${e}":${a[t]}`)).join(",")}}`}else o=`[${a.join(",")}]`;const u=`${l}${r?"var v;":""}return ${o};`;return new Function("input",e?e(u):u)}}let H=null;function X(e){H=e}function q(e,t){let n=H;return null===n&&(n=new b.GPU({mode:"gpu"}),X(n)),n.createKernel(e,t).setPipeline(!0)}function Y(e,t,n){let r=H;return null===r&&(r=new b.GPU({mode:"gpu"}),X(r)),r.createKernelMap(e,t,n).setPipeline(!0)}function J(e,t){return new b.Input(e,t)}function Q(e){e instanceof b.Texture&&e.delete()}function Z(e){if(e instanceof b.Texture)e.clear();else{if(Array.isArray(e))if("number"===typeof e[0])e.fill(0);else{if("number"===typeof e[0][0]){for(let t=0;t<e.length;t++)e[t].fill(0);return}if("number"===typeof e[0][0][0]){for(let t=0;t<e.length;t++){const n=e[t];for(let e=0;e<n.length;e++)n[e].fill(0)}return}}if(!(e instanceof Float32Array))throw new Error("unhandled value");e.fill(0)}}function ee(e){if(e instanceof b.Texture)return e.clone();if(e instanceof Float32Array)return e.slice(0);if(Array.isArray(e)){if("number"===typeof e[0])return e.slice(0);if("number"===typeof e[0][0]){const t=new Array(e.length);for(let n=0;n<e.length;n++)t[n]=e[n].slice(0);return t}if("number"===typeof e[0][0][0]){const t=new Array(e.length);for(let n=0;n<e.length;n++){const t=e[n],r=new Array(t.length);for(let e=0;e<t.length;e++)r[e]=t[e].slice(0)}return t}}throw new Error("unhandled value")}function te(e,t,n){let r=t[this.thread.x];for(let i=0;i<this.constants.size;i++)r+=e[this.thread.x][i]*n[i];return 1/(1+Math.exp(-r))}function ne(e,t,n){let r=t[this.thread.x];for(let i=0;i<this.constants.size;i++)r+=e[this.thread.x][i]*n[i];return r<0?0:r}function re(e,t,n){let r=t[this.thread.x];for(let i=0;i<this.constants.size;i++)r+=e[this.thread.x][i]*n[i];return r<0?0:.01*r}function ie(e,t,n){let r=t[this.thread.x];for(let i=0;i<this.constants.size;i++)r+=e[this.thread.x][i]*n[i];return Math.tanh(r)}function se(e,t){return t-e}function ae(e,t){return e*t*(1-t)}function oe(e,t){return t>0?e:0}function le(e,t){return t>0?e:.01*e}function ue(e,t){return(1-t*t)*e}function ce(e,t,n,r){let i=0;for(let s=0;s<t;s++)i+=r[s]*n[s][e];return i}function he(e,t,n,r,i){return e*r*i+t*n}function pe(e,t){return e+t}function de(e,t){return e[this.thread.x]+t[this.thread.x]*this.constants.learningRate}function fe(e){let t=0;for(let n=0;n<this.constants.size;n++)t+=e[n]**2;return t/this.constants.size}class me extends W{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(e),this.texturizeInputData=()=>{throw new Error("not yet setup")},this.forwardPropagate=[],this.backwardPropagate=[],this.changesPropagate=[],this.biasesPropagate=[],this.getMSE=()=>{throw new Error("not yet setup")},this._addMSE=()=>{throw new Error("not yet setup")},this._divideMSESum=()=>{throw new Error("not yet setup")},this.outputs=[],this.deltas=[],this.errors=[],this.weights=[],this.changes=[],this.biases=[],this.runInput=e=>{let t;this.outputs[0]=e;for(let n=1;n<=this.outputLayer;n++)Q(this.outputs[n]),this.outputs[n]=this.forwardPropagate[n](this.weights[n],this.biases[n],e),t=e=this.outputs[n];return t},this.calculateDeltas=e=>{for(let t=this.outputLayer;t>0;t--){let n;Q(this.deltas[t]),Q(this.errors[t]),n=t===this.outputLayer?this.backwardPropagate[t](this.outputs[t],e):this.backwardPropagate[t](this.weights[t+1],this.outputs[t],this.deltas[t+1]),this.deltas[t]=n.result,this.errors[t]=n.error}},this.errorCheckInterval=100,this.gpu=new b.GPU({mode:e.mode})}initialize(){super.initialize(),this.buildRunInput(),this.buildCalculateDeltas(),this.buildGetChanges(),this.buildChangeBiases(),this.buildGetMSE()}setActivation(){}trainPattern(e,t){return this.runInput(e.input),this.calculateDeltas(e.output),this.adjustWeights(),t?this.getMSE(this.errors[this.outputLayer]):null}calculateTrainingError(e){let t=new Float32Array([0]);for(let r=0;r<e.length;++r){const n=t,i=this.trainPattern(e[r],!0);t=this._addMSE(t,i),Q(i),Q(n)}const n=this._divideMSESum(e.length,t);return Q(t),(n instanceof b.Texture?n.toArray():n)[0]}adjustWeights(){this.getChanges(),this.changeBiases()}buildRunInput(){let e=null;switch(this.trainOpts.activation){case"sigmoid":e=te;break;case"relu":e=ne;break;case"leaky-relu":e=re;break;case"tanh":e=ie;break;default:throw new Error(`Unknown activation ${this.trainOpts.activation}. Available activations are: 'sigmoid', 'relu', 'leaky-relu', 'tanh'`)}for(let t=1;t<=this.outputLayer;t++)this.forwardPropagate[t]=this.gpu.createKernel(e,{output:[this.sizes[t]],pipeline:!0,constants:{size:this.sizes[t-1]},immutable:!0});this.texturizeInputData=this.gpu.createKernel((function(e){return e[this.thread.x]}),{output:[this.sizes[1]],pipeline:!0,immutable:!0})}buildCalculateDeltas(){let e;switch(this.trainOpts.activation){case"sigmoid":e=ae;break;case"relu":e=oe;break;case"leaky-relu":e=le;break;case"tanh":e=ue;break;default:throw new Error(`Unknown activation ${this.trainOpts.activation}. Available activations are: 'sigmoid', 'relu', 'leaky-relu', 'tanh'`)}e=b.alias(b.utils.getMinifySafeName((()=>e)),e),this.gpu.addFunction(e);for(let t=this.outputLayer;t>0;t--)t===this.outputLayer?this.backwardPropagate[this.outputLayer]=this.gpu.createKernelMap({error:se},(function(t,n){const r=t[this.thread.x],i=n[this.thread.x];return e(se(r,i),r)}),{output:[this.sizes[this.outputLayer]],pipeline:!0,immutable:!0}):this.backwardPropagate[t]=this.gpu.createKernelMap({error:ce},(function(t,n,r){const i=n[this.thread.x];return e(ce(this.thread.x,this.constants.size,t,r),i)}),{output:[this.sizes[t]],pipeline:!0,constants:{size:this.sizes[t+1]},immutable:!0})}buildGetChanges(){for(let e=1;e<=this.outputLayer;e++)this.changesPropagate[e]=this.gpu.createKernelMap({weights:pe,changes:he},(function(e,t,n,r){return pe(he(this.constants.learningRate,this.constants.momentum,r[this.thread.y][this.thread.x],t[this.thread.y],e[this.thread.x]),n[this.thread.y][this.thread.x])}),{output:[this.sizes[e-1],this.sizes[e]],pipeline:!0,constants:{size:this.sizes[e-1],learningRate:this.trainOpts.learningRate,momentum:this.trainOpts.momentum},immutable:!0})}getChanges(){for(let e=1;e<=this.outputLayer;e++){const t=this.weights[e],n=this.changes[e],r=this.changesPropagate[e](this.outputs[e-1],this.deltas[e],t,n);Q(t),Q(n),this.weights[e]=r.weights,this.changes[e]=r.changes,Q(r.result)}}buildChangeBiases(){for(let e=1;e<=this.outputLayer;e++)this.biasesPropagate[e]=this.gpu.createKernel(de,{output:[this.sizes[e]],pipeline:!0,constants:{learningRate:this.trainOpts.learningRate},immutable:!0})}changeBiases(){for(let e=1;e<=this.outputLayer;e++){const t=this.biases[e];this.biases[e]=this.biasesPropagate[e](t,this.deltas[e]),Q(t)}}buildGetMSE(){this.getMSE=this.gpu.createKernel(fe,{output:[1],constants:{size:this.sizes[this.outputLayer]},pipeline:!0,immutable:!0}),this._addMSE=this.gpu.createKernel((function(e,t){return e[0]+t[0]}),{output:[1],pipeline:!0,immutable:!0}),this._divideMSESum=this.gpu.createKernel((function(e,t){const n=t[0];return n>0?n/e:0}),{output:[1]})}run(e){if(!this.isRunnable)throw new Error("network not runnable");let t;t=this.inputLookup?x.toArray(this.inputLookup,e,this.inputLookupLength):e,this.validateInput(t);const n=this.runInput(t),r=n instanceof b.Texture?n.toArray():n;return this.outputLookup?x.toObject(this.outputLookup,r):r}prepTraining(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.updateTrainingOptions(t);const n=this.formatData(e),r=Date.now()+this.trainOpts.timeout,i={error:1,iterations:0};this.verifyIsInitialized(n);const s=this.gpu.createKernel((function(e){return e[this.thread.x]}),{output:[n[0].output.length],pipeline:!0,immutable:!0});return{preparedData:n.map((e=>({input:this.texturizeInputData(e.input),output:s(e.output)}))),status:i,endTime:r}}toFunction(){throw new Error(`${this.constructor.name}-toFunction is not yet implemented`)}toJSON(){var e,t;null===this.sizes&&this.initialize();const n=this.weights.map((e=>(e instanceof b.Texture?e.toArray():e).map((e=>Array.from(e))))),r=this.biases.map((e=>Array.from(e instanceof b.Texture?e.toArray():e))),i=[];for(let s=0;s<=this.outputLayer;s++)i.push({weights:null!==(e=n[s])&&void 0!==e?e:[],biases:null!==(t=r[s])&&void 0!==t?t:[]});return{type:"NeuralNetworkGPU",sizes:[...this.sizes],layers:i,inputLookup:this.inputLookup?{...this.inputLookup}:null,inputLookupLength:this.inputLookupLength,outputLookup:this.outputLookup?{...this.outputLookup}:null,outputLookupLength:this.outputLookupLength,options:{...this.options},trainOpts:this.getTrainOptsJSON()}}}class ge extends Error{constructor(e){super(`Cannot run a ${e.constructor.name} before it is trained.`)}}class ye{constructor(e){null!==e&&void 0!==e||(e={}),e.binaryThresh,e.hiddenLayers,e.decodedSize&&e.decodedSize,this.denoiser=new me(e)}denoise(e){return this.denoiser.run(e)}decode(e){if(!this.decoder)throw new ge(this);return this.decoder.run(e)}encode(e){if(!this.denoiser)throw new ge(this);this.denoiser.run(e);let t=this.encodedLayer;return t=t instanceof b.Texture?t.toArray():t.slice(0),t}likelyIncludesAnomalies(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2;var n;const r=[],i=this.denoise(e);for(let s=0;s<(null!==(n=e.length)&&void 0!==n?n:0);s++)r[s]=Math.abs(e[s]-i[s]);return r.reduce(((e,t)=>e+t))/e.length>t}train(e,t){const n=[];for(const i of e)n.push({input:i,output:i});const r=this.denoiser.train(n,t);return this.decoder=this.createDecoder(),r}createDecoder(){const e=this.denoiser.toJSON(),t=[],n=[];for(let r=this.encodedLayerIndex;r<this.denoiser.sizes.length;r++)t.push(e.layers[r]),n.push(e.sizes[r]);return e.layers=t,e.sizes=n,e.options.inputSize=e.sizes[0],(new me).fromJSON(e)}get encodedLayer(){return this.denoiser.outputs[this.encodedLayerIndex]}get encodedLayerIndex(){return Math.round(.5*this.denoiser.outputs.length)-1}}class be{constructor(e){this.json={avgs:{error:0,iterations:0,testTime:0,trainTime:0},stats:{total:0,testSize:0,trainSize:0},sets:[]},this.initClassifier=e}testPartition(e,t,n){const r=this.initClassifier(),i=Date.now(),s=r.train(t,e),a=Date.now(),o=r.test(n),l=Date.now();return{...o,trainTime:a-i,testTime:l-a,iterations:s.iterations,error:s.error,total:o.total,network:r.toJSON()}}shuffleArray(e){for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1)),r=e[t];e[t]=e[n],e[n]=r}return e}train(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4;if(e.length<n)throw new Error(`Training set size is too small for ${e.length} k folds of ${n}`);this.shuffleArray(e);const r=e.length/n,i={trainTime:0,testTime:0,iterations:0,error:0},s={total:0,testSize:0,trainSize:0},a={total:0,testSize:0,trainSize:0,truePos:0,trueNeg:0,falsePos:0,falseNeg:0,precision:0,recall:0,accuracy:0},o=[];let l=null;for(let u=0;u<n;u++){const n=e.slice(0),c=n.splice(u*r,r),h=n,p=this.testPartition(t,h,c);null===l&&(l=p.hasOwnProperty("falseNeg")&&p.hasOwnProperty("falsePos")&&p.hasOwnProperty("trueNeg")&&p.hasOwnProperty("truePos"),l&&Object.assign(s,a)),i.iterations+=p.iterations,i.testTime+=p.testTime,i.trainTime+=p.trainTime,i.error+=p.error,s.total+=p.total,be.isBinaryStats(s)&&be.isBinaryPartitionResults(p)&&(s.accuracy+=p.accuracy,s.falseNeg+=p.falseNeg,s.falsePos+=p.falsePos,s.precision+=p.precision,s.recall+=p.recall,s.trueNeg+=p.trueNeg,s.truePos+=p.truePos),o.push(p)}return i.error/=n,i.iterations/=n,i.testTime/=n,i.trainTime/=n,be.isBinaryStats(s)&&(s.precision=s.truePos/(s.truePos+s.falsePos),s.recall=s.truePos/(s.truePos+s.falseNeg),s.accuracy=(s.trueNeg+s.truePos)/s.total),s.testSize=r,s.trainSize=e.length-r,this.json={avgs:i,stats:s,sets:o},this.json}toNeuralNetwork(){return this.fromJSON(this.json)}toJSON(){return this.json}fromJSON(e){const t=e.sets.reduce(((e,t)=>e.error<t.error?e:t));return this.initClassifier().fromJSON(t.network)}}function xe(e){let t=0;for(let n=0;n<this.constants.height;n++)for(let r=0;r<this.constants.width;r++)t+=e[n][r]**2;return t/this.constants.length}be.isBinaryStats=e=>void 0!==e.accuracy,be.isBinaryResults=e=>void 0!==e.stats.accuracy,be.isBinaryPartitionResults=e=>void 0!==e.accuracy;class ve{constructor(e){let{width:t,height:n}=e;this.calculate=q(xe,{output:[1],constants:{width:t,height:n,length:t*n},immutable:!0}),this.addAbsolute=q((function(e,t){return e[0]+Math.abs(t[0][0])}),{output:[1],immutable:!0}),this.add=q((function(e,t){return e[0]+t[0]}),{output:[1],immutable:!0}),this.divide=q((function(e,t){const n=t[0];return n>0?n/e:0}),{output:[1],immutable:!0})}}const we={width:1,height:1,depth:null,weights:null,deltas:null,praxis:null,praxisOpts:null,cleanupDeltas:!0};class Se{constructor(e){this.praxis=null,this.predictKernel=null,this.compareKernel=null,this.settings=e?{...we,...e}:{...we},this.setupPraxis()}get width(){var e;return null!==(e=this.settings.width)&&void 0!==e?e:0}get height(){var e;return null!==(e=this.settings.height)&&void 0!==e?e:0}get depth(){var e;return null!==(e=this.settings.depth)&&void 0!==e?e:0}get weights(){return this.settings.weights}set weights(e){this.settings.weights=e,this.settings.cleanupDeltas&&this.deltas&&Z(this.deltas)}get deltas(){return this.settings.deltas}set deltas(e){this.settings.deltas=e}get id(){var e;return null!==(e=this.settings.id)&&void 0!==e?e:""}set id(e){this.settings.id=e}setupPraxis(){const{initPraxis:e,praxis:t,praxisOpts:n}=this.settings;this.praxis||(e?this.praxis=n?e(this,n):e(this):t&&(this.praxis=t))}validate(){if(Number.isNaN(this.height))throw new Error(`${this.constructor.name} layer height is not a number`);if(Number.isNaN(this.width))throw new Error(`${this.constructor.name} layer width is not a number`);if(this.height<1)throw new Error(`${this.constructor.name} layer height is less than 1`);if(this.width<1)throw new Error(`${this.constructor.name} layer width is less than 1`)}setupKernels(e){}reuseKernels(e){if(e.width!==this.width)throw new Error(`${this.constructor.name} kernel width mismatch ${e.width} is not ${this.width}`);if(e.height!==this.height)throw new Error(`${this.constructor.name} kernel width mismatch ${e.height} is not ${this.height}`);if(e.hasOwnProperty("predictKernel")&&null!==e.predictKernel){if(!e.predictKernel.immutable)throw new Error(`${e.constructor.name}.predictKernel is not reusable, set kernel.immutable = true`);this.predictKernel=e.predictKernel}if(e.hasOwnProperty("compareKernel")&&null!==e.compareKernel){if(!e.compareKernel.immutable)throw new Error(`${e.constructor.name}.compareKernel is not reusable, set kernel.immutable = true`);this.compareKernel=e.compareKernel}this.praxis=e.praxis}predict(e){}compare(e){}learn(e){}toArray(){return Array.isArray(this.weights)?this.weights:this.weights.toArray()}toJSON(){return Se.toJSON(this)}static toJSON(e){const{weights:t}=e;return{width:e.width,height:e.height,depth:e.depth,weights:ke(t&&t instanceof b.Texture?t.toArray():t),type:e.constructor.name,praxisOpts:e.praxis?e.praxis.toJSON():null}}}function ke(e){if(null===e)return null;if(Array.isArray(e)){if("number"===typeof e[0])return e;if(Array.isArray(e[0])&&"number"===typeof e[0][0])return e;if(Array.isArray(e[0][0])&&"number"===typeof e[0][0][0])return e;if(e[0]instanceof Float32Array)return e.map((e=>Array.from(e)));if(e[0][0]instanceof Float32Array)return e.map((e=>e.map((e=>Array.from(e)))))}else if(e)return Array.from(e);throw new Error("unexpected value")}function Te(e,t){const n=new Array(t);for(let r=0;r<t;r++)n[r]=j(e);return n}function Ae(e,t,n){const r=new Array(n);for(let i=0;i<n;i++)r[i]=Te(e,t);return r}class Ee extends Se{constructor(e,t){super(t),this.inputLayer=e;const{width:n,height:r,depth:i}=this;this.predictKernel=null,this.compareKernel=null,this.validate(),i>0?(this.weights=Ae(n,r,i),this.deltas=Ae(n,r,i)):r>0&&(this.weights=Te(n,r),this.deltas=Te(n,r)),this.setupPraxis()}get width(){return this.inputLayer.width}get height(){return this.inputLayer.height}get depth(){return this.inputLayer.depth}}class _e extends Se{constructor(e,t){super(),this.settings=e,this.inputLayer=t}get width(){return this.inputLayer.width}get height(){return this.inputLayer.height}get depth(){return this.inputLayer.depth}get filterCount(){return this.settings.filterCount}get filterWidth(){return this.settings.filterWidth}get filterHeight(){return this.settings.filterHeight}get filters(){return this.settings.filters}set filters(e){this.settings.filters=e}get filterDeltas(){return this.settings.filterDeltas}set filterDeltas(e){this.settings.filterDeltas=e}}class Le{constructor(){this.predictKernel=null,this.compareKernel=null,this.praxis=null}get width(){return this.settings.width}get height(){return this.settings.height}get depth(){return this.settings.depth}get weights(){return this.settings.weights}set weights(e){this.settings.weights=e}get deltas(){return this.settings.deltas}set deltas(e){this.settings.deltas=e}toJSON(){return Se.toJSON(this)}}class Ce extends Se{constructor(e,t){super({...t,width:e.width,height:e.height,depth:e.depth}),this.inputLayer=e}validate(){var e;if(super.validate(),this.width!==this.inputLayer.width)throw new Error(`width of ${this.width} does not match inputLayer.width of ${this.inputLayer.width}`);if(this.height!==this.inputLayer.height)throw new Error(`height of ${this.height} does not match inputLayer.height of ${this.inputLayer.height}`);if(this.depth!==(null!==(e=this.inputLayer.depth)&&void 0!==e?e:0))throw new Error(`depth of ${this.depth} does not match inputLayer.depth of ${this.inputLayer.depth}`)}}class Ie extends Se{constructor(e,t,n){super(n),this.inputLayer1=e,this.inputLayer2=t,this.validate(),this.weights=Te(this.width,this.height),this.deltas=Te(this.width,this.height),this.setupPraxis()}}function $e(e,t){return e[this.thread.y][this.thread.x]-t[this.thread.x]}function Oe(e,t){return e[this.thread.y][this.thread.x]-t[this.thread.y][this.thread.x]}class Re extends Se{constructor(e,t){if(super(e),this.inputLayer=t,this.validate(),this.depth)throw new Error("Target layer not implemented for depth");this.height?(this.weights=Te(this.width,this.height),this.deltas=Te(this.width,this.height),this.errors=Te(this.width,this.height)):(this.weights=j(this.width),this.deltas=j(this.width),this.errors=j(this.width))}setupKernels(){1===this.width?this.compareKernel=q($e,{output:[this.width,this.height],immutable:!0}):this.compareKernel=q(Oe,{output:[this.width,this.height],immutable:!0})}predict(){Q(this.weights),this.weights=ee(this.inputLayer.weights)}compare(e){Q(this.deltas),Q(this.errors),Q(this.inputLayer.deltas),this.deltas=this.compareKernel(this.weights,e),this.inputLayer.deltas=ee(this.deltas),this.errors=ee(this.deltas)}setupPraxis(){}}function De(e,t){return new Re(e,t)}class ze{}class Pe extends Se{}class Me extends Se{learn(e){const{weights:t}=this;if(!this.praxis)throw new Error("this.praxis not defined");this.weights=this.praxis.run(this,e),Q(t)}}class Ne{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.layerTemplate=e,this.settings={...t},this.kernel=null}get width(){return this.layerTemplate.width}get height(){return this.layerTemplate.height}get depth(){return this.layerTemplate.depth}setupKernels(){}reuseKernels(e){if(e.width!==this.width)throw new Error(`${this.constructor.name} kernel width mismatch ${e.width} is not ${this.width}`);if(e.height!==this.height)throw new Error(`${this.constructor.name} kernel width mismatch ${e.height} is not ${this.height}`);e.hasOwnProperty("kernel")&&(this.kernel=e.kernel)}toJSON(){return{...this.settings}}}function Fe(e,t){return e[this.thread.y][this.thread.x]+this.constants.learningRate*t[this.thread.y][this.thread.x]}const Ve={learningRate:.3};class Ke extends Ne{constructor(e,t){super(e),this.settings={...Ve,...t},this.kernel=null}run(e){return this.kernel(e.weights,e.deltas)}setupKernels(){var e;this.kernel=q(Fe,{output:[this.width,this.height],constants:{learningRate:null!==(e=this.settings.learningRate)&&void 0!==e?e:.01}})}}function je(e,t){return new Ke(e,t)}function Be(e){return e}function Ue(e,t,n,r){const i=e[this.thread.y][this.thread.x],s=r[this.thread.y][0],a=t[this.thread.y][this.thread.x],o=n[this.thread.x][0];return a+(this.constants.learningRate*s*o+this.constants.momentum*i)}const Ge={learningRate:.3,momentum:.1,weightsLayer:null,incomingLayer:null,deltaLayer:null};class We extends Ne{constructor(e,t){super(e),this.kernelMap=null,this.settings={...Ge,...t},this.changes=Te(e.width,e.height)}get learningRate(){return this.settings.learningRate}get momentum(){return this.settings.momentum}get weightsLayer(){return this.settings.weightsLayer}set weightsLayer(e){this.settings.weightsLayer=e}get deltaLayer(){return this.settings.deltaLayer}set deltaLayer(e){this.settings.deltaLayer=e}get incomingLayer(){return this.settings.incomingLayer}set incomingLayer(e){this.settings.incomingLayer=e}run(){const e=this.kernelMap(this.changes,this.weightsLayer.weights,this.incomingLayer.weights,this.deltaLayer.deltas);return this.changes=e.changes,e.result}setupKernels(){this.kernelMap=Y({changes:Be},Ue,{output:[this.width,this.height],constants:{learningRate:this.learningRate,momentum:this.momentum}})}}function He(e,t){return new We(e,t)}function Xe(e,t,n){return n*t+(1-t)*e*e}function qe(e,t,n){return e>t?t:e<n?n:e}function Ye(e,t,n){const r=t[this.thread.y][this.thread.x],i=qe(r,this.constants.clipValue,-this.constants.clipValue),s=e[this.thread.y][this.thread.x],a=n[this.thread.y][this.thread.x],o=Xe(r,this.constants.decayRate,a);return s+-this.constants.learningRate*i/Math.sqrt(o+this.constants.smoothEps)-this.constants.regularizationStrength*s}const Je={decayRate:.999,regularizationStrength:1e-6,learningRate:.01,smoothEps:1e-8,clipValue:5};class Qe extends Ne{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e),this.kernelMap=null,this.settings={...Je,...t},this.momenta=Te(e.width,e.height)}get clipValue(){return this.settings.clipValue}get decayRate(){return this.settings.decayRate}get learningRate(){return this.settings.learningRate}get regularizationStrength(){return this.settings.regularizationStrength}get smoothEps(){return this.settings.smoothEps}run(e){const{momenta:t,result:n}=this.kernelMap(e.weights,e.deltas,this.momenta);return Q(this.momenta),this.momenta=t,n}setupKernels(){this.kernelMap=Y({momenta:Xe},Ye,{output:[this.width,this.height],constants:{clipValue:this.clipValue,decayRate:this.decayRate,learningRate:this.learningRate,regularizationStrength:this.regularizationStrength,smoothEps:this.smoothEps},functions:[qe],immutable:!0})}}function Ze(e,t){return new Qe(e,t)}const et=Qe,tt=Ze;var nt=Object.freeze({__proto__:null,ArthurDeviationBiases:Ke,arthurDeviationBiases:je,ArthurDeviationWeights:We,arthurDeviationWeights:He,MomentumRootMeanSquaredPropagation:Qe,momentumRootMeanSquaredPropagation:Ze,MRmsProp:et,mRmsProp:tt});function rt(e,t){e.hasOwnProperty("inputLayer")?rt(e.inputLayer,t):(e.hasOwnProperty("inputLayer1")&&rt(e.inputLayer1,t),e.hasOwnProperty("inputLayer2")&&rt(e.inputLayer2,t)),t(e)}function it(e){const t=e.slice(0);for(let n=0;n<t.length;n++){let e=0;rt(t[n],(r=>{t.includes(r)||(t.splice(n+e,0,r),e++)}))}return t}function st(e,t){if(e.width!==t.width)throw new Error(`Layer width mismatch of ${e.width} and ${t.width}`);if(e.height!==t.height)throw new Error(`Layer height mismatch of ${e.height} and ${t.height}`)}function at(e,t){return e[this.thread.y][this.thread.x]+t[this.thread.y][this.thread.x]}class ot extends Ie{get width(){return this.inputLayer1.width}get height(){return this.inputLayer1.height}get depth(){return this.inputLayer1.depth}validate(){super.validate(),st(this.inputLayer1,this.inputLayer2)}setupKernels(){this.predictKernel=q(at,{output:[this.width,this.height],immutable:!0})}predict(){Q(this.weights),this.weights=this.predictKernel(this.inputLayer1.weights,this.inputLayer2.weights)}compare(){Q(this.inputLayer1.deltas),Q(this.inputLayer2.deltas),this.inputLayer1.deltas=ee(this.deltas),this.inputLayer2.deltas=ee(this.deltas)}}function lt(e,t,n){return new ot(e,t,n)}const ut={...we,std:null};class ct extends Me{constructor(e){super(),this.settings={...ut,...e},this.setupPraxis(),this.validate(),this.weights||(this.weights=V(this.width,this.height,e.std)),this.deltas||(this.deltas=Te(this.width,this.height))}predict(){}compare(){}}function ht(e){return new ct(e)}function pt(e,t){let n=0;for(let r=0;r<this.constants.size;r++)n+=e[this.thread.y][r]*t[r][this.thread.x];return n}function dt(e,t,n){let r=t[this.thread.y][this.thread.x];for(let i=0;i<this.constants.size;i++)r+=e[this.thread.y][i]*n[this.thread.x][i];return r}function ft(e,t,n){let r=t[this.thread.y][this.thread.x];for(let i=0;i<this.constants.size;i++)r+=e[i][this.thread.x]*n[i][this.thread.y];return r}class mt extends Ie{constructor(){super(...arguments),this.compareKernel1=null,this.compareKernel2=null}get width(){return this.inputLayer2.width}set width(e){throw new Error("Cannot set width on Multiply")}get height(){return this.inputLayer1.height}set height(e){throw new Error("Cannot set height on Multiply")}get depth(){return this.inputLayer1.depth}set depth(e){throw new Error("Cannot set depth on Multiply")}validate(){if(super.validate(),this.inputLayer1.width!==this.inputLayer2.height)throw new Error(`Layer width mismatch of ${this.inputLayer1.width} and ${this.inputLayer2.height}`)}setupKernels(){this.predictKernel=q(pt,{output:[this.width,this.height],constants:{size:this.inputLayer2.height},immutable:!0}),this.compareKernel1=q(dt,{output:[this.inputLayer1.width,this.inputLayer1.height],constants:{size:this.inputLayer2.width},immutable:!0}),this.compareKernel2=q(ft,{output:[this.inputLayer2.width,this.inputLayer2.height],constants:{size:this.inputLayer1.height},immutable:!0})}reuseKernels(e){super.reuseKernels(e),this.compareKernel1=e.compareKernel1,this.compareKernel2=e.compareKernel2}predict(){if(Q(this.weights),!this.predictKernel)throw new Error("this.predictKernel is not set");this.weights=this.predictKernel(this.inputLayer1.weights,this.inputLayer2.weights)}compare(){if(!this.compareKernel1)throw new Error("this.compareKernel1 not set");if(!this.compareKernel2)throw new Error("this.compareKernel2 not set");const e=this.inputLayer1.deltas,t=this.inputLayer2.deltas,n=this.compareKernel1(this.deltas,this.inputLayer1.deltas,this.inputLayer2.weights),r=this.compareKernel2(this.deltas,this.inputLayer2.deltas,this.inputLayer1.weights);this.inputLayer2.deltas=r,this.inputLayer1.deltas=n,Q(e),Q(t)}setupPraxis(){}toJSON(){return{...super.toJSON(),width:this.width,height:this.height}}}function gt(e,t,n){return new mt(e,t,n)}function yt(e){return 1/(1+Math.exp(-e[this.thread.y][this.thread.x]))}function bt(e){return 1/(1+Math.exp(-e[this.thread.z][this.thread.y][this.thread.x]))}function xt(e,t){const n=e[this.thread.y][this.thread.x];return n*(1-n)*t[this.thread.y][this.thread.x]}function vt(e,t){const n=e[this.thread.z][this.thread.y][this.thread.x];return n*(1-n)*t[this.thread.z][this.thread.y][this.thread.x]}class wt extends Ee{setupKernels(){this.depth>0?(this.predictKernel=q(bt,{output:[this.width,this.height,this.depth],functions:[s],immutable:!0}),this.compareKernel=q(vt,{output:[this.width,this.height,this.depth],functions:[a],immutable:!0})):(this.predictKernel=q(yt,{output:[this.width,this.height],functions:[s],immutable:!0}),this.compareKernel=q(xt,{output:[this.width,this.height],functions:[a],immutable:!0}))}predict(){Q(this.weights),this.weights=this.predictKernel(this.inputLayer.weights)}compare(){Q(this.inputLayer.deltas),this.inputLayer.deltas=this.compareKernel(this.weights,this.deltas)}learn(e){}}function St(e,t){return new wt(e,t)}function kt(e,t){const{height:n}=e;function r(e,t){const n=He(e,t);return n.setupKernels(),n}function i(e,t){const n=je(e,t);return n.setupKernels(),n}const s=ht({id:"weights",height:n,width:t.height,initPraxis:r}),a=ht({id:"biases",height:n,initPraxis:i}),o=St(lt(gt(s,t),a)),l=s.praxis;return l.weightsLayer=s,l.incomingLayer=t,l.deltaLayer=o,o}function Tt(e,t){if("number"===typeof e.stride)return{strideX:e.stride,strideY:e.stride};{let n=t.stride,r=t.stride;return"number"===typeof e.strideX&&(n=e.strideX),"number"===typeof e.strideY&&(r=e.strideY),{strideX:n,strideY:r}}}function At(e,t){if("number"===typeof e.padding)return{paddingX:e.padding,paddingY:e.padding};{let n=t.padding,r=t.padding;return"number"===typeof e.paddingX&&(n=e.paddingX),"number"===typeof e.paddingY&&(r=e.paddingY),{paddingX:n,paddingY:r}}}function Et(e,t){return new Float32Array(e).fill(t)}function _t(e,t,n){const r=this.constants.paddingX-this.thread.x*this.constants.strideX,i=this.thread.x*this.constants.strideX-this.constants.paddingX,s=Math.min(this.constants.filterWidth,r+this.constants.inputWidth),a=this.constants.paddingY-this.thread.y*this.constants.strideY,o=this.thread.y*this.constants.strideY-this.constants.paddingY,l=Math.min(this.constants.filterHeight,a+this.constants.inputHeight);let u=0;for(let c=0;c<this.constants.inputDepth;c++)for(let n=Math.max(0,a),h=Math.max(0,o);n<l;n++,h++)for(let a=Math.max(0,r),o=Math.max(0,i);a<s;a++,o++)u+=t[c][n][a]*e[c][h][o];return u+n[this.thread.z]}function Lt(e,t,n){const r=Math.max(0,Math.ceil((this.constants.paddingX-this.thread.x)/this.constants.strideX)),i=r*this.constants.strideX+this.thread.x-this.constants.paddingX,s=Math.min(this.constants.deltaWidth,Math.floor((this.constants.inputWidth-1-this.thread.x+this.constants.paddingX)/this.constants.strideX)+1),a=Math.max(0,Math.ceil((this.constants.paddingY-this.thread.y)/this.constants.strideY)),o=a*this.constants.strideY+this.thread.y-this.constants.paddingY,l=Math.min(this.constants.deltaHeight,Math.floor((this.constants.inputHeight-1-this.thread.y+this.constants.paddingY)/this.constants.strideY)+1);let u=e[this.thread.z][this.thread.y][this.thread.x];for(let c=a,h=o;c<l;c++,h+=this.constants.strideY)for(let e=r,a=i;e<s;e++,a+=this.constants.strideX)u+=t[this.thread.z][h][a]*n[this.constants.deltaZ][c][e];return u}function Ct(e,t,n){const r=this.thread.x+this.constants.paddingX,i=r<this.constants.filterWidth?0:Math.floor((r-this.constants.filterWidth+this.constants.strideX)/this.constants.strideX),s=r-i*this.constants.strideX,a=Math.min(i+Math.floor(s/this.constants.strideX)+1,this.constants.deltaWidth),o=this.thread.y+this.constants.paddingY,l=o<this.constants.filterHeight?0:Math.floor((o-this.constants.filterHeight+this.constants.strideY)/this.constants.strideY),u=o-l*this.constants.strideY,c=Math.min(l+Math.floor(u/this.constants.strideY)+1,this.constants.deltaHeight);let h=e[this.thread.z][this.thread.y][this.thread.x],p=l;for(let d=u;p<c;d-=this.constants.strideY,p++){let e=i;for(let r=s;e<a;r-=this.constants.strideX,e++)h+=t[this.thread.z][d][r]*n[this.constants.deltaZ][p][e]}return h}function It(e,t){let n=0;for(let r=0;r<this.constants.deltaHeight;r++)for(let e=0;e<this.constants.deltaWidth;e++)n+=t[this.thread.z][r][e];return e[this.thread.z][this.thread.y][this.thread.x]+n}const $t={stride:0,padding:0,bias:.1,filterCount:1,filterWidth:0,filterHeight:0};class Ot extends _e{constructor(e,t){var n,r,i;super(e,t),this.compareFilterDeltasKernel=null,this.compareInputDeltasKernel=null,this.compareBiasesKernel=null,this.settings={...$t,...e,...At(e,$t),...Tt(e,$t)},this.weights=null!==(n=e.weights)&&void 0!==n?n:K(this.width,this.height,this.depth),this.deltas=Ae(this.width,this.height,this.depth),this.biases=Et(this.depth,this.bias),this.biasDeltas=null!==(r=e.biasDeltas)&&void 0!==r?r:F(this.depth),this.filters=null!==(i=e.filters)&&void 0!==i?i:K(this.filterWidth,this.filterHeight,this.filterCount),this.filterDeltas=Ae(this.filterWidth,this.filterHeight,this.filterCount),this.validate()}get strideX(){return this.settings.strideX}get strideY(){return this.settings.strideY}get paddingX(){return this.settings.paddingX}get paddingY(){return this.settings.paddingX}get width(){return Math.floor((this.inputLayer.width+2*this.paddingX-this.filterWidth)/this.strideX+1)}get height(){return Math.floor((this.inputLayer.height+2*this.paddingY-this.filterHeight)/this.strideY+1)}get bias(){return this.settings.bias}get depth(){return this.filterCount}get biases(){return this.settings.biases}set biases(e){this.settings.biases=e}get biasDeltas(){return this.settings.biasDeltas}set biasDeltas(e){this.settings.biasDeltas=e}get filters(){return this.settings.filters}set filters(e){this.settings.filters=e}get filterDeltas(){return this.settings.filterDeltas}set filterDeltas(e){this.settings.filterDeltas=e}setupKernels(){this.predictKernel=q(_t,{constants:{inputWidth:this.inputLayer.width,inputHeight:this.inputLayer.height,inputDepth:this.inputLayer.depth,strideX:this.strideX,strideY:this.strideY,paddingX:this.paddingX,paddingY:this.paddingY,filterWidth:this.filterWidth,filterHeight:this.filterHeight},output:[this.width,this.height,this.depth],immutable:!0}),this.compareFilterDeltasKernel=q(Lt,{constants:{deltaWidth:this.width,deltaHeight:this.height,deltaZ:this.depth,inputWidth:this.inputLayer.width,inputHeight:this.inputLayer.height,inputDepth:this.inputLayer.depth,strideX:this.strideX,strideY:this.strideY,paddingX:this.paddingX,paddingY:this.paddingY,filterWidth:this.filterWidth,filterHeight:this.filterHeight},output:[this.width,this.height,this.depth],immutable:!0}),this.compareInputDeltasKernel=q(Ct,{constants:{deltaWidth:this.width,deltaHeight:this.height,deltaZ:this.depth,strideX:this.strideX,strideY:this.strideY,paddingX:this.paddingX,paddingY:this.paddingY,filterWidth:this.filterWidth,filterHeight:this.filterHeight,filterCount:this.filterCount},output:[this.inputLayer.width,this.inputLayer.height,this.inputLayer.depth],immutable:!0}),this.compareBiasesKernel=q(It,{output:[1,1,this.depth],constants:{deltaWidth:this.width,deltaHeight:this.height},immutable:!0})}predict(){this.weights=this.predictKernel(this.inputLayer.weights,this.filters,this.biases)}compare(){const{filterDeltas:e,biasDeltas:t}=this;this.filterDeltas=this.compareFilterDeltasKernel(e,this.inputLayer.weights,this.deltas),Q(e),this.biasDeltas=this.compareBiasesKernel(t,this.deltas),Q(t),Q(this.deltas),this.deltas=this.compareInputDeltasKernel(this.filters,this.inputLayer.deltas),Q(this.inputLayer.deltas),this.inputLayer.deltas=ee(this.deltas)}learn(e){const{weights:t}=this;this.weights=this.praxis.run(this,e),Q(t)}}function Rt(e,t){return new Ot(e,t)}function Dt(e){return e}function zt(e){return Dt(Math.random())<this.constants.probability?0:e[this.thread.y][this.thread.x]}function Pt(e){return e[this.thread.y][this.thread.x]*this.constants.probability}function Mt(e,t){return 0===e[this.thread.y][this.thread.x]?0:t[this.thread.y][this.thread.x]}const Nt={...we,probability:.5};class Ft extends _e{constructor(e,t){super(t,e),this.predictKernelMap=null,this.settings={...Nt,...t},this.dropouts=null,this.validate()}setupKernels(e){const t=[this.width,this.height];e?(this.predictKernelMap=Y({dropouts:Dt},zt,{output:t,immutable:!0}),this.compareKernel=q(Mt,{output:t,immutable:!0})):this.predictKernelMap=Y({},Pt,{output:t,immutable:!0})}predict(){Q(this.weights),this.dropouts&&Q(this.dropouts);const{result:e,dropouts:t}=this.predictKernelMap(this.inputLayer.weights);this.weights=e,this.dropouts=t}compare(){Q(this.deltas),this.deltas=this.compareKernel(this.dropouts,this.inputLayer.deltas)}}function Vt(e,t){return new Ft(e,t)}function Kt(e,t){const{height:n,praxisOpts:r=null}=e,i=ht({id:"weights",height:n,width:t.height,praxisOpts:r}),s=ht({id:"biases",height:n,praxisOpts:r});return St(lt(gt(i,t,{praxisOpts:r}),s,{praxisOpts:r}),{praxisOpts:r})}function jt(e,t,n){let r=0,i=0;for(let s=0;s<this.constants.inputHeight;s++)for(let n=0;n<this.constants.inputWidth;n++)r+=e[s][n]*t[this.thread.x][i],i++;return r+n[this.thread.x]}function Bt(e,t,n){let r=0,i=0;for(let s=0;s<this.constants.inputDepth;s++)for(let n=0;n<this.constants.inputHeight;n++)for(let a=0;a<this.constants.inputWidth;a++)r+=e[s][n][a]*t[this.thread.x][i],i++;return r+n[this.thread.x]}function Ut(e,t,n){let r=0;const i=this.thread.x+this.thread.y*this.output.x;for(let s=0;s<this.constants.filterCount;s++)r+=n[s][i]*t[0][s];return r+e[this.thread.y][this.thread.x]}function Gt(e,t,n){let r=0;const i=this.thread.x+this.thread.y*this.output.x;for(let s=0;s<this.constants.filterCount;s++)r+=n[s][i]*t[0][s];return r+e[this.thread.z][this.thread.y][this.thread.x]}function Wt(e,t){return e[this.thread.x]+t[this.thread.y][this.thread.x]}function Ht(e,t,n){return e[this.thread.y][this.thread.x]+t[this.thread.y][this.thread.x]*n[this.constants.deltaY][this.constants.deltaX]}function Xt(e,t,n){const r=Math.floor(this.thread.x/(this.constants.inputWidth*this.constants.inputHeight)),i=Math.floor((this.thread.x-r*this.constants.inputWidth*this.constants.inputHeight)/this.constants.inputWidth),s=this.thread.x-this.constants.inputWidth*(i+this.constants.inputHeight*r);return e[this.thread.y][this.thread.x]+t[r][i][s]*n[0][this.thread.y]}class qt extends _e{constructor(e,t){super(e,t),this.compareFilterDeltasKernel=null,this.compareInputDeltasKernel=null,this.compareBiasesKernel=null,this.settings={...e},this.validate();const n=t.width*t.height*t.depth;this.biases=Et(this.height,this.bias),this.biasDeltas=j(this.height),this.filters=V(n,this.height),this.filterDeltas=Te(n,this.height),this.depth>0?(this.weights=K(this.width,this.height,this.depth),this.deltas=Ae(this.width,this.height,this.depth)):this.height>0&&(this.weights=V(this.width,this.height),this.deltas=Te(this.width,this.height))}get bias(){return this.settings.bias}get biases(){return this.settings.biases}set biases(e){this.settings.biases=e}get biasDeltas(){return this.settings.biases}set biasDeltas(e){this.settings.biasDeltas=e}validate(){if(super.validate(),this.depth>0)throw new Error("depth not supported")}setupKernels(){const{inputLayer:e}=this,t=e.width*e.height*e.depth;e.depth>0?(this.predictKernel=q(Bt,{output:[this.width,this.height],constants:{inputHeight:e.height,inputWidth:e.width,inputDepth:e.depth}}),this.compareFilterDeltasKernel=q(Xt,{output:[t,this.height],constants:{deltaX:0,deltaY:0,inputWidth:e.width,inputHeight:e.height},immutable:!0}),this.compareInputDeltasKernel=q(Gt,{output:[e.width,e.height,e.depth],constants:{filterCount:this.height},immutable:!0})):(this.predictKernel=q(jt,{output:[this.width,this.height],constants:{inputHeight:e.height,inputWidth:e.width}}),this.compareFilterDeltasKernel=q(Ht,{output:[t,this.height],constants:{deltaX:0,deltaY:0,inputWidth:e.width,inputHeight:e.height}}),this.compareInputDeltasKernel=q(Ut,{output:[e.width,e.height],constants:{filterCount:this.height}})),this.compareBiasesKernel=q(Wt,{output:[this.width,this.height]})}predict(){this.weights=this.predictKernel(this.inputLayer.weights,this.filters,this.biases)}compare(){const e=this.inputLayer.deltas;this.inputLayer.deltas=this.compareInputDeltasKernel(e,this.deltas,this.filters),Q(e);const{biasDeltas:t,filterDeltas:n}=this;this.biasDeltas=this.compareBiasesKernel(this.biases,this.deltas),this.filterDeltas=this.compareFilterDeltasKernel(n,this.inputLayer.weights,this.deltas),Q(t),Q(n)}}function Yt(e,t){return new qt(e,t)}function Jt(e){return-e[this.thread.y][this.thread.x]}class Qt extends Ce{constructor(e,t){super(e,t),this.validate()}setupKernels(){this.predictKernel=q(Jt,{output:[this.width,this.height]})}predict(){this.weights=this.predictKernel(this.inputLayer.weights)}}function Zt(e,t){return new Qt(e,t)}function en(e,t){return e[this.thread.y][this.thread.x]*t[this.thread.y][this.thread.x]}function tn(e,t){return e[this.thread.y][this.thread.x]*t[this.thread.y][this.thread.x]}class nn extends Ie{get width(){return this.inputLayer1.width}get height(){return this.inputLayer1.height}get depth(){return this.inputLayer1.depth}validate(){super.validate(),st(this.inputLayer1,this.inputLayer2)}setupKernels(){this.predictKernel=q(en,{output:[this.width,this.height],immutable:!0}),this.compareKernel=q(tn,{output:[this.width,this.height],immutable:!0})}predict(){Q(this.weights),this.weights=this.predictKernel(this.inputLayer1.weights,this.inputLayer2.weights)}compare(){Q(this.inputLayer1.deltas),Q(this.inputLayer2.deltas),this.inputLayer1.deltas=this.compareKernel(this.inputLayer2.weights,this.deltas),this.inputLayer2.deltas=this.compareKernel(this.inputLayer1.weights,this.deltas)}}function rn(e,t,n){return new nn(e,t,n)}function sn(e){return new Float32Array(e).fill(1)}function an(e,t){const n=new Array(t);for(let r=0;r<t;r++)n[r]=sn(e);return n}class on extends Me{constructor(e){super(e),this.validate(),this.weights=an(this.width,this.height),this.deltas=Te(this.width,this.height)}}function ln(e){return new on(e)}function un(e){return l(e[this.thread.y][this.thread.x])}function cn(e){return l(e[this.thread.z][this.thread.y][this.thread.x])}function hn(e,t){return u(e[this.thread.y][this.thread.x],t[this.thread.y][this.thread.x])}function pn(e,t){return u(e[this.thread.z][this.thread.y][this.thread.x],t[this.thread.z][this.thread.y][this.thread.x])}class dn extends Ee{setupKernels(){this.depth>0?(this.predictKernel=q(cn,{output:[this.width,this.height,this.depth],functions:[l],immutable:!0}),this.compareKernel=q(pn,{output:[this.width,this.height,this.depth],functions:[u],immutable:!0})):(this.predictKernel=q(un,{output:[this.width,this.height],functions:[l],immutable:!0}),this.compareKernel=q(hn,{output:[this.width,this.height],functions:[u],immutable:!0}))}predict(){Q(this.weights),this.weights=this.predictKernel(this.inputLayer.weights)}compare(){Q(this.inputLayer.deltas),this.inputLayer.deltas=this.compareKernel(this.weights,this.deltas)}}function fn(e,t){return new dn(e,t)}class mn extends Me{constructor(e){super(e),this.validate(),this.weights=Te(this.width,this.height),this.deltas=Te(this.width,this.height)}predict(){}compare(){}}function gn(e){return new mn(e)}function yn(e,t,n){const{height:r}=e,i=ht({height:r,width:n.height}),s=ht({width:r,height:r}),a=gn({height:r}),o=St(lt(lt(gt(i,n),gt(s,t)),a)),l=ht({height:r,width:n.height}),u=ht({width:r,height:r}),c=gn({height:r}),h=St(lt(lt(gt(l,n),gt(u,t)),c)),p=ht({height:r,width:n.height}),d=ht({width:r,height:r}),f=gn({height:r}),m=fn(lt(lt(gt(p,n),gt(d,rn(h,t))),f));return lt(rn(lt(ln({width:o.width,height:o.height}),Zt(o)),m),rn(t,o))}const bn={weights:null};class xn extends Pe{constructor(e){super({...bn,...e}),this.reshapeInput=null,this.validate(),this.reshapeInput=null,this.deltas=Te(this.width,this.height)}setupKernels(){1===this.width&&(this.predict=this.predict1D,this.reshapeInput=q((function(e){return e[this.thread.y]}),{output:[1,this.height],immutable:!0}))}reuseKernels(e){this.reshapeInput=e.reshapeInput}predict(e){if((Array.isArray(e)||e instanceof Float32Array)&&"number"===typeof e[0]&&e.length===this.height*this.width)Q(this.weights),this.weights=J(e,[this.width,this.height]);else{if(!Array.isArray(e)||e.length!==this.height||!(Array.isArray(e[0])||e[0]instanceof Float32Array)||e[0].length!==this.width)throw new Error("Inputs are not of sized correctly");this.weights=ee(e)}}predict1D(e){this.weights&&Q(this.weights),this.reshapeInput?this.weights=this.reshapeInput(e):this.weights=e}compare(){}learn(){}}function vn(e){return new xn(e)}function wn(e){return h(e[this.thread.y][this.thread.x])}function Sn(e){return h(e[this.thread.z][this.thread.y][this.thread.x])}function kn(e,t){return p(e[this.thread.y][this.thread.x],t[this.thread.y][this.thread.x])}function Tn(e,t){return p(e[this.thread.z][this.thread.y][this.thread.x],t[this.thread.z][this.thread.y][this.thread.x])}class An extends Ee{setupKernels(){const{width:e,height:t,depth:n}=this.inputLayer;this.depth>0?(this.predictKernel=q(Sn,{output:[e,t,n],functions:[h],immutable:!0}),this.compareKernel=q(Tn,{output:[e,t,n],functions:[p],immutable:!0})):(this.predictKernel=q(wn,{output:[e,t],functions:[h],immutable:!0}),this.compareKernel=q(kn,{output:[e,t],functions:[p],immutable:!0}))}predict(){Q(this.weights),this.weights=this.predictKernel(this.inputLayer.weights)}compare(){const{deltas:e}=this;this.deltas=this.compareKernel(this.weights,e),Q(e)}}function En(e,t){return new An(e,t)}function _n(e,t,n){const{height:r}=e;if("number"!==typeof r)throw new Error("no settings.height given");n.setDimensions&&n.setDimensions(1,r);const i=ht({width:t.height,height:r,std:.08,id:"inputGateWeights"}),s=ht({width:r,height:r,std:.08,id:"inputGatePeepholes"}),a=gn({width:1,height:r,id:"inputGateBias"}),o=St(lt(lt(gt(i,t),gt(s,n)),a),{id:"inputGate"}),l=ht({width:t.height,height:r,std:.08,id:"forgetGateWeights"}),u=ht({width:r,height:r,std:.08,id:"forgetGatePeepholes"}),c=gn({width:1,height:r,id:"forgetGateBias"}),h=St(lt(lt(gt(l,t),gt(u,n)),c),{id:"forgetGate"}),p=ht({width:t.height,height:r,std:.08,id:"outputGateWeights"}),d=ht({width:r,height:r,std:.08,id:"outputGatePeepholes"}),f=gn({width:1,height:r,id:"outputGateBias"}),m=St(lt(lt(gt(p,t),gt(d,n)),f),{id:"outputGate"}),g=ht({width:t.height,height:r,std:.08,id:"memoryWeights"}),y=ht({width:r,height:r,std:.08,id:"memoryPeepholes"}),b=gn({width:1,height:r,id:"memoryBias"}),x=fn(lt(lt(gt(g,t),gt(y,n)),b),{id:"memory"}),v=rn(h,n,{id:"retainCell"}),w=rn(o,x,{id:"writeCell"});return rn(m,fn(lt(v,w,{id:"cell"})),{id:"activations"})}function Ln(e,t){const{height:n}=e,r=ht({height:n,width:t.height,id:"outputGate",std:.08}),i=ht({height:n,id:"output",std:.08}),s=gt(r,t,{id:"outputGateConnected"});return De({id:"target",...e},lt(s,i))}function Cn(e){return e}function In(e){return e}function $n(e){const t=this.thread.x*this.constants.strideX-this.constants.paddingX,n=this.thread.y*this.constants.strideY-this.constants.paddingY,r=t+this.constants.filterWidth,i=n+this.constants.filterHeight,s=Math.max(t,0),a=Math.max(n,0),o=Math.min(r,this.constants.inputWidth),l=Math.min(i,this.constants.inputHeight);let u=e[this.thread.z][a][s];for(let c=a;c<l;c++)for(let t=s;t<o;t++){const n=e[this.thread.z][c][t];n>u&&(u=n)}return u}function On(e,t,n){const r=this.thread.x+.5,i=this.thread.y+.5,s=1/this.constants.strideX,a=1/this.constants.strideY,o=Math.max(0,Math.ceil((r-this.constants.filterWidth+this.constants.paddingX)*s)),l=Math.max(0,Math.ceil((i-this.constants.filterHeight+this.constants.paddingY)*a)),u=Math.min(Math.ceil((r+this.constants.paddingX)*s),this.constants.outputWidth),c=Math.min(Math.ceil((i+this.constants.paddingY)*a),this.constants.outputHeight);let h=0;for(let p=l;p<c;p++)for(let r=o;r<u;r++){const i=t[p][r],s=n[p][r];Math.abs(i-this.thread.x)<.1&&Math.abs(s-this.thread.y)<.1&&(h+=e[p][r])}return h}const Rn={padding:0,stride:0,filterWidth:0,filterHeight:0,filterCount:0};class Dn extends _e{constructor(e,t){super(e,t),this.predictKernelMap=null,this.settings={...e,...Tt(e,Rn),...At(e,Rn)},this.weights=K(this.width,this.height,this.depth),this.deltas=Ae(this.width,this.height,this.depth),this.validate()}get strideX(){return this.settings.strideX}get strideY(){return this.settings.strideY}get paddingX(){return this.settings.paddingX}get paddingY(){return this.settings.paddingY}get width(){return Math.ceil((this.inputLayer.width+2*this.paddingX-this.filterWidth)/this.strideX+1)}get height(){return Math.floor((this.inputLayer.height+2*this.paddingY-this.filterHeight)/this.strideY+1)}get depth(){return this.settings.filterCount}get filterCount(){return this.settings.filterCount}get switchX(){return this.settings.switchX}set switchX(e){this.settings.switchX=e}get switchY(){return this.settings.switchY}set switchY(e){this.settings.switchY=e}setupKernels(){this.predictKernelMap=Y({switchX:In,switchY:Cn},$n,{output:[this.width,this.height,this.depth],constants:{inputWidth:this.inputLayer.width,inputHeight:this.inputLayer.height,paddingX:this.paddingX,paddingY:this.paddingY,filterHeight:this.filterHeight,filterWidth:this.filterWidth,strideX:this.strideX,strideY:this.strideY}}),this.compareKernel=q(On,{output:[this.inputLayer.width,this.inputLayer.height,this.inputLayer.depth],constants:{inputWidth:this.inputLayer.width,inputHeight:this.inputLayer.height,outputWidth:this.width,outputHeight:this.height,filterWidth:this.filterWidth,filterHeight:this.filterHeight,paddingX:this.paddingX,paddingY:this.paddingY,strideX:this.strideX,strideY:this.strideY}})}predict(){const{result:e,switchX:t,switchY:n}=this.predictKernelMap(this.inputLayer.weights);this.switchX=t,this.switchY=n,this.weights=e}compare(){const e=this.inputLayer.deltas;this.inputLayer.deltas=this.compareKernel(this.deltas,this.switchX,this.switchY),Q(e)}}function zn(e,t){return new Dn(e,t)}class Pn extends Le{constructor(e){super(),this.praxis=null,this.predictKernel=null,this.compareKernel=null,this.settings={},this.recurrentInput=e,this.validate()}get width(){return this.recurrentInput.width}get height(){return this.recurrentInput.height}get depth(){return this.recurrentInput.depth}get deltas(){return this.recurrentInput.deltas}set deltas(e){const t=this.recurrentInput.deltas;this.recurrentInput.deltas=e,Q(t)}get weights(){return this.recurrentInput.weights}set weights(e){const t=this.recurrentInput.weights;this.recurrentInput.weights=e,Q(t)}validate(){if(Se.prototype.validate.call(this),this.width!==this.recurrentInput.width)throw new Error(`${this.constructor.name} layer width ${this.width} and ${this.recurrentInput.constructor.name} width (${this.recurrentInput.width}) are not same`);if(this.height!==this.recurrentInput.height)throw new Error(`${this.constructor.name} layer height ${this.height} and ${this.recurrentInput.constructor.name} width (${this.recurrentInput.height}) are not same`)}setDimensions(e,t){this.recurrentInput.width=e,this.recurrentInput.height=t}predict(){}compare(){}learn(){}setupKernels(){}reuseKernels(){}}class Mn extends Le{constructor(e){super(),this.praxis=null,this.settings={},this.predictKernel=null,this.compareKernel=null,e&&(this.settings={...e})}setDimensions(e,t){this.praxis=null,this.settings={...this.settings,width:e,height:t,weights:Te(e,t),deltas:Te(e,t)}}setupKernels(){}reuseKernels(){}predict(){}compare(){}learn(e){const{weights:t}=this;this.weights=this.praxis.run(this,e),Q(t)}}function Nn(){return new Mn}function Fn(e){return t(e[this.thread.y][this.thread.x])}function Vn(e,t){return r(e[this.thread.y][this.thread.x],t[this.thread.y][this.thread.x])}function Kn(e){return t(e[this.thread.z][this.thread.y][this.thread.x])}function jn(e,t){return r(e[this.thread.z][this.thread.y][this.thread.x],t[this.thread.z][this.thread.y][this.thread.x])}class Bn extends Ee{setupKernels(){const{width:e,height:n,depth:i}=this.inputLayer;i>0?(this.predictKernel=q(Kn,{output:[e,n,i],functions:[t],immutable:!0}),this.compareKernel=q(jn,{output:[e,n,i],functions:[r],immutable:!0})):(this.predictKernel=q(Fn,{output:[e,n],functions:[t],immutable:!0}),this.compareKernel=q(Vn,{output:[e,n],functions:[r],immutable:!0}))}predict(){Q(this.weights),this.weights=this.predictKernel(this.inputLayer.weights)}compare(){Q(this.inputLayer.deltas),this.inputLayer.deltas=this.compareKernel(this.weights,this.deltas)}}function Un(e,t){return new Bn(e,t)}function Gn(e,t,n){const{height:r}=e;if("number"!==typeof r)throw new Error("height not set");n.setDimensions&&n.setDimensions(1,r);const i=ht({id:"weight",height:r,width:t.height,std:.08}),s=ht({id:"transition",height:r,width:r,std:.08}),a=gn({id:"bias",height:r});return Un(lt(lt(gt(i,t),gt(s,n)),a))}class Wn extends Se{constructor(e,t){super(e),this.inputLayer=t,this.validate()}predict(){Q(this.weights),this.weights=ee(this.inputLayer.weights)}learn(){}}function Hn(e,t){return new Wn(e,t)}function Xn(e){let t=-1/0;for(let n=0;n<this.constants.inputHeight;n++)for(let r=0;r<this.constants.inputWidth;r++){const i=e[n][r];i>t&&(t=i)}return t}function qn(e){let t=-1/0;for(let n=0;n<this.constants.inputDepth;n++)for(let r=0;r<this.constants.inputHeight;r++)for(let i=0;i<this.constants.inputWidth;i++){const s=e[n][r][i];s>t&&(t=s)}return t}function Yn(e){let t=0;for(let n=0;n<this.constants.inputHeight;n++)for(let r=0;r<this.constants.inputWidth;r++)t+=e[n][r];return t}function Jn(e){let t=0;for(let n=0;n<this.constants.inputDepth;n++)for(let r=0;r<this.constants.inputHeight;r++)for(let i=0;i<this.constants.inputWidth;i++)t+=e[n][r][i];return t}function Qn(e,t){return Math.exp(e[this.thread.x]-t[0])}function Zn(e,t){return Math.exp(e[this.thread.z][this.thread.y][this.thread.x]-t[0])}function er(e,t){return e[this.thread.y][this.thread.x]/t[0]}function tr(e,t){return e[this.thread.z][this.thread.y][this.thread.x]/t[0]}function nr(e,t){let n=0;return this.thread.x+this.thread.y*this.output.x===e&&(n=1),-(n-t[this.thread.y][this.thread.x])}function rr(e,t){let n=0;return this.thread.x+this.thread.y*this.output.x+this.thread.z*this.output.x*this.output.y===e&&(n=1),-(n-t[this.thread.z][this.thread.y][this.thread.x])}class ir extends Ce{constructor(e,t){super(e,t),this.errors=null,this.getExponentialsKernel=null,this.getMaxValueKernel=null,this.getSumKernel=null,this.validate(),this.depth>0?(this.weights=K(this.width,this.height,this.depth),this.deltas=Ae(this.width,this.height,this.depth)):this.height>0?(this.weights=V(this.width,this.height),this.deltas=Te(this.width,this.height)):(this.weights=F(this.width),this.deltas=j(this.width))}setupKernels(){const{width:e,height:t,depth:n}=this;n>0?(this.getExponentialsKernel=q(Zn,{output:[e,t,n]}),this.getMaxValueKernel=q(qn,{output:[1,1,1],constants:{inputWidth:e,inputHeight:t,inputDepth:n}}),this.getSumKernel=q(Jn,{output:[1,1,1],constants:{inputWidth:e,inputHeight:t,inputDepth:n}}),this.predictKernel=q(tr,{output:[e,t,n]}),this.compareKernel=q(rr,{output:[e,t,n],immutable:!0})):(this.getExponentialsKernel=q(Qn,{output:[e,t]}),this.getMaxValueKernel=q(Xn,{output:[1,1],constants:{inputWidth:e,inputHeight:t}}),this.getSumKernel=q(Yn,{output:[1,1],constants:{inputWidth:e,inputHeight:t}}),this.predictKernel=q(er,{output:[e,t]}),this.compareKernel=q(nr,{output:[e,t],immutable:!0}))}predict(){const e=this.getMaxValueKernel(this.inputLayer.weights),t=this.getExponentialsKernel(this.inputLayer.weights,e),n=this.getSumKernel(t);this.weights=this.predictKernel(t,n)}compare(e){const{deltas:t,errors:n}=this;this.errors=this.compareKernel(e[0],t),this.deltas=ee(this.errors),Q(t),Q(n);const r=this.inputLayer.deltas;this.inputLayer.deltas=ee(this.deltas),Q(r)}}function sr(e,t){return new ir(e,t)}class ar extends Se{constructor(e,t){super(t),this.inputLayer=e}predict(){Q(this.weights),this.weights=ee(this.inputLayer.weights),this.validate()}learn(){}}function or(e,t){return new ar(e,t)}function lr(e){return e[this.thread.x][this.thread.y]}const ur=lr;class cr extends Ce{get width(){return this.inputLayer.height}get height(){return this.inputLayer.width}constructor(e){super(e),this.validate()}setupKernels(){this.predictKernel=q(lr,{output:[this.height,this.width]}),this.compareKernel=q(ur,{output:[this.width,this.height]})}predict(){this.weights=this.predictKernel(this.inputLayer.weights)}compare(){this.inputLayer.deltas=this.compareKernel(this.deltas)}}function hr(e){return new cr(e)}const pr={Activation:Ee,Internal:Le,InternalModel:ze,EntryPoint:Pe,Filter:_e,Model:Me,Modifier:Ce,Operator:Ie,Target:Re};var dr=Object.freeze({__proto__:null,layerTypes:pr,Add:ot,add:lt,arthurFeedForward:kt,BaseLayer:Se,baseLayerDefaultSettings:we,Convolution:Ot,convolution:Rt,Dropout:Ft,dropout:Vt,feedForward:Kt,FullyConnected:qt,fullyConnected:Yt,gru:yn,Input:xn,input:vn,LeakyRelu:An,leakyRelu:En,lstmCell:_n,Multiply:mt,multiply:gt,MultiplyElement:nn,multiplyElement:rn,Negative:Qt,negative:Zt,Ones:on,ones:ln,output:Ln,Pool:Dn,pool:zn,Random:ct,random:ht,RecurrentInput:Pn,RecurrentZeros:Mn,rnnCell:Gn,Regression:Wn,regression:Hn,Relu:Bn,relu:Un,Sigmoid:wt,sigmoid:St,SoftMax:ir,softMax:sr,SVM:ar,svm:or,Tanh:dn,tanh:fn,Target:Re,target:De,Transpose:cr,transpose:hr,Zeros:mn,zeros:gn});const fr=Object.keys(dr);function mr(e,t,n){if(!fr.find((t=>t===e.type)))return null;const r=dr[e.type];if(r.prototype instanceof pr.Filter){if(!t)throw new Error("inputLayer missing");return new r(e,t)}if(r.prototype instanceof pr.Activation||r.prototype instanceof pr.Modifier){if(!t)throw new Error("inputLayer missing");return new r(t,e)}if(r.prototype instanceof pr.Internal)return new r(e);if(r.prototype instanceof pr.Operator){if(!t)throw new Error("inputLayer1 missing");if(!n)throw new Error("inputLayer2 missing");return new r(t,n,e)}if(r.prototype instanceof pr.InternalModel||r.prototype instanceof pr.EntryPoint||r.prototype instanceof pr.Model)return new r(e);if(r===Re){if(!t)throw new Error("inputLayer missing");return new r(e,t)}return null}const gr={learningRate:.3,binaryThresh:.5,initPraxis:(e,t)=>{var n;return Ze(e,null!==(n=e.settings.praxisOpts)&&void 0!==n?n:t)}},yr={iterations:2e4,errorThresh:.005,log:!1,logPeriod:10,learningRate:.3,callbackPeriod:10,errorCheckInterval:100,timeout:1/0};class br{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.trainOpts={},this.layers=null,this._inputLayer=null,this._hiddenLayers=null,this._outputLayer=null,this._model=null,this.meanSquaredError=null,this.inputLookup=null,this.inputLookupLength=null,this.outputLookup=null,this.outputLookupLength=null,this.options={...gr,...e},this._updateTrainingOptions({...yr,...e})}static _validateTrainingOptions(e){const{iterations:t,errorThresh:n,log:r,logPeriod:i,learningRate:s,callback:a,callbackPeriod:o,timeout:l}=e,u={iterations:()=>"number"===typeof t&&t>0,errorThresh:()=>"number"===typeof n&&n>0&&n<1,log:()=>"function"===typeof r||"boolean"===typeof r,logPeriod:()=>"number"===typeof i&&i>0,learningRate:()=>"number"===typeof s&&s>0&&s<1,callback:()=>"function"===typeof a||null===a,callbackPeriod:()=>"number"===typeof o&&o>0,timeout:()=>"number"===typeof l&&l>0};Object.keys(yr).forEach((t=>{if(u.hasOwnProperty(t)&&!u[t]()){const n=e[t];throw new Error(`[${t}, ${(null!==n&&void 0!==n?n:"undefined").toString()}] is out of normal training range, your network will probably not train.`)}}))}_setLogMethod(e){this.trainOpts.log="function"===typeof e?e:!!e&&console.log}_updateTrainingOptions(e){var t;this.trainOpts={...yr,...this.trainOpts,...e},br._validateTrainingOptions(this.trainOpts),this._setLogMethod(null!==(t=e.log)&&void 0!==t?t:this.trainOpts.log);const{callback:n,callbackPeriod:r,errorCheckInterval:i}=this.trainOpts;n&&r!==i&&console.warn(`options.callbackPeriod with value of ${(null!==r&&void 0!==r?r:"undefined").toString()} does not match options.errorCheckInterval with value of ${(null!==i&&void 0!==i?i:"undefined").toString()}, if logging error, it will repeat.  These values may need to match`)}_connectOptionsLayers(){const{inputLayerIndex:e,outputLayerIndex:t,layers:n}=this.options;if(!n)throw new Error("this.options.layers in unexpected state");if("number"!==typeof e)throw new Error("inputLayerIndex not a number");if("number"!==typeof t)throw new Error("inputLayerIndex not a number");const r=n[e];if(!r)throw new Error("inputLayer not found in this.options.layers");const i=n[t];if(!i)throw new Error("outputLayer not found in this.options.layers");return this._inputLayer=r,this._hiddenLayers=n.slice(e,t-e),this._outputLayer=i,n}_connectNewLayers(){const{inputLayer:e,outputLayer:t}=this.options;if(!e)throw new Error("inputLayer not defined");const n=[];this._inputLayer=e();const r=this._connectHiddenLayers(this._inputLayer);if(!t)throw new Error("outputLayer not defined");return this._outputLayer=t(r[r.length-1],r.length),n.push(this._inputLayer),n.push(...r),n.push(this._outputLayer),it(n)}_connectHiddenLayers(e){this._hiddenLayers=[];const t=[],{hiddenLayers:n}=this.options;if(!n)throw new Error("hiddenLayers not defined");for(let r=0;r<n.length;r++){const i=n[r](e,r);t.push(i),this._hiddenLayers.push(i),e=i}return t}initialize(){this.layers=this.options.layers?this._connectOptionsLayers():this._connectNewLayers(),this.initializeLayers(this.layers),this._model=this.layers.filter((e=>e instanceof Me))}initializeLayers(e){var t,n;for(let i=0;i<e.length;i++){const r=e[i];r.setupKernels(!0),r instanceof Me&&null===r.praxis&&"function"===typeof this.options.initPraxis&&(r.praxis=this.options.initPraxis(r,null!==(n=null!==(t=r.settings.praxisOpts)&&void 0!==t?t:this.options.praxisOpts)&&void 0!==n?n:{}),r.praxis.setupKernels())}const r=e[e.length-1];this.meanSquaredError=new ve({width:r.width,height:r.height})}run(e){let t;if(Array.isArray(e)||e.buffer)t=e;else{if(!this.inputLookup)throw new Error("input is incompatible with net");t=x.toArray(this.inputLookup,e,this.inputLookupLength)}let n=this.runInput(t);return n instanceof b.Texture&&(n=n.toArray()),this.outputLookup?x.toObject(this.outputLookup,n):n}runInput(e){if(!this.layers)throw new Error("not initialized");this.layers[0].predict(e);for(let t=1;t<this.layers.length;t++)this.layers[t].predict();return this.layers[this.layers.length-1].weights}train(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{preparedData:n,status:r,endTime:i}=this._prepTraining(e,t);let s=!0;const a=()=>this._calculateTrainingError(n),o=()=>this._trainPatterns(n);for(;s;)s=this._trainingTick(r,i,a,o);return r}async trainAsync(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{preparedData:n,status:r,endTime:i}=this._prepTraining(e,t);return await new Promise(((e,t)=>{try{const t=()=>this._calculateTrainingError(n),s=()=>this._trainPatterns(n),a=new v.Thaw(new Array(this.trainOpts.iterations),{delay:!0,each:()=>this._trainingTick(r,i,t,s)||a.stop(),done:()=>e(r)});a.tick()}catch(s){t(s)}}))}_trainingTick(e,t,n,r){const{trainOpts:i}=this;return!(e.iterations>=i.iterations||e.error<=i.errorThresh||Date.now()>=t)&&("function"===typeof i.log&&e.iterations%i.logPeriod===0?(e.error=n(),i.log(`iterations: ${e.iterations}, training error: ${e.error}`)):e.iterations%i.errorCheckInterval===0?e.error=n():r(),i.callback&&e.iterations%i.callbackPeriod===0&&i.callback(Object.assign(e)),e.iterations++,!0)}_prepTraining(e,t){this._updateTrainingOptions(t);const n=this.formatData(e),r=this.trainOpts.timeout?Date.now()+this.trainOpts.timeout:0,i={error:1,iterations:0};return this.verifyIsInitialized(),{preparedData:this.transferData(n),status:i,endTime:r}}verifyIsInitialized(){this._model||this.initialize()}_calculateTrainingError(e){let t=new Float32Array([0]);const n=this.meanSquaredError;for(let i=0;i<e.length;++i){const r=t,s=this._trainPattern(e[i].input,e[i].output,!0);t=n.add(t,s),Q(s),Q(r)}const r=n.divide(e.length,t);if(Q(t),r instanceof b.Texture){const e=r.toArray();return Q(r),e[0]}return r[0]}_trainPatterns(e){for(let t=0;t<e.length;++t)this._trainPattern(e[t].input,e[t].output,!1)}_trainPattern(e,t,n){var r;if(this.runInput(e),this._calculateDeltas(t),this.adjustWeights(),n){if(!(null===(r=this._outputLayer)||void 0===r?void 0:r.errors))throw new Error("outputLayer.errors not defined");return this.meanSquaredError.calculate(this._outputLayer.errors)}return null}_calculateDeltas(e){const t=this.layers;for(let n=t.length-1;n>-1;n--)t[n].compare(e)}adjustWeights(){const e=this._model;for(let t=0;t<e.length;t++)e[t].learn(this.trainOpts.learningRate)}formatData(e){if(!Array.isArray(e)){const t=[];t.push(e),e=t}const t=e[0].input;let n;if(!Array.isArray(e)||Array.isArray(t)||t instanceof Float32Array)n=e;else{if(!this.inputLookup){const t=new I(e,"input");this.inputLookup=t.table,this.inputLookupLength=t.length}n=e.map((e=>({input:x.toArray(this.inputLookup,e.input,this.inputLookupLength)})),this)}const r=e[0].output;if(!Array.isArray(r)&&!(r instanceof Float32Array)){if(!this.outputLookup){const t=new I(e,"output");this.outputLookup=t.table,this.outputLookupLength=t.length}n=e.map(((e,t)=>{const r=x.toArray(this.outputLookup,e.output,this.inputLookupLength);return{input:n[t].input,output:r}}),this)}return n}transferData(e){const t=new Array(e.length),n=q((function(e){return e[this.thread.x]}),{output:[e[0].input.length],immutable:!0}),r=q((function(e){return e[this.thread.x]}),{output:[e[0].output.length],immutable:!0});for(let i=0;i<e.length;i++){const s=e[i];t[i]={input:n(s.input),output:r(s.output)}}return t}test(){throw new Error(`${this.constructor.name}-test is not yet implemented`)}toJSON(){var e;if(this.layers||this.initialize(),!this._model||!this.layers||!this._inputLayer||!this._hiddenLayers||!this._outputLayer)throw new Error("network is not initialized");const t=[];for(let n=0;n<this.layers.length;n++){const e=this.layers[n],r=e.toJSON();e.hasOwnProperty("inputLayer")?r.inputLayerIndex=this.layers.indexOf(e.inputLayer):e.hasOwnProperty("inputLayer1")&&e.hasOwnProperty("inputLayer2")&&(r.inputLayer1Index=this.layers.indexOf(e.inputLayer1),r.inputLayer2Index=this.layers.indexOf(e.inputLayer2)),t.push(r)}return{type:this.constructor.name,sizes:null!==(e=this.options.sizes)&&void 0!==e?e:[this._inputLayer.height].concat(this._hiddenLayers.map((e=>e.height))).concat([this._outputLayer.height]),outputLayerIndex:this.layers.indexOf(this._outputLayer),layers:t,inputLayerIndex:this.layers.indexOf(this._inputLayer)}}static fromJSON(e,t){var n,r,i,s;const a=e.layers,o=[],l=t?null!==(n=mr(a[0]))&&void 0!==n?n:t(a[0]):mr(a[0]);if(!l)throw new Error("unable to find layer");o.push(l);for(let u=1;u<a.length;u++){const e=a[u];if("undefined"===typeof e.inputLayerIndex&&"undefined"===typeof e.inputLayer1Index&&"undefined"===typeof e.inputLayer2Index){const n=t?null!==(r=mr(e))&&void 0!==r?r:t(e):mr(e);if(!n)throw new Error("unable to find layer");o.push(n)}else if("number"===typeof e.inputLayerIndex){const n=o[e.inputLayerIndex];if(!n)throw new Error("inputLayer1 not found");const r=t?null!==(i=mr(e,n))&&void 0!==i?i:t(e,n):mr(e,n);if(!r)throw new Error("unable to find layer");o.push(r)}else{if("number"!==typeof e.inputLayer1Index)throw new Error("Cannot create network from provided JSON. inputLayer1Index not defined.");if("number"!==typeof e.inputLayer2Index)throw new Error("Cannot create network from provided JSON. inputLayer2Index not defined.");const n=o[e.inputLayer1Index],r=o[e.inputLayer2Index];if(void 0===n)throw new Error(`Cannot create network from provided JSON. layer of index ${e.inputLayer1Index} not found.`);if(void 0===r)throw new Error(`Cannot create network from provided JSON. layer of index ${e.inputLayer2Index} not found.`);const i=t?null!==(s=mr(e,n,r))&&void 0!==s?s:t(e,n,r):mr(e,n,r);if(!i)throw new Error("unable to find layer");o.push(i)}}return new this({...e,layers:o})}toFunction(){throw new Error(`${this.constructor.name}-toFunction is not yet implemented`)}}function xr(e,t){if(!t)throw new TypeError(`Required parameter 'net' is of type ${typeof t}. Must be of type 'brain.NeuralNetwork'`);const n=t.run(e);let r=null,i=-1;return Object.entries(n).forEach((e=>{let[t,n]=e;"undefined"!==typeof n&&"number"===typeof n&&n>i&&(r=t,i=n)})),r}class vr extends Le{constructor(){super(...arguments),this.settings={},this.layer=null}setLayer(e){this.layer=e}get width(){if(!this.layer)throw new Error("layer not set");return this.layer.width}set width(e){throw new Error(`${this.constructor.name}-width is not yet implemented`)}get height(){if(!this.layer)throw new Error("layer not set");return this.layer.height}set height(e){throw new Error(`${this.constructor.name}-height is not yet implemented`)}get deltas(){if(!this.layer)throw new Error("layer not set");return this.layer.deltas}set deltas(e){if(!this.layer)throw new Error("layer not set");Q(this.layer.deltas),this.layer.deltas=e}get weights(){if(!this.layer)throw new Error("layer not set");return this.layer.weights}set weights(e){if(!this.layer)throw new Error("layer not set");Q(this.layer.weights),this.layer.weights=e}predict(){}compare(){}learn(){throw new Error("no longer using")}setupKernels(){}reuseKernels(){}}class wr extends br{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.trainOpts={},this._outputConnection=null,this._layerSets=[],this._hiddenLayerOutputIndices=[],this._model=null}_connectLayers(){if(!this.options.inputLayer)throw new Error("inputLayer not found");if(!this.options.outputLayer)throw new Error("outputLayer not found");const e=this.options.inputLayer(),t=this._connectHiddenLayers(e);return{inputLayer:e,hiddenLayers:t,outputLayer:this.options.outputLayer(t[t.length-1],-1)}}_connectLayersDeep(){const e=[],t=this._layerSets[this._layerSets.length-1];let n=0;function r(n){const r=t.indexOf(n);if(r<0)throw new Error("unable to find layer");return e[r]}function i(e){return{...e.settings,weights:null,deltas:null,praxis:null}}for(let s=0;s<t.length;s++){const a=t[s];let o;if(a instanceof Ee)o=new a.constructor(r(a.inputLayer),i(a));else if(a instanceof Pe)o=new a.constructor(i(a));else if(a instanceof _e)o=new a.constructor(i(a.inputLayer),r(a.inputLayer));else if(a instanceof Le){const e=t[this._hiddenLayerOutputIndices[n++]];if(a instanceof vr)throw new Error("unfinished");if(a instanceof Pn)o=new Pn(e);else{if(!(a instanceof Mn))throw new Error(`hidden layer ${a.constructor.name} extends unknown hidden layer`);o=new Pn(e)}}else if(a instanceof ze||a instanceof Me)o=a;else if(a instanceof Ce)o=new a.constructor(r(a.inputLayer),i(a.inputLayer));else if(a instanceof Ie)o=new a.constructor(r(a.inputLayer1),r(a.inputLayer2),i(a));else{if(!(a instanceof Re))throw new Error(`hidden layer ${a.constructor.name} extends unknown hidden layer`);o=new a.constructor(i(a),r(a.inputLayer))}e.push(o)}return e}_connectHiddenLayers(e){const t=[];if(!this.options.hiddenLayers)throw new Error("hiddenLayers not defined");for(let n=0;n<this.options.hiddenLayers.length;n++){const r=new Mn,i=this.options.hiddenLayers[n](e,r,n);e=i,t.push(i)}return t}initialize(){let e;if(this._outputConnection=new vr,this.options.layers)e=this._connectOptionsLayers();else{const{inputLayer:t,hiddenLayers:n,outputLayer:r}=this._connectLayers();e=it([t,...n,r]),this._hiddenLayerOutputIndices=n.map((t=>e.indexOf(t))),this._inputLayer=t,this._hiddenLayers=n,this._outputLayer=r}this.layers=e,this._layerSets=[e],this._model=e.filter((e=>e instanceof Me||e instanceof ze)),this.initializeLayers(e)}initializeDeep(){const e=this._connectLayersDeep();for(let t=0;t<e.length;t++){const n=e[t];n.setupKernels(!0),n.reuseKernels(this._layerSets[0][t])}this._layerSets.push(e)}run(e){for(;this._layerSets.length<=e.length;)this.initializeDeep();const t=this.runInputs(e);return t instanceof b.Texture?t.toArray():t}runInput(e){throw new Error("use .runInputs()")}runInputs(e){for(;this._layerSets.length<e.length;)this.initializeDeep();const t=e.length-1;for(let i=0;i<=t;i++){const t=this._layerSets[i];t[0].predict(e[i]);for(let e=1;e<t.length;e++)t[e].predict()}const n=this._layerSets[t],r=n[n.length-1].weights;return this.end(),r}train(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{preparedData:n,status:r,endTime:i}=this._prepTraining(e,t);let s=!0;const a=()=>this._calculateTrainingError(n),o=()=>this._trainPatterns(n);for(;s;)s=this._trainingTick(r,i,a,o);return r}end(){const e=this._layerSets.length-1,t=this._layerSets[e];t[0].predict([new Float32Array([0])]);for(let n=1;n<t.length;n++)t[n].predict()}transferData(e){return e}_prepTraining(e,t){this._updateTrainingOptions(t);const n=this.trainOpts.timeout?Date.now()+this.trainOpts.timeout:0,r={error:1,iterations:0};return this.verifyIsInitialized(),{preparedData:this.transferData(e),status:r,endTime:n}}_calculateTrainingError(e){if(!this.meanSquaredError)throw new Error("this.meanSquaredError not setup");let t=new Float32Array(1);for(let r=0;r<e.length;++r){const n=t,i=this._trainPattern(e[r],!0);t=this.meanSquaredError.add(t,i),Q(i),Q(n)}const n=this.meanSquaredError.divide(e.length,t);return Q(t),n instanceof b.Texture?n.toArray()[0]:n[0]}formatData(e){return e}_calculateDeltas(e){const t=this._layerSets[this._layerSets.length-1];for(let n=t.length-2;n>=0;n--)t[n].compare();for(let n=e.length-2;n>=0;n--){const t=this._layerSets[n];t[t.length-1].compare(e[n+1]);for(let e=t.length-2;e>=0;e--)t[e].compare()}}adjustWeights(){var e;const t=this._model;for(let n=0;n<t.length;n++)t[n].learn(null!==(e=this.options.learningRate)&&void 0!==e?e:0)}_trainPatterns(e){for(let t=0;t<e.length;++t)this._trainPattern(e[t],!1)}_trainPattern(e,t){if(this.runInputs(e),this._calculateDeltas(e),this.adjustWeights(),t){if(!this.meanSquaredError)throw new Error("this.meanSquaredError not setup");let t=new Float32Array(1);for(let n=0,r=e.length-2;n<=r;n++){const e=this._layerSets[n],r=e[e.length-1],i=t;t=this.meanSquaredError.addAbsolute(i,r.errors),Q(i)}return ee(this.meanSquaredError.divide(e.length,t))}return null}}class Sr{constructor(e,t){this.rows=0,this.columns=0,e&&(this.rows=e),t&&(this.columns=t),this.weights=j(this.rows*this.columns),this.deltas=j(this.rows*this.columns)}getWeight(e,t){const n=this.columns*e+t;if(n<0||n>=this.weights.length)throw new Error("get accessor is skewed");return this.weights[n]}setWeight(e,t,n){const r=this.columns*e+t;if(r<0||r>=this.weights.length)throw new Error("set accessor is skewed");return this.weights[r]=n,this}getDelta(e,t){const n=this.columns*e+t;if(n<0||n>=this.deltas.length)throw new Error("get accessor is skewed");return this.deltas[n]}setDelta(e,t,n){const r=this.columns*e+t;if(r<0||r>=this.weights.length)throw new Error("set accessor is skewed");return this.deltas[r]=n,this}toJSON(){return{rows:this.rows,columns:this.columns,weights:Array.from(this.weights.slice(0))}}static fromJSON(e){const t=new Sr(e.rows,e.columns);for(let n=0,r=e.rows*e.columns;n<r;n++)t.weights[n]=e.weights[n];return t}static fromArray(e){const t=new Sr(e.length,e[0].length);return t.fromArray(e),t}deltasToArray(){return this.toArray("deltas")}weightsToArray(){return this.toArray("weights")}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"weights";const t=new Array(this.rows);return this.iterate({row:e=>{t[e]=new Array(this.columns)},column:(n,r)=>{"weights"===e?t[n][r]=this.getWeight(n,r):"deltas"===e&&(t[n][r]=this.getDelta(n,r))}}),t}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"weights";if(e.length!==this.rows)throw new Error("rows do not match");if(e[0].length!==this.columns)throw new Error("columns do not match");return this.iterate({column:(n,r)=>{const i=e[n][r];if("number"!==typeof i)throw new Error("value not number");"weights"===t?this.setWeight(n,r,i):"deltas"===t&&this.setDelta(n,r,i)}}),this}iterate(e){const t=this.rows,n=this.columns;for(let r=0;r<t;r++){e.row&&e.row(r);for(let t=0;t<n;t++)e.column&&e.column(r,t)}return this}}class kr extends Sr{constructor(e,t,n){super(e,t),this.std=n;for(let r=0,i=this.weights.length;r<i;r++)this.weights[r]=D(-n,n)}}class Tr{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.values=e,this.indexTable={},this.characterTable={},this.characters=[],this.specialIndexes=[],this.isSetup=!1,void 0!==e&&this.setup(e,t)}setup(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.isSetup)throw new Error("DataFormatter is already setup");this.values=e,this.buildCharactersFromIterable(e),this.buildTables(t),e[0].input&&this.addInputOutput(),this.addUnrecognized(),this.isSetup=!0}buildCharactersFromIterable(e){const t={};for(let n=0,r=e.length;n<r;n++){const r=e[n];if(r.hasOwnProperty("length")){const e=r;for(let n=0,r=e.length;n<r;n++){const r=e[n];t.hasOwnProperty(r)||(t[r]=!0,this.characters.push(r))}}else if("number"===typeof r){if(t.hasOwnProperty(r))continue;t[r]=!0,this.characters.push(r)}else if("boolean"===typeof r){const e=r.toString();if(t.hasOwnProperty(e))continue;t[e]=!0,this.characters.push(e)}else if(Array.isArray(r)&&"string"===typeof r[0])for(let e=0;e<r.length;e++){const n=r[e];t.hasOwnProperty(n)||(t[n]=!0,this.characters.push(n))}else if(!Array.isArray(r)||"number"!==typeof r[0]&&"boolean"!==typeof r[0]){if(!r.hasOwnProperty("input")||!r.hasOwnProperty("output"))throw new Error("Unhandled value");{const{input:e,output:n}=r;Array.isArray(e)?this.addCharacters(e,t):this.addCharacters(e.toString(),t),Array.isArray(n)?this.addCharacters(n,t):this.addCharacters(n.toString(),t)}}else for(let e=0;e<r.length;e++){const i=r[e].toString();t.hasOwnProperty(n)||(t[i]=!0,this.characters.push(i))}}}addCharacters(e,t){for(let n=0;n<e.length;n++){const r=e[n].toString();t.hasOwnProperty(r)||(t[r]=!0,this.characters.push(r))}}buildTables(e){const t=this.characters.length;for(let n=0;n<t;n++){const t=this.characters[n];n>=e&&(this.indexTable[t]=n,this.characterTable[n]=t)}}toIndexes(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=[],{indexTable:r}=this;switch(typeof e){case"number":case"boolean":e=e.toString()}for(let i=0,s=e.length;i<s;i++){const s=e[i].toString();let a=r[s];if(void 0===a){if(!r.unrecognized)throw new Error(`unrecognized character "${s}"`);a=r.unrecognized}a<t||n.push(a)}return n}toIndexesInputOutput(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=this.toIndexesValue(e,n,!0);return"undefined"===typeof t?r:r.concat(this.toIndexesValue(t,n,!1))}toIndexesValue(e,t,n){if("string"===typeof e)e=e.split("");else if("number"===typeof e||"boolean"===typeof e)e=e.toString().split("");else{if(!Array.isArray(e)||"number"!==typeof e[0]&&"boolean"!==typeof e[0]&&"string"!==typeof e[0])throw new Error("unrecognized value");e=e.map((e=>e.toString()))}return n&&(e=e.concat(["stop-input","start-output"])),this.toIndexes(e,t)}toCharacters(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=[],{indexTable:r,characterTable:i}=this;for(let s=0,a=e.length;s<a;s++){const a=e[s];if(a<t)continue;let o=i[a];if(void 0===o){if(!r.unrecognized)throw new Error(`unrecognized index "${a}"`);o=i[r.unrecognized]}else null!==o&&n.push(o.toString())}return n}toString(e,t){return this.toCharacters(e,t).join("")}addInputOutput(){this.addSpecial("stop-input"),this.addSpecial("start-output")}addUnrecognized(){this.addSpecial("unrecognized")}static fromAllPrintable(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["\n"];for(let n=32;n<=126;n++)t.push(String.fromCharCode(n));return new Tr(t,e)}static fromAllPrintableInputOutput(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["\n"];const n=Tr.fromAllPrintable(e,t);return n.addInputOutput(),n.addUnrecognized(),n}static fromStringInputOutput(e,t){const n=Array.from(new Set(e)).join(""),r=new Tr(n.split(""),t);return r.addInputOutput(),r.addUnrecognized(),r.isSetup=!0,r}static fromArrayInputOutput(e,t){const n=[];for(let s=0;s<e.length;s++){const t=e[s];n.push(Ar(t.input),Ar(t.output))}const r=Array.isArray(n)?n.flat():n,i=new Tr(Array.from(new Set(r)),t);return i.addInputOutput(),i.addUnrecognized(),i.isSetup=!0,i}static fromString(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=Array.from(new Set(e)).join("");return new Tr(n.split(""),t)}toJSON(){return{indexTable:this.indexTable,characterTable:this.characterTable,values:this.values,characters:this.characters,specialIndexes:this.specialIndexes}}static fromJSON(e){const t=new Tr;return t.indexTable=e.indexTable,t.characterTable=e.characterTable,t.values=e.values,t.characters=e.characters,t.specialIndexes=e.specialIndexes,t.isSetup=!0,t}addSpecial(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=this.indexTable[e]=this.characters.length;this.characterTable[n]=t,this.specialIndexes.push(this.characters.length),this.characters.push(e)}toFunctionString(){return`\nvar characterTable = ${JSON.stringify(this.characterTable)};\nvar indexTable = ${JSON.stringify(this.indexTable)};\nvar characters = ${JSON.stringify(this.characters)};\nvar dataFormatter = {\n  toIndexes: function ${this.toIndexes.toString()},\n  toIndexesInputOutput: function ${this.toIndexesInputOutput.toString()},\n  toCharacters: function ${this.toCharacters.toString()},\n  toIndexesValue: function ${this.toIndexesValue.toString()},\n};`}formatDataIn(e,t){var n;return void 0===e?[]:Array.isArray(e)&&"number"===typeof e[0]?e:(null===(n=this.indexTable)||void 0===n?void 0:n.hasOwnProperty("stop-input"))?this.toIndexesInputOutput(e,t):this.toIndexes(e)}formatDataOut(e,t){return this.toCharacters(t).join("")}format(e){if("number"===typeof e[0]&&!Array.isArray(e[0])&&(!e[0].hasOwnProperty("input")||!e[0].hasOwnProperty("output")))return e;const t=[];if("string"===typeof e[0]||"number"===typeof e[0]||Array.isArray(e[0]))if(this.isSetup)for(let n=0,r=e.length;n<r;n++)t.push(this.formatDataIn(e[n]));else{this.setup(e);for(let n=0;n<e.length;n++)t.push(this.formatDataIn(Ar(e[n])))}else{if(!e[0].input||!e[0].output)throw new Error("unrecognized data");this.isSetup||this.setup(e);for(let n=0,r=e.length;n<r;n++)t.push(this.formatDataIn(Ar(e[n].input),Ar(e[n].output)))}return t}}function Ar(e){if("string"===typeof e)return e;if("number"===typeof e)return e.toString();if("boolean"===typeof e)return e.toString();if(Array.isArray(e)&&"string"===typeof e[0])return e;if("boolean"===typeof e[0])return e.map((e=>e.toString()));if("number"===typeof e[0])return e.map((e=>e.toString()));throw new Error("unrecognized value, expected string[], string, number[], number, boolean[], or boolean")}function Er(e,t){e.rows=t.rows,e.columns=t.columns,e.weights=t.weights.slice(0),e.deltas=t.deltas.slice(0)}function _r(e,t,n){for(let r=0;r<t.weights.length;r++)e.weights[r]=t.weights[r]+n.weights[r],e.deltas[r]=0}function Lr(e,t,n){for(let r=0;r<e.deltas.length;r++)t.deltas[r]=e.deltas[r],n.deltas[r]=e.deltas[r]}function Cr(e){for(let t=0;t<e.weights.length;t++)e.weights[t]=1,e.deltas[t]=0}function Ir(e,t){e.rows=t.rows,e.columns=t.columns,e.weights=t.weights.slice(0),e.deltas=t.deltas.slice(0);for(let n=0;n<t.weights.length;n++)e.weights[n]=-t.weights[n],e.deltas[n]=0}function $r(e,t,n){const r=t.rows,i=t.columns,s=n.columns;for(let a=0;a<r;a++){const r=i*a,o=s*a;for(let a=0;a<s;a++){let l=0;for(let e=0;e<i;e++){const i=r+e,o=s*e+a;l+=t.weights[i]*n.weights[o],t.deltas[i]=0,n.deltas[o]=0}e.weights[o+a]=l}}}function Or(e,t,n){const r=t.rows,i=t.columns,s=n.columns;for(let a=0;a<r;a++){const r=i*a,o=s*a;for(let a=0;a<s;a++)for(let l=0;l<i;l++){const i=r+l,u=s*l+a,c=e.deltas[o+a];t.deltas[i]+=n.weights[u]*c,n.deltas[u]+=t.weights[i]*c}}}function Rr(e,t,n){const{weights:r}=t;for(let i=0;i<r.length;i++)e.weights[i]=t.weights[i]*n.weights[i],e.deltas[i]=0}function Dr(e,t,n){for(let r=0;r<t.weights.length;r++)t.deltas[r]=n.weights[r]*e.deltas[r],n.deltas[r]=t.weights[r]*e.deltas[r]}function zr(e,t){for(let n=0;n<t.weights.length;n++)e.weights[n]=Math.max(0,t.weights[n]),e.deltas[n]=0}function Pr(e,t){for(let n=0;n<e.deltas.length;n++)t.deltas[n]=t.weights[n]>0?e.deltas[n]:0}function Mr(e,t,n){const{columns:r}=t,i=r*n;for(let s=0;s<r;s++)e.weights[s]=t.weights[i+s],e.deltas[s]=0}function Nr(e,t,n){const{columns:r}=t,i=r*n;for(let s=0;s<r;s++)t.deltas[i+s]=e.deltas[s]}function Fr(e,t){for(let n=0;n<t.weights.length;n++)e.weights[n]=1/(1+Math.exp(-t.weights[n])),e.deltas[n]=0}function Vr(e,t){for(let n=0;n<e.deltas.length;n++){const r=e.weights[n];t.deltas[n]=r*(1-r)*e.deltas[n]}}function Kr(e){const t=new Sr(e.rows,e.columns);let n=-999999;for(let i=0;i<e.weights.length;i++)e.weights[i]>n&&(n=e.weights[i]);let r=0;for(let i=0;i<e.weights.length;i++)t.weights[i]=Math.exp(e.weights[i]-n),r+=t.weights[i];for(let i=0;i<e.weights.length;i++)t.weights[i]/=r;return t}function jr(e,t){for(let n=0;n<t.weights.length;n++)e.weights[n]=Math.tanh(t.weights[n]),e.deltas[n]=0}function Br(e,t){for(let n=0;n<e.deltas.length;n++){const r=e.weights[n];t.deltas[n]=(1-r*r)*e.deltas[n]}}class Ur{constructor(){this.states=[],this.inputRow=0}add(e,t){if(e.weights.length!==t.weights.length)throw new Error("misaligned matrices");const n=new Sr(e.rows,e.columns);return this.states.push({name:"add",product:n,left:e,right:t,forwardFn:_r,backpropagationFn:Lr}),n}allOnes(e,t){const n=new Sr(e,t);return this.states.push({name:"allOnes",product:n,left:n,forwardFn:Cr,backpropagationFn:()=>{}}),n}cloneNegative(e){const t=new Sr(e.rows,e.columns);return this.states.push({name:"cloneNegative",product:t,left:e,forwardFn:Ir,backpropagationFn:()=>{}}),t}subtract(e,t){if(e.weights.length!==t.weights.length)throw new Error("misaligned matrices");return this.add(this.add(this.allOnes(e.rows,e.columns),this.cloneNegative(e)),t)}multiply(e,t){if(e.columns!==t.rows)throw new Error("misaligned matrices");const n=new Sr(e.rows,t.columns);return this.states.push({name:"multiply",product:n,left:e,right:t,forwardFn:$r,backpropagationFn:Or}),n}multiplyElement(e,t){if(e.weights.length!==t.weights.length)throw new Error("misaligned matrices");const n=new Sr(e.rows,e.columns);return this.states.push({name:"multiplyElement",product:n,left:e,right:t,forwardFn:Rr,backpropagationFn:Dr}),n}relu(e){const t=new Sr(e.rows,e.columns);return this.states.push({name:"relu",product:t,left:e,forwardFn:zr,backpropagationFn:Pr}),t}input(e){return this.states.push({name:"input",product:e,forwardFn:t=>{if(this.inputValue){if(this.inputValue.length!==t.weights.length)throw new Error("this.inputValue is of wrong dimensions");t.weights=e.weights=this.inputValue}},backpropagationFn:()=>{}}),e}inputMatrixToRow(e){const t=this,n=new Sr(e.columns,1);return this.states.push({name:"inputMatrixToRow",product:n,left:e,get right(){return t.inputRow},forwardFn:Mr,backpropagationFn:Nr}),n}sigmoid(e){const t=new Sr(e.rows,e.columns);return this.states.push({name:"sigmoid",product:t,left:e,forwardFn:Fr,backpropagationFn:Vr}),t}tanh(e){const t=new Sr(e.rows,e.columns);return this.states.push({name:"tanh",product:t,left:e,forwardFn:jr,backpropagationFn:Br}),t}observe(e){return this.states.push({name:"observe",product:new Sr,forwardFn:()=>{},backpropagationFn:()=>{}}),e}runIndex(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.inputRow=e;let t=this.states[0];for(let n=0,r=this.states.length;n<r;n++)t=this.states[n],t.hasOwnProperty("forwardFn")&&t.forwardFn(t.product,t.left,t.right);return t.product}runInput(e){this.inputValue=e;let t=this.states[0];for(let n=0,r=this.states.length;n<r;n++)t=this.states[n],t.hasOwnProperty("forwardFn")&&t.forwardFn(t.product,t.left,t.right);return t.product}backpropagate(){let e=this.states.length,t=this.states[0];for(;e-- >0;)t=this.states[e],t.hasOwnProperty("backpropagationFn")&&t.backpropagationFn(t.product,t.left,t.right);return t.product}backpropagateIndex(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.inputRow=e;let t=this.states.length,n=this.states[0];for(;t-- >0;)n=this.states[t],n.hasOwnProperty("backpropagationFn")&&n.backpropagationFn(n.product,n.left,n.right);return n.product}predictTarget(e,t){let n=0;const r=this.runInput(e);for(let i=0;i<r.weights.length;i++){const e=r.weights[i]-t[i];n+=Math.abs(e),r.deltas[i]=e}return n}predictTargetIndex(e,t){const n=this.runIndex(e),r=n,i=Kr(n);return r.deltas=i.weights.slice(0),r.deltas[t]-=1,-Math.log2(i.weights[t])}}function Gr(e){const{weights:t}=e;let n=t[0],r=0;for(let i=1;i<t.length;i++){const e=t[i];e<n||(r=i,n=e)}return r}function Wr(e){const t=D(0,1),n=e.weights;let r=0,i=0;for(;;){if(r+=n[i],r>t)return i;i++}}const Hr={iterations:2e4,errorThresh:.005,log:!1,logPeriod:10,learningRate:.01,callbackPeriod:10,timeout:1/0},Xr=()=>({inputSize:20,inputRange:20,hiddenLayers:[20,20],outputSize:20,decayRate:.999,smoothEps:1e-8,regc:1e-6,clipval:5,maxPredictionLength:100,dataFormatter:new Tr});class qr{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options={...Xr()},this.trainOpts={...Hr},this.stepCache={},this.runs=0,this.ratioClipped=0,this.model=Object.seal({isInitialized:!1,input:new Sr(0,0),hiddenLayers:[],output:new Sr(0,0),equations:[],allMatrices:[],equationConnections:[],outputConnector:new kr(0,0,.08)}),this.initialLayerInputs=[],this.options={...this.options,...e},this.updateTrainingOptions({...Hr}),e.json&&this.fromJSON(e.json)}initialize(){const{dataFormatter:e}=this.options;(null===e||void 0===e?void 0:e.characters.length)&&(this.options.inputSize=this.options.inputRange=this.options.outputSize=e.characters.length),this.model=this.mapModel()}createHiddenLayers(){const{hiddenLayers:e,inputSize:t}=this.options,n=[];n.push(this.getHiddenLayer(e[0],t));let r=e[0];for(let i=1;i<e.length;i++){const t=e[i];n.push(this.getHiddenLayer(t,r)),r=t}return n}getHiddenLayer(e,t){return{weight:new kr(e,t,.08),transition:new kr(e,e,.08),bias:new Sr(e,1)}}getEquation(e,t,n,r){if(!r.weight||!r.transition||!r.bias)throw new Error("hiddenLayer does not have expected properties");const i=e.relu.bind(e),s=e.add.bind(e),a=e.multiply.bind(e);return i(s(s(a(r.weight,t),a(r.transition,n)),r.bias))}createInputMatrix(){const{inputRange:e,inputSize:t}=this.options;if(e<1)throw new Error("this.options.inputRange not an expected number");if(t<1)throw new Error("this.options.inputSize not an expected number");return new kr(e+1,t,.08)}createOutputMatrices(){const{outputSize:e,hiddenLayers:t}=this.options,n=Yr(t);return{outputConnector:new kr(e+1,n,.08),output:new Sr(e+1,1)}}bindEquation(){const{model:e}=this,{hiddenLayers:t}=this.options,n=new Ur,r=[],i=e.equationConnections.length>0?Yr(e.equationConnections):this.initialLayerInputs;let s=this.getEquation(n,n.inputMatrixToRow(e.input),i[0],e.hiddenLayers[0]);r.push(s);for(let a=1,o=t.length;a<o;a++){if(!i[a])throw new Error(`Cannot find equation at index ${a}`);s=this.getEquation(n,s,i[a],e.hiddenLayers[a]),r.push(s)}e.equationConnections.push(r),n.add(n.multiply(e.outputConnector,s),e.output),e.equations.push(n)}mapModel(){const e=[];this.initialLayerInputs=this.options.hiddenLayers.map((e=>new Sr(e,1)));const t=this.createInputMatrix();e.push(t);const n=this.createHiddenLayers();if(!n.length)throw new Error("net.hiddenLayers not set");for(let s=0,a=n.length;s<a;s++){const t=n[s];for(const n in t)t.hasOwnProperty(n)&&e.push(t[n])}const{output:r,outputConnector:i}=this.createOutputMatrices();return e.push(i),e.push(r),Object.seal({isInitialized:!0,input:t,hiddenLayers:n,output:r,equations:[],allMatrices:e,equationConnections:[],outputConnector:i})}trainInput(e){this.runs++;const{model:t}=this,n=e.length;let r,i=0;for(;t.equations.length<=e.length+1;)this.bindEquation();for(let s=-1,a=e.length;s<a;s++){const a=s+1;r=t.equations[a];const o=-1===s?0:e[s]+1,l=s===n-1?0:e[s+1]+1;i+=r.predictTargetIndex(o,l)}return Math.pow(2,i/(n-1))/100}backpropagate(e){let t=e.length;const{model:n}=this,{equations:r}=n;for(;t>0;)r[t].backpropagateIndex(e[t-1]+1),t--;r[0].backpropagateIndex(0)}adjustWeights(){const{regc:e,clipval:t,decayRate:n,smoothEps:r}=this.options,{trainOpts:i,model:s,stepCache:a}=this,{learningRate:o}=i,{allMatrices:l}=s;let u=0,c=0;for(let h=0;h<l.length;h++){const i=l[h],{weights:s,deltas:p}=i;h in a||(a[h]=j(i.rows*i.columns));const d=a[h];for(let a=0;a<s.length;a++){let i=p[a];const l=s[a];d[a]=d[a]*n+(1-n)*i*i,i>t?(i=t,u++):i<-t&&(i=-t,u++),c++,s[a]=l+-o*i/Math.sqrt(d[a]+r)-e*l}}this.ratioClipped=u/c}get isRunnable(){return!this.model||0!==this.model.equations.length||(console.error("No equations bound, did you run train()?"),!1)}checkRunnable(){if(!this.isRunnable)throw new Error("Network not runnable")}run(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const r=this.options.maxPredictionLength+(null!==e?e.length:0)+(this.options.dataFormatter?this.options.dataFormatter.specialIndexes.length:0);this.checkRunnable();const i=this.options.dataFormatter&&e.length>0?this.options.dataFormatter.formatDataIn(e):e,{model:s}=this,a=[];let o=0;for(;;){const e=0===o?0:o<i.length?i[o-1]+1:a[o-1];for(;s.equations.length<=o;)this.bindEquation();const l=s.equations[o].runIndex(e),u=new Sr(s.output.rows,s.output.columns);if(Er(u,l),1!==n&&t)for(let t=0,r=u.weights.length;t<r;t++)u.weights[t]/=n;const c=Kr(u),h=t?Wr(c):Gr(c);if(o++,0===h)break;if(o>=r)break;a.push(h)}return this.options.dataFormatter.formatDataOut(i,a.slice(i.length).map((e=>e-1)))}verifyIsInitialized(){this.model.isInitialized||this.initialize()}updateTrainingOptions(e){var t;this.trainOpts={...Hr,...e},this.validateTrainingOptions(this.trainOpts),this.setLogMethod(null!==(t=e.log)&&void 0!==t?t:this.trainOpts.log)}validateTrainingOptions(e){const t={iterations:()=>{const t=e.iterations;return"number"===typeof t&&t>0},errorThresh:()=>{const t=e.errorThresh;return"number"===typeof t&&t>0&&t<1},log:()=>{const t=e.log;return"function"===typeof t||"boolean"===typeof t},logPeriod:()=>{const t=e.logPeriod;return"number"===typeof t&&t>0},learningRate:()=>{const t=e.learningRate;return"number"===typeof t&&t>0&&t<1},callback:()=>{const t=e.callback;return"function"===typeof t||void 0===t},callbackPeriod:()=>{const t=e.callbackPeriod;return"number"===typeof t&&t>0},timeout:()=>{const t=e.timeout;return"number"===typeof t&&t>0}};for(const n in t){const r=e;if(!t[n]())throw new Error(`[${n}, ${r[n]}] is out of normal training range, your network will probably not train.`)}}setLogMethod(e){this.trainOpts.log="function"===typeof e?e:!!e&&console.log}prepTraining(e,t){var n;this.updateTrainingOptions(t);const r=this.options.dataFormatter.format(e),i=Date.now()+(null!==(n=this.trainOpts.timeout)&&void 0!==n?n:0),s={error:1,iterations:0};return this.verifyIsInitialized(),{preparedData:r,status:s,endTime:i}}train(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;this.trainOpts=t={...Hr,...t};const{iterations:r,errorThresh:i,logPeriod:s,callback:a,callbackPeriod:o}=this.trainOpts,l=!0===t.log?console.log:t.log;let u,c,h=1/0;if(null===(n=this.options)||void 0===n?void 0:n.dataFormatter)c=this.options.dataFormatter.format(e);else{if(!Array.isArray(e)||!Array.isArray(e[0])||"number"!==typeof e[0][0])throw new Error("training not in expected format of number[][]");c=e}for(this.verifyIsInitialized(),u=0;u<r&&h>i;u++){let t=0;for(let e=0;e<c.length;e++)t+=this.trainPattern(c[e],!0);if(h=t/e.length,isNaN(h))throw new Error("Network error rate is unexpected NaN, check network configurations and try again. Most probably input format is not correct or training data is not enough. ");l&&u%s===0&&l(`iterations: ${u}, training error: ${h}`),a&&u%o===0&&a({error:h,iterations:u})}return{error:h,iterations:u}}addFormat(e){}formatData(e){const t=[];for(let n=0;n<e.length;n++)t.push(this.options.dataFormatter.formatDataIn(e[n]));return t}toJSON(){this.model.isInitialized||this.initialize();const{model:e,options:t}=this;return{type:this.constructor.name,options:{...t,dataFormatter:t.dataFormatter.toJSON()},trainOpts:{...this.trainOpts,timeout:this.trainOpts.timeout===1/0?"Infinity":this.trainOpts.timeout},input:e.input.toJSON(),hiddenLayers:e.hiddenLayers.map((e=>{const t={};for(const n in e)e.hasOwnProperty(n)&&(t[n]=e[n].toJSON());return t})),outputConnector:this.model.outputConnector.toJSON(),output:this.model.output.toJSON()}}fromJSON(e){const{options:t}=e,n=[],r=Sr.fromJSON(e.input);n.push(r);const i=[];e.hiddenLayers.forEach((e=>{const t={};for(const r in e)t[r]=Sr.fromJSON(e[r]),n.push(t[r]);i.push(t)}));const s=Sr.fromJSON(e.outputConnector);n.push(s);const a=Sr.fromJSON(e.output);return n.push(a),t.dataFormatter?this.options={...Xr(),...t,dataFormatter:Tr.fromJSON(t.dataFormatter)}:this.options={...Xr(),...t,dataFormatter:new Tr},this.model=Object.seal({isInitialized:!0,input:r,hiddenLayers:i,output:a,allMatrices:n,outputConnector:s,equations:[],equationConnections:[]}),this.initialLayerInputs=this.options.hiddenLayers.map((e=>new Sr(e,1))),this.bindEquation(),this}toFunction(e){const{model:t}=this,{equations:n}=this.model,r=n[1],{states:i}=r,s=JSON.stringify(this.toJSON());function a(e){const r=t.equationConnections[0],{states:i}=n[0];for(let t=0,n=i.length;t<n;t++)if(i[t].product===e)return t;return r.indexOf(e)}function o(e,t){for(let n=0,r=i.length;n<r;n++){const r=i[n];if(n===t){const t=a(e);return t>-1&&(e===r.left||e===r.right)?`typeof prevStates[${t}] === 'object' ? prevStates[${t}].product : new Matrix(${e.rows}, ${e.columns})`:`new Matrix(${e.rows}, ${e.columns})`}if(e===r.product)return`states[${n}].product`;if(e===r.right)return`states[${n}].right`;if(e===r.left)return`states[${n}].left`}return""}function l(e,n){if(!e||!e.rows||!e.columns)return"null";if(e===t.input)return"json.input";if(e===t.outputConnector)return"json.outputConnector";if(e===t.output)return"json.output";for(let r=0,i=t.hiddenLayers.length;r<i;r++){const n=t.hiddenLayers[r];for(const t in n)if(n.hasOwnProperty(t)&&n[t]===e)return`json.hiddenLayers[${r}].${t}`}return o(e,n)}function u(e){const t=e.toString().split("{");t.shift();const n=t.join("{").split("}");return n.pop(),n.join("}").split("\n").join("\n        ").replace("product.deltas[i] = 0;","").replace("product.deltas[column] = 0;","").replace("left.deltas[leftIndex] = 0;","").replace("right.deltas[rightIndex] = 0;","").replace("product.deltas = left.deltas.slice(0);","")}function c(e){return`src/recurrent/matrix/${e.replace(/[A-Z]/g,(function(e){return`-${e.toLowerCase()}`}))}.js`}const h=[],p={},d=[];for(let m=0,g=i.length;m<g;m++){const e=i[m];h.push(`states[${m}] = {\n      name: '${e.forwardFn.name}',\n      left: ${e.left?l(e.left,m):"undefined"},\n      right: ${e.right?l(e.right,m):"undefined"},\n      product: ${l(e.product,m)}\n    }`);const t=e.forwardFn.name;p[t]||(p[t]=!0,d.push(`        case '${t}': //compiled from ${c(t)}\n          ${u(e.forwardFn.toString())}\n          break;`))}const f=`\n  if (typeof rawInput === 'undefined') rawInput = [];\n  if (typeof isSampleI === 'undefined') isSampleI = false;\n  if (typeof temperature === 'undefined') temperature = 1;\n  var json = ${s};\n  ${this.options.dataFormatter?`${this.options.dataFormatter.toFunctionString()};\n  Object.assign(dataFormatter, json.options.dataFormatter);`:""}\n  ${this.options.dataFormatter&&"function"===typeof this.options.dataFormatter.formatDataIn?`const formatDataIn = function (input, output) { ${u(this.options.dataFormatter.formatDataIn.toString())} }.bind(dataFormatter);`:""}\n  ${null!==this.options.dataFormatter&&"function"===typeof this.options.dataFormatter.formatDataOut?`const formatDataOut = function formatDataOut(input, output) { ${u(this.options.dataFormatter.formatDataOut.toString())} }.bind(dataFormatter);`:""}\n  var maxPredictionLength =\n    ${this.options.maxPredictionLength} +\n    rawInput.length +\n    ${this.options.dataFormatter?this.options.dataFormatter.specialIndexes.length:0};\n  var input = ${this.options.dataFormatter&&"function"===typeof this.options.dataFormatter.formatDataIn?"formatDataIn(rawInput)":"rawInput"};\n  var _i = 0;\n  var output = [];\n  var states = [];\n  var prevStates;\n  while (true) {\n    var previousIndex = (_i === 0\n        ? 0\n        : _i < input.length\n          ? input[_i - 1] + 1\n          : output[_i - 1])\n          ;\n    var rowPluckIndex = previousIndex;\n    prevStates = states;\n    states = [];\n    ${h.join(";\n    ")};\n    for (var stateIndex = 0, stateMax = ${h.length}; stateIndex < stateMax; stateIndex++) {\n      var state = states[stateIndex];\n      var product = state.product;\n      var left = state.left;\n      var right = state.right;\n      switch (state.name) {\n${d.join("\n")}\n      }\n    }\n\n    var logProbabilities = state.product;\n    if (temperature !== 1 && isSampleI) {\n      for (var q = 0, nq = logProbabilities.weights.length; q < nq; q++) {\n        logProbabilities.weights[q] /= temperature;\n      }\n    }\n\n    var probs = softmax(logProbabilities);\n    var nextIndex = isSampleI ? sampleI(probs) : maxI(probs);\n\n    _i++;\n    if (nextIndex === 0) {\n      break;\n    }\n    if (_i >= maxPredictionLength) {\n      break;\n    }\n\n    output.push(nextIndex);\n  }\n  ${this.options.dataFormatter&&"function"===typeof this.options.dataFormatter.formatDataOut?"return formatDataOut(input, output.slice(input.length).map(function(value) { return value - 1; }))":"return output.slice(input.length).map(function(value) { return value - 1; })"};\n  function Matrix(rows, columns) {\n    this.rows = rows;\n    this.columns = columns;\n    this.weights = zeros(rows * columns);\n  }\n  ${j.toString()}\n  ${Kr.toString().replace("_1.Matrix","Matrix")}\n  ${D.toString()}\n  ${Wr.toString()}\n  ${Gr.toString()}`;return new Function("rawInput","isSampleI","temperature",e?e(f):f)}trainPattern(e,t){const n=this.trainInput(e);return this.backpropagate(e),this.adjustWeights(),t?n:0}}function Yr(e){return e[e.length-1]}class Jr extends qr{getHiddenLayer(e,t){return Qr(e,t)}getEquation(e,t,n,r){return Zr(e,t,n,r)}}function Qr(e,t){return{updateGateInputMatrix:new kr(e,t,.08),updateGateHiddenMatrix:new kr(e,e,.08),updateGateBias:new Sr(e,1),resetGateInputMatrix:new kr(e,t,.08),resetGateHiddenMatrix:new kr(e,e,.08),resetGateBias:new Sr(e,1),cellWriteInputMatrix:new kr(e,t,.08),cellWriteHiddenMatrix:new kr(e,e,.08),cellWriteBias:new Sr(e,1)}}function Zr(e,t,n,r){if(!r.updateGateInputMatrix||!r.updateGateHiddenMatrix||!r.updateGateBias||!r.resetGateInputMatrix||!r.resetGateHiddenMatrix||!r.resetGateBias||!r.cellWriteInputMatrix||!r.cellWriteHiddenMatrix||!r.cellWriteBias)throw new Error("hiddenLayer does not have expected properties");const i=e.sigmoid.bind(e),s=e.add.bind(e),a=e.multiply.bind(e),o=e.multiplyElement.bind(e),l=e.tanh.bind(e),u=e.allOnes.bind(e),c=e.cloneNegative.bind(e),h=i(s(s(a(r.updateGateInputMatrix,t),a(r.updateGateHiddenMatrix,n)),r.updateGateBias)),p=i(s(s(a(r.resetGateInputMatrix,t),a(r.resetGateHiddenMatrix,n)),r.resetGateBias)),d=l(s(s(a(r.cellWriteInputMatrix,t),a(r.cellWriteHiddenMatrix,o(p,n))),r.cellWriteBias));return s(o(s(u(h.rows,h.columns),c(h)),d),o(n,h))}class ei{constructor(e,t){this.prop=t,this.length=0,this.table={};for(let n=0;n<e.length;n++){const r=e[n][t];for(let e=0;e<r.length;e++){const t=r[e];for(const e in t)t.hasOwnProperty(e)&&(this.table.hasOwnProperty(e)||(this.table[e]=this.length++))}}}}const ti=()=>({...Xr(),inputSize:1,hiddenLayers:[20],outputSize:1,inputRange:0});class ni extends qr{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.inputLookupLength=0,this.inputLookup=null,this.outputLookup=null,this.outputLookupLength=0,this.model=Object.seal({isInitialized:!1,hiddenLayers:[],output:new Sr(0,0),equations:[],allMatrices:[],equationConnections:[],outputConnector:new kr(0,0,.08)}),this.options=ti(),this.options={...this.options,...e},this.updateTrainingOptions({...ri,...e}),e.json&&this.fromJSON(e.json)}createInputMatrix(){throw new Error("Input Matrices do not exist on RNNTimeStep")}createOutputMatrices(){const{outputSize:e}=this.options,t=Yr(this.options.hiddenLayers),n=new kr(e,t,.08);return{output:new kr(e,1,.08),outputConnector:n}}bindEquation(){const{model:e,options:t}=this,{hiddenLayers:n,inputSize:r}=t,i=e.hiddenLayers,s=new Ur,a=[],o=e.equationConnections.length>0?e.equationConnections[e.equationConnections.length-1]:this.initialLayerInputs;let l=this.getEquation(s,s.input(new Sr(r,1)),o[0],i[0]);a.push(l);for(let u=1,c=n.length;u<c;u++)l=this.getEquation(s,l,o[u],i[u]),a.push(l);e.equationConnections.push(a),s.add(s.multiply(e.outputConnector,l),e.output),e.equations.push(s)}initialize(){this.model=this.mapModel()}mapModel(){const e=[];this.initialLayerInputs=this.options.hiddenLayers.map((e=>new Sr(e,1)));const t=this.createHiddenLayers();for(let i=0,s=t.length;i<s;i++){const n=t[i];for(const t in n)n.hasOwnProperty(t)&&e.push(n[t])}const{outputConnector:n,output:r}=this.createOutputMatrices();return e.push(n),e.push(r),Object.seal({isInitialized:!0,hiddenLayers:t,output:r,equations:[],allMatrices:e,equationConnections:[],outputConnector:n})}backpropagate(){for(let e=this.model.equations.length-1;e>-1;e--)this.model.equations[e].backpropagate()}run(e){const t=x.dataShape(e).join(",");switch(t){case"array,number":return this.runArray(e);case"array,array,number":return this.runArrayOfArray(e);case"object,number":return this.runObject(e);case"array,object,number":return this.runArrayOfObject(e);default:throw new Error(`Unrecognized data shape ${t}`)}}forecast(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=x.dataShape(e).join(",");switch(n){case"array,number":return this.forecastArray(e,t);case"array,array,number":return this.forecastArrayOfArray(e,t);case"object,number":return this.runObject(e);case"array,object,number":return this.forecastArrayOfObject(e,t);default:throw new Error(`Unrecognized data shape ${n}`)}}forecastArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.checkRunnable();const{model:n}=this,{equations:r}=n,i=e.length+t;for(;r.length<=i;)this.bindEquation();let s,a=0;if(1===this.options.inputSize)for(let l=0;l<e.length;l++)s=r[a++].runInput(Float32Array.from([e[l]]));else for(let l=0;l<e.length;l++)s=r[a++].runInput(Float32Array.from([]));if(!s)throw new Error("lastOutput not set");const o=[s.weights[0]];for(let l=0,u=t-1;l<u;l++)s=r[a++].runInput(s.weights),o.push(s.weights[0]);return this.end(),Float32Array.from(o)}forecastArrayOfArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.checkRunnable();const{model:n}=this,{equations:r}=n,i=e.length+t;for(;r.length<=i;)this.bindEquation();let s,a=0;for(let l=0;l<e.length;l++)s=r[a++].runInput(e[l]);if(!s)throw new Error("lastOutput not set");const o=[Float32Array.from(s.weights)];for(let l=0,u=t-1;l<u;l++)s=r[a++].runInput(s.weights),o.push(Float32Array.from(s.weights.slice(0)));return this.end(),o}forecastArrayOfObject(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!this.inputLookup)throw new Error("this.inputLookup not set");if(!this.outputLookup)throw new Error("this.outputLookup not set");const n=e.map((e=>x.toArray(this.inputLookup,e,this.inputLookupLength)));return this.forecastArrayOfArray(n,t).map((e=>x.toObject(this.outputLookup,e)))}train(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.trainOpts=t={...Hr,...t},1===this.options.inputSize&&1===this.options.outputSize&&this.setSize(e),this.verifySize();const n=this.formatData(e);let r,i=1/0;this.verifyIsInitialized();const{iterations:s,errorThresh:a,logPeriod:o,callback:l,callbackPeriod:u}=this.trainOpts,c=!0===t.log?console.log:t.log;for(r=0;r<s&&i>a;r++){let e=0;for(let t=0;t<n.length;t++)e+=this.trainPattern(n[t],!0);if(i=e/n.length,isNaN(i))throw new Error("Network error rate is unexpected NaN, check network configurations and try again. Most probably input format is not correct or training data is not enough. ");c&&r%o===0&&c(`iterations: ${r}, training error: ${i}`),l&&r%u===0&&l({error:i,iterations:r})}return{error:i,iterations:r}}trainArrayOfArray(e){if(e.length<2)throw new Error("input must be an array of 2 or more");const{equations:t}=this.model;for(;t.length<e.length;)this.bindEquation();let n=0;for(let r=0,i=e.length-1;r<i;r++)n+=t[r].predictTarget(e[r],e[r+1]);return this.end(),n/e.length}trainPattern(e,t){const n=this.trainArrayOfArray(e);return this.backpropagate(),this.adjustWeights(),t?n:0}setSize(e){let t=0;switch(x.dataShape(e).join(",")){case"array,array,number":case"array,object,number":case"array,datum,array,number":case"array,datum,object,number":t=1;break;case"array,array,array,number":t=e[0][0].length;break;case"array,array,object,number":t=Object.keys(x.toTable2D(e)).length;break;case"array,datum,array,array,number":t=e[0].input[0].length;break;case"array,datum,array,object,number":t=Object.keys(x.toInputTable2D(e)).length;break;default:throw new Error("unknown data shape or configuration")}this.options=Object.seal({...this.options,inputSize:t,outputSize:t})}verifySize(){if((this.options.inputSize||this.options.outputSize)&&this.options.inputSize!==this.options.outputSize)throw new Error("manually set inputSize and outputSize mismatch")}runArray(e){this.checkRunnable();const{equations:t}=this.model;for(;t.length<=e.length;)this.bindEquation();let n;for(let r=0;r<e.length;r++)n=t[r].runInput(new Float32Array([e[r]]));return this.end(),n.weights[0]}runArrayOfArray(e){this.checkRunnable();const{model:t}=this,{equations:n}=t;for(;n.length<=e.length;)this.bindEquation();let r;for(let i=0;i<e.length;i++)r=n[i].runInput(e[i]).weights;return this.end(),null!==r&&void 0!==r?r:Float32Array.from([])}runObject(e){if(!this.inputLookup)throw new Error("this.inputLookup not set");if(!this.outputLookup)throw new Error("this.outputLookup not set");if(!this.outputLookupLength)throw new Error("this.outputLookupLength not set");if(this.inputLookup===this.outputLookup){const t=x.toArrayShort(this.inputLookup,e);return x.toObjectPartial(this.outputLookup,this.forecastArray(t,this.outputLookupLength-t.length),t.length)}return x.toObject(this.outputLookup,this.forecastArray(x.toArray(this.inputLookup,e,this.inputLookupLength),this.outputLookupLength))}runArrayOfObject(e){if(null===this.inputLookup)throw new Error("this.inputLookup not set");if(null===this.outputLookup)throw new Error("this.outputLookup not set");const t=e.map((e=>x.toArray(this.inputLookup,e,this.inputLookupLength)));return this.forecastArrayOfArray(t,1).map((e=>x.toObject(this.outputLookup,e)))[0]}runArrayOfObjectOfArray(e){if(!this.inputLookup)throw new Error("this.inputLookup not set");if(!this.outputLookup)throw new Error("this.outputLookup not set");return x.toObject(this.outputLookup,this.runArrayOfArray(x.toArrays(this.inputLookup,e,this.inputLookupLength)))}end(){this.model.equations[this.model.equations.length-1].runInput(new Float32Array(this.options.outputSize))}requireInputOutputOfOne(){if(1!==this.options.inputSize)throw new Error("inputSize must be 1 for this data size");if(1!==this.options.outputSize)throw new Error("outputSize must be 1 for this data size")}formatArray(e){const t=[];this.requireInputOutputOfOne();for(let n=0;n<e.length;n++)t.push(Float32Array.from([e[n]]));return[t]}formatArrayOfArray(e){const t=[],{inputSize:n,outputSize:r}=this.options;if(1===n&&1===r){for(let n=0;n<e.length;n++)t.push(k(e[n]));return t}if(n!==e[0].length)throw new Error("inputSize must match data input size");if(r!==e[0].length)throw new Error("outputSize must match data output size");for(let i=0;i<e.length;i++)t.push(Float32Array.from(e[i]));return[t]}formatArrayOfObject(e){if(this.requireInputOutputOfOne(),!this.inputLookup){const t=new I(e);this.inputLookup=this.outputLookup=t.table,this.inputLookupLength=this.outputLookupLength=t.length}const t=[];for(let n=0;n<e.length;n++)t.push(_(e[n]));return t}formatArrayOfObjectMulti(e){if(!this.inputLookup){const t=new I(e);this.inputLookup=this.outputLookup=t.table,this.inputLookupLength=this.outputLookupLength=t.length}const t=[];for(let n=0;n<e.length;n++)t.push([C(e[n],this.inputLookup,this.inputLookupLength)]);return t}formatArrayOfDatumOfArray(e){const t=[];this.requireInputOutputOfOne();for(let n=0;n<e.length;n++){const r=e[n];t.push(T(r.input,r.output))}return t}formatArrayOfDatumOfObject(e){if(this.requireInputOutputOfOne(),!this.inputLookup){const t=new I(e,"input");this.inputLookup=t.table,this.inputLookupLength=t.length}if(!this.outputLookup){const t=new I(e,"output");this.outputLookup=t.table,this.outputLookupLength=t.length}const t=[];for(let n=0;n<e.length;n++){const r=e[n];t.push(L(r.input,r.output))}return t}formatArrayOfArrayOfArray(e){const t=[];for(let n=0;n<e.length;n++)t.push(w(e[n]));return t}formatArrayOfArrayOfObject(e){if(!this.inputLookup){const t=new I(e);this.inputLookup=this.outputLookup=t.table,this.inputLookupLength=this.outputLookupLength=t.length}const t=[];for(let n=0;n<e.length;n++){const r=[];for(let t=0;t<e[n].length;t++)r.push(C(e[n][t],this.inputLookup,this.inputLookupLength));t.push(r)}return t}formatArrayOfDatumOfArrayOfArray(e){const t=[],{inputSize:n,outputSize:r}=this.options;if(n!==e[0].input[0].length)throw new Error("inputSize must match data input size");if(r!==e[0].output[0].length)throw new Error("outputSize must match data output size");for(let i=0;i<e.length;i++){const n=e[i];t.push(S(n.input,n.output))}return t}formatArrayOfDatumOfArrayOfObject(e){if(!this.inputLookup){const t=new ei(e,"input");this.inputLookup=t.table,this.inputLookupLength=t.length}if(!this.outputLookup){const t=new ei(e,"output");this.outputLookup=t.table,this.outputLookupLength=t.length}if(!this.outputLookupLength)throw new Error("this.outputLookupLength not set to usable number");const t=[];for(let n=0;n<e.length;n++){const r=e[n];t.push(E(r.input,r.output,this.inputLookup,this.outputLookup,this.inputLookupLength,this.outputLookupLength))}return t}formatData(e){switch(x.dataShape(e).join(",")){case"array,number":return this.formatArray(e);case"array,array,number":return this.formatArrayOfArray(e);case"array,object,number":return 1===this.options.inputSize?this.formatArrayOfObject(e):this.formatArrayOfObjectMulti(e);case"array,datum,array,number":return this.formatArrayOfDatumOfArray(e);case"array,datum,object,number":return this.formatArrayOfDatumOfObject(e);case"array,array,array,number":return this.formatArrayOfArrayOfArray(e);case"array,array,object,number":return this.formatArrayOfArrayOfObject(e);case"array,datum,array,array,number":return this.formatArrayOfDatumOfArrayOfArray(e);case"array,datum,array,object,number":return this.formatArrayOfDatumOfArrayOfObject(e);default:throw new Error("unknown data shape or configuration")}}test(e){const t=[];let n=0;const r=this.formatData(e);for(let i=0;i<r.length;i++){const s=r[i],a=this.run(s.splice(0,s.length-1)),o=s[s.length-1];let l=0,u=0;for(let e=0;e<a.length;e++){u++;const t=o[e]-a[e];l+=t*t}if(n+=l/u,Math.abs(l)>this.trainOpts.errorThresh){const n=e[i];t.push({value:n,actual:a})}}return{error:n/r.length,misclasses:t,total:r.length}}addFormat(e){var t,n,r,i,s,a;switch(x.dataShape(e).join(",")){case"array,array,number":case"datum,array,array,number":case"array,number":case"datum,array,number":return;case"datum,object,number":this.inputLookup=x.addKeys(e.input,null!==(t=this.inputLookup)&&void 0!==t?t:{}),this.inputLookup&&(this.inputLookupLength=Object.keys(this.inputLookup).length),this.outputLookup=x.addKeys(e.output,null!==(n=this.outputLookup)&&void 0!==n?n:{}),this.outputLookup&&(this.outputLookupLength=Object.keys(this.outputLookup).length);break;case"object,number":this.inputLookup=this.outputLookup=x.addKeys(e,null!==(r=this.inputLookup)&&void 0!==r?r:{}),this.inputLookup&&(this.inputLookupLength=this.outputLookupLength=Object.keys(this.inputLookup).length);break;case"array,object,number":{const t=e;for(let e=0;e<t.length;e++)this.inputLookup=this.outputLookup=x.addKeys(t[e],null!==(i=this.inputLookup)&&void 0!==i?i:{}),this.inputLookup&&(this.inputLookupLength=this.outputLookupLength=Object.keys(this.inputLookup).length);break}case"datum,array,object,number":{const t=e,n=t.input;for(let e=0;e<n.length;e++)this.inputLookup=x.addKeys(n[e],null!==(s=this.inputLookup)&&void 0!==s?s:{}),this.inputLookup&&(this.inputLookupLength=Object.keys(this.inputLookup).length);const r=t.output;for(let e=0;e<r.length;e++)this.outputLookup=x.addKeys(r[e],null!==(a=this.outputLookup)&&void 0!==a?a:{}),this.outputLookup&&(this.outputLookupLength=Object.keys(this.outputLookup).length);break}default:throw new Error("unknown data shape or configuration")}}toJSON(){this.model||this.initialize();const{model:e}=this,t={...this.options,...Xr};return{type:this.constructor.name,options:t,hiddenLayers:e.hiddenLayers.map((e=>{const t={};for(const n in e)e.hasOwnProperty(n)&&(t[n]=e[n].toJSON());return t})),outputConnector:e.outputConnector.toJSON(),output:e.output.toJSON(),inputLookup:this.inputLookup,inputLookupLength:this.inputLookupLength,outputLookup:this.outputLookup,outputLookupLength:this.outputLookupLength}}fromJSON(e){const{options:t}=e,n=[],r=[];e.hiddenLayers.forEach((e=>{const t={};for(const r in e)t[r]=Sr.fromJSON(e[r]),n.push(t[r]);r.push(t)}));const i=Sr.fromJSON(e.outputConnector);n.push(i);const s=Sr.fromJSON(e.output);return n.push(s),this.options={...ti(),...t},this.inputLookup=e.inputLookup,this.inputLookupLength=e.inputLookupLength,this.outputLookup=e.outputLookup,this.outputLookupLength=e.outputLookupLength,this.model=Object.seal({isInitialized:!0,hiddenLayers:r,output:s,allMatrices:n,outputConnector:i,equations:[],equationConnections:[]}),this.initialLayerInputs=t.hiddenLayers.map((e=>new Sr(e,1))),this.bindEquation(),this}toFunction(e){const{model:t,inputLookup:n,inputLookupLength:r,outputLookup:i,outputLookupLength:s}=this,{inputSize:a}=this.options,{equations:o}=t,l=o[1],{states:u}=l,c=JSON.stringify(this.toJSON());function h(e){const n=t.equationConnections[0],{states:r}=o[0];for(let t=0,i=r.length;t<i;t++)if(r[t].product===e)return t;return n.indexOf(e)}function p(e,t){for(let n=0,r=u.length;n<r;n++){const r=u[n];if(n===t){const t=h(e);switch(e){case r.left:if(t>-1)return`typeof prevStates[${t}] === 'object' ? prevStates[${t}].product : new Matrix(${e.rows}, ${e.columns})`;case r.right:if(t>-1)return`typeof prevStates[${t}] === 'object' ? prevStates[${t}].product : new Matrix(${e.rows}, ${e.columns})`;case r.product:return`new Matrix(${e.rows}, ${e.columns})`;default:throw Error("unknown state")}}if(e===r.product)return`states[${n}].product`;if(e===r.right)return`states[${n}].right`;if(e===r.left)return`states[${n}].left`}return""}function d(e,n){if(!e||!e.rows||!e.columns)return"null";if(e===t.outputConnector)return"json.outputConnector";if(e===t.output)return"json.output";for(let r=0,i=t.hiddenLayers.length;r<i;r++){const n=t.hiddenLayers[r];for(const t in n)if(n.hasOwnProperty(t)&&n[t]===e)return`json.hiddenLayers[${r}].${t}`}return p(e,n)}function f(){return n?1===a?n===i?`function lookupInput(input) {\n            var table = ${JSON.stringify(n)};\n            var result = [];\n            for (var p in table) {\n              if (!input.hasOwnProperty(p)) break;\n              result.push(Float32Array.from([input[p]]));\n            }\n            return result;\n          }`:`function lookupInput(input) {\n          var table = ${JSON.stringify(n)};\n          var result = [];\n          for (var p in table) {\n            result.push(Float32Array.from([input[p]]));\n          }\n          return result;\n        }`:`function lookupInput(rawInputs) {\n        var table = ${JSON.stringify(n)};\n        var result = [];\n        for (var i = 0; i < rawInputs.length; i++) {\n          var rawInput = rawInputs[i];\n          var input = new Float32Array(${r});\n          for (var p in table) {\n            input[table[p]] = rawInput.hasOwnProperty(p) ? rawInput[p] : 0;\n          }\n          result.push(input);\n        }\n        return result;\n      }`:""}function m(){return i?1===a?n===i?`function lookupOutputPartial(output, input) {\n            var table = ${JSON.stringify(i)};\n            var offset = input.length;\n            var result = {};\n            var i = 0;\n            for (var p in table) {\n              if (i++ < offset) continue;\n              result[p] = output[table[p] - offset][0];\n            }\n            return result;\n          }`:`function lookupOutput(output) {\n          var table = ${JSON.stringify(i)};\n          var result = {};\n          for (var p in table) {\n            result[p] = output[table[p]][0];\n          }\n          return result;\n        }`:`function lookupOutput(output) {\n        var table = ${JSON.stringify(i)};\n        var result = {};\n        for (var p in table) {\n          result[p] = output[table[p]];\n        }\n        return result;\n      }`:""}function g(e){const t=e.toString().split("{");t.shift();const n=t.join("{").split("}");return n.pop(),n.join("}").split("\n").join("\n        ").replace("product.deltas[i] = 0;","").replace("product.deltas[column] = 0;","").replace("left.deltas[leftIndex] = 0;","").replace("right.deltas[rightIndex] = 0;","").replace("product.deltas = left.deltas.slice(0);","")}function y(e){return`src/recurrent/matrix/${e.replace(/[A-Z]/g,(function(e){return`-${e.toLowerCase()}`}))}.js`}const b=[],x={},v=[];for(let k=0,T=u.length;k<T;k++){const e=u[k];b.push(`states[${k}] = {\n      name: '${e.forwardFn.name}',\n      left: ${e.left?d(e.left,k):"undefined"},\n      right: ${e.right?d(e.right,k):"undefined"},\n      product: ${d(e.product,k)}\n    }`);const t=e.forwardFn.name;x[t]||(x[t]=!0,"input"===e.name?(v.push(`case '${t}':`),v.push(n&&1===a?"product.weights = _i < input.length ? input[_i]: prevStates[prevStates.length - 1].product.weights;":1===a?"product.weights = [input[_i]];":"product.weights = input[_i];"),v.push("break;")):v.push(`        case '${t}':${"forwardFn"!==t?` //compiled from ${y(t)}`:""}\n          ${g(e.forwardFn.toString())}\n          break;`))}const w=1===a&&this.outputLookup,S=`\n  var input = ${this.inputLookup?"lookupInput(rawInput)":"rawInput"};\n  var json = ${c};\n  var output = [];\n  var states = [];\n  var prevStates;\n  var state;\n  var max = ${w?n===i?r:"input.length + "+(s-1):"input.length"};\n  for (var _i = 0; _i < max; _i++) {\n    prevStates = states;\n    states = [];\n    ${b.join(";\n    ")};\n    for (var stateIndex = 0, stateMax = ${b.length}; stateIndex < stateMax; stateIndex++) {\n      state = states[stateIndex];\n      var product = state.product;\n      var left = state.left;\n      var right = state.right;\n\n      switch (state.name) {\n${v.join("\n")}\n      }\n    }\n    ${1===a&&n?"if (_i >= input.length - 1) { output.push(state.product.weights); }":"output = state.product.weights;"}\n  }\n  ${i?i===n?"return lookupOutputPartial(output, input)":"return lookupOutput(output)":1===a?"return output[0]":"return output"};\n  ${f()}\n  ${m()}\n\n  function Matrix(rows, columns) {\n    this.rows = rows;\n    this.columns = columns;\n    this.weights = new Float32Array(rows * columns);\n  }\n  ${Kr.toString().replace("_2.default","Matrix")}\n  ${D.toString()}\n  ${Wr.toString()}\n  ${Gr.toString()}`;return new Function("rawInput",e?e(S):S)}}const ri={...Hr};class ii extends ni{getHiddenLayer(e,t){return Qr(e,t)}getEquation(e,t,n,r){return Zr(e,t,n,r)}}class si extends qr{getHiddenLayer(e,t){return ai(e,t)}getEquation(e,t,n,r){return oi(e,t,n,r)}}function ai(e,t){return{inputMatrix:new kr(e,t,.08),inputHidden:new kr(e,e,.08),inputBias:new Sr(e,1),forgetMatrix:new kr(e,t,.08),forgetHidden:new kr(e,e,.08),forgetBias:new Sr(e,1),outputMatrix:new kr(e,t,.08),outputHidden:new kr(e,e,.08),outputBias:new Sr(e,1),cellActivationMatrix:new kr(e,t,.08),cellActivationHidden:new kr(e,e,.08),cellActivationBias:new Sr(e,1)}}function oi(e,t,n,r){if(!r.inputMatrix||!r.inputHidden||!r.inputBias||!r.forgetMatrix||!r.forgetHidden||!r.forgetBias||!r.outputMatrix||!r.outputHidden||!r.outputBias||!r.cellActivationMatrix||!r.cellActivationHidden||!r.cellActivationBias)throw new Error("hiddenLayer does not have expected properties");const i=e.sigmoid.bind(e),s=e.add.bind(e),a=e.multiply.bind(e),o=e.multiplyElement.bind(e),l=e.tanh.bind(e),u=i(s(s(a(r.inputMatrix,t),a(r.inputHidden,n)),r.inputBias)),c=i(s(s(a(r.forgetMatrix,t),a(r.forgetHidden,n)),r.forgetBias)),h=i(s(s(a(r.outputMatrix,t),a(r.outputHidden,n)),r.outputBias)),p=l(s(s(a(r.cellActivationMatrix,t),a(r.cellActivationHidden,n)),r.cellActivationBias)),d=o(c,n),f=o(u,p);return o(h,l(s(d,f)))}class li extends ni{getHiddenLayer(e,t){return ai(e,t)}getEquation(e,t,n,r){return oi(e,t,n,r)}}function ui(e,t){const n=[];for(;e<t;e++)n.push(e);return n}function ci(e){return Array.isArray(e)?Float32Array.from(e):Float32Array.from(Object.values(e))}function hi(e){let{pixelX:t,pixelY:n,radius:r,inputs:i,row:s,line:a,fontSize:o,fontClassName:l}=e,u=`<rect\n              x="${t/2-r}"\n              y="${n/2+s*n-r}"\n              width="${2*r}"\n              height="${2*r}"\n              stroke="black"\n              stroke-width="1"\n              fill="${i.color}"\n              class="${i.className}" />\n            <line\n              x1="${t/4}"\n              y1="${n/2+s*n}"\n              x2="${t/2-r}"\n              y2="${n/2+s*n}"\n              style="stroke:${a.color};stroke-width:${a.width}"\n              class="${a.className}" />`;return i.labels&&(u+=`<text\n              x="${t/8}"\n              y="${n/2+s*n-5}"\n              fill="black"\n              font-size="${o}"\n              class="${l}">${i.labels[s]}</text>`),u}function pi(e){let{pixelX:t,pixelY:n,row:r,column:i,radius:s,hidden:a}=e;return`<circle\n            cx="${t/2+i*t}"\n            cy="${n/2+r*n}"\n            r="${s}"\n            stroke="black"\n            stroke-width="1"\n            fill="${a.color}"\n            class="${a.className}" />`}function di(e){let{pixelX:t,pixelY:n,row:r,column:i,line:s,outputs:a,radius:o}=e;return`<circle\n            cx="${t/2+i*t}"\n            cy="${n/2+r*n}"\n            r="${o}"\n            stroke="black"\n            stroke-width="1"\n            fill="${a.color}"\n            class="${a.className}" />\n          <line\n            x1="${t/2+i*t+o}"\n            y1="${n/2+r*n}"\n            x2="${t/2+i*t+t/4}"\n            y2="${n/2+r*n}"\n            style="stroke:${s.color};stroke-width:${s.width}"\n            class="${s.className}" />`}function fi(e){let{pixelX:t,pixelY:n,row:r,column:i,radius:s,lineY:a,line:o,previousConnectionIndex:l}=e;return`<line\n            x1="${t/2+(i-1)*t+s}"\n            y1="${a/2+l*a}"\n            x2="${t/2+i*t-s}"\n            y2="${n/2+r*n}"\n            style="stroke:${o.color};stroke-width:${o.width}"\n            class="${o.className}" />`}function mi(e){const{sizes:t,height:n,width:r}=e;let i="";const s=r/t.length;for(let a=0;a<t.length;a++){const r=t[a],o=n/r;for(let l=0;l<r;l++)if(0===a)i+=hi({pixelX:s,pixelY:o,row:l,column:a,...e});else{a===t.length-1?i+=di({pixelX:s,pixelY:o,row:l,column:a,...e}):i+=pi({pixelX:s,pixelY:o,row:l,column:a,...e});const r=t[a-1],u=n/r;for(let t=0;t<r;t++)i+=fi({pixelX:s,pixelY:o,row:l,column:a,lineY:u,previousConnectionIndex:t,...e})}}return i}function gi(e){let{pixelX:t,pixelY:n,row:r,column:i,radius:s,recurrentLine:a}=e;const o=t/2+i*t+s+1,l=n/2+r*n,u=o-2*s-2;return`<path\n              d="M ${o} ${l} C ${u+100} ${l+50}, ${o-100} ${l+50}, ${u} ${l}"\n              stroke="${a.color}"\n              stroke-width="${a.width}"\n              fill="transparent"\n              stroke-linecap="round"\n              marker-end="url(#arrow)"\n              class="${a.className}" />`}function yi(e){const{width:t,height:n,recurrentLine:r,sizes:i,radius:s}=e,a=t/i.length;let o=`<defs>\n              <marker id="arrow" markerWidth="10" markerHeight="10" refX="8" refY="3" orient="auto" markerUnits="strokeWidth">\n                <path d="M0,0 L0,6 L9,3 z" fill="${r.color}" />\n              </marker>\n            </defs>`;o+=mi(e);for(let l=1;l<i.length;l++){const e=i[l],t=n/e;for(let n=0;n<e;n++)o+=gi({pixelX:a,pixelY:t,row:n,column:l,radius:s,recurrentLine:r})}return o}function bi(e){const{options:t}=e;if(!t)throw new Error("options not defined");if(!t.inputLayer)throw new Error("options.inputLater not defined");if(!t.hiddenLayers)throw new Error("options.hiddenLayers not defined");if(t.hiddenLayers.length<1)throw new Error("options.hiddenLayers is empty");if(!t.outputLayer)throw new Error("options.outputLayer not defined");const n=t.inputLayer(),r=[];r.push(t.hiddenLayers[0](n,0));for(let s=1;s<t.hiddenLayers.length;s++)r.push(t.hiddenLayers[s](r[s-1],s));const i=t.outputLayer(r[r.length-1],r.length);return{inputSize:n.height,hiddenLayers:r.map((e=>e.height)),outputSize:i.height}}function xi(e){const t=[],{options:n}=e;if(!n.inputLayer)throw new Error("inputLayer not defined");if(!n.outputLayer)throw new Error("outputLayer not defined");const r=n.inputLayer();t.push(n.hiddenLayers[0](r,Nn(),0));for(let s=1;s<n.hiddenLayers.length;s++)t.push(n.hiddenLayers[s](t[s-1],Nn(),s));const i=n.outputLayer(t[t.length-1],-1);return{inputSize:r.height,hiddenLayers:t.map((e=>e.height)),outputSize:i.height}}function vi(e,t,n){return`<svg\n            xmlns="http://www.w3.org/2000/svg"\n            xmlns:xlink="http://www.w3.org/1999/xlink"\n            version="1.1"\n            width="${t}"\n            height="${n}">${e}</svg>`}function wi(e){return e.sizes}function Si(e){const{options:t,sizes:n}=e,{inputSize:r,outputSize:i,hiddenLayers:s}=t;if(!n){if("number"===typeof r&&r<1)throw new Error("inputSize not set");if("number"===typeof i&&i<1)throw new Error("outputSize not set");if(null===s||void 0===s?void 0:s.some((e=>e<1)))throw new Error("hiddenLayers not set")}return"number"===typeof r&&Array.isArray(s)&&"number"===typeof i?[r].concat(s).concat([i]):n}function ki(e){const{options:t}=e,{inputSize:n,outputSize:r,hiddenLayers:i}=t;return[n].concat(i).concat([r])}function Ti(){return{line:{width:.5,color:"black",className:"connection"},recurrentLine:{width:1,color:"red",className:"recurrence"},inputs:{color:"rgba(0, 128, 0, 0.5)",labels:null,className:"input"},outputs:{color:"rgba(100, 149, 237, 0.5)",className:"output"},hidden:{color:"rgba(255, 127, 80, 0.5)",className:"hidden-neuron"},fontSize:"14px",fontClassName:"label",radius:8,width:400,height:250,sizes:[]}}function Ai(e,t){const n={...Ti(),...t},{width:r,height:i,inputs:s}=n;let a=[];if(e instanceof W||e instanceof me)a=Si(e);else if(e instanceof wr){const{inputSize:t,hiddenLayers:n,outputSize:r}=xi(e);a=[t].concat(n).concat([r])}else if(e instanceof br){const{inputSize:t,hiddenLayers:n,outputSize:r}=bi(e);a=[t].concat(n).concat([r])}else{if(e instanceof qr||e instanceof si||e instanceof Jr||e instanceof ni||e instanceof li||e instanceof ii)return vi(yi({...n,sizes:Ei(ki(e),s.labels)}),r,i);if(e.hasOwnProperty("type"))switch(e.type){case"NeuralNetwork":case"NeuralNetworkGPU":return vi(mi({...n,sizes:Ei(wi(e),s.labels)}),r,i);case"RNN":case"GRU":case"LSTM":case"RNNTimeStep":case"GRUTimeStep":case"LSTMTimeStep":return vi(yi({...n,sizes:Ei(ki(e),s.labels)}),r,i);default:throw new Error("unrecognized network")}else if(e.hasOwnProperty("inputSize")&&e.hasOwnProperty("hiddenLayers")&&e.hasOwnProperty("outputSize")){const{inputSize:t,hiddenLayers:n,outputSize:r}=e;a=[t,...n,r]}else{if(!e.hasOwnProperty("sizes"))throw new Error("unrecognized network");a=e.sizes}}return vi(mi({...n,sizes:Ei(a,s.labels)}),r,i)}function Ei(e,t){if(!e)throw new Error("sizes not set");if(e.some((e=>e<1)))throw new Error("sizes not set correctly");if(t&&t.length!==e[0])throw new Error("not enough labels for inputs");return e}const _i={RNNTimeStep:ni,LSTMTimeStep:li,GRUTimeStep:ii,RNN:qr,LSTM:si,GRU:Jr},Li={max:$,mse:O,ones:sn,ones2D:an,random:N,randomWeight:R,randos:F,range:ui,toArray:ci,DataFormatter:Tr,zeros:j,toSVG:Ai};e.AE=ye,e.CrossValidate=be,e.FeedForward=br,e.NeuralNetwork=W,e.NeuralNetworkGPU=me,e.Recurrent=wr,e.activation=f,e.layer=dr,e.layerTypes=pr,e.likely=xr,e.lookup=x,e.praxis=nt,e.recurrent=_i,e.utilities=Li,Object.defineProperty(e,"__esModule",{value:!0})}(t)},799:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function i(e,t,r){var i=null;if(void 0!==r&&(i=""+r),void 0!==t.key&&(i=""+t.key),"key"in t)for(var s in r={},t)"key"!==s&&(r[s]=t[s]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:i,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=i,t.jsxs=i},853:(e,t,n)=>{"use strict";e.exports=n(896)},896:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var o=2*(r+1)-1,l=e[o],u=o+1,c=e[u];if(0>s(l,n))u<i&&0>s(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[o]=n,r=o);else{if(!(u<i&&0>s(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],c=[],h=1,p=null,d=3,f=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,x="undefined"!==typeof setImmediate?setImmediate:null;function v(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function w(e){if(g=!1,v(e),!m)if(null!==r(u))m=!0,$();else{var t=r(c);null!==t&&O(w,t.startTime-e)}}var S,k=!1,T=-1,A=5,E=-1;function _(){return!(t.unstable_now()-E<A)}function L(){if(k){var e=t.unstable_now();E=e;var n=!0;try{e:{m=!1,g&&(g=!1,b(T),T=-1),f=!0;var s=d;try{t:{for(v(e),p=r(u);null!==p&&!(p.expirationTime>e&&_());){var a=p.callback;if("function"===typeof a){p.callback=null,d=p.priorityLevel;var o=a(p.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof o){p.callback=o,v(e),n=!0;break t}p===r(u)&&i(u),v(e)}else i(u);p=r(u)}if(null!==p)n=!0;else{var l=r(c);null!==l&&O(w,l.startTime-e),n=!1}}break e}finally{p=null,d=s,f=!1}n=void 0}}finally{n?S():k=!1}}}if("function"===typeof x)S=function(){x(L)};else if("undefined"!==typeof MessageChannel){var C=new MessageChannel,I=C.port2;C.port1.onmessage=L,S=function(){I.postMessage(null)}}else S=function(){y(L,0)};function $(){k||(k=!0,S())}function O(e,n){T=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,$())},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,s){var a=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(e.sortIndex=s,n(c,e),null===r(u)&&e===r(c)&&(g?(b(T),T=-1):g=!0,O(w,s-a))):(e.sortIndex=o,n(u,e),m||f||(m=!0,$())),e},t.unstable_shouldYield=_,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)},983:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,s=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,o=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,u=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,p=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,f=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,b=n?Symbol.for("react.fundamental"):60117,x=n?Symbol.for("react.responder"):60118,v=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case c:case h:case s:case o:case a:case d:return e;default:switch(e=e&&e.$$typeof){case u:case p:case g:case m:case l:return e;default:return t}}case i:return t}}}function S(e){return w(e)===h}t.AsyncMode=c,t.ConcurrentMode=h,t.ContextConsumer=u,t.ContextProvider=l,t.Element=r,t.ForwardRef=p,t.Fragment=s,t.Lazy=g,t.Memo=m,t.Portal=i,t.Profiler=o,t.StrictMode=a,t.Suspense=d,t.isAsyncMode=function(e){return S(e)||w(e)===c},t.isConcurrentMode=S,t.isContextConsumer=function(e){return w(e)===u},t.isContextProvider=function(e){return w(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===p},t.isFragment=function(e){return w(e)===s},t.isLazy=function(e){return w(e)===g},t.isMemo=function(e){return w(e)===m},t.isPortal=function(e){return w(e)===i},t.isProfiler=function(e){return w(e)===o},t.isStrictMode=function(e){return w(e)===a},t.isSuspense=function(e){return w(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===s||e===h||e===o||e===a||e===d||e===f||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===l||e.$$typeof===u||e.$$typeof===p||e.$$typeof===b||e.$$typeof===x||e.$$typeof===v||e.$$typeof===y)},t.typeOf=w}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r].call(s.exports,s,s.exports,n),s.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var a={};e=e||[null,t({}),t([]),t(t)];for(var o=2&i&&r;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach((e=>a[e]=()=>r[e]));return a.default=()=>r,n.d(s,a),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+".beb9426e.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="mental-math:";n.l=(r,i,s,a)=>{if(e[r])e[r].push(i);else{var o,l;if(void 0!==s)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var h=u[c];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+s){o=h;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+s),o.src=r),e[r]=[i];var p=(t,n)=>{o.onerror=o.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],o.parentNode&&o.parentNode.removeChild(o),i&&i.forEach((e=>e(n))),t)return t(n)},d=setTimeout(p.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=p.bind(null,o.onerror),o.onload=p.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/MentalMath/",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var s=new Promise(((n,r)=>i=e[t]=[n,r]));r.push(i[2]=s);var a=n.p+n.u(t),o=new Error;n.l(a,(r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var s=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+s+": "+a+")",o.name="ChunkLoadError",o.type=s,o.request=a,i[1](o)}}),"chunk-"+t,t)}};var t=(t,r)=>{var i,s,a=r[0],o=r[1],l=r[2],u=0;if(a.some((t=>0!==e[t]))){for(i in o)n.o(o,i)&&(n.m[i]=o[i]);if(l)l(n)}for(t&&t(r);u<a.length;u++)s=a[u],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},r=self.webpackChunkmental_math=self.webpackChunkmental_math||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e=n(43),t=n.t(e,2),r=n(391);let i=function(e){return e[e.HOME=0]="HOME",e[e.EXERCISE=1]="EXERCISE",e[e.RESULT=2]="RESULT",e}({});function s(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=s(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}const a=function(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=s(e))&&(r&&(r+=" "),r+=t);return r};function o(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const r={};for(const i in e){const s=e[i];let a="",o=!0;for(let e=0;e<s.length;e+=1){const r=s[e];r&&(a+=(!0===o?"":" ")+t(r),o=!1,n&&n[r]&&(a+=" "+n[r]))}r[i]=a}return r}function l(e){const t=new URL(`https://mui.com/production-error/?code=${e}`);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((e=>t.searchParams.append("args[]",e))),`Minified MUI error #${e}; visit ${t} for the full message.`}const u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MIN_SAFE_INTEGER,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.MAX_SAFE_INTEGER;return Math.max(t,Math.min(e,n))};function c(e){return u(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:1)}function h(e){if(e.type)return e;if("#"===e.charAt(0))return h(function(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&1===n[0].length&&(n=n.map((e=>e+e))),n?`rgb${4===n.length?"a":""}(${n.map(((e,t)=>t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3)).join(", ")})`:""}(e));const t=e.indexOf("("),n=e.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(n))throw new Error(l(9,e));let r,i=e.substring(t+1,e.length-1);if("color"===n){if(i=i.split(" "),r=i.shift(),4===i.length&&"/"===i[3].charAt(0)&&(i[3]=i[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(r))throw new Error(l(10,r))}else i=i.split(",");return i=i.map((e=>parseFloat(e))),{type:n,values:i,colorSpace:r}}const p=(e,t)=>{try{return(e=>{const t=h(e);return t.values.slice(0,3).map(((e,n)=>t.type.includes("hsl")&&0!==n?`${e}%`:e)).join(" ")})(e)}catch(n){return e}};function d(e){const{type:t,colorSpace:n}=e;let{values:r}=e;return t.includes("rgb")?r=r.map(((e,t)=>t<3?parseInt(e,10):e)):t.includes("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),r=t.includes("color")?`${n} ${r.join(" ")}`:`${r.join(", ")}`,`${t}(${r})`}function f(e){e=h(e);const{values:t}=e,n=t[0],r=t[1]/100,i=t[2]/100,s=r*Math.min(i,1-i),a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return i-s*Math.max(Math.min(t-3,9-t,1),-1)};let o="rgb";const l=[Math.round(255*a(0)),Math.round(255*a(8)),Math.round(255*a(4))];return"hsla"===e.type&&(o+="a",l.push(t[3])),d({type:o,values:l})}function m(e){let t="hsl"===(e=h(e)).type||"hsla"===e.type?h(f(e)).values:e.values;return t=t.map((t=>("color"!==e.type&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4))),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function g(e,t){return e=h(e),t=c(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]=`/${t}`:e.values[3]=t,d(e)}function y(e,t,n){try{return g(e,t)}catch(r){return e}}function b(e,t){if(e=h(e),t=c(t),e.type.includes("hsl"))e.values[2]*=1-t;else if(e.type.includes("rgb")||e.type.includes("color"))for(let n=0;n<3;n+=1)e.values[n]*=1-t;return d(e)}function x(e,t,n){try{return b(e,t)}catch(r){return e}}function v(e,t){if(e=h(e),t=c(t),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*t;else if(e.type.includes("rgb"))for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(e.type.includes("color"))for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return d(e)}function w(e,t,n){try{return v(e,t)}catch(r){return e}}function S(e,t,n){try{return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.15;return m(e)>.5?b(e,t):v(e,t)}(e,t)}catch(r){return e}}function k(e){if("string"!==typeof e)throw new Error(l(7));return e.charAt(0).toUpperCase()+e.slice(1)}const T=k;const A=function(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e},E=e=>A(e)&&"classes"!==e;function _(){return _=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_.apply(null,arguments)}var L=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(r){}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){var t;return null==(t=e.parentNode)?void 0:t.removeChild(e)})),this.tags=[],this.ctr=0},e}(),C=Math.abs,I=String.fromCharCode,$=Object.assign;function O(e){return e.trim()}function R(e,t,n){return e.replace(t,n)}function D(e,t){return e.indexOf(t)}function z(e,t){return 0|e.charCodeAt(t)}function P(e,t,n){return e.slice(t,n)}function M(e){return e.length}function N(e){return e.length}function F(e,t){return t.push(e),e}var V=1,K=1,j=0,B=0,U=0,G="";function W(e,t,n,r,i,s,a){return{value:e,root:t,parent:n,type:r,props:i,children:s,line:V,column:K,length:a,return:""}}function H(e,t){return $(W("",null,null,"",null,null,0),e,{length:-e.length},t)}function X(){return U=B>0?z(G,--B):0,K--,10===U&&(K=1,V--),U}function q(){return U=B<j?z(G,B++):0,K++,10===U&&(K=1,V++),U}function Y(){return z(G,B)}function J(){return B}function Q(e,t){return P(G,e,t)}function Z(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function ee(e){return V=K=1,j=M(G=e),B=0,[]}function te(e){return G="",e}function ne(e){return O(Q(B-1,se(91===e?e+2:40===e?e+1:e)))}function re(e){for(;(U=Y())&&U<33;)q();return Z(e)>2||Z(U)>3?"":" "}function ie(e,t){for(;--t&&q()&&!(U<48||U>102||U>57&&U<65||U>70&&U<97););return Q(e,J()+(t<6&&32==Y()&&32==q()))}function se(e){for(;q();)switch(U){case e:return B;case 34:case 39:34!==e&&39!==e&&se(U);break;case 40:41===e&&se(e);break;case 92:q()}return B}function ae(e,t){for(;q()&&e+U!==57&&(e+U!==84||47!==Y()););return"/*"+Q(t,B-1)+"*"+I(47===e?e:q())}function oe(e){for(;!Z(Y());)q();return Q(e,B)}var le="-ms-",ue="-moz-",ce="-webkit-",he="comm",pe="rule",de="decl",fe="@keyframes";function me(e,t){for(var n="",r=N(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function ge(e,t,n,r){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case de:return e.return=e.return||e.value;case he:return"";case fe:return e.return=e.value+"{"+me(e.children,r)+"}";case pe:e.value=e.props.join(",")}return M(n=me(e.children,r))?e.return=e.value+"{"+n+"}":""}function ye(e){return te(be("",null,null,null,[""],e=ee(e),0,[0],e))}function be(e,t,n,r,i,s,a,o,l){for(var u=0,c=0,h=a,p=0,d=0,f=0,m=1,g=1,y=1,b=0,x="",v=i,w=s,S=r,k=x;g;)switch(f=b,b=q()){case 40:if(108!=f&&58==z(k,h-1)){-1!=D(k+=R(ne(b),"&","&\f"),"&\f")&&(y=-1);break}case 34:case 39:case 91:k+=ne(b);break;case 9:case 10:case 13:case 32:k+=re(f);break;case 92:k+=ie(J()-1,7);continue;case 47:switch(Y()){case 42:case 47:F(ve(ae(q(),J()),t,n),l);break;default:k+="/"}break;case 123*m:o[u++]=M(k)*y;case 125*m:case 59:case 0:switch(b){case 0:case 125:g=0;case 59+c:-1==y&&(k=R(k,/\f/g,"")),d>0&&M(k)-h&&F(d>32?we(k+";",r,n,h-1):we(R(k," ","")+";",r,n,h-2),l);break;case 59:k+=";";default:if(F(S=xe(k,t,n,u,c,i,o,x,v=[],w=[],h),s),123===b)if(0===c)be(k,t,S,S,v,s,h,o,w);else switch(99===p&&110===z(k,3)?100:p){case 100:case 108:case 109:case 115:be(e,S,S,r&&F(xe(e,S,S,0,0,i,o,x,i,v=[],h),w),i,w,h,o,r?v:w);break;default:be(k,S,S,S,[""],w,0,o,w)}}u=c=d=0,m=y=1,x=k="",h=a;break;case 58:h=1+M(k),d=f;default:if(m<1)if(123==b)--m;else if(125==b&&0==m++&&125==X())continue;switch(k+=I(b),b*m){case 38:y=c>0?1:(k+="\f",-1);break;case 44:o[u++]=(M(k)-1)*y,y=1;break;case 64:45===Y()&&(k+=ne(q())),p=Y(),c=h=M(x=k+=oe(J())),b++;break;case 45:45===f&&2==M(k)&&(m=0)}}return s}function xe(e,t,n,r,i,s,a,o,l,u,c){for(var h=i-1,p=0===i?s:[""],d=N(p),f=0,m=0,g=0;f<r;++f)for(var y=0,b=P(e,h+1,h=C(m=a[f])),x=e;y<d;++y)(x=O(m>0?p[y]+" "+b:R(b,/&\f/g,p[y])))&&(l[g++]=x);return W(e,t,n,0===i?pe:o,l,u,c)}function ve(e,t,n){return W(e,t,n,he,I(U),P(e,2,-2),0)}function we(e,t,n,r){return W(e,t,n,de,P(e,0,r),P(e,r+1,-1),r)}var Se=function(e,t,n){for(var r=0,i=0;r=i,i=Y(),38===r&&12===i&&(t[n]=1),!Z(i);)q();return Q(e,B)},ke=function(e,t){return te(function(e,t){var n=-1,r=44;do{switch(Z(r)){case 0:38===r&&12===Y()&&(t[n]=1),e[n]+=Se(B-1,t,n);break;case 2:e[n]+=ne(r);break;case 4:if(44===r){e[++n]=58===Y()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=I(r)}}while(r=q());return e}(ee(e),t))},Te=new WeakMap,Ae=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||Te.get(n))&&!r){Te.set(e,!0);for(var i=[],s=ke(t,i),a=n.props,o=0,l=0;o<s.length;o++)for(var u=0;u<a.length;u++,l++)e.props[l]=i[o]?s[o].replace(/&\f/g,a[u]):a[u]+" "+s[o]}}},Ee=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function _e(e,t){switch(function(e,t){return 45^z(e,0)?(((t<<2^z(e,0))<<2^z(e,1))<<2^z(e,2))<<2^z(e,3):0}(e,t)){case 5103:return ce+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ce+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return ce+e+ue+e+le+e+e;case 6828:case 4268:return ce+e+le+e+e;case 6165:return ce+e+le+"flex-"+e+e;case 5187:return ce+e+R(e,/(\w+).+(:[^]+)/,ce+"box-$1$2"+le+"flex-$1$2")+e;case 5443:return ce+e+le+"flex-item-"+R(e,/flex-|-self/,"")+e;case 4675:return ce+e+le+"flex-line-pack"+R(e,/align-content|flex-|-self/,"")+e;case 5548:return ce+e+le+R(e,"shrink","negative")+e;case 5292:return ce+e+le+R(e,"basis","preferred-size")+e;case 6060:return ce+"box-"+R(e,"-grow","")+ce+e+le+R(e,"grow","positive")+e;case 4554:return ce+R(e,/([^-])(transform)/g,"$1"+ce+"$2")+e;case 6187:return R(R(R(e,/(zoom-|grab)/,ce+"$1"),/(image-set)/,ce+"$1"),e,"")+e;case 5495:case 3959:return R(e,/(image-set\([^]*)/,ce+"$1$`$1");case 4968:return R(R(e,/(.+:)(flex-)?(.*)/,ce+"box-pack:$3"+le+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+ce+e+e;case 4095:case 3583:case 4068:case 2532:return R(e,/(.+)-inline(.+)/,ce+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(M(e)-1-t>6)switch(z(e,t+1)){case 109:if(45!==z(e,t+4))break;case 102:return R(e,/(.+:)(.+)-([^]+)/,"$1"+ce+"$2-$3$1"+ue+(108==z(e,t+3)?"$3":"$2-$3"))+e;case 115:return~D(e,"stretch")?_e(R(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==z(e,t+1))break;case 6444:switch(z(e,M(e)-3-(~D(e,"!important")&&10))){case 107:return R(e,":",":"+ce)+e;case 101:return R(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+ce+(45===z(e,14)?"inline-":"")+"box$3$1"+ce+"$2$3$1"+le+"$2box$3")+e}break;case 5936:switch(z(e,t+11)){case 114:return ce+e+le+R(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return ce+e+le+R(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return ce+e+le+R(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return ce+e+le+e+e}return e}var Le=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case de:e.return=_e(e.value,e.length);break;case fe:return me([H(e,{value:R(e.value,"@","@"+ce)})],r);case pe:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return me([H(e,{props:[R(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return me([H(e,{props:[R(t,/:(plac\w+)/,":"+ce+"input-$1")]}),H(e,{props:[R(t,/:(plac\w+)/,":-moz-$1")]}),H(e,{props:[R(t,/:(plac\w+)/,le+"input-$1")]})],r)}return""}))}}],Ce=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var r,i,s=e.stylisPlugins||Le,a={},o=[];r=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)a[t[n]]=!0;o.push(e)}));var l,u,c=[ge,(u=function(e){l.insert(e)},function(e){e.root||(e=e.return)&&u(e)})],h=function(e){var t=N(e);return function(n,r,i,s){for(var a="",o=0;o<t;o++)a+=e[o](n,r,i,s)||"";return a}}([Ae,Ee].concat(s,c));i=function(e,t,n,r){l=n,function(e){me(ye(e),h)}(e?e+"{"+t.styles+"}":t.styles),r&&(p.inserted[t.name]=!0)};var p={key:t,sheet:new L({key:t,container:r,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:a,registered:{},insert:i};return p.sheet.hydrate(o),p};function Ie(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):n&&(r+=n+" ")})),r}var $e=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},Oe=function(e,t,n){$e(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var i=t;do{e.insert(t===i?"."+r:"",i,e.sheet,!0),i=i.next}while(void 0!==i)}};var Re={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function De(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}var ze=/[A-Z]|^ms/g,Pe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Me=function(e){return 45===e.charCodeAt(1)},Ne=function(e){return null!=e&&"boolean"!==typeof e},Fe=De((function(e){return Me(e)?e:e.replace(ze,"-$&").toLowerCase()})),Ve=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(Pe,(function(e,t,n){return je={name:t,styles:n,next:je},t}))}return 1===Re[e]||Me(e)||"number"!==typeof t||0===t?t:t+"px"};function Ke(e,t,n){if(null==n)return"";var r=n;if(void 0!==r.__emotion_styles)return r;switch(typeof n){case"boolean":return"";case"object":var i=n;if(1===i.anim)return je={name:i.name,styles:i.styles,next:je},i.name;var s=n;if(void 0!==s.styles){var a=s.next;if(void 0!==a)for(;void 0!==a;)je={name:a.name,styles:a.styles,next:je},a=a.next;return s.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=Ke(e,t,n[i])+";";else for(var s in n){var a=n[s];if("object"!==typeof a){var o=a;null!=t&&void 0!==t[o]?r+=s+"{"+t[o]+"}":Ne(o)&&(r+=Fe(s)+":"+Ve(s,o)+";")}else if(!Array.isArray(a)||"string"!==typeof a[0]||null!=t&&void 0!==t[a[0]]){var l=Ke(e,t,a);switch(s){case"animation":case"animationName":r+=Fe(s)+":"+l+";";break;default:r+=s+"{"+l+"}"}}else for(var u=0;u<a.length;u++)Ne(a[u])&&(r+=Fe(s)+":"+Ve(s,a[u])+";")}return r}(e,t,n);case"function":if(void 0!==e){var o=je,l=n(e);return je=o,Ke(e,t,l)}}var u=n;if(null==t)return u;var c=t[u];return void 0!==c?c:u}var je,Be=/label:\s*([^\s;{]+)\s*(;|$)/g;function Ue(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,i="";je=void 0;var s=e[0];null==s||void 0===s.raw?(r=!1,i+=Ke(n,t,s)):i+=s[0];for(var a=1;a<e.length;a++){if(i+=Ke(n,t,e[a]),r)i+=s[a]}Be.lastIndex=0;for(var o,l="";null!==(o=Be.exec(i));)l+="-"+o[1];var u=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(i)+l;return{name:u,styles:i,next:je}}var Ge=!!t.useInsertionEffect&&t.useInsertionEffect,We=Ge||function(e){return e()},He=Ge||e.useLayoutEffect,Xe=e.createContext("undefined"!==typeof HTMLElement?Ce({key:"css"}):null),qe=(Xe.Provider,function(t){return(0,e.forwardRef)((function(n,r){var i=(0,e.useContext)(Xe);return t(n,i,r)}))}),Ye=e.createContext({});var Je={}.hasOwnProperty,Qe="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",Ze=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;return $e(t,n,r),We((function(){return Oe(t,n,r)})),null},et=qe((function(t,n,r){var i=t.css;"string"===typeof i&&void 0!==n.registered[i]&&(i=n.registered[i]);var s=t[Qe],a=[i],o="";"string"===typeof t.className?o=Ie(n.registered,a,t.className):null!=t.className&&(o=t.className+" ");var l=Ue(a,void 0,e.useContext(Ye));o+=n.key+"-"+l.name;var u={};for(var c in t)Je.call(t,c)&&"css"!==c&&c!==Qe&&(u[c]=t[c]);return u.className=o,r&&(u.ref=r),e.createElement(e.Fragment,null,e.createElement(Ze,{cache:n,serialized:l,isStringTag:"string"===typeof s}),e.createElement(s,u))})),tt=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,nt=De((function(e){return tt.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),rt=function(e){return"theme"!==e},it=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?nt:rt},st=function(e,t,n){var r;if(t){var i=t.shouldForwardProp;r=e.__emotion_forwardProp&&i?function(t){return e.__emotion_forwardProp(t)&&i(t)}:i}return"function"!==typeof r&&n&&(r=e.__emotion_forwardProp),r},at=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;return $e(t,n,r),We((function(){return Oe(t,n,r)})),null},ot=function t(n,r){var i,s,a=n.__emotion_real===n,o=a&&n.__emotion_base||n;void 0!==r&&(i=r.label,s=r.target);var l=st(n,r,a),u=l||it(o),c=!u("as");return function(){var h=arguments,p=a&&void 0!==n.__emotion_styles?n.__emotion_styles.slice(0):[];if(void 0!==i&&p.push("label:"+i+";"),null==h[0]||void 0===h[0].raw)p.push.apply(p,h);else{var d=h[0];p.push(d[0]);for(var f=h.length,m=1;m<f;m++)p.push(h[m],d[m])}var g=qe((function(t,n,r){var i=c&&t.as||o,a="",h=[],d=t;if(null==t.theme){for(var f in d={},t)d[f]=t[f];d.theme=e.useContext(Ye)}"string"===typeof t.className?a=Ie(n.registered,h,t.className):null!=t.className&&(a=t.className+" ");var m=Ue(p.concat(h),n.registered,d);a+=n.key+"-"+m.name,void 0!==s&&(a+=" "+s);var g=c&&void 0===l?it(i):u,y={};for(var b in t)c&&"as"===b||g(b)&&(y[b]=t[b]);return y.className=a,r&&(y.ref=r),e.createElement(e.Fragment,null,e.createElement(at,{cache:n,serialized:m,isStringTag:"string"===typeof i}),e.createElement(i,y))}));return g.displayName=void 0!==i?i:"Styled("+("string"===typeof o?o:o.displayName||o.name||"Component")+")",g.defaultProps=n.defaultProps,g.__emotion_real=g,g.__emotion_base=o,g.__emotion_styles=p,g.__emotion_forwardProp=l,Object.defineProperty(g,"toString",{value:function(){return"."+s}}),g.withComponent=function(e,n){return t(e,_({},r,n,{shouldForwardProp:st(g,n,!0)})).apply(void 0,p)},g}}.bind(null);function lt(e,t){return ot(e,t)}["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){ot[e]=ot(e)}));const ut=[];function ct(e){return ut[0]=e,Ue(ut)}var ht=n(191);function pt(e){if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function dt(t){if(e.isValidElement(t)||(0,ht.Hy)(t)||!pt(t))return t;const n={};return Object.keys(t).forEach((e=>{n[e]=dt(t[e])})),n}function ft(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0};const i=r.clone?{...t}:t;return pt(t)&&pt(n)&&Object.keys(n).forEach((s=>{e.isValidElement(n[s])||(0,ht.Hy)(n[s])?i[s]=n[s]:pt(n[s])&&Object.prototype.hasOwnProperty.call(t,s)&&pt(t[s])?i[s]=ft(t[s],n[s],r):r.clone?i[s]=pt(n[s])?dt(n[s]):n[s]:i[s]=n[s]})),i}function mt(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5,...i}=e,s=(e=>{const t=Object.keys(e).map((t=>({key:t,val:e[t]})))||[];return t.sort(((e,t)=>e.val-t.val)),t.reduce(((e,t)=>({...e,[t.key]:t.val})),{})})(t),a=Object.keys(s);function o(e){return`@media (min-width:${"number"===typeof t[e]?t[e]:e}${n})`}function l(e){return`@media (max-width:${("number"===typeof t[e]?t[e]:e)-r/100}${n})`}function u(e,i){const s=a.indexOf(i);return`@media (min-width:${"number"===typeof t[e]?t[e]:e}${n}) and (max-width:${(-1!==s&&"number"===typeof t[a[s]]?t[a[s]]:i)-r/100}${n})`}return{keys:a,values:s,up:o,down:l,between:u,only:function(e){return a.indexOf(e)+1<a.length?u(e,a[a.indexOf(e)+1]):o(e)},not:function(e){const t=a.indexOf(e);return 0===t?o(a[1]):t===a.length-1?l(a[t]):u(e,a[a.indexOf(e)+1]).replace("@media","@media not all and")},unit:n,...i}}const gt={borderRadius:4},yt={xs:0,sm:600,md:900,lg:1200,xl:1536},bt={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${yt[e]}px)`},xt={containerQueries:e=>({up:t=>{let n="number"===typeof t?t:yt[t]||t;return"number"===typeof n&&(n=`${n}px`),e?`@container ${e} (min-width:${n})`:`@container (min-width:${n})`}})};function vt(e,t,n){const r=e.theme||{};if(Array.isArray(t)){const e=r.breakpoints||bt;return t.reduce(((r,i,s)=>(r[e.up(e.keys[s])]=n(t[s]),r)),{})}if("object"===typeof t){const e=r.breakpoints||bt;return Object.keys(t).reduce(((i,s)=>{if(function(e,t){return"@"===t||t.startsWith("@")&&(e.some((e=>t.startsWith(`@${e}`)))||!!t.match(/^@\d/))}(e.keys,s)){const e=function(e,t){const n=t.match(/^@([^/]+)?\/?(.+)?$/);if(!n)return null;const[,r,i]=n,s=Number.isNaN(+r)?r||0:+r;return e.containerQueries(i).up(s)}(r.containerQueries?r:xt,s);e&&(i[e]=n(t[s],s))}else if(Object.keys(e.values||yt).includes(s)){i[e.up(s)]=n(t[s],s)}else{const e=s;i[e]=t[e]}return i}),{})}return n(t)}function wt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=e.keys?.reduce(((t,n)=>(t[e.up(n)]={},t)),{});return t||{}}function St(e,t){return e.reduce(((e,t)=>{const n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e}),t)}function kt(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||"string"!==typeof t)return null;if(e&&e.vars&&n){const n=`vars.${t}`.split(".").reduce(((e,t)=>e&&e[t]?e[t]:null),e);if(null!=n)return n}return t.split(".").reduce(((e,t)=>e&&null!=e[t]?e[t]:null),e)}function Tt(e,t,n){let r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof e?e(n):Array.isArray(e)?e[n]||i:kt(e,n)||i,t&&(r=t(r,i,e)),r}const At=function(e){const{prop:t,cssProperty:n=e.prop,themeKey:r,transform:i}=e,s=e=>{if(null==e[t])return null;const s=e[t],a=kt(e.theme,r)||{};return vt(e,s,(e=>{let r=Tt(a,i,e);return e===r&&"string"===typeof e&&(r=Tt(a,i,`${t}${"default"===e?"":k(e)}`,e)),!1===n?r:{[n]:r}}))};return s.propTypes={},s.filterProps=[t],s};const Et=function(e,t){return t?ft(e,t,{clone:!1}):e};const _t={m:"margin",p:"padding"},Lt={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},Ct={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},It=function(e){const t={};return n=>(void 0===t[n]&&(t[n]=e(n)),t[n])}((e=>{if(e.length>2){if(!Ct[e])return[e];e=Ct[e]}const[t,n]=e.split(""),r=_t[t],i=Lt[n]||"";return Array.isArray(i)?i.map((e=>r+e)):[r+i]})),$t=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],Ot=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],Rt=[...$t,...Ot];function Dt(e,t,n,r){const i=kt(e,t,!0)??n;return"number"===typeof i||"string"===typeof i?e=>"string"===typeof e?e:"string"===typeof i?`calc(${e} * ${i})`:i*e:Array.isArray(i)?e=>{if("string"===typeof e)return e;const t=Math.abs(e);const n=i[t];return e>=0?n:"number"===typeof n?-n:`-${n}`}:"function"===typeof i?i:()=>{}}function zt(e){return Dt(e,"spacing",8)}function Pt(e,t){return"string"===typeof t||null==t?t:e(t)}function Mt(e,t,n,r){if(!t.includes(n))return null;const i=function(e,t){return n=>e.reduce(((e,r)=>(e[r]=Pt(t,n),e)),{})}(It(n),r);return vt(e,e[n],i)}function Nt(e,t){const n=zt(e.theme);return Object.keys(e).map((r=>Mt(e,t,r,n))).reduce(Et,{})}function Ft(e){return Nt(e,$t)}function Vt(e){return Nt(e,Ot)}function Kt(e){return Nt(e,Rt)}Ft.propTypes={},Ft.filterProps=$t,Vt.propTypes={},Vt.filterProps=Ot,Kt.propTypes={},Kt.filterProps=Rt;function jt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:zt({spacing:e});if(e.mui)return e;const n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(0===n.length?[1]:n).map((e=>{const n=t(e);return"number"===typeof n?`${n}px`:n})).join(" ")};return n.mui=!0,n}const Bt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(((e,t)=>(t.filterProps.forEach((n=>{e[n]=t})),e)),{}),i=e=>Object.keys(e).reduce(((t,n)=>r[n]?Et(t,r[n](e)):t),{});return i.propTypes={},i.filterProps=t.reduce(((e,t)=>e.concat(t.filterProps)),[]),i};function Ut(e){return"number"!==typeof e?e:`${e}px solid`}function Gt(e,t){return At({prop:e,themeKey:"borders",transform:t})}const Wt=Gt("border",Ut),Ht=Gt("borderTop",Ut),Xt=Gt("borderRight",Ut),qt=Gt("borderBottom",Ut),Yt=Gt("borderLeft",Ut),Jt=Gt("borderColor"),Qt=Gt("borderTopColor"),Zt=Gt("borderRightColor"),en=Gt("borderBottomColor"),tn=Gt("borderLeftColor"),nn=Gt("outline",Ut),rn=Gt("outlineColor"),sn=e=>{if(void 0!==e.borderRadius&&null!==e.borderRadius){const t=Dt(e.theme,"shape.borderRadius",4),n=e=>({borderRadius:Pt(t,e)});return vt(e,e.borderRadius,n)}return null};sn.propTypes={},sn.filterProps=["borderRadius"];Bt(Wt,Ht,Xt,qt,Yt,Jt,Qt,Zt,en,tn,sn,nn,rn);const an=e=>{if(void 0!==e.gap&&null!==e.gap){const t=Dt(e.theme,"spacing",8),n=e=>({gap:Pt(t,e)});return vt(e,e.gap,n)}return null};an.propTypes={},an.filterProps=["gap"];const on=e=>{if(void 0!==e.columnGap&&null!==e.columnGap){const t=Dt(e.theme,"spacing",8),n=e=>({columnGap:Pt(t,e)});return vt(e,e.columnGap,n)}return null};on.propTypes={},on.filterProps=["columnGap"];const ln=e=>{if(void 0!==e.rowGap&&null!==e.rowGap){const t=Dt(e.theme,"spacing",8),n=e=>({rowGap:Pt(t,e)});return vt(e,e.rowGap,n)}return null};ln.propTypes={},ln.filterProps=["rowGap"];Bt(an,on,ln,At({prop:"gridColumn"}),At({prop:"gridRow"}),At({prop:"gridAutoFlow"}),At({prop:"gridAutoColumns"}),At({prop:"gridAutoRows"}),At({prop:"gridTemplateColumns"}),At({prop:"gridTemplateRows"}),At({prop:"gridTemplateAreas"}),At({prop:"gridArea"}));function un(e,t){return"grey"===t?t:e}Bt(At({prop:"color",themeKey:"palette",transform:un}),At({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:un}),At({prop:"backgroundColor",themeKey:"palette",transform:un}));function cn(e){return e<=1&&0!==e?100*e+"%":e}const hn=At({prop:"width",transform:cn}),pn=e=>{if(void 0!==e.maxWidth&&null!==e.maxWidth){const t=t=>{const n=e.theme?.breakpoints?.values?.[t]||yt[t];return n?"px"!==e.theme?.breakpoints?.unit?{maxWidth:`${n}${e.theme.breakpoints.unit}`}:{maxWidth:n}:{maxWidth:cn(t)}};return vt(e,e.maxWidth,t)}return null};pn.filterProps=["maxWidth"];const dn=At({prop:"minWidth",transform:cn}),fn=At({prop:"height",transform:cn}),mn=At({prop:"maxHeight",transform:cn}),gn=At({prop:"minHeight",transform:cn}),yn=(At({prop:"size",cssProperty:"width",transform:cn}),At({prop:"size",cssProperty:"height",transform:cn}),Bt(hn,pn,dn,fn,mn,gn,At({prop:"boxSizing"})),{border:{themeKey:"borders",transform:Ut},borderTop:{themeKey:"borders",transform:Ut},borderRight:{themeKey:"borders",transform:Ut},borderBottom:{themeKey:"borders",transform:Ut},borderLeft:{themeKey:"borders",transform:Ut},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Ut},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:sn},color:{themeKey:"palette",transform:un},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:un},backgroundColor:{themeKey:"palette",transform:un},p:{style:Vt},pt:{style:Vt},pr:{style:Vt},pb:{style:Vt},pl:{style:Vt},px:{style:Vt},py:{style:Vt},padding:{style:Vt},paddingTop:{style:Vt},paddingRight:{style:Vt},paddingBottom:{style:Vt},paddingLeft:{style:Vt},paddingX:{style:Vt},paddingY:{style:Vt},paddingInline:{style:Vt},paddingInlineStart:{style:Vt},paddingInlineEnd:{style:Vt},paddingBlock:{style:Vt},paddingBlockStart:{style:Vt},paddingBlockEnd:{style:Vt},m:{style:Ft},mt:{style:Ft},mr:{style:Ft},mb:{style:Ft},ml:{style:Ft},mx:{style:Ft},my:{style:Ft},margin:{style:Ft},marginTop:{style:Ft},marginRight:{style:Ft},marginBottom:{style:Ft},marginLeft:{style:Ft},marginX:{style:Ft},marginY:{style:Ft},marginInline:{style:Ft},marginInlineStart:{style:Ft},marginInlineEnd:{style:Ft},marginBlock:{style:Ft},marginBlockStart:{style:Ft},marginBlockEnd:{style:Ft},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:an},rowGap:{style:ln},columnGap:{style:on},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:cn},maxWidth:{style:pn},minWidth:{transform:cn},height:{transform:cn},maxHeight:{transform:cn},minHeight:{transform:cn},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}});const bn=function(){function e(e,t,n,r){const i={[e]:t,theme:n},s=r[e];if(!s)return{[e]:t};const{cssProperty:a=e,themeKey:o,transform:l,style:u}=s;if(null==t)return null;if("typography"===o&&"inherit"===t)return{[e]:t};const c=kt(n,o)||{};if(u)return u(i);return vt(i,t,(t=>{let n=Tt(c,l,t);return t===n&&"string"===typeof t&&(n=Tt(c,l,`${e}${"default"===t?"":k(t)}`,t)),!1===a?n:{[a]:n}}))}return function t(n){const{sx:r,theme:i={}}=n||{};if(!r)return null;const s=i.unstable_sxConfig??yn;function a(n){let r=n;if("function"===typeof n)r=n(i);else if("object"!==typeof n)return n;if(!r)return null;const a=wt(i.breakpoints),o=Object.keys(a);let l=a;return Object.keys(r).forEach((n=>{const a=function(e,t){return"function"===typeof e?e(t):e}(r[n],i);if(null!==a&&void 0!==a)if("object"===typeof a)if(s[n])l=Et(l,e(n,a,i,s));else{const e=vt({theme:i},a,(e=>({[n]:e})));!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(((e,t)=>e.concat(Object.keys(t))),[]),i=new Set(r);return t.every((e=>i.size===Object.keys(e).length))}(e,a)?l=Et(l,e):l[n]=t({sx:a,theme:i})}else l=Et(l,e(n,a,i,s))})),function(e,t){if(!e.containerQueries)return t;const n=Object.keys(t).filter((e=>e.startsWith("@container"))).sort(((e,t)=>{const n=/min-width:\s*([0-9.]+)/;return+(e.match(n)?.[1]||0)-+(t.match(n)?.[1]||0)}));return n.length?n.reduce(((e,n)=>{const r=t[n];return delete e[n],e[n]=r,e}),{...t}):t}(i,St(o,l))}return Array.isArray(r)?r.map(a):a(r)}}();bn.filterProps=["sx"];const xn=bn;function vn(e,t){const n=this;if(n.vars){if(!n.colorSchemes?.[e]||"function"!==typeof n.getColorSchemeSelector)return{};let r=n.getColorSchemeSelector(e);return"&"===r?t:((r.includes("data-")||r.includes("."))&&(r=`*:where(${r.replace(/\s*&$/,"")}) &`),{[r]:t})}return n.palette.mode===e?t:{}}const wn=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{breakpoints:t={},palette:n={},spacing:r,shape:i={},...s}=e;let a=ft({breakpoints:mt(t),direction:"ltr",components:{},palette:{mode:"light",...n},spacing:jt(r),shape:{...gt,...i}},s);a=function(e){const t=(e,t)=>e.replace("@media",t?`@container ${t}`:"@container");function n(n,r){n.up=function(){return t(e.breakpoints.up(...arguments),r)},n.down=function(){return t(e.breakpoints.down(...arguments),r)},n.between=function(){return t(e.breakpoints.between(...arguments),r)},n.only=function(){return t(e.breakpoints.only(...arguments),r)},n.not=function(){const n=t(e.breakpoints.not(...arguments),r);return n.includes("not all and")?n.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):n}}const r={},i=e=>(n(r,e),r);return n(i),{...e,containerQueries:i}}(a),a.applyStyles=vn;for(var o=arguments.length,l=new Array(o>1?o-1:0),u=1;u<o;u++)l[u-1]=arguments[u];return a=l.reduce(((e,t)=>ft(e,t)),a),a.unstable_sxConfig={...yn,...s?.unstable_sxConfig},a.unstable_sx=function(e){return xn({sx:e,theme:this})},a};function Sn(e){const{variants:t,...n}=e,r={variants:t,style:ct(n),isProcessed:!0};return r.style===n||t&&t.forEach((e=>{"function"!==typeof e.style&&(e.style=ct(e.style))})),r}const kn=wn();function Tn(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}function An(e){return e?(t,n)=>n[e]:null}function En(e,t){const n="function"===typeof t?t(e):t;if(Array.isArray(n))return n.flatMap((t=>En(e,t)));if(Array.isArray(n?.variants)){let t;if(n.isProcessed)t=n.style;else{const{variants:e,...r}=n;t=r}return _n(e,n.variants,[t])}return n?.isProcessed?n.style:n}function _n(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];e:for(let i=0;i<t.length;i+=1){const s=t[i];if("function"===typeof s.props){if(n??={...e,...e.ownerState,ownerState:e.ownerState},!s.props(n))continue}else for(const t in s.props)if(e[t]!==s.props[t]&&e.ownerState?.[t]!==s.props[t])continue e;"function"===typeof s.style?(n??={...e,...e.ownerState,ownerState:e.ownerState},r.push(s.style(n))):r.push(s.style)}return r}function Ln(e,t){}function Cn(e){return e?e.charAt(0).toLowerCase()+e.slice(1):e}const In={black:"#000",white:"#fff"},$n={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},On={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},Rn={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},Dn={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},zn={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},Pn={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},Mn={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"};function Nn(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:In.white,default:In.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const Fn=Nn();function Vn(){return{text:{primary:In.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:In.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const Kn=Vn();function jn(e,t,n,r){const i=r.light||r,s=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=v(e.main,i):"dark"===t&&(e.dark=b(e.main,s)))}function Bn(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:r=.2,...i}=e,s=e.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:zn[200],light:zn[50],dark:zn[400]}:{main:zn[700],light:zn[400],dark:zn[800]}}(t),a=e.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:On[200],light:On[50],dark:On[400]}:{main:On[500],light:On[300],dark:On[700]}}(t),o=e.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:Rn[500],light:Rn[300],dark:Rn[700]}:{main:Rn[700],light:Rn[400],dark:Rn[800]}}(t),u=e.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:Pn[400],light:Pn[300],dark:Pn[700]}:{main:Pn[700],light:Pn[500],dark:Pn[900]}}(t),c=e.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:Mn[400],light:Mn[300],dark:Mn[700]}:{main:Mn[800],light:Mn[500],dark:Mn[900]}}(t),h=e.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:Dn[400],light:Dn[300],dark:Dn[700]}:{main:"#ed6c02",light:Dn[500],dark:Dn[900]}}(t);function p(e){const t=function(e,t){const n=m(e),r=m(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}(e,Kn.text.primary)>=n?Kn.text.primary:Fn.text.primary;return t}const d=e=>{let{color:t,name:n,mainShade:i=500,lightShade:s=300,darkShade:a=700}=e;if(t={...t},!t.main&&t[i]&&(t.main=t[i]),!t.hasOwnProperty("main"))throw new Error(l(11,n?` (${n})`:"",i));if("string"!==typeof t.main)throw new Error(l(12,n?` (${n})`:"",JSON.stringify(t.main)));return jn(t,"light",s,r),jn(t,"dark",a,r),t.contrastText||(t.contrastText=p(t.main)),t};let f;"light"===t?f=Nn():"dark"===t&&(f=Vn());return ft({common:{...In},mode:t,primary:d({color:s,name:"primary"}),secondary:d({color:a,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:d({color:o,name:"error"}),warning:d({color:h,name:"warning"}),info:d({color:u,name:"info"}),success:d({color:c,name:"success"}),grey:$n,contrastThreshold:n,getContrastText:p,augmentColor:d,tonalOffset:r,...f},i)}function Un(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";function t(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];if(!r.length)return"";const s=r[0];return"string"!==typeof s||s.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, ${s}`:`, var(--${e?`${e}-`:""}${s}${t(...r.slice(1))})`}return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return`var(--${e?`${e}-`:""}${n}${t(...i)})`}}function Gn(e){const t={};return Object.entries(e).forEach((e=>{const[n,r]=e;"object"===typeof r&&(t[n]=`${r.fontStyle?`${r.fontStyle} `:""}${r.fontVariant?`${r.fontVariant} `:""}${r.fontWeight?`${r.fontWeight} `:""}${r.fontStretch?`${r.fontStretch} `:""}${r.fontSize||""}${r.lineHeight?`/${r.lineHeight} `:""}${r.fontFamily||""}`)})),t}const Wn=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=e;t.forEach(((e,s)=>{s===t.length-1?Array.isArray(i)?i[Number(e)]=n:i&&"object"===typeof i&&(i[e]=n):i&&"object"===typeof i&&(i[e]||(i[e]=r.includes(e)?[]:{}),i=i[e])}))};function Hn(e,t){const{prefix:n,shouldSkipGeneratingVar:r}=t||{},i={},s={},a={};var o,l;return o=(e,t,o)=>{if(("string"===typeof t||"number"===typeof t)&&(!r||!r(e,t))){const r=`--${n?`${n}-`:""}${e.join("-")}`,l=((e,t)=>"number"===typeof t?["lineHeight","fontWeight","opacity","zIndex"].some((t=>e.includes(t)))||e[e.length-1].toLowerCase().includes("opacity")?t:`${t}px`:t)(e,t);Object.assign(i,{[r]:l}),Wn(s,e,`var(${r})`,o),Wn(a,e,`var(${r}, ${l})`,o)}},l=e=>"vars"===e[0],function e(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];Object.entries(t).forEach((t=>{let[i,s]=t;(!l||l&&!l([...n,i]))&&void 0!==s&&null!==s&&("object"===typeof s&&Object.keys(s).length>0?e(s,[...n,i],Array.isArray(s)?[...r,i]:r):o([...n,i],s,r))}))}(e),{css:i,vars:s,varsWithDefaults:a}}const Xn=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{getSelector:n=g,disableCssColorScheme:r,colorSchemeSelector:i}=t,{colorSchemes:s={},components:a,defaultColorScheme:o="light",...l}=e,{vars:u,css:c,varsWithDefaults:h}=Hn(l,t);let p=h;const d={},{[o]:f,...m}=s;if(Object.entries(m||{}).forEach((e=>{let[n,r]=e;const{vars:i,css:s,varsWithDefaults:a}=Hn(r,t);p=ft(p,a),d[n]={css:s,vars:i}})),f){const{css:e,vars:n,varsWithDefaults:r}=Hn(f,t);p=ft(p,r),d[o]={css:e,vars:n}}function g(t,n){let r=i;if("class"===i&&(r=".%s"),"data"===i&&(r="[data-%s]"),i?.startsWith("data-")&&!i.includes("%s")&&(r=`[${i}="%s"]`),t){if("media"===r){if(e.defaultColorScheme===t)return":root";const r=s[t]?.palette?.mode||t;return{[`@media (prefers-color-scheme: ${r})`]:{":root":n}}}if(r)return e.defaultColorScheme===t?`:root, ${r.replace("%s",String(t))}`:r.replace("%s",String(t))}return":root"}return{vars:p,generateThemeVars:()=>{let e={...u};return Object.entries(d).forEach((t=>{let[,{vars:n}]=t;e=ft(e,n)})),e},generateStyleSheets:()=>{const t=[],i=e.defaultColorScheme||"light";function a(e,n){Object.keys(n).length&&t.push("string"===typeof e?{[e]:{...n}}:e)}a(n(void 0,{...c}),c);const{[i]:o,...l}=d;if(o){const{css:e}=o,t=s[i]?.palette?.mode,l=!r&&t?{colorScheme:t,...e}:{...e};a(n(i,{...l}),l)}return Object.entries(l).forEach((e=>{let[t,{css:i}]=e;const o=s[t]?.palette?.mode,l=!r&&o?{colorScheme:o,...i}:{...i};a(n(t,{...l}),l)})),t}}};function qn(e,t){return{toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}},...t}}function Yn(e){return Math.round(1e5*e)/1e5}const Jn={textTransform:"uppercase"},Qn='"Roboto", "Helvetica", "Arial", sans-serif';function Zn(e,t){const{fontFamily:n=Qn,fontSize:r=14,fontWeightLight:i=300,fontWeightRegular:s=400,fontWeightMedium:a=500,fontWeightBold:o=700,htmlFontSize:l=16,allVariants:u,pxToRem:c,...h}="function"===typeof t?t(e):t;const p=r/14,d=c||(e=>e/l*p+"rem"),f=(e,t,r,i,s)=>({fontFamily:n,fontWeight:e,fontSize:d(t),lineHeight:r,...n===Qn?{letterSpacing:`${Yn(i/t)}em`}:{},...s,...u}),m={h1:f(i,96,1.167,-1.5),h2:f(i,60,1.2,-.5),h3:f(s,48,1.167,0),h4:f(s,34,1.235,.25),h5:f(s,24,1.334,0),h6:f(a,20,1.6,.15),subtitle1:f(s,16,1.75,.15),subtitle2:f(a,14,1.57,.1),body1:f(s,16,1.5,.15),body2:f(s,14,1.43,.15),button:f(a,14,1.75,.4,Jn),caption:f(s,12,1.66,.4),overline:f(s,12,2.66,1,Jn),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return ft({htmlFontSize:l,pxToRem:d,fontFamily:n,fontSize:r,fontWeightLight:i,fontWeightRegular:s,fontWeightMedium:a,fontWeightBold:o,...m},h,{clone:!1})}function er(){return[`${arguments.length<=0?void 0:arguments[0]}px ${arguments.length<=1?void 0:arguments[1]}px ${arguments.length<=2?void 0:arguments[2]}px ${arguments.length<=3?void 0:arguments[3]}px rgba(0,0,0,0.2)`,`${arguments.length<=4?void 0:arguments[4]}px ${arguments.length<=5?void 0:arguments[5]}px ${arguments.length<=6?void 0:arguments[6]}px ${arguments.length<=7?void 0:arguments[7]}px rgba(0,0,0,0.14)`,`${arguments.length<=8?void 0:arguments[8]}px ${arguments.length<=9?void 0:arguments[9]}px ${arguments.length<=10?void 0:arguments[10]}px ${arguments.length<=11?void 0:arguments[11]}px rgba(0,0,0,0.12)`].join(",")}const tr=["none",er(0,2,1,-1,0,1,1,0,0,1,3,0),er(0,3,1,-2,0,2,2,0,0,1,5,0),er(0,3,3,-2,0,3,4,0,0,1,8,0),er(0,2,4,-1,0,4,5,0,0,1,10,0),er(0,3,5,-1,0,5,8,0,0,1,14,0),er(0,3,5,-1,0,6,10,0,0,1,18,0),er(0,4,5,-2,0,7,10,1,0,2,16,1),er(0,5,5,-3,0,8,10,1,0,3,14,2),er(0,5,6,-3,0,9,12,1,0,3,16,2),er(0,6,6,-3,0,10,14,1,0,4,18,3),er(0,6,7,-4,0,11,15,1,0,4,20,3),er(0,7,8,-4,0,12,17,2,0,5,22,4),er(0,7,8,-4,0,13,19,2,0,5,24,4),er(0,7,9,-4,0,14,21,2,0,5,26,4),er(0,8,9,-5,0,15,22,2,0,6,28,5),er(0,8,10,-5,0,16,24,2,0,6,30,5),er(0,8,11,-5,0,17,26,2,0,6,32,5),er(0,9,11,-5,0,18,28,2,0,7,34,6),er(0,9,12,-6,0,19,29,2,0,7,36,6),er(0,10,13,-6,0,20,31,3,0,8,38,7),er(0,10,13,-6,0,21,33,3,0,8,40,7),er(0,10,14,-6,0,22,35,3,0,8,42,7),er(0,11,14,-7,0,23,36,3,0,9,44,8),er(0,11,15,-7,0,24,38,3,0,9,46,8)],nr={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},rr={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function ir(e){return`${Math.round(e)}ms`}function sr(e){if(!e)return 0;const t=e/36;return Math.min(Math.round(10*(4+15*t**.25+t/5)),3e3)}function ar(e){const t={...nr,...e.easing},n={...rr,...e.duration};return{getAutoHeightDuration:sr,create:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{duration:i=n.standard,easing:s=t.easeInOut,delay:a=0,...o}=r;return(Array.isArray(e)?e:[e]).map((e=>`${e} ${"string"===typeof i?i:ir(i)} ${s} ${"string"===typeof a?a:ir(a)}`)).join(",")},...e,easing:t,duration:n}}const or={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function lr(){const e={...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}};return function e(t){const n=Object.entries(t);for(let i=0;i<n.length;i++){const[s,a]=n[i];!pt(r=a)&&"undefined"!==typeof r&&"string"!==typeof r&&"boolean"!==typeof r&&"number"!==typeof r&&!Array.isArray(r)||s.startsWith("unstable_")?delete t[s]:pt(a)&&(t[s]={...a},e(t[s]))}var r}(e),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';\n\nconst theme = ${JSON.stringify(e,null,2)};\n\ntheme.breakpoints = createBreakpoints(theme.breakpoints || {});\ntheme.transitions = createTransitions(theme.transitions || {});\n\nexport default theme;`}function ur(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{breakpoints:t,mixins:n={},spacing:r,palette:i={},transitions:s={},typography:a={},shape:o,...u}=e;if(e.vars&&void 0===e.generateThemeVars)throw new Error(l(20));const c=Bn(i),h=wn(e);let p=ft(h,{mixins:qn(h.breakpoints,n),palette:c,shadows:tr.slice(),typography:Zn(c,a),transitions:ar(s),zIndex:{...or}});p=ft(p,u);for(var d=arguments.length,f=new Array(d>1?d-1:0),m=1;m<d;m++)f[m-1]=arguments[m];return p=f.reduce(((e,t)=>ft(e,t)),p),p.unstable_sxConfig={...yn,...u?.unstable_sxConfig},p.unstable_sx=function(e){return xn({sx:e,theme:this})},p.toRuntimeSource=lr,p}const cr=ur;function hr(e){let t;return t=e<1?5.11916*e**2:4.5*Math.log(e+1)+2,Math.round(10*t)/1e3}const pr=[...Array(25)].map(((e,t)=>{if(0===t)return"none";const n=hr(t);return`linear-gradient(rgba(255 255 255 / ${n}), rgba(255 255 255 / ${n}))`}));function dr(e){return{inputPlaceholder:"dark"===e?.5:.42,inputUnderline:"dark"===e?.7:.42,switchTrackDisabled:"dark"===e?.2:.12,switchTrack:"dark"===e?.3:.38}}function fr(e){return"dark"===e?pr:[]}function mr(e){return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||"palette"===e[0]&&!!e[1]?.match(/(mode|contrastThreshold|tonalOffset)/)}const gr=e=>[...[...Array(25)].map(((t,n)=>`--${e?`${e}-`:""}overlays-${n}`)),`--${e?`${e}-`:""}palette-AppBar-darkBg`,`--${e?`${e}-`:""}palette-AppBar-darkColor`],yr=e=>(t,n)=>{const r=e.rootSelector||":root",i=e.colorSchemeSelector;let s=i;if("class"===i&&(s=".%s"),"data"===i&&(s="[data-%s]"),i?.startsWith("data-")&&!i.includes("%s")&&(s=`[${i}="%s"]`),e.defaultColorScheme===t){if("dark"===t){const i={};return gr(e.cssVarPrefix).forEach((e=>{i[e]=n[e],delete n[e]})),"media"===s?{[r]:n,"@media (prefers-color-scheme: dark)":{[r]:i}}:s?{[s.replace("%s",t)]:i,[`${r}, ${s.replace("%s",t)}`]:n}:{[r]:{...n,...i}}}if(s&&"media"!==s)return`${r}, ${s.replace("%s",String(t))}`}else if(t){if("media"===s)return{[`@media (prefers-color-scheme: ${String(t)})`]:{[r]:n}};if(s)return s.replace("%s",String(t))}return r};function br(e,t,n){!e[t]&&n&&(e[t]=n)}function xr(e){return"string"===typeof e&&e.startsWith("hsl")?f(e):e}function vr(e,t){`${t}Channel`in e||(e[`${t}Channel`]=p(xr(e[t])))}const wr=e=>{try{return e()}catch(t){}};function Sr(e,t,n,r){if(!t)return;t=!0===t?{}:t;const i="dark"===r?"dark":"light";if(!n)return void(e[r]=function(e){const{palette:t={mode:"light"},opacity:n,overlays:r,...i}=e,s=Bn(t);return{palette:s,opacity:{...dr(s.mode),...n},overlays:r||fr(s.mode),...i}}({...t,palette:{mode:i,...t?.palette}}));const{palette:s,...a}=cr({...n,palette:{mode:i,...t?.palette}});return e[r]={...t,palette:s,opacity:{...dr(i),...t?.opacity},overlays:t?.overlays||fr(i)},a}function kr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{colorSchemes:t={light:!0},defaultColorScheme:n,disableCssColorScheme:r=!1,cssVarPrefix:i="mui",shouldSkipGeneratingVar:s=mr,colorSchemeSelector:a=(t.light&&t.dark?"media":void 0),rootSelector:o=":root",...u}=e,c=Object.keys(t)[0],h=n||(t.light&&"light"!==c?"light":c),d=function(){return Un(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"mui")}(i),{[h]:f,light:m,dark:g,...b}=t,v={...b};let k=f;if(("dark"===h&&!("dark"in t)||"light"===h&&!("light"in t))&&(k=!0),!k)throw new Error(l(21,h));const T=Sr(v,k,u,h);m&&!v.light&&Sr(v,m,void 0,"light"),g&&!v.dark&&Sr(v,g,void 0,"dark");let A={defaultColorScheme:h,...T,cssVarPrefix:i,colorSchemeSelector:a,rootSelector:o,getCssVar:d,colorSchemes:v,font:{...Gn(T.typography),...T.font},spacing:(E=u.spacing,"number"===typeof E?`${E}px`:"string"===typeof E||"function"===typeof E||Array.isArray(E)?E:"8px")};var E;Object.keys(A.colorSchemes).forEach((e=>{const t=A.colorSchemes[e].palette,n=e=>{const n=e.split("-"),r=n[1],i=n[2];return d(e,t[r][i])};var r;if("light"===t.mode&&(br(t.common,"background","#fff"),br(t.common,"onBackground","#000")),"dark"===t.mode&&(br(t.common,"background","#000"),br(t.common,"onBackground","#fff")),r=t,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"].forEach((e=>{r[e]||(r[e]={})})),"light"===t.mode){br(t.Alert,"errorColor",x(t.error.light,.6)),br(t.Alert,"infoColor",x(t.info.light,.6)),br(t.Alert,"successColor",x(t.success.light,.6)),br(t.Alert,"warningColor",x(t.warning.light,.6)),br(t.Alert,"errorFilledBg",n("palette-error-main")),br(t.Alert,"infoFilledBg",n("palette-info-main")),br(t.Alert,"successFilledBg",n("palette-success-main")),br(t.Alert,"warningFilledBg",n("palette-warning-main")),br(t.Alert,"errorFilledColor",wr((()=>t.getContrastText(t.error.main)))),br(t.Alert,"infoFilledColor",wr((()=>t.getContrastText(t.info.main)))),br(t.Alert,"successFilledColor",wr((()=>t.getContrastText(t.success.main)))),br(t.Alert,"warningFilledColor",wr((()=>t.getContrastText(t.warning.main)))),br(t.Alert,"errorStandardBg",w(t.error.light,.9)),br(t.Alert,"infoStandardBg",w(t.info.light,.9)),br(t.Alert,"successStandardBg",w(t.success.light,.9)),br(t.Alert,"warningStandardBg",w(t.warning.light,.9)),br(t.Alert,"errorIconColor",n("palette-error-main")),br(t.Alert,"infoIconColor",n("palette-info-main")),br(t.Alert,"successIconColor",n("palette-success-main")),br(t.Alert,"warningIconColor",n("palette-warning-main")),br(t.AppBar,"defaultBg",n("palette-grey-100")),br(t.Avatar,"defaultBg",n("palette-grey-400")),br(t.Button,"inheritContainedBg",n("palette-grey-300")),br(t.Button,"inheritContainedHoverBg",n("palette-grey-A100")),br(t.Chip,"defaultBorder",n("palette-grey-400")),br(t.Chip,"defaultAvatarColor",n("palette-grey-700")),br(t.Chip,"defaultIconColor",n("palette-grey-700")),br(t.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),br(t.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),br(t.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),br(t.LinearProgress,"primaryBg",w(t.primary.main,.62)),br(t.LinearProgress,"secondaryBg",w(t.secondary.main,.62)),br(t.LinearProgress,"errorBg",w(t.error.main,.62)),br(t.LinearProgress,"infoBg",w(t.info.main,.62)),br(t.LinearProgress,"successBg",w(t.success.main,.62)),br(t.LinearProgress,"warningBg",w(t.warning.main,.62)),br(t.Skeleton,"bg",`rgba(${n("palette-text-primaryChannel")} / 0.11)`),br(t.Slider,"primaryTrack",w(t.primary.main,.62)),br(t.Slider,"secondaryTrack",w(t.secondary.main,.62)),br(t.Slider,"errorTrack",w(t.error.main,.62)),br(t.Slider,"infoTrack",w(t.info.main,.62)),br(t.Slider,"successTrack",w(t.success.main,.62)),br(t.Slider,"warningTrack",w(t.warning.main,.62));const e=S(t.background.default,.8);br(t.SnackbarContent,"bg",e),br(t.SnackbarContent,"color",wr((()=>t.getContrastText(e)))),br(t.SpeedDialAction,"fabHoverBg",S(t.background.paper,.15)),br(t.StepConnector,"border",n("palette-grey-400")),br(t.StepContent,"border",n("palette-grey-400")),br(t.Switch,"defaultColor",n("palette-common-white")),br(t.Switch,"defaultDisabledColor",n("palette-grey-100")),br(t.Switch,"primaryDisabledColor",w(t.primary.main,.62)),br(t.Switch,"secondaryDisabledColor",w(t.secondary.main,.62)),br(t.Switch,"errorDisabledColor",w(t.error.main,.62)),br(t.Switch,"infoDisabledColor",w(t.info.main,.62)),br(t.Switch,"successDisabledColor",w(t.success.main,.62)),br(t.Switch,"warningDisabledColor",w(t.warning.main,.62)),br(t.TableCell,"border",w(y(t.divider,1),.88)),br(t.Tooltip,"bg",y(t.grey[700],.92))}if("dark"===t.mode){br(t.Alert,"errorColor",w(t.error.light,.6)),br(t.Alert,"infoColor",w(t.info.light,.6)),br(t.Alert,"successColor",w(t.success.light,.6)),br(t.Alert,"warningColor",w(t.warning.light,.6)),br(t.Alert,"errorFilledBg",n("palette-error-dark")),br(t.Alert,"infoFilledBg",n("palette-info-dark")),br(t.Alert,"successFilledBg",n("palette-success-dark")),br(t.Alert,"warningFilledBg",n("palette-warning-dark")),br(t.Alert,"errorFilledColor",wr((()=>t.getContrastText(t.error.dark)))),br(t.Alert,"infoFilledColor",wr((()=>t.getContrastText(t.info.dark)))),br(t.Alert,"successFilledColor",wr((()=>t.getContrastText(t.success.dark)))),br(t.Alert,"warningFilledColor",wr((()=>t.getContrastText(t.warning.dark)))),br(t.Alert,"errorStandardBg",x(t.error.light,.9)),br(t.Alert,"infoStandardBg",x(t.info.light,.9)),br(t.Alert,"successStandardBg",x(t.success.light,.9)),br(t.Alert,"warningStandardBg",x(t.warning.light,.9)),br(t.Alert,"errorIconColor",n("palette-error-main")),br(t.Alert,"infoIconColor",n("palette-info-main")),br(t.Alert,"successIconColor",n("palette-success-main")),br(t.Alert,"warningIconColor",n("palette-warning-main")),br(t.AppBar,"defaultBg",n("palette-grey-900")),br(t.AppBar,"darkBg",n("palette-background-paper")),br(t.AppBar,"darkColor",n("palette-text-primary")),br(t.Avatar,"defaultBg",n("palette-grey-600")),br(t.Button,"inheritContainedBg",n("palette-grey-800")),br(t.Button,"inheritContainedHoverBg",n("palette-grey-700")),br(t.Chip,"defaultBorder",n("palette-grey-700")),br(t.Chip,"defaultAvatarColor",n("palette-grey-300")),br(t.Chip,"defaultIconColor",n("palette-grey-300")),br(t.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),br(t.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),br(t.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),br(t.LinearProgress,"primaryBg",x(t.primary.main,.5)),br(t.LinearProgress,"secondaryBg",x(t.secondary.main,.5)),br(t.LinearProgress,"errorBg",x(t.error.main,.5)),br(t.LinearProgress,"infoBg",x(t.info.main,.5)),br(t.LinearProgress,"successBg",x(t.success.main,.5)),br(t.LinearProgress,"warningBg",x(t.warning.main,.5)),br(t.Skeleton,"bg",`rgba(${n("palette-text-primaryChannel")} / 0.13)`),br(t.Slider,"primaryTrack",x(t.primary.main,.5)),br(t.Slider,"secondaryTrack",x(t.secondary.main,.5)),br(t.Slider,"errorTrack",x(t.error.main,.5)),br(t.Slider,"infoTrack",x(t.info.main,.5)),br(t.Slider,"successTrack",x(t.success.main,.5)),br(t.Slider,"warningTrack",x(t.warning.main,.5));const e=S(t.background.default,.98);br(t.SnackbarContent,"bg",e),br(t.SnackbarContent,"color",wr((()=>t.getContrastText(e)))),br(t.SpeedDialAction,"fabHoverBg",S(t.background.paper,.15)),br(t.StepConnector,"border",n("palette-grey-600")),br(t.StepContent,"border",n("palette-grey-600")),br(t.Switch,"defaultColor",n("palette-grey-300")),br(t.Switch,"defaultDisabledColor",n("palette-grey-600")),br(t.Switch,"primaryDisabledColor",x(t.primary.main,.55)),br(t.Switch,"secondaryDisabledColor",x(t.secondary.main,.55)),br(t.Switch,"errorDisabledColor",x(t.error.main,.55)),br(t.Switch,"infoDisabledColor",x(t.info.main,.55)),br(t.Switch,"successDisabledColor",x(t.success.main,.55)),br(t.Switch,"warningDisabledColor",x(t.warning.main,.55)),br(t.TableCell,"border",x(y(t.divider,1),.68)),br(t.Tooltip,"bg",y(t.grey[700],.92))}vr(t.background,"default"),vr(t.background,"paper"),vr(t.common,"background"),vr(t.common,"onBackground"),vr(t,"divider"),Object.keys(t).forEach((e=>{const n=t[e];"tonalOffset"!==e&&n&&"object"===typeof n&&(n.main&&br(t[e],"mainChannel",p(xr(n.main))),n.light&&br(t[e],"lightChannel",p(xr(n.light))),n.dark&&br(t[e],"darkChannel",p(xr(n.dark))),n.contrastText&&br(t[e],"contrastTextChannel",p(xr(n.contrastText))),"text"===e&&(vr(t[e],"primary"),vr(t[e],"secondary")),"action"===e&&(n.active&&vr(t[e],"active"),n.selected&&vr(t[e],"selected")))}))}));for(var _=arguments.length,L=new Array(_>1?_-1:0),C=1;C<_;C++)L[C-1]=arguments[C];A=L.reduce(((e,t)=>ft(e,t)),A);const I={prefix:i,disableCssColorScheme:r,shouldSkipGeneratingVar:s,getSelector:yr(A)},{vars:$,generateThemeVars:O,generateStyleSheets:R}=Xn(A,I);return A.vars=$,Object.entries(A.colorSchemes[A.defaultColorScheme]).forEach((e=>{let[t,n]=e;A[t]=n})),A.generateThemeVars=O,A.generateStyleSheets=R,A.generateSpacing=function(){return jt(u.spacing,zt(this))},A.getColorSchemeSelector=function(e){return function(t){return"media"===e?`@media (prefers-color-scheme: ${t})`:e?e.startsWith("data-")&&!e.includes("%s")?`[${e}="${t}"] &`:"class"===e?`.${t} &`:"data"===e?`[data-${t}] &`:`${e.replace("%s",t)} &`:"&"}}(a),A.spacing=A.generateSpacing(),A.shouldSkipGeneratingVar=s,A.unstable_sxConfig={...yn,...u?.unstable_sxConfig},A.unstable_sx=function(e){return xn({sx:e,theme:this})},A.toRuntimeSource=lr,A}function Tr(e,t,n){e.colorSchemes&&n&&(e.colorSchemes[t]={...!0!==n&&n,palette:Bn({...!0===n?{}:n.palette,mode:t})})}function Ar(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{palette:t,cssVariables:n=!1,colorSchemes:r=(t?void 0:{light:!0}),defaultColorScheme:i=t?.mode,...s}=e,a=i||"light",o=r?.[a],l={...r,...t?{[a]:{..."boolean"!==typeof o&&o,palette:t}}:void 0};for(var u=arguments.length,c=new Array(u>1?u-1:0),h=1;h<u;h++)c[h-1]=arguments[h];if(!1===n){if(!("colorSchemes"in e))return cr(e,...c);let n=t;"palette"in e||l[a]&&(!0!==l[a]?n=l[a].palette:"dark"===a&&(n={mode:"dark"}));const r=cr({...e,palette:n},...c);return r.defaultColorScheme=a,r.colorSchemes=l,"light"===r.palette.mode&&(r.colorSchemes.light={...!0!==l.light&&l.light,palette:r.palette},Tr(r,"dark",l.dark)),"dark"===r.palette.mode&&(r.colorSchemes.dark={...!0!==l.dark&&l.dark,palette:r.palette},Tr(r,"light",l.light)),r}return t||"light"in l||"light"!==a||(l.light=!0),kr({...s,colorSchemes:l,defaultColorScheme:a,..."boolean"!==typeof n&&n},...c)}const Er=Ar(),_r="$$material",Lr=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:t,defaultTheme:n=kn,rootShouldForwardProp:r=Tn,slotShouldForwardProp:i=Tn}=e;function s(e){!function(e,t,n){e.theme=function(e){for(const t in e)return!1;return!0}(e.theme)?n:e.theme[t]||e.theme}(e,t,n)}return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}(e,(e=>e.filter((e=>e!==xn))));const{name:n,slot:a,skipVariantsResolver:o,skipSx:l,overridesResolver:u=An(Cn(a)),...c}=t,h=void 0!==o?o:a&&"Root"!==a&&"root"!==a||!1,p=l||!1;let d=Tn;"Root"===a||"root"===a?d=r:a?d=i:function(e){return"string"===typeof e&&e.charCodeAt(0)>96}(e)&&(d=void 0);const f=lt(e,{shouldForwardProp:d,label:Ln(n,a),...c}),m=e=>{if("function"===typeof e&&e.__emotion_real!==e)return function(t){return En(t,e)};if(pt(e)){const t=Sn(e);return t.variants?function(e){return En(e,t)}:t.style}return e},g=function(){const t=[];for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];const o=i.map(m),l=[];if(t.push(s),n&&u&&l.push((function(e){const t=e.theme,r=t.components?.[n]?.styleOverrides;if(!r)return null;const i={};for(const n in r)i[n]=En(e,r[n]);return u(e,i)})),n&&!h&&l.push((function(e){const t=e.theme,r=t?.components?.[n]?.variants;return r?_n(e,r):null})),p||l.push(xn),Array.isArray(o[0])){const e=o.shift(),n=new Array(t.length).fill(""),r=new Array(l.length).fill("");let i;i=[...n,...e,...r],i.raw=[...n,...e.raw,...r],t.unshift(i)}const c=[...t,...o,...l],d=f(...c);return e.muiName&&(d.muiName=e.muiName),d};return f.withConfig&&(g.withConfig=f.withConfig),g}}({themeId:_r,defaultTheme:Er,rootShouldForwardProp:E}),Cr=Lr;const Ir=function(t){let{controlled:n,default:r,name:i,state:s="value"}=t;const{current:a}=e.useRef(void 0!==n),[o,l]=e.useState(r);return[a?n:o,e.useCallback((e=>{a||l(e)}),[])]};const $r=e.createContext(void 0);function Or(){return e.useContext($r)}function Rr(e){try{return e.matches(":focus-visible")}catch(t){0}return!1}function Dr(e,t){const n={...t};for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){const i=r;if("components"===i||"slots"===i)n[i]={...e[i],...n[i]};else if("componentsProps"===i||"slotProps"===i){const r=e[i],s=t[i];if(s)if(r){n[i]={...s};for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e)){const t=e;n[i][t]=Dr(r[t],s[t])}}else n[i]=s;else n[i]=r||{}}else void 0===n[i]&&(n[i]=e[i])}return n}var zr=n(579);const Pr=e.createContext(void 0);function Mr(t){let{props:n,name:r}=t;return function(e){const{theme:t,name:n,props:r}=e;if(!t||!t.components||!t.components[n])return r;const i=t.components[n];return i.defaultProps?Dr(i.defaultProps,r):i.styleOverrides||i.variants?r:Dr(i,r)}({props:n,name:r,theme:{components:e.useContext(Pr)}})}function Nr(e){return Mr(e)}function Fr(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function Vr(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.useMemo((()=>n.every((e=>null==e))?null:e=>{n.forEach((t=>{Fr(t,e)}))}),n)}const Kr=Vr,jr="undefined"!==typeof window?e.useLayoutEffect:e.useEffect;const Br=function(t){const n=e.useRef(t);return jr((()=>{n.current=t})),e.useRef((function(){return(0,n.current)(...arguments)})).current},Ur=Br,Gr={};function Wr(t,n){const r=e.useRef(Gr);return r.current===Gr&&(r.current=t(n)),r}class Hr{static create(){return new Hr}static use(){const t=Wr(Hr.create).current,[n,r]=e.useState(!1);return t.shouldMount=n,t.setShouldMount=r,e.useEffect(t.mountEffect,[n]),t}constructor(){this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}mount(){return this.mounted||(this.mounted=function(){let e,t;const n=new Promise(((n,r)=>{e=n,t=r}));return n.resolve=e,n.reject=t,n}(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}mountEffect=()=>{this.shouldMount&&!this.didMount&&null!==this.ref.current&&(this.didMount=!0,this.mounted.resolve())};start(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.mount().then((()=>this.ref.current?.start(...t)))}stop(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.mount().then((()=>this.ref.current?.stop(...t)))}pulsate(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.mount().then((()=>this.ref.current?.pulsate(...t)))}}function Xr(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}function qr(e,t){return qr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},qr(e,t)}function Yr(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,qr(e,t)}const Jr=e.createContext(null);function Qr(t,n){var r=Object.create(null);return t&&e.Children.map(t,(function(e){return e})).forEach((function(t){r[t.key]=function(t){return n&&(0,e.isValidElement)(t)?n(t):t}(t)})),r}function Zr(e,t,n){return null!=n[t]?n[t]:e.props[t]}function ei(t,n,r){var i=Qr(t.children),s=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,i=Object.create(null),s=[];for(var a in e)a in t?s.length&&(i[a]=s,s=[]):s.push(a);var o={};for(var l in t){if(i[l])for(r=0;r<i[l].length;r++){var u=i[l][r];o[i[l][r]]=n(u)}o[l]=n(l)}for(r=0;r<s.length;r++)o[s[r]]=n(s[r]);return o}(n,i);return Object.keys(s).forEach((function(a){var o=s[a];if((0,e.isValidElement)(o)){var l=a in n,u=a in i,c=n[a],h=(0,e.isValidElement)(c)&&!c.props.in;!u||l&&!h?u||!l||h?u&&l&&(0,e.isValidElement)(c)&&(s[a]=(0,e.cloneElement)(o,{onExited:r.bind(null,o),in:c.props.in,exit:Zr(o,"exit",t),enter:Zr(o,"enter",t)})):s[a]=(0,e.cloneElement)(o,{in:!1}):s[a]=(0,e.cloneElement)(o,{onExited:r.bind(null,o),in:!0,exit:Zr(o,"exit",t),enter:Zr(o,"enter",t)})}})),s}var ti=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},ni=function(t){function n(e,n){var r,i=(r=t.call(this,e,n)||this).handleExited.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}Yr(n,t);var r=n.prototype;return r.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},r.componentWillUnmount=function(){this.mounted=!1},n.getDerivedStateFromProps=function(t,n){var r,i,s=n.children,a=n.handleExited;return{children:n.firstRender?(r=t,i=a,Qr(r.children,(function(t){return(0,e.cloneElement)(t,{onExited:i.bind(null,t),in:!0,appear:Zr(t,"appear",r),enter:Zr(t,"enter",r),exit:Zr(t,"exit",r)})}))):ei(t,s,a),firstRender:!1}},r.handleExited=function(e,t){var n=Qr(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=_({},t.children);return delete n[e.key],{children:n}})))},r.render=function(){var t=this.props,n=t.component,r=t.childFactory,i=Xr(t,["component","childFactory"]),s=this.state.contextValue,a=ti(this.state.children).map(r);return delete i.appear,delete i.enter,delete i.exit,null===n?e.createElement(Jr.Provider,{value:s},a):e.createElement(Jr.Provider,{value:s},e.createElement(n,i,a))},n}(e.Component);ni.propTypes={},ni.defaultProps={component:"div",childFactory:function(e){return e}};const ri=ni,ii=[];class si{static create(){return new si}currentId=null;start(e,t){this.clear(),this.currentId=setTimeout((()=>{this.currentId=null,t()}),e)}clear=()=>{null!==this.currentId&&(clearTimeout(this.currentId),this.currentId=null)};disposeEffect=()=>this.clear}function ai(){const t=Wr(si.create).current;var n;return n=t.disposeEffect,e.useEffect(n,ii),t}n(219);var oi=function(t,n){var r=arguments;if(null==n||!Je.call(n,"css"))return e.createElement.apply(void 0,r);var i=r.length,s=new Array(i);s[0]=et,s[1]=function(e,t){var n={};for(var r in t)Je.call(t,r)&&(n[r]=t[r]);return n[Qe]=e,n}(t,n);for(var a=2;a<i;a++)s[a]=r[a];return e.createElement.apply(null,s)};!function(e){var t;t||(t=e.JSX||(e.JSX={}))}(oi||(oi={}));var li=qe((function(t,n){var r=Ue([t.styles],void 0,e.useContext(Ye)),i=e.useRef();return He((function(){var e=n.key+"-global",t=new n.sheet.constructor({key:e,nonce:n.sheet.nonce,container:n.sheet.container,speedy:n.sheet.isSpeedy}),s=!1,a=document.querySelector('style[data-emotion="'+e+" "+r.name+'"]');return n.sheet.tags.length&&(t.before=n.sheet.tags[0]),null!==a&&(s=!0,a.setAttribute("data-emotion",e),t.hydrate([a])),i.current=[t,s],function(){t.flush()}}),[n]),He((function(){var e=i.current,t=e[0];if(e[1])e[1]=!1;else{if(void 0!==r.next&&Oe(n,r.next,!0),t.tags.length){var s=t.tags[t.tags.length-1].nextElementSibling;t.before=s,t.flush()}n.insert("",r,t,!1)}}),[n,r.name]),null}));function ui(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ue(t)}function ci(){var e=ui.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}const hi=function(t){const{className:n,classes:r,pulsate:i=!1,rippleX:s,rippleY:o,rippleSize:l,in:u,onExited:c,timeout:h}=t,[p,d]=e.useState(!1),f=a(n,r.ripple,r.rippleVisible,i&&r.ripplePulsate),m={width:l,height:l,top:-l/2+o,left:-l/2+s},g=a(r.child,p&&r.childLeaving,i&&r.childPulsate);return u||p||d(!0),e.useEffect((()=>{if(!u&&null!=c){const e=setTimeout(c,h);return()=>{clearTimeout(e)}}}),[c,u,h]),(0,zr.jsx)("span",{className:f,style:m,children:(0,zr.jsx)("span",{className:g})})},pi=e=>e,di=(()=>{let e=pi;return{configure(t){e=t},generate:t=>e(t),reset(){e=pi}}})(),fi={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function mi(e,t){const n=fi[t];return n?`${arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui"}-${n}`:`${di.generate(e)}-${t}`}function gi(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const r={};return t.forEach((t=>{r[t]=mi(e,t,n)})),r}const yi=gi("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),bi=ci`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,xi=ci`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,vi=ci`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,wi=Cr("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),Si=Cr(hi,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${yi.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${bi};
    animation-duration: ${550}ms;
    animation-timing-function: ${e=>{let{theme:t}=e;return t.transitions.easing.easeInOut}};
  }

  &.${yi.ripplePulsate} {
    animation-duration: ${e=>{let{theme:t}=e;return t.transitions.duration.shorter}}ms;
  }

  & .${yi.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${yi.childLeaving} {
    opacity: 0;
    animation-name: ${xi};
    animation-duration: ${550}ms;
    animation-timing-function: ${e=>{let{theme:t}=e;return t.transitions.easing.easeInOut}};
  }

  & .${yi.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${vi};
    animation-duration: 2500ms;
    animation-timing-function: ${e=>{let{theme:t}=e;return t.transitions.easing.easeInOut}};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,ki=e.forwardRef((function(t,n){const r=Nr({props:t,name:"MuiTouchRipple"}),{center:i=!1,classes:s={},className:o,...l}=r,[u,c]=e.useState([]),h=e.useRef(0),p=e.useRef(null);e.useEffect((()=>{p.current&&(p.current(),p.current=null)}),[u]);const d=e.useRef(!1),f=ai(),m=e.useRef(null),g=e.useRef(null),y=e.useCallback((e=>{const{pulsate:t,rippleX:n,rippleY:r,rippleSize:i,cb:o}=e;c((e=>[...e,(0,zr.jsx)(Si,{classes:{ripple:a(s.ripple,yi.ripple),rippleVisible:a(s.rippleVisible,yi.rippleVisible),ripplePulsate:a(s.ripplePulsate,yi.ripplePulsate),child:a(s.child,yi.child),childLeaving:a(s.childLeaving,yi.childLeaving),childPulsate:a(s.childPulsate,yi.childPulsate)},timeout:550,pulsate:t,rippleX:n,rippleY:r,rippleSize:i},h.current)])),h.current+=1,p.current=o}),[s]),b=e.useCallback((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};const{pulsate:r=!1,center:s=i||t.pulsate,fakeElement:a=!1}=t;if("mousedown"===e?.type&&d.current)return void(d.current=!1);"touchstart"===e?.type&&(d.current=!0);const o=a?null:g.current,l=o?o.getBoundingClientRect():{width:0,height:0,left:0,top:0};let u,c,h;if(s||void 0===e||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)u=Math.round(l.width/2),c=Math.round(l.height/2);else{const{clientX:t,clientY:n}=e.touches&&e.touches.length>0?e.touches[0]:e;u=Math.round(t-l.left),c=Math.round(n-l.top)}if(s)h=Math.sqrt((2*l.width**2+l.height**2)/3),h%2===0&&(h+=1);else{const e=2*Math.max(Math.abs((o?o.clientWidth:0)-u),u)+2,t=2*Math.max(Math.abs((o?o.clientHeight:0)-c),c)+2;h=Math.sqrt(e**2+t**2)}e?.touches?null===m.current&&(m.current=()=>{y({pulsate:r,rippleX:u,rippleY:c,rippleSize:h,cb:n})},f.start(80,(()=>{m.current&&(m.current(),m.current=null)}))):y({pulsate:r,rippleX:u,rippleY:c,rippleSize:h,cb:n})}),[i,y,f]),x=e.useCallback((()=>{b({},{pulsate:!0})}),[b]),v=e.useCallback(((e,t)=>{if(f.clear(),"touchend"===e?.type&&m.current)return m.current(),m.current=null,void f.start(0,(()=>{v(e,t)}));m.current=null,c((e=>e.length>0?e.slice(1):e)),p.current=t}),[f]);return e.useImperativeHandle(n,(()=>({pulsate:x,start:b,stop:v})),[x,b,v]),(0,zr.jsx)(wi,{className:a(yi.root,s.root,o),ref:g,...l,children:(0,zr.jsx)(ri,{component:null,exit:!0,children:u})})}));function Ti(e){return mi("MuiButtonBase",e)}const Ai=gi("MuiButtonBase",["root","disabled","focusVisible"]),Ei=Cr("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${Ai.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}});function _i(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Ur((i=>(n&&n(i),r||e[t](i),!0)))}const Li=e.forwardRef((function(t,n){const r=Nr({props:t,name:"MuiButtonBase"}),{action:i,centerRipple:s=!1,children:l,className:u,component:c="button",disabled:h=!1,disableRipple:p=!1,disableTouchRipple:d=!1,focusRipple:f=!1,focusVisibleClassName:m,LinkComponent:g="a",onBlur:y,onClick:b,onContextMenu:x,onDragLeave:v,onFocus:w,onFocusVisible:S,onKeyDown:k,onKeyUp:T,onMouseDown:A,onMouseLeave:E,onMouseUp:_,onTouchEnd:L,onTouchMove:C,onTouchStart:I,tabIndex:$=0,TouchRippleProps:O,touchRippleRef:R,type:D,...z}=r,P=e.useRef(null),M=Hr.use(),N=Kr(M.ref,R),[F,V]=e.useState(!1);h&&F&&V(!1),e.useImperativeHandle(i,(()=>({focusVisible:()=>{V(!0),P.current.focus()}})),[]);const K=M.shouldMount&&!p&&!h;e.useEffect((()=>{F&&f&&!p&&M.pulsate()}),[p,f,F,M]);const j=_i(M,"start",A,d),B=_i(M,"stop",x,d),U=_i(M,"stop",v,d),G=_i(M,"stop",_,d),W=_i(M,"stop",(e=>{F&&e.preventDefault(),E&&E(e)}),d),H=_i(M,"start",I,d),X=_i(M,"stop",L,d),q=_i(M,"stop",C,d),Y=_i(M,"stop",(e=>{Rr(e.target)||V(!1),y&&y(e)}),!1),J=Ur((e=>{P.current||(P.current=e.currentTarget),Rr(e.target)&&(V(!0),S&&S(e)),w&&w(e)})),Q=()=>{const e=P.current;return c&&"button"!==c&&!("A"===e.tagName&&e.href)},Z=Ur((e=>{f&&!e.repeat&&F&&" "===e.key&&M.stop(e,(()=>{M.start(e)})),e.target===e.currentTarget&&Q()&&" "===e.key&&e.preventDefault(),k&&k(e),e.target===e.currentTarget&&Q()&&"Enter"===e.key&&!h&&(e.preventDefault(),b&&b(e))})),ee=Ur((e=>{f&&" "===e.key&&F&&!e.defaultPrevented&&M.stop(e,(()=>{M.pulsate(e)})),T&&T(e),b&&e.target===e.currentTarget&&Q()&&" "===e.key&&!e.defaultPrevented&&b(e)}));let te=c;"button"===te&&(z.href||z.to)&&(te=g);const ne={};"button"===te?(ne.type=void 0===D?"button":D,ne.disabled=h):(z.href||z.to||(ne.role="button"),h&&(ne["aria-disabled"]=h));const re=Kr(n,P),ie={...r,centerRipple:s,component:c,disabled:h,disableRipple:p,disableTouchRipple:d,focusRipple:f,tabIndex:$,focusVisible:F},se=(e=>{const{disabled:t,focusVisible:n,focusVisibleClassName:r,classes:i}=e,s=o({root:["root",t&&"disabled",n&&"focusVisible"]},Ti,i);return n&&r&&(s.root+=` ${r}`),s})(ie);return(0,zr.jsxs)(Ei,{as:te,className:a(se.root,u),ownerState:ie,onBlur:Y,onClick:b,onContextMenu:B,onFocus:J,onKeyDown:Z,onKeyUp:ee,onMouseDown:j,onMouseLeave:W,onMouseUp:G,onDragLeave:U,onTouchEnd:X,onTouchMove:q,onTouchStart:H,ref:re,tabIndex:h?-1:$,type:D,...ne,...z,children:[l,K?(0,zr.jsx)(ki,{ref:N,center:s,...O}):null]})}));function Ci(e){return mi("PrivateSwitchBase",e)}gi("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const Ii=function(e){return"string"===typeof e};const $i=function(e,t,n){return void 0===e||Ii(e)?t:{...t,ownerState:{...t.ownerState,...n}}};const Oi=function(e,t,n){return"function"===typeof e?e(t,n):e};const Ri=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(void 0===e)return{};const n={};return Object.keys(e).filter((n=>n.match(/^on[A-Z]/)&&"function"===typeof e[n]&&!t.includes(n))).forEach((t=>{n[t]=e[t]})),n};const Di=function(e){if(void 0===e)return{};const t={};return Object.keys(e).filter((t=>!(t.match(/^on[A-Z]/)&&"function"===typeof e[t]))).forEach((n=>{t[n]=e[n]})),t};const zi=function(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:r,externalForwardedProps:i,className:s}=e;if(!t){const e=a(n?.className,s,i?.className,r?.className),t={...n?.style,...i?.style,...r?.style},o={...n,...i,...r};return e.length>0&&(o.className=e),Object.keys(t).length>0&&(o.style=t),{props:o,internalRef:void 0}}const o=Ri({...i,...r}),l=Di(r),u=Di(i),c=t(o),h=a(c?.className,n?.className,s,i?.className,r?.className),p={...c?.style,...n?.style,...i?.style,...r?.style},d={...c,...n,...u,...l};return h.length>0&&(d.className=h),Object.keys(p).length>0&&(d.style=p),{props:d,internalRef:c.ref}};function Pi(e,t){const{className:n,elementType:r,ownerState:i,externalForwardedProps:s,internalForwardedProps:a,shouldForwardComponentProp:o=!1,...l}=t,{component:u,slots:c={[e]:void 0},slotProps:h={[e]:void 0},...p}=s,d=c[e]||r,f=Oi(h[e],i),{props:{component:m,...g},internalRef:y}=zi({className:n,...l,externalForwardedProps:"root"===e?p:void 0,externalSlotProps:f}),b=Vr(y,f?.ref,t.ref),x="root"===e?m||u:m;return[d,$i(d,{..."root"===e&&!u&&!c[e]&&a,..."root"!==e&&!c[e]&&a,...g,...x&&!o&&{as:x},...x&&o&&{component:x},ref:b},i)]}const Mi=Cr(Li)({padding:9,borderRadius:"50%",variants:[{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:e=>{let{edge:t,ownerState:n}=e;return"start"===t&&"small"!==n.size},style:{marginLeft:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}},{props:e=>{let{edge:t,ownerState:n}=e;return"end"===t&&"small"!==n.size},style:{marginRight:-12}}]}),Ni=Cr("input",{shouldForwardProp:E})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),Fi=e.forwardRef((function(e,t){const{autoFocus:n,checked:r,checkedIcon:i,defaultChecked:s,disabled:a,disableFocusRipple:l=!1,edge:u=!1,icon:c,id:h,inputProps:p,inputRef:d,name:f,onBlur:m,onChange:g,onFocus:y,readOnly:b,required:x=!1,tabIndex:v,type:w,value:S,slots:k={},slotProps:A={},...E}=e,[_,L]=Ir({controlled:r,default:Boolean(s),name:"SwitchBase",state:"checked"}),C=Or();let I=a;C&&"undefined"===typeof I&&(I=C.disabled);const $="checkbox"===w||"radio"===w,O={...e,checked:_,disabled:I,disableFocusRipple:l,edge:u},R=(e=>{const{classes:t,checked:n,disabled:r,edge:i}=e;return o({root:["root",n&&"checked",r&&"disabled",i&&`edge${T(i)}`],input:["input"]},Ci,t)})(O),D={slots:k,slotProps:{input:p,...A}},[z,P]=Pi("root",{ref:t,elementType:Mi,className:R.root,shouldForwardComponentProp:!0,externalForwardedProps:{...D,component:"span",...E},getSlotProps:e=>({...e,onFocus:t=>{e.onFocus?.(t),(e=>{y&&y(e),C&&C.onFocus&&C.onFocus(e)})(t)},onBlur:t=>{e.onBlur?.(t),(e=>{m&&m(e),C&&C.onBlur&&C.onBlur(e)})(t)}}),ownerState:O,additionalProps:{centerRipple:!0,focusRipple:!l,disabled:I,role:void 0,tabIndex:null}}),[M,N]=Pi("input",{ref:d,elementType:Ni,className:R.input,externalForwardedProps:D,getSlotProps:e=>({onChange:t=>{e.onChange?.(t),(e=>{if(e.nativeEvent.defaultPrevented)return;const t=e.target.checked;L(t),g&&g(e,t)})(t)}}),ownerState:O,additionalProps:{autoFocus:n,checked:r,defaultChecked:s,disabled:I,id:$?h:void 0,name:f,readOnly:b,required:x,tabIndex:v,type:w,..."checkbox"===w&&void 0===S?{}:{value:S}}});return(0,zr.jsxs)(z,{...P,children:[(0,zr.jsx)(M,{...N}),_?i:c]})})),Vi={theme:void 0};const Ki=function(e){let t,n;return function(r){let i=t;return void 0!==i&&r.theme===n||(Vi.theme=r.theme,i=Sn(e(Vi)),t=i,n=r.theme),i}};function ji(e){return mi("MuiSvgIcon",e)}gi("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const Bi=Cr("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"inherit"!==n.color&&t[`color${T(n.color)}`],t[`fontSize${T(n.fontSize)}`]]}})(Ki((e=>{let{theme:t}=e;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:t.transitions?.create?.("fill",{duration:(t.vars??t).transitions?.duration?.shorter}),variants:[{props:e=>!e.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:t.typography?.pxToRem?.(20)||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:t.typography?.pxToRem?.(24)||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:t.typography?.pxToRem?.(35)||"2.1875rem"}},...Object.entries((t.vars??t).palette).filter((e=>{let[,t]=e;return t&&t.main})).map((e=>{let[n]=e;return{props:{color:n},style:{color:(t.vars??t).palette?.[n]?.main}}})),{props:{color:"action"},style:{color:(t.vars??t).palette?.action?.active}},{props:{color:"disabled"},style:{color:(t.vars??t).palette?.action?.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}}))),Ui=e.forwardRef((function(t,n){const r=Nr({props:t,name:"MuiSvgIcon"}),{children:i,className:s,color:l="inherit",component:u="svg",fontSize:c="medium",htmlColor:h,inheritViewBox:p=!1,titleAccess:d,viewBox:f="0 0 24 24",...m}=r,g=e.isValidElement(i)&&"svg"===i.type,y={...r,color:l,component:u,fontSize:c,instanceFontSize:t.fontSize,inheritViewBox:p,viewBox:f,hasSvgAsChild:g},b={};p||(b.viewBox=f);const x=(e=>{const{color:t,fontSize:n,classes:r}=e;return o({root:["root","inherit"!==t&&`color${T(t)}`,`fontSize${T(n)}`]},ji,r)})(y);return(0,zr.jsxs)(Bi,{as:u,className:a(x.root,s),focusable:"false",color:h,"aria-hidden":!d||void 0,role:d?"img":void 0,ref:n,...b,...m,...g&&i.props,ownerState:y,children:[g?i.props.children:i,d?(0,zr.jsx)("title",{children:d}):null]})}));Ui.muiName="SvgIcon";const Gi=Ui;function Wi(t,n){function r(e,r){return(0,zr.jsx)(Gi,{"data-testid":`${n}Icon`,ref:r,...e,children:t})}return r.muiName=Gi.muiName,e.memo(e.forwardRef(r))}const Hi=Wi((0,zr.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),Xi=Wi((0,zr.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),qi=Wi((0,zr.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function Yi(e){return mi("MuiCheckbox",e)}const Ji=gi("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]);function Qi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t=>{let[,n]=t;return n&&function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!function(e){return"string"===typeof e.main}(e))return!1;for(const n of t)if(!e.hasOwnProperty(n)||"string"!==typeof e[n])return!1;return!0}(n,e)}}function Zi(e,t){if(!e)return t;if("function"===typeof e||"function"===typeof t)return n=>{const r="function"===typeof t?t(n):t,i="function"===typeof e?e({...n,...r}):e,s=a(n?.className,r?.className,i?.className);return{...r,...i,...!!s&&{className:s},...r?.style&&i?.style&&{style:{...r.style,...i.style}},...r?.sx&&i?.sx&&{sx:[...Array.isArray(r.sx)?r.sx:[r.sx],...Array.isArray(i.sx)?i.sx:[i.sx]]}}};const n=t,r=a(n?.className,e?.className);return{...t,...e,...!!r&&{className:r},...n?.style&&e?.style&&{style:{...n.style,...e.style}},...n?.sx&&e?.sx&&{sx:[...Array.isArray(n.sx)?n.sx:[n.sx],...Array.isArray(e.sx)?e.sx:[e.sx]]}}}const es=Cr(Fi,{shouldForwardProp:e=>E(e)||"classes"===e,name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.indeterminate&&t.indeterminate,t[`size${T(n.size)}`],"default"!==n.color&&t[`color${T(n.color)}`]]}})(Ki((e=>{let{theme:t}=e;return{color:(t.vars||t).palette.text.secondary,variants:[{props:{color:"default",disableRipple:!1},style:{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:g(t.palette.action.active,t.palette.action.hoverOpacity)}}},...Object.entries(t.palette).filter(Qi()).map((e=>{let[n]=e;return{props:{color:n,disableRipple:!1},style:{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette[n].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:g(t.palette[n].main,t.palette.action.hoverOpacity)}}}})),...Object.entries(t.palette).filter(Qi()).map((e=>{let[n]=e;return{props:{color:n},style:{[`&.${Ji.checked}, &.${Ji.indeterminate}`]:{color:(t.vars||t).palette[n].main},[`&.${Ji.disabled}`]:{color:(t.vars||t).palette.action.disabled}}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]}}))),ts=(0,zr.jsx)(Xi,{}),ns=(0,zr.jsx)(Hi,{}),rs=(0,zr.jsx)(qi,{}),is=e.forwardRef((function(t,n){const r=Nr({props:t,name:"MuiCheckbox"}),{checkedIcon:i=ts,color:s="primary",icon:l=ns,indeterminate:u=!1,indeterminateIcon:c=rs,inputProps:h,size:p="medium",disableRipple:d=!1,className:f,slots:m={},slotProps:g={},...y}=r,b=u?c:l,x=u?c:i,v={...r,disableRipple:d,color:s,indeterminate:u,size:p},w=(e=>{const{classes:t,indeterminate:n,color:r,size:i}=e,s=o({root:["root",n&&"indeterminate",`color${T(r)}`,`size${T(i)}`]},Yi,t);return{...t,...s}})(v),S=g.input??h,[k,A]=Pi("root",{ref:n,elementType:es,className:a(w.root,f),shouldForwardComponentProp:!0,externalForwardedProps:{slots:m,slotProps:g,...y},ownerState:v,additionalProps:{type:"checkbox",icon:e.cloneElement(b,{fontSize:b.props.fontSize??p}),checkedIcon:e.cloneElement(x,{fontSize:x.props.fontSize??p}),disableRipple:d,slots:m,slotProps:{input:Zi("function"===typeof S?S(v):S,{"data-indeterminate":u})}}});return(0,zr.jsx)(k,{...A,classes:w})})),ss=is;function as(t){return parseInt(e.version,10)>=19?t?.props?.ref||null:t?.ref||null}let os=0;const ls={...t}.useId;function us(t){if(void 0!==ls){const e=ls();return t??e}return function(t){const[n,r]=e.useState(t),i=t||n;return e.useEffect((()=>{null==n&&(os+=1,r(`mui-${os}`))}),[n]),i}(t)}function cs(e){return e&&e.ownerDocument||document}const hs=cs,ps=e.createContext();const ds=function(e){const{elementType:t,externalSlotProps:n,ownerState:r,skipResolvingSlotProps:i=!1,...s}=e,a=i?{}:Oi(n,r),{props:o,internalRef:l}=zi({...s,externalSlotProps:a}),u=Vr(l,a?.ref,e.additionalProps?.ref);return $i(t,{...o,ref:u},r)};const fs=e.createContext({});function ms(e){return mi("MuiList",e)}gi("MuiList",["root","padding","dense","subheader"]);const gs=Cr("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disablePadding&&t.padding,n.dense&&t.dense,n.subheader&&t.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:e=>{let{ownerState:t}=e;return!t.disablePadding},style:{paddingTop:8,paddingBottom:8}},{props:e=>{let{ownerState:t}=e;return t.subheader},style:{paddingTop:0}}]}),ys=e.forwardRef((function(t,n){const r=Nr({props:t,name:"MuiList"}),{children:i,className:s,component:l="ul",dense:u=!1,disablePadding:c=!1,subheader:h,...p}=r,d=e.useMemo((()=>({dense:u})),[u]),f={...r,component:l,dense:u,disablePadding:c},m=(e=>{const{classes:t,disablePadding:n,dense:r,subheader:i}=e;return o({root:["root",!n&&"padding",r&&"dense",i&&"subheader"]},ms,t)})(f);return(0,zr.jsx)(fs.Provider,{value:d,children:(0,zr.jsxs)(gs,{as:l,className:a(m.root,s),ref:n,ownerState:f,...p,children:[h,i]})})}));function bs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;const t=e.document.documentElement.clientWidth;return e.innerWidth-t}const xs=bs,vs=jr;function ws(e){return cs(e).defaultView||window}const Ss=ws;function ks(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function Ts(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function As(e,t){if(void 0===t)return!0;let n=e.innerText;return void 0===n&&(n=e.textContent),n=n.trim().toLowerCase(),0!==n.length&&(t.repeating?n[0]===t.keys[0]:n.startsWith(t.keys.join("")))}function Es(e,t,n,r,i,s){let a=!1,o=i(e,t,!!t&&n);for(;o;){if(o===e.firstChild){if(a)return!1;a=!0}const t=!r&&(o.disabled||"true"===o.getAttribute("aria-disabled"));if(o.hasAttribute("tabindex")&&As(o,s)&&!t)return o.focus(),!0;o=i(e,o,n)}return!1}const _s=e.forwardRef((function(t,n){const{actions:r,autoFocus:i=!1,autoFocusItem:s=!1,children:a,className:o,disabledItemsFocusable:l=!1,disableListWrap:u=!1,onKeyDown:c,variant:h="selectedMenu",...p}=t,d=e.useRef(null),f=e.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});vs((()=>{i&&d.current.focus()}),[i]),e.useImperativeHandle(r,(()=>({adjustStyleForScrollbar:(e,t)=>{let{direction:n}=t;const r=!d.current.style.width;if(e.clientHeight<d.current.clientHeight&&r){const t=`${xs(Ss(e))}px`;d.current.style["rtl"===n?"paddingLeft":"paddingRight"]=t,d.current.style.width=`calc(100% + ${t})`}return d.current}})),[]);const m=Kr(d,n);let g=-1;e.Children.forEach(a,((t,n)=>{e.isValidElement(t)?(t.props.disabled||("selectedMenu"===h&&t.props.selected||-1===g)&&(g=n),g===n&&(t.props.disabled||t.props.muiSkipListHighlight||t.type.muiSkipListHighlight)&&(g+=1,g>=a.length&&(g=-1))):g===n&&(g+=1,g>=a.length&&(g=-1))}));const y=e.Children.map(a,((t,n)=>{if(n===g){const n={};return s&&(n.autoFocus=!0),void 0===t.props.tabIndex&&"selectedMenu"===h&&(n.tabIndex=0),e.cloneElement(t,n)}return t}));return(0,zr.jsx)(ys,{role:"menu",ref:m,className:o,onKeyDown:e=>{const t=d.current,n=e.key;if(e.ctrlKey||e.metaKey||e.altKey)return void(c&&c(e));const r=hs(t).activeElement;if("ArrowDown"===n)e.preventDefault(),Es(t,r,u,l,ks);else if("ArrowUp"===n)e.preventDefault(),Es(t,r,u,l,Ts);else if("Home"===n)e.preventDefault(),Es(t,null,u,l,ks);else if("End"===n)e.preventDefault(),Es(t,null,u,l,Ts);else if(1===n.length){const i=f.current,s=n.toLowerCase(),a=performance.now();i.keys.length>0&&(a-i.lastTime>500?(i.keys=[],i.repeating=!0,i.previousKeyMatched=!0):i.repeating&&s!==i.keys[0]&&(i.repeating=!1)),i.lastTime=a,i.keys.push(s);const o=r&&!i.repeating&&As(r,i);i.previousKeyMatched&&(o||Es(t,r,!1,l,ks,i))?e.preventDefault():i.previousKeyMatched=!1}c&&c(e)},tabIndex:i?0:-1,...p,children:y})}));const Ls=function(e){return"string"===typeof e};function Cs(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];clearTimeout(t),t=setTimeout((()=>{e.apply(this,i)}),n)}return r.clear=()=>{clearTimeout(t)},r}const Is=Cs;var $s=n(950);const Os=!1;var Rs="unmounted",Ds="exited",zs="entering",Ps="entered",Ms="exiting",Ns=function(t){function n(e,n){var r;r=t.call(this,e,n)||this;var i,s=n&&!n.isMounting?e.enter:e.appear;return r.appearStatus=null,e.in?s?(i=Ds,r.appearStatus=zs):i=Ps:i=e.unmountOnExit||e.mountOnEnter?Rs:Ds,r.state={status:i},r.nextCallback=null,r}Yr(n,t),n.getDerivedStateFromProps=function(e,t){return e.in&&t.status===Rs?{status:Ds}:null};var r=n.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==zs&&n!==Ps&&(t=zs):n!==zs&&n!==Ps||(t=Ms)}this.updateStatus(!1,t)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},r.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===zs){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:$s.findDOMNode(this);n&&function(e){e.scrollTop}(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Ds&&this.setState({status:Rs})},r.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[$s.findDOMNode(this),r],s=i[0],a=i[1],o=this.getTimeouts(),l=r?o.appear:o.enter;!e&&!n||Os?this.safeSetState({status:Ps},(function(){t.props.onEntered(s)})):(this.props.onEnter(s,a),this.safeSetState({status:zs},(function(){t.props.onEntering(s,a),t.onTransitionEnd(l,(function(){t.safeSetState({status:Ps},(function(){t.props.onEntered(s,a)}))}))})))},r.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:$s.findDOMNode(this);t&&!Os?(this.props.onExit(r),this.safeSetState({status:Ms},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:Ds},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:Ds},(function(){e.props.onExited(r)}))},r.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},r.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},r.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:$s.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],s=i[0],a=i[1];this.props.addEndListener(s,a)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},r.render=function(){var t=this.state.status;if(t===Rs)return null;var n=this.props,r=n.children,i=(n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef,Xr(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return e.createElement(Jr.Provider,{value:null},"function"===typeof r?r(t,i):e.cloneElement(e.Children.only(r),i))},n}(e.Component);function Fs(){}Ns.contextType=Jr,Ns.propTypes={},Ns.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Fs,onEntering:Fs,onEntered:Fs,onExit:Fs,onExiting:Fs,onExited:Fs},Ns.UNMOUNTED=Rs,Ns.EXITED=Ds,Ns.ENTERING=zs,Ns.ENTERED=Ps,Ns.EXITING=Ms;const Vs=Ns;const Ks=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const n=e.useContext(Ye);return n&&(r=n,0!==Object.keys(r).length)?n:t;var r},js=wn();const Bs=function(){return Ks(arguments.length>0&&void 0!==arguments[0]?arguments[0]:js)};function Us(){const e=Bs(Er);return e[_r]||e}const Gs=e=>e.scrollTop;function Ws(e,t){const{timeout:n,easing:r,style:i={}}=e;return{duration:i.transitionDuration??("number"===typeof n?n:n[t.mode]||0),easing:i.transitionTimingFunction??("object"===typeof r?r[t.mode]:r),delay:i.transitionDelay}}function Hs(e){return`scale(${e}, ${e**2})`}const Xs={entering:{opacity:1,transform:Hs(1)},entered:{opacity:1,transform:"none"}},qs="undefined"!==typeof navigator&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),Ys=e.forwardRef((function(t,n){const{addEndListener:r,appear:i=!0,children:s,easing:a,in:o,onEnter:l,onEntered:u,onEntering:c,onExit:h,onExited:p,onExiting:d,style:f,timeout:m="auto",TransitionComponent:g=Vs,...y}=t,b=ai(),x=e.useRef(),v=Us(),w=e.useRef(null),S=Kr(w,as(s),n),k=e=>t=>{if(e){const n=w.current;void 0===t?e(n):e(n,t)}},T=k(c),A=k(((e,t)=>{Gs(e);const{duration:n,delay:r,easing:i}=Ws({style:f,timeout:m,easing:a},{mode:"enter"});let s;"auto"===m?(s=v.transitions.getAutoHeightDuration(e.clientHeight),x.current=s):s=n,e.style.transition=[v.transitions.create("opacity",{duration:s,delay:r}),v.transitions.create("transform",{duration:qs?s:.666*s,delay:r,easing:i})].join(","),l&&l(e,t)})),E=k(u),_=k(d),L=k((e=>{const{duration:t,delay:n,easing:r}=Ws({style:f,timeout:m,easing:a},{mode:"exit"});let i;"auto"===m?(i=v.transitions.getAutoHeightDuration(e.clientHeight),x.current=i):i=t,e.style.transition=[v.transitions.create("opacity",{duration:i,delay:n}),v.transitions.create("transform",{duration:qs?i:.666*i,delay:qs?n:n||.333*i,easing:r})].join(","),e.style.opacity=0,e.style.transform=Hs(.75),h&&h(e)})),C=k(p);return(0,zr.jsx)(g,{appear:i,in:o,nodeRef:w,onEnter:A,onEntered:E,onEntering:T,onExit:L,onExited:C,onExiting:_,addEndListener:e=>{"auto"===m&&b.start(x.current||0,e),r&&r(w.current,e)},timeout:"auto"===m?null:m,...y,children:(t,n)=>{let{ownerState:r,...i}=n;return e.cloneElement(s,{style:{opacity:0,transform:Hs(.75),visibility:"exited"!==t||o?void 0:"hidden",...Xs[t],...f,...s.props.style},ref:S,...i})}})}));Ys&&(Ys.muiSupportAuto=!0);const Js=Ys,Qs=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function Zs(e){const t=[],n=[];return Array.from(e.querySelectorAll(Qs)).forEach(((e,r)=>{const i=function(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?"true"===e.contentEditable||("AUDIO"===e.nodeName||"VIDEO"===e.nodeName||"DETAILS"===e.nodeName)&&null===e.getAttribute("tabindex")?0:e.tabIndex:t}(e);-1!==i&&function(e){return!(e.disabled||"INPUT"===e.tagName&&"hidden"===e.type||function(e){if("INPUT"!==e.tagName||"radio"!==e.type)return!1;if(!e.name)return!1;const t=t=>e.ownerDocument.querySelector(`input[type="radio"]${t}`);let n=t(`[name="${e.name}"]:checked`);return n||(n=t(`[name="${e.name}"]`)),n!==e}(e))}(e)&&(0===i?t.push(e):n.push({documentOrder:r,tabIndex:i,node:e}))})),n.sort(((e,t)=>e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex)).map((e=>e.node)).concat(t)}function ea(){return!0}const ta=function(t){const{children:n,disableAutoFocus:r=!1,disableEnforceFocus:i=!1,disableRestoreFocus:s=!1,getTabbable:a=Zs,isEnabled:o=ea,open:l}=t,u=e.useRef(!1),c=e.useRef(null),h=e.useRef(null),p=e.useRef(null),d=e.useRef(null),f=e.useRef(!1),m=e.useRef(null),g=Vr(as(n),m),y=e.useRef(null);e.useEffect((()=>{l&&m.current&&(f.current=!r)}),[r,l]),e.useEffect((()=>{if(!l||!m.current)return;const e=cs(m.current);return m.current.contains(e.activeElement)||(m.current.hasAttribute("tabIndex")||m.current.setAttribute("tabIndex","-1"),f.current&&m.current.focus()),()=>{s||(p.current&&p.current.focus&&(u.current=!0,p.current.focus()),p.current=null)}}),[l]),e.useEffect((()=>{if(!l||!m.current)return;const e=cs(m.current),t=t=>{y.current=t,!i&&o()&&"Tab"===t.key&&e.activeElement===m.current&&t.shiftKey&&(u.current=!0,h.current&&h.current.focus())},n=()=>{const t=m.current;if(null===t)return;if(!e.hasFocus()||!o()||u.current)return void(u.current=!1);if(t.contains(e.activeElement))return;if(i&&e.activeElement!==c.current&&e.activeElement!==h.current)return;if(e.activeElement!==d.current)d.current=null;else if(null!==d.current)return;if(!f.current)return;let n=[];if(e.activeElement!==c.current&&e.activeElement!==h.current||(n=a(m.current)),n.length>0){const e=Boolean(y.current?.shiftKey&&"Tab"===y.current?.key),t=n[0],r=n[n.length-1];"string"!==typeof t&&"string"!==typeof r&&(e?r.focus():t.focus())}else t.focus()};e.addEventListener("focusin",n),e.addEventListener("keydown",t,!0);const r=setInterval((()=>{e.activeElement&&"BODY"===e.activeElement.tagName&&n()}),50);return()=>{clearInterval(r),e.removeEventListener("focusin",n),e.removeEventListener("keydown",t,!0)}}),[r,i,s,o,l,a]);const b=e=>{null===p.current&&(p.current=e.relatedTarget),f.current=!0};return(0,zr.jsxs)(e.Fragment,{children:[(0,zr.jsx)("div",{tabIndex:l?0:-1,onFocus:b,ref:c,"data-testid":"sentinelStart"}),e.cloneElement(n,{ref:g,onFocus:e=>{null===p.current&&(p.current=e.relatedTarget),f.current=!0,d.current=e.target;const t=n.props.onFocus;t&&t(e)}}),(0,zr.jsx)("div",{tabIndex:l?0:-1,onFocus:b,ref:h,"data-testid":"sentinelEnd"})]})};const na=e.forwardRef((function(t,n){const{children:r,container:i,disablePortal:s=!1}=t,[a,o]=e.useState(null),l=Vr(e.isValidElement(r)?as(r):null,n);if(jr((()=>{s||o(function(e){return"function"===typeof e?e():e}(i)||document.body)}),[i,s]),jr((()=>{if(a&&!s)return Fr(n,a),()=>{Fr(n,null)}}),[n,a,s]),s){if(e.isValidElement(r)){const t={ref:l};return e.cloneElement(r,t)}return r}return a?$s.createPortal(r,a):a})),ra={entering:{opacity:1},entered:{opacity:1}},ia=e.forwardRef((function(t,n){const r=Us(),i={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:s,appear:a=!0,children:o,easing:l,in:u,onEnter:c,onEntered:h,onEntering:p,onExit:d,onExited:f,onExiting:m,style:g,timeout:y=i,TransitionComponent:b=Vs,...x}=t,v=e.useRef(null),w=Kr(v,as(o),n),S=e=>t=>{if(e){const n=v.current;void 0===t?e(n):e(n,t)}},k=S(p),T=S(((e,t)=>{Gs(e);const n=Ws({style:g,timeout:y,easing:l},{mode:"enter"});e.style.webkitTransition=r.transitions.create("opacity",n),e.style.transition=r.transitions.create("opacity",n),c&&c(e,t)})),A=S(h),E=S(m),_=S((e=>{const t=Ws({style:g,timeout:y,easing:l},{mode:"exit"});e.style.webkitTransition=r.transitions.create("opacity",t),e.style.transition=r.transitions.create("opacity",t),d&&d(e)})),L=S(f);return(0,zr.jsx)(b,{appear:a,in:u,nodeRef:v,onEnter:T,onEntered:A,onEntering:k,onExit:_,onExited:L,onExiting:E,addEndListener:e=>{s&&s(v.current,e)},timeout:y,...x,children:(t,n)=>{let{ownerState:r,...i}=n;return e.cloneElement(o,{style:{opacity:0,visibility:"exited"!==t||u?void 0:"hidden",...ra[t],...g,...o.props.style},ref:w,...i})}})})),sa=ia;function aa(e){return mi("MuiBackdrop",e)}gi("MuiBackdrop",["root","invisible"]);const oa=Cr("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.invisible&&t.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),la=e.forwardRef((function(e,t){const n=Nr({props:e,name:"MuiBackdrop"}),{children:r,className:i,component:s="div",invisible:l=!1,open:u,components:c={},componentsProps:h={},slotProps:p={},slots:d={},TransitionComponent:f,transitionDuration:m,...g}=n,y={...n,component:s,invisible:l},b=(e=>{const{classes:t,invisible:n}=e;return o({root:["root",n&&"invisible"]},aa,t)})(y),x={slots:{transition:f,root:c.Root,...d},slotProps:{...h,...p}},[v,w]=Pi("root",{elementType:oa,externalForwardedProps:x,className:a(b.root,i),ownerState:y}),[S,k]=Pi("transition",{elementType:sa,externalForwardedProps:x,ownerState:y});return(0,zr.jsx)(S,{in:u,timeout:m,...g,...k,children:(0,zr.jsx)(v,{"aria-hidden":!0,...w,classes:b,ref:t,children:r})})}));function ua(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(((e,t)=>null==t?e:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}),(()=>{}))}function ca(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function ha(e){return parseInt(ws(e).getComputedStyle(e).paddingRight,10)||0}function pa(e,t,n,r,i){const s=[t,n,...r];[].forEach.call(e.children,(e=>{const t=!s.includes(e),n=!function(e){const t=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(e.tagName),n="INPUT"===e.tagName&&"hidden"===e.getAttribute("type");return t||n}(e);t&&n&&ca(e,i)}))}function da(e,t){let n=-1;return e.some(((e,r)=>!!t(e)&&(n=r,!0))),n}function fa(e,t){const n=[],r=e.container;if(!t.disableScrollLock){if(function(e){const t=cs(e);return t.body===e?ws(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}(r)){const e=bs(ws(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${ha(r)+e}px`;const t=cs(r).querySelectorAll(".mui-fixed");[].forEach.call(t,(t=>{n.push({value:t.style.paddingRight,property:"padding-right",el:t}),t.style.paddingRight=`${ha(t)+e}px`}))}let e;if(r.parentNode instanceof DocumentFragment)e=cs(r).body;else{const t=r.parentElement,n=ws(r);e="HTML"===t?.nodeName&&"scroll"===n.getComputedStyle(t).overflowY?t:r}n.push({value:e.style.overflow,property:"overflow",el:e},{value:e.style.overflowX,property:"overflow-x",el:e},{value:e.style.overflowY,property:"overflow-y",el:e}),e.style.overflow="hidden"}return()=>{n.forEach((e=>{let{value:t,el:n,property:r}=e;t?n.style.setProperty(r,t):n.style.removeProperty(r)}))}}const ma=()=>{},ga=new class{constructor(){this.modals=[],this.containers=[]}add(e,t){let n=this.modals.indexOf(e);if(-1!==n)return n;n=this.modals.length,this.modals.push(e),e.modalRef&&ca(e.modalRef,!1);const r=function(e){const t=[];return[].forEach.call(e.children,(e=>{"true"===e.getAttribute("aria-hidden")&&t.push(e)})),t}(t);pa(t,e.mount,e.modalRef,r,!0);const i=da(this.containers,(e=>e.container===t));return-1!==i?(this.containers[i].modals.push(e),n):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblings:r}),n)}mount(e,t){const n=da(this.containers,(t=>t.modals.includes(e))),r=this.containers[n];r.restore||(r.restore=fa(r,t))}remove(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.modals.indexOf(e);if(-1===n)return n;const r=da(this.containers,(t=>t.modals.includes(e))),i=this.containers[r];if(i.modals.splice(i.modals.indexOf(e),1),this.modals.splice(n,1),0===i.modals.length)i.restore&&i.restore(),e.modalRef&&ca(e.modalRef,t),pa(i.container,e.mount,e.modalRef,i.hiddenSiblings,!1),this.containers.splice(r,1);else{const e=i.modals[i.modals.length-1];e.modalRef&&ca(e.modalRef,!1)}return n}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}};const ya=function(t){const{container:n,disableEscapeKeyDown:r=!1,disableScrollLock:i=!1,closeAfterTransition:s=!1,onTransitionEnter:a,onTransitionExited:o,children:l,onClose:u,open:c,rootRef:h}=t,p=e.useRef({}),d=e.useRef(null),f=e.useRef(null),m=Vr(f,h),[g,y]=e.useState(!c),b=function(e){return!!e&&e.props.hasOwnProperty("in")}(l);let x=!0;"false"!==t["aria-hidden"]&&!1!==t["aria-hidden"]||(x=!1);const v=()=>(p.current.modalRef=f.current,p.current.mount=d.current,p.current),w=()=>{ga.mount(v(),{disableScrollLock:i}),f.current&&(f.current.scrollTop=0)},S=Br((()=>{const e=function(e){return"function"===typeof e?e():e}(n)||cs(d.current).body;ga.add(v(),e),f.current&&w()})),k=()=>ga.isTopModal(v()),T=Br((e=>{d.current=e,e&&(c&&k()?w():f.current&&ca(f.current,x))})),A=e.useCallback((()=>{ga.remove(v(),x)}),[x]);e.useEffect((()=>()=>{A()}),[A]),e.useEffect((()=>{c?S():b&&s||A()}),[c,A,b,s,S]);const E=e=>t=>{e.onKeyDown?.(t),"Escape"===t.key&&229!==t.which&&k()&&(r||(t.stopPropagation(),u&&u(t,"escapeKeyDown")))},_=e=>t=>{e.onClick?.(t),t.target===t.currentTarget&&u&&u(t,"backdropClick")};return{getRootProps:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=Ri(t);delete n.onTransitionEnter,delete n.onTransitionExited;const r={...n,...e};return{role:"presentation",...r,onKeyDown:E(r),ref:m}},getBackdropProps:function(){const e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{"aria-hidden":!0,...e,onClick:_(e),open:c}},getTransitionProps:()=>({onEnter:ua((()=>{y(!1),a&&a()}),l?.props.onEnter??ma),onExited:ua((()=>{y(!0),o&&o(),s&&A()}),l?.props.onExited??ma)}),rootRef:m,portalRef:T,isTopModal:k,exited:g,hasTransition:b}};function ba(e){return mi("MuiModal",e)}gi("MuiModal",["root","hidden","backdrop"]);const xa=Cr("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.open&&n.exited&&t.hidden]}})(Ki((e=>{let{theme:t}=e;return{position:"fixed",zIndex:(t.vars||t).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:e=>{let{ownerState:t}=e;return!t.open&&t.exited},style:{visibility:"hidden"}}]}}))),va=Cr(la,{name:"MuiModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({zIndex:-1}),wa=e.forwardRef((function(t,n){const r=Nr({name:"MuiModal",props:t}),{BackdropComponent:i=va,BackdropProps:s,classes:l,className:u,closeAfterTransition:c=!1,children:h,container:p,component:d,components:f={},componentsProps:m={},disableAutoFocus:g=!1,disableEnforceFocus:y=!1,disableEscapeKeyDown:b=!1,disablePortal:x=!1,disableRestoreFocus:v=!1,disableScrollLock:w=!1,hideBackdrop:S=!1,keepMounted:k=!1,onBackdropClick:T,onClose:A,onTransitionEnter:E,onTransitionExited:_,open:L,slotProps:C={},slots:I={},theme:$,...O}=r,R={...r,closeAfterTransition:c,disableAutoFocus:g,disableEnforceFocus:y,disableEscapeKeyDown:b,disablePortal:x,disableRestoreFocus:v,disableScrollLock:w,hideBackdrop:S,keepMounted:k},{getRootProps:D,getBackdropProps:z,getTransitionProps:P,portalRef:M,isTopModal:N,exited:F,hasTransition:V}=ya({...R,rootRef:n}),K={...R,exited:F},j=(e=>{const{open:t,exited:n,classes:r}=e;return o({root:["root",!t&&n&&"hidden"],backdrop:["backdrop"]},ba,r)})(K),B={};if(void 0===h.props.tabIndex&&(B.tabIndex="-1"),V){const{onEnter:e,onExited:t}=P();B.onEnter=e,B.onExited=t}const U={slots:{root:f.Root,backdrop:f.Backdrop,...I},slotProps:{...m,...C}},[G,W]=Pi("root",{ref:n,elementType:xa,externalForwardedProps:{...U,...O,component:d},getSlotProps:D,ownerState:K,className:a(u,j?.root,!K.open&&K.exited&&j?.hidden)}),[H,X]=Pi("backdrop",{ref:s?.ref,elementType:i,externalForwardedProps:U,shouldForwardComponentProp:!0,additionalProps:s,getSlotProps:e=>z({...e,onClick:t=>{T&&T(t),e?.onClick&&e.onClick(t)}}),className:a(s?.className,j?.backdrop),ownerState:K});return k||L||V&&!F?(0,zr.jsx)(na,{ref:M,container:p,disablePortal:x,children:(0,zr.jsxs)(G,{...W,children:[!S&&i?(0,zr.jsx)(H,{...X}):null,(0,zr.jsx)(ta,{disableEnforceFocus:y,disableAutoFocus:g,disableRestoreFocus:v,isEnabled:N,open:L,children:e.cloneElement(h,B)})]})}):null})),Sa=wa;function ka(e){return mi("MuiPaper",e)}gi("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const Ta=Cr("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!n.square&&t.rounded,"elevation"===n.variant&&t[`elevation${n.elevation}`]]}})(Ki((e=>{let{theme:t}=e;return{backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow"),variants:[{props:e=>{let{ownerState:t}=e;return!t.square},style:{borderRadius:t.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(t.vars||t).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}}))),Aa=e.forwardRef((function(e,t){const n=Nr({props:e,name:"MuiPaper"}),r=Us(),{className:i,component:s="div",elevation:l=1,square:u=!1,variant:c="elevation",...h}=n,p={...n,component:s,elevation:l,square:u,variant:c},d=(e=>{const{square:t,elevation:n,variant:r,classes:i}=e;return o({root:["root",r,!t&&"rounded","elevation"===r&&`elevation${n}`]},ka,i)})(p);return(0,zr.jsx)(Ta,{as:s,ownerState:p,className:a(d.root,i),ref:t,...h,style:{..."elevation"===c&&{"--Paper-shadow":(r.vars||r).shadows[l],...r.vars&&{"--Paper-overlay":r.vars.overlays?.[l]},...!r.vars&&"dark"===r.palette.mode&&{"--Paper-overlay":`linear-gradient(${g("#fff",hr(l))}, ${g("#fff",hr(l))})`}},...h.style}})}));function Ea(e){return mi("MuiPopover",e)}gi("MuiPopover",["root","paper"]);function _a(e,t){let n=0;return"number"===typeof t?n=t:"center"===t?n=e.height/2:"bottom"===t&&(n=e.height),n}function La(e,t){let n=0;return"number"===typeof t?n=t:"center"===t?n=e.width/2:"right"===t&&(n=e.width),n}function Ca(e){return[e.horizontal,e.vertical].map((e=>"number"===typeof e?`${e}px`:e)).join(" ")}function Ia(e){return"function"===typeof e?e():e}const $a=Cr(Sa,{name:"MuiPopover",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Oa=Cr(Aa,{name:"MuiPopover",slot:"Paper",overridesResolver:(e,t)=>t.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Ra=e.forwardRef((function(t,n){const r=Nr({props:t,name:"MuiPopover"}),{action:i,anchorEl:s,anchorOrigin:l={vertical:"top",horizontal:"left"},anchorPosition:u,anchorReference:c="anchorEl",children:h,className:p,container:d,elevation:f=8,marginThreshold:m=16,open:g,PaperProps:y={},slots:b={},slotProps:x={},transformOrigin:v={vertical:"top",horizontal:"left"},TransitionComponent:w,transitionDuration:S="auto",TransitionProps:k={},disableScrollLock:T=!1,...A}=r,E=e.useRef(),_={...r,anchorOrigin:l,anchorReference:c,elevation:f,marginThreshold:m,transformOrigin:v,TransitionComponent:w,transitionDuration:S,TransitionProps:k},L=(e=>{const{classes:t}=e;return o({root:["root"],paper:["paper"]},Ea,t)})(_),C=e.useCallback((()=>{if("anchorPosition"===c)return u;const e=Ia(s),t=(e&&1===e.nodeType?e:hs(E.current).body).getBoundingClientRect();return{top:t.top+_a(t,l.vertical),left:t.left+La(t,l.horizontal)}}),[s,l.horizontal,l.vertical,u,c]),I=e.useCallback((e=>({vertical:_a(e,v.vertical),horizontal:La(e,v.horizontal)})),[v.horizontal,v.vertical]),$=e.useCallback((e=>{const t={width:e.offsetWidth,height:e.offsetHeight},n=I(t);if("none"===c)return{top:null,left:null,transformOrigin:Ca(n)};const r=C();let i=r.top-n.vertical,a=r.left-n.horizontal;const o=i+t.height,l=a+t.width,u=Ss(Ia(s)),h=u.innerHeight-m,p=u.innerWidth-m;if(null!==m&&i<m){const e=i-m;i-=e,n.vertical+=e}else if(null!==m&&o>h){const e=o-h;i-=e,n.vertical+=e}if(null!==m&&a<m){const e=a-m;a-=e,n.horizontal+=e}else if(l>p){const e=l-p;a-=e,n.horizontal+=e}return{top:`${Math.round(i)}px`,left:`${Math.round(a)}px`,transformOrigin:Ca(n)}}),[s,c,C,I,m]),[O,R]=e.useState(g),D=e.useCallback((()=>{const e=E.current;if(!e)return;const t=$(e);null!==t.top&&e.style.setProperty("top",t.top),null!==t.left&&(e.style.left=t.left),e.style.transformOrigin=t.transformOrigin,R(!0)}),[$]);e.useEffect((()=>(T&&window.addEventListener("scroll",D),()=>window.removeEventListener("scroll",D))),[s,T,D]);e.useEffect((()=>{g&&D()})),e.useImperativeHandle(i,(()=>g?{updatePosition:()=>{D()}}:null),[g,D]),e.useEffect((()=>{if(!g)return;const e=Is((()=>{D()})),t=Ss(s);return t.addEventListener("resize",e),()=>{e.clear(),t.removeEventListener("resize",e)}}),[s,g,D]);let z=S;const P={slots:{transition:w,...b},slotProps:{transition:k,paper:y,...x}},[M,N]=Pi("transition",{elementType:Js,externalForwardedProps:P,ownerState:_,getSlotProps:e=>({...e,onEntering:(t,n)=>{e.onEntering?.(t,n),D()},onExited:t=>{e.onExited?.(t),R(!1)}}),additionalProps:{appear:!0,in:g}});"auto"!==S||M.muiSupportAuto||(z=void 0);const F=d||(s?hs(Ia(s)).body:void 0),[V,{slots:K,slotProps:j,...B}]=Pi("root",{ref:n,elementType:$a,externalForwardedProps:{...P,...A},shouldForwardComponentProp:!0,additionalProps:{slots:{backdrop:b.backdrop},slotProps:{backdrop:Zi("function"===typeof x.backdrop?x.backdrop(_):x.backdrop,{invisible:!0})},container:F,open:g},ownerState:_,className:a(L.root,p)}),[U,G]=Pi("paper",{ref:E,className:L.paper,elementType:Oa,externalForwardedProps:P,shouldForwardComponentProp:!0,additionalProps:{elevation:f,style:O?void 0:{opacity:0}},ownerState:_});return(0,zr.jsx)(V,{...B,...!Ls(V)&&{slots:K,slotProps:j,disableScrollLock:T},children:(0,zr.jsx)(M,{...N,timeout:z,children:(0,zr.jsx)(U,{...G,children:h})})})}));function Da(e){return mi("MuiMenu",e)}gi("MuiMenu",["root","paper","list"]);const za={vertical:"top",horizontal:"right"},Pa={vertical:"top",horizontal:"left"},Ma=Cr(Ra,{shouldForwardProp:e=>E(e)||"classes"===e,name:"MuiMenu",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Na=Cr(Oa,{name:"MuiMenu",slot:"Paper",overridesResolver:(e,t)=>t.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),Fa=Cr(_s,{name:"MuiMenu",slot:"List",overridesResolver:(e,t)=>t.list})({outline:0}),Va=e.forwardRef((function(t,n){const r=Nr({props:t,name:"MuiMenu"}),{autoFocus:i=!0,children:s,className:l,disableAutoFocusItem:u=!1,MenuListProps:c={},onClose:h,open:p,PaperProps:d={},PopoverClasses:f,transitionDuration:m="auto",TransitionProps:{onEntering:g,...y}={},variant:b="selectedMenu",slots:x={},slotProps:v={},...w}=r,S=e.useContext(ps)??!1,k={...r,autoFocus:i,disableAutoFocusItem:u,MenuListProps:c,onEntering:g,PaperProps:d,transitionDuration:m,TransitionProps:y,variant:b},T=(e=>{const{classes:t}=e;return o({root:["root"],paper:["paper"],list:["list"]},Da,t)})(k),A=i&&!u&&p,E=e.useRef(null);let _=-1;e.Children.map(s,((t,n)=>{e.isValidElement(t)&&(t.props.disabled||("selectedMenu"===b&&t.props.selected||-1===_)&&(_=n))}));const L={slots:x,slotProps:{list:c,transition:y,paper:d,...v}},C=ds({elementType:x.root,externalSlotProps:v.root,ownerState:k,className:[T.root,l]}),[I,$]=Pi("paper",{className:T.paper,elementType:Na,externalForwardedProps:L,shouldForwardComponentProp:!0,ownerState:k}),[O,R]=Pi("list",{className:a(T.list,c.className),elementType:Fa,shouldForwardComponentProp:!0,externalForwardedProps:L,getSlotProps:e=>({...e,onKeyDown:t=>{(e=>{"Tab"===e.key&&(e.preventDefault(),h&&h(e,"tabKeyDown"))})(t),e.onKeyDown?.(t)}}),ownerState:k}),D="function"===typeof L.slotProps.transition?L.slotProps.transition(k):L.slotProps.transition;return(0,zr.jsx)(Ma,{onClose:h,anchorOrigin:{vertical:"bottom",horizontal:S?"right":"left"},transformOrigin:S?za:Pa,slots:{root:x.root,paper:I,backdrop:x.backdrop,...x.transition&&{transition:x.transition}},slotProps:{root:C,paper:$,backdrop:"function"===typeof v.backdrop?v.backdrop(k):v.backdrop,transition:{...D,onEntering:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];((e,t)=>{E.current&&E.current.adjustStyleForScrollbar(e,{direction:S?"rtl":"ltr"}),g&&g(e,t)})(...t),D?.onEntering?.(...t)}}},open:p,ref:n,transitionDuration:m,ownerState:k,...w,classes:f,children:(0,zr.jsx)(O,{actions:E,autoFocus:i&&(-1===_||u),autoFocusItem:A,variant:b,...R,children:s})})}));function Ka(e){return mi("MuiNativeSelect",e)}const ja=gi("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),Ba=Cr("select")((e=>{let{theme:t}=e;return{MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${ja.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(t.vars||t).palette.background.paper},variants:[{props:e=>{let{ownerState:t}=e;return"filled"!==t.variant&&"outlined"!==t.variant},style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(t.vars||t).shape.borderRadius,"&:focus":{borderRadius:(t.vars||t).shape.borderRadius},"&&&":{paddingRight:32}}}]}})),Ua=Cr(Ba,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:E,overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.select,t[n.variant],n.error&&t.error,{[`&.${ja.multiple}`]:t.multiple}]}})({}),Ga=Cr("svg")((e=>{let{theme:t}=e;return{position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(t.vars||t).palette.action.active,[`&.${ja.disabled}`]:{color:(t.vars||t).palette.action.disabled},variants:[{props:e=>{let{ownerState:t}=e;return t.open},style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]}})),Wa=Cr(Ga,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${T(n.variant)}`],n.open&&t.iconOpen]}})({}),Ha=e.forwardRef((function(t,n){const{className:r,disabled:i,error:s,IconComponent:l,inputRef:u,variant:c="standard",...h}=t,p={...t,disabled:i,variant:c,error:s},d=(e=>{const{classes:t,variant:n,disabled:r,multiple:i,open:s,error:a}=e;return o({select:["select",n,r&&"disabled",i&&"multiple",a&&"error"],icon:["icon",`icon${T(n)}`,s&&"iconOpen",r&&"disabled"]},Ka,t)})(p);return(0,zr.jsxs)(e.Fragment,{children:[(0,zr.jsx)(Ua,{ownerState:p,className:a(d.select,r),disabled:i,ref:u||n,...h}),t.multiple?null:(0,zr.jsx)(Wa,{as:l,ownerState:p,className:d.icon})]})}));function Xa(e){return null!=e&&!(Array.isArray(e)&&0===e.length)}function qa(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e&&(Xa(e.value)&&""!==e.value||t&&Xa(e.defaultValue)&&""!==e.defaultValue)}function Ya(e){return mi("MuiSelect",e)}const Ja=gi("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var Qa;const Za=Cr(Ba,{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`&.${Ja.select}`]:t.select},{[`&.${Ja.select}`]:t[n.variant]},{[`&.${Ja.error}`]:t.error},{[`&.${Ja.multiple}`]:t.multiple}]}})({[`&.${Ja.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),eo=Cr(Ga,{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${T(n.variant)}`],n.open&&t.iconOpen]}})({}),to=Cr("input",{shouldForwardProp:e=>A(e)&&"classes"!==e,name:"MuiSelect",slot:"NativeInput",overridesResolver:(e,t)=>t.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function no(e,t){return"object"===typeof t&&null!==t?e===t:String(e)===String(t)}function ro(e){return null==e||"string"===typeof e&&!e.trim()}const io=e.forwardRef((function(t,n){const{"aria-describedby":r,"aria-label":i,autoFocus:s,autoWidth:u,children:c,className:h,defaultOpen:p,defaultValue:d,disabled:f,displayEmpty:m,error:g=!1,IconComponent:y,inputRef:b,labelId:x,MenuProps:v={},multiple:w,name:S,onBlur:k,onChange:A,onClose:E,onFocus:_,onOpen:L,open:C,readOnly:I,renderValue:$,required:O,SelectDisplayProps:R={},tabIndex:D,type:z,value:P,variant:M="standard",...N}=t,[F,V]=Ir({controlled:P,default:d,name:"Select"}),[K,j]=Ir({controlled:C,default:p,name:"Select"}),B=e.useRef(null),U=e.useRef(null),[G,W]=e.useState(null),{current:H}=e.useRef(null!=C),[X,q]=e.useState(),Y=Kr(n,b),J=e.useCallback((e=>{U.current=e,e&&W(e)}),[]),Q=G?.parentNode;e.useImperativeHandle(Y,(()=>({focus:()=>{U.current.focus()},node:B.current,value:F})),[F]),e.useEffect((()=>{p&&K&&G&&!H&&(q(u?null:Q.clientWidth),U.current.focus())}),[G,u]),e.useEffect((()=>{s&&U.current.focus()}),[s]),e.useEffect((()=>{if(!x)return;const e=hs(U.current).getElementById(x);if(e){const t=()=>{getSelection().isCollapsed&&U.current.focus()};return e.addEventListener("click",t),()=>{e.removeEventListener("click",t)}}}),[x]);const Z=(e,t)=>{e?L&&L(t):E&&E(t),H||(q(u?null:Q.clientWidth),j(e))},ee=e.Children.toArray(c),te=e=>t=>{let n;if(t.currentTarget.hasAttribute("tabindex")){if(w){n=Array.isArray(F)?F.slice():[];const t=F.indexOf(e.props.value);-1===t?n.push(e.props.value):n.splice(t,1)}else n=e.props.value;if(e.props.onClick&&e.props.onClick(t),F!==n&&(V(n),A)){const r=t.nativeEvent||t,i=new r.constructor(r.type,r);Object.defineProperty(i,"target",{writable:!0,value:{value:n,name:S}}),A(i,e)}w||Z(!1,t)}},ne=null!==G&&K;let re,ie;delete N["aria-invalid"];const se=[];let ae=!1,oe=!1;(qa({value:F})||m)&&($?re=$(F):ae=!0);const le=ee.map((t=>{if(!e.isValidElement(t))return null;let n;if(w){if(!Array.isArray(F))throw new Error(l(2));n=F.some((e=>no(e,t.props.value))),n&&ae&&se.push(t.props.children)}else n=no(F,t.props.value),n&&ae&&(ie=t.props.children);return n&&(oe=!0),e.cloneElement(t,{"aria-selected":n?"true":"false",onClick:te(t),onKeyUp:e=>{" "===e.key&&e.preventDefault(),t.props.onKeyUp&&t.props.onKeyUp(e)},role:"option",selected:n,value:void 0,"data-value":t.props.value})}));ae&&(re=w?0===se.length?null:se.reduce(((e,t,n)=>(e.push(t),n<se.length-1&&e.push(", "),e)),[]):ie);let ue,ce=X;!u&&H&&G&&(ce=Q.clientWidth),ue="undefined"!==typeof D?D:f?null:0;const he=R.id||(S?`mui-component-select-${S}`:void 0),pe={...t,variant:M,value:F,open:ne,error:g},de=(e=>{const{classes:t,variant:n,disabled:r,multiple:i,open:s,error:a}=e;return o({select:["select",n,r&&"disabled",i&&"multiple",a&&"error"],icon:["icon",`icon${T(n)}`,s&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]},Ya,t)})(pe),fe={...v.PaperProps,...v.slotProps?.paper},me=us();return(0,zr.jsxs)(e.Fragment,{children:[(0,zr.jsx)(Za,{as:"div",ref:J,tabIndex:ue,role:"combobox","aria-controls":ne?me:void 0,"aria-disabled":f?"true":void 0,"aria-expanded":ne?"true":"false","aria-haspopup":"listbox","aria-label":i,"aria-labelledby":[x,he].filter(Boolean).join(" ")||void 0,"aria-describedby":r,"aria-required":O?"true":void 0,"aria-invalid":g?"true":void 0,onKeyDown:e=>{if(!I){[" ","ArrowUp","ArrowDown","Enter"].includes(e.key)&&(e.preventDefault(),Z(!0,e))}},onMouseDown:f||I?null:e=>{0===e.button&&(e.preventDefault(),U.current.focus(),Z(!0,e))},onBlur:e=>{!ne&&k&&(Object.defineProperty(e,"target",{writable:!0,value:{value:F,name:S}}),k(e))},onFocus:_,...R,ownerState:pe,className:a(R.className,de.select,h),id:he,children:ro(re)?Qa||(Qa=(0,zr.jsx)("span",{className:"notranslate","aria-hidden":!0,children:"\u200b"})):re}),(0,zr.jsx)(to,{"aria-invalid":g,value:Array.isArray(F)?F.join(","):F,name:S,ref:B,"aria-hidden":!0,onChange:e=>{const t=ee.find((t=>t.props.value===e.target.value));void 0!==t&&(V(t.props.value),A&&A(e,t))},tabIndex:-1,disabled:f,className:de.nativeInput,autoFocus:s,required:O,...N,ownerState:pe}),(0,zr.jsx)(eo,{as:y,className:de.icon,ownerState:pe}),(0,zr.jsx)(Va,{id:`menu-${S||""}`,anchorEl:Q,open:ne,onClose:e=>{Z(!1,e)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...v,slotProps:{...v.slotProps,list:{"aria-labelledby":x,role:"listbox","aria-multiselectable":w?"true":void 0,disableListWrap:!0,id:me,...v.MenuListProps},paper:{...fe,style:{minWidth:ce,...null!=fe?fe.style:null}}},children:le})]})})),so=io;function ao(e){let{props:t,states:n,muiFormControl:r}=e;return n.reduce(((e,n)=>(e[n]=t[n],r&&"undefined"===typeof t[n]&&(e[n]=r[n]),e)),{})}const oo=Wi((0,zr.jsx)("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown");function lo(e){return parseInt(e,10)||0}const uo={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"};function co(e){return function(e){for(const t in e)return!1;return!0}(e)||0===e.outerHeightStyle&&!e.overflowing}const ho=e.forwardRef((function(t,n){const{onChange:r,maxRows:i,minRows:s=1,style:a,value:o,...l}=t,{current:u}=e.useRef(null!=o),c=e.useRef(null),h=Vr(n,c),p=e.useRef(null),d=e.useRef(null),f=e.useCallback((()=>{const e=c.current,n=d.current;if(!e||!n)return;const r=ws(e).getComputedStyle(e);if("0px"===r.width)return{outerHeightStyle:0,overflowing:!1};n.style.width=r.width,n.value=e.value||t.placeholder||"x","\n"===n.value.slice(-1)&&(n.value+=" ");const a=r.boxSizing,o=lo(r.paddingBottom)+lo(r.paddingTop),l=lo(r.borderBottomWidth)+lo(r.borderTopWidth),u=n.scrollHeight;n.value="x";const h=n.scrollHeight;let p=u;s&&(p=Math.max(Number(s)*h,p)),i&&(p=Math.min(Number(i)*h,p)),p=Math.max(p,h);return{outerHeightStyle:p+("border-box"===a?o+l:0),overflowing:Math.abs(p-u)<=1}}),[i,s,t.placeholder]),m=Br((()=>{const e=c.current,t=f();if(!e||!t||co(t))return!1;const n=t.outerHeightStyle;return null!=p.current&&p.current!==n})),g=e.useCallback((()=>{const e=c.current,t=f();if(!e||!t||co(t))return;const n=t.outerHeightStyle;p.current!==n&&(p.current=n,e.style.height=`${n}px`),e.style.overflow=t.overflowing?"hidden":""}),[f]),y=e.useRef(-1);jr((()=>{const e=Cs(g),t=c?.current;if(!t)return;const n=ws(t);let r;return n.addEventListener("resize",e),"undefined"!==typeof ResizeObserver&&(r=new ResizeObserver((()=>{m()&&(r.unobserve(t),cancelAnimationFrame(y.current),g(),y.current=requestAnimationFrame((()=>{r.observe(t)})))})),r.observe(t)),()=>{e.clear(),cancelAnimationFrame(y.current),n.removeEventListener("resize",e),r&&r.disconnect()}}),[f,g,m]),jr((()=>{g()}));return(0,zr.jsxs)(e.Fragment,{children:[(0,zr.jsx)("textarea",{value:o,onChange:e=>{u||g(),r&&r(e)},ref:h,rows:s,style:a,...l}),(0,zr.jsx)("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:d,tabIndex:-1,style:{...uo,...a,paddingTop:0,paddingBottom:0}})]})})),po=ho;function fo(e){const{sx:t,...n}=e,{systemProps:r,otherProps:i}=(e=>{const t={systemProps:{},otherProps:{}},n=e?.theme?.unstable_sxConfig??yn;return Object.keys(e).forEach((r=>{n[r]?t.systemProps[r]=e[r]:t.otherProps[r]=e[r]})),t})(n);let s;return s=Array.isArray(t)?[r,...t]:"function"===typeof t?function(){const e=t(...arguments);return pt(e)?{...r,...e}:r}:{...r,...t},{...i,sx:s}}function mo(e){const{styles:t,defaultTheme:n={}}=e,r="function"===typeof t?e=>{return t(void 0===(r=e)||null===r||0===Object.keys(r).length?n:e);var r}:t;return(0,zr.jsx)(li,{styles:r})}const go=function(e){let{styles:t,themeId:n,defaultTheme:r={}}=e;const i=Bs(r),s="function"===typeof t?t(n&&i[n]||i):t;return(0,zr.jsx)(mo,{styles:s})};const yo=function(e){return(0,zr.jsx)(go,{...e,defaultTheme:Er,themeId:_r})};function bo(e){return mi("MuiInputBase",e)}const xo=gi("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var vo;const wo=(e,t)=>{const{ownerState:n}=e;return[t.root,n.formControl&&t.formControl,n.startAdornment&&t.adornedStart,n.endAdornment&&t.adornedEnd,n.error&&t.error,"small"===n.size&&t.sizeSmall,n.multiline&&t.multiline,n.color&&t[`color${T(n.color)}`],n.fullWidth&&t.fullWidth,n.hiddenLabel&&t.hiddenLabel]},So=(e,t)=>{const{ownerState:n}=e;return[t.input,"small"===n.size&&t.inputSizeSmall,n.multiline&&t.inputMultiline,"search"===n.type&&t.inputTypeSearch,n.startAdornment&&t.inputAdornedStart,n.endAdornment&&t.inputAdornedEnd,n.hiddenLabel&&t.inputHiddenLabel]},ko=Cr("div",{name:"MuiInputBase",slot:"Root",overridesResolver:wo})(Ki((e=>{let{theme:t}=e;return{...t.typography.body1,color:(t.vars||t).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${xo.disabled}`]:{color:(t.vars||t).palette.text.disabled,cursor:"default"},variants:[{props:e=>{let{ownerState:t}=e;return t.multiline},style:{padding:"4px 0 5px"}},{props:e=>{let{ownerState:t,size:n}=e;return t.multiline&&"small"===n},style:{paddingTop:1}},{props:e=>{let{ownerState:t}=e;return t.fullWidth},style:{width:"100%"}}]}}))),To=Cr("input",{name:"MuiInputBase",slot:"Input",overridesResolver:So})(Ki((e=>{let{theme:t}=e;const n="light"===t.palette.mode,r={color:"currentColor",...t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5},transition:t.transitions.create("opacity",{duration:t.transitions.duration.shorter})},i={opacity:"0 !important"},s=t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&::-ms-input-placeholder":r,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${xo.formControl} &`]:{"&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&::-ms-input-placeholder":i,"&:focus::-webkit-input-placeholder":s,"&:focus::-moz-placeholder":s,"&:focus::-ms-input-placeholder":s},[`&.${xo.disabled}`]:{opacity:1,WebkitTextFillColor:(t.vars||t).palette.text.disabled},variants:[{props:e=>{let{ownerState:t}=e;return!t.disableInjectingGlobalStyles},style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:e=>{let{ownerState:t}=e;return t.multiline},style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}}))),Ao=function(e){return function(t){return(0,zr.jsx)(yo,{styles:"function"===typeof e?n=>e({theme:n,...t}):e})}}({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),Eo=e.forwardRef((function(t,n){const r=Nr({props:t,name:"MuiInputBase"}),{"aria-describedby":i,autoComplete:s,autoFocus:u,className:c,color:h,components:p={},componentsProps:d={},defaultValue:f,disabled:m,disableInjectingGlobalStyles:g,endAdornment:y,error:b,fullWidth:x=!1,id:v,inputComponent:w="input",inputProps:S={},inputRef:k,margin:A,maxRows:E,minRows:_,multiline:L=!1,name:C,onBlur:I,onChange:$,onClick:O,onFocus:R,onKeyDown:D,onKeyUp:z,placeholder:P,readOnly:M,renderSuffix:N,rows:F,size:V,slotProps:K={},slots:j={},startAdornment:B,type:U="text",value:G,...W}=r,H=null!=S.value?S.value:G,{current:X}=e.useRef(null!=H),q=e.useRef(),Y=e.useCallback((e=>{0}),[]),J=Kr(q,k,S.ref,Y),[Q,Z]=e.useState(!1),ee=Or();const te=ao({props:r,muiFormControl:ee,states:["color","disabled","error","hiddenLabel","size","required","filled"]});te.focused=ee?ee.focused:Q,e.useEffect((()=>{!ee&&m&&Q&&(Z(!1),I&&I())}),[ee,m,Q,I]);const ne=ee&&ee.onFilled,re=ee&&ee.onEmpty,ie=e.useCallback((e=>{qa(e)?ne&&ne():re&&re()}),[ne,re]);vs((()=>{X&&ie({value:H})}),[H,ie,X]);e.useEffect((()=>{ie(q.current)}),[]);let se=w,ae=S;L&&"input"===se&&(ae=F?{type:void 0,minRows:F,maxRows:F,...ae}:{type:void 0,maxRows:E,minRows:_,...ae},se=po);e.useEffect((()=>{ee&&ee.setAdornedStart(Boolean(B))}),[ee,B]);const oe={...r,color:te.color||"primary",disabled:te.disabled,endAdornment:y,error:te.error,focused:te.focused,formControl:ee,fullWidth:x,hiddenLabel:te.hiddenLabel,multiline:L,size:te.size,startAdornment:B,type:U},le=(e=>{const{classes:t,color:n,disabled:r,error:i,endAdornment:s,focused:a,formControl:l,fullWidth:u,hiddenLabel:c,multiline:h,readOnly:p,size:d,startAdornment:f,type:m}=e;return o({root:["root",`color${T(n)}`,r&&"disabled",i&&"error",u&&"fullWidth",a&&"focused",l&&"formControl",d&&"medium"!==d&&`size${T(d)}`,h&&"multiline",f&&"adornedStart",s&&"adornedEnd",c&&"hiddenLabel",p&&"readOnly"],input:["input",r&&"disabled","search"===m&&"inputTypeSearch",h&&"inputMultiline","small"===d&&"inputSizeSmall",c&&"inputHiddenLabel",f&&"inputAdornedStart",s&&"inputAdornedEnd",p&&"readOnly"]},bo,t)})(oe),ue=j.root||p.Root||ko,ce=K.root||d.root||{},he=j.input||p.Input||To;return ae={...ae,...K.input??d.input},(0,zr.jsxs)(e.Fragment,{children:[!g&&"function"===typeof Ao&&(vo||(vo=(0,zr.jsx)(Ao,{}))),(0,zr.jsxs)(ue,{...ce,ref:n,onClick:e=>{q.current&&e.currentTarget===e.target&&q.current.focus(),O&&O(e)},...W,...!Ls(ue)&&{ownerState:{...oe,...ce.ownerState}},className:a(le.root,ce.className,c,M&&"MuiInputBase-readOnly"),children:[B,(0,zr.jsx)($r.Provider,{value:null,children:(0,zr.jsx)(he,{"aria-invalid":te.error,"aria-describedby":i,autoComplete:s,autoFocus:u,defaultValue:f,disabled:te.disabled,id:v,onAnimationStart:e=>{ie("mui-auto-fill-cancel"===e.animationName?q.current:{value:"x"})},name:C,placeholder:P,readOnly:M,required:te.required,rows:F,value:H,onKeyDown:D,onKeyUp:z,type:U,...ae,...!Ls(he)&&{as:se,ownerState:{...oe,...ae.ownerState}},ref:J,className:a(le.input,ae.className,M&&"MuiInputBase-readOnly"),onBlur:e=>{I&&I(e),S.onBlur&&S.onBlur(e),ee&&ee.onBlur?ee.onBlur(e):Z(!1)},onChange:function(e){if(!X){const t=e.target||q.current;if(null==t)throw new Error(l(1));ie({value:t.value})}for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];S.onChange&&S.onChange(e,...n),$&&$(e,...n)},onFocus:e=>{R&&R(e),S.onFocus&&S.onFocus(e),ee&&ee.onFocus?ee.onFocus(e):Z(!0)}})}),y,N?N({...te,startAdornment:B}):null]})]})})),_o=Eo;function Lo(e){return mi("MuiInput",e)}const Co={...xo,...gi("MuiInput",["root","underline","input"])},Io=Cr(ko,{shouldForwardProp:e=>E(e)||"classes"===e,name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...wo(e,t),!n.disableUnderline&&t.underline]}})(Ki((e=>{let{theme:t}=e;let n="light"===t.palette.mode?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return t.vars&&(n=`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`),{position:"relative",variants:[{props:e=>{let{ownerState:t}=e;return t.formControl},style:{"label + &":{marginTop:16}}},{props:e=>{let{ownerState:t}=e;return!t.disableUnderline},style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Co.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Co.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Co.disabled}, .${Co.error}):before`]:{borderBottom:`2px solid ${(t.vars||t).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${n}`}},[`&.${Co.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(t.palette).filter(Qi()).map((e=>{let[n]=e;return{props:{color:n,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(t.vars||t).palette[n].main}`}}}}))]}}))),$o=Cr(To,{name:"MuiInput",slot:"Input",overridesResolver:So})({}),Oo=e.forwardRef((function(e,t){const n=Nr({props:e,name:"MuiInput"}),{disableUnderline:r=!1,components:i={},componentsProps:s,fullWidth:a=!1,inputComponent:l="input",multiline:u=!1,slotProps:c,slots:h={},type:p="text",...d}=n,f=(e=>{const{classes:t,disableUnderline:n}=e,r=o({root:["root",!n&&"underline"],input:["input"]},Lo,t);return{...t,...r}})(n),m={root:{ownerState:{disableUnderline:r}}},g=c??s?ft(c??s,m):m,y=h.root??i.Root??Io,b=h.input??i.Input??$o;return(0,zr.jsx)(_o,{slots:{root:y,input:b},slotProps:g,fullWidth:a,inputComponent:l,multiline:u,ref:t,type:p,...d,classes:f})}));Oo.muiName="Input";const Ro=Oo;function Do(e){return mi("MuiFilledInput",e)}const zo={...xo,...gi("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])},Po=Cr(ko,{shouldForwardProp:e=>E(e)||"classes"===e,name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...wo(e,t),!n.disableUnderline&&t.underline]}})(Ki((e=>{let{theme:t}=e;const n="light"===t.palette.mode,r=n?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",i=n?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",s=n?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",a=n?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:t.vars?t.vars.palette.FilledInput.bg:i,borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),"&:hover":{backgroundColor:t.vars?t.vars.palette.FilledInput.hoverBg:s,"@media (hover: none)":{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:i}},[`&.${zo.focused}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:i},[`&.${zo.disabled}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.disabledBg:a},variants:[{props:e=>{let{ownerState:t}=e;return!t.disableUnderline},style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${zo.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${zo.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`:r}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${zo.disabled}, .${zo.error}):before`]:{borderBottom:`1px solid ${(t.vars||t).palette.text.primary}`},[`&.${zo.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(t.palette).filter(Qi()).map((e=>{let[n]=e;return{props:{disableUnderline:!1,color:n},style:{"&::after":{borderBottom:`2px solid ${(t.vars||t).palette[n]?.main}`}}}})),{props:e=>{let{ownerState:t}=e;return t.startAdornment},style:{paddingLeft:12}},{props:e=>{let{ownerState:t}=e;return t.endAdornment},style:{paddingRight:12}},{props:e=>{let{ownerState:t}=e;return t.multiline},style:{padding:"25px 12px 8px"}},{props:e=>{let{ownerState:t,size:n}=e;return t.multiline&&"small"===n},style:{paddingTop:21,paddingBottom:4}},{props:e=>{let{ownerState:t}=e;return t.multiline&&t.hiddenLabel},style:{paddingTop:16,paddingBottom:17}},{props:e=>{let{ownerState:t}=e;return t.multiline&&t.hiddenLabel&&"small"===t.size},style:{paddingTop:8,paddingBottom:9}}]}}))),Mo=Cr(To,{name:"MuiFilledInput",slot:"Input",overridesResolver:So})(Ki((e=>{let{theme:t}=e;return{paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...t.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:e=>{let{ownerState:t}=e;return t.hiddenLabel},style:{paddingTop:16,paddingBottom:17}},{props:e=>{let{ownerState:t}=e;return t.startAdornment},style:{paddingLeft:0}},{props:e=>{let{ownerState:t}=e;return t.endAdornment},style:{paddingRight:0}},{props:e=>{let{ownerState:t}=e;return t.hiddenLabel&&"small"===t.size},style:{paddingTop:8,paddingBottom:9}},{props:e=>{let{ownerState:t}=e;return t.multiline},style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}}))),No=e.forwardRef((function(e,t){const n=Nr({props:e,name:"MuiFilledInput"}),{disableUnderline:r=!1,components:i={},componentsProps:s,fullWidth:a=!1,hiddenLabel:l,inputComponent:u="input",multiline:c=!1,slotProps:h,slots:p={},type:d="text",...f}=n,m={...n,disableUnderline:r,fullWidth:a,inputComponent:u,multiline:c,type:d},g=(e=>{const{classes:t,disableUnderline:n,startAdornment:r,endAdornment:i,size:s,hiddenLabel:a,multiline:l}=e,u=o({root:["root",!n&&"underline",r&&"adornedStart",i&&"adornedEnd","small"===s&&`size${T(s)}`,a&&"hiddenLabel",l&&"multiline"],input:["input"]},Do,t);return{...t,...u}})(n),y={root:{ownerState:m},input:{ownerState:m}},b=h??s?ft(y,h??s):y,x=p.root??i.Root??Po,v=p.input??i.Input??Mo;return(0,zr.jsx)(_o,{slots:{root:x,input:v},slotProps:b,fullWidth:a,inputComponent:u,multiline:c,ref:t,type:d,...f,classes:g})}));No.muiName="Input";const Fo=No;var Vo;const Ko=Cr("fieldset",{shouldForwardProp:E})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),jo=Cr("legend",{shouldForwardProp:E})(Ki((e=>{let{theme:t}=e;return{float:"unset",width:"auto",overflow:"hidden",variants:[{props:e=>{let{ownerState:t}=e;return!t.withLabel},style:{padding:0,lineHeight:"11px",transition:t.transitions.create("width",{duration:150,easing:t.transitions.easing.easeOut})}},{props:e=>{let{ownerState:t}=e;return t.withLabel},style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:t.transitions.create("max-width",{duration:50,easing:t.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:e=>{let{ownerState:t}=e;return t.withLabel&&t.notched},style:{maxWidth:"100%",transition:t.transitions.create("max-width",{duration:100,easing:t.transitions.easing.easeOut,delay:50})}}]}})));function Bo(e){return mi("MuiOutlinedInput",e)}const Uo={...xo,...gi("MuiOutlinedInput",["root","notchedOutline","input"])},Go=Cr(ko,{shouldForwardProp:e=>E(e)||"classes"===e,name:"MuiOutlinedInput",slot:"Root",overridesResolver:wo})(Ki((e=>{let{theme:t}=e;const n="light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(t.vars||t).shape.borderRadius,[`&:hover .${Uo.notchedOutline}`]:{borderColor:(t.vars||t).palette.text.primary},"@media (hover: none)":{[`&:hover .${Uo.notchedOutline}`]:{borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:n}},[`&.${Uo.focused} .${Uo.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(t.palette).filter(Qi()).map((e=>{let[n]=e;return{props:{color:n},style:{[`&.${Uo.focused} .${Uo.notchedOutline}`]:{borderColor:(t.vars||t).palette[n].main}}}})),{props:{},style:{[`&.${Uo.error} .${Uo.notchedOutline}`]:{borderColor:(t.vars||t).palette.error.main},[`&.${Uo.disabled} .${Uo.notchedOutline}`]:{borderColor:(t.vars||t).palette.action.disabled}}},{props:e=>{let{ownerState:t}=e;return t.startAdornment},style:{paddingLeft:14}},{props:e=>{let{ownerState:t}=e;return t.endAdornment},style:{paddingRight:14}},{props:e=>{let{ownerState:t}=e;return t.multiline},style:{padding:"16.5px 14px"}},{props:e=>{let{ownerState:t,size:n}=e;return t.multiline&&"small"===n},style:{padding:"8.5px 14px"}}]}}))),Wo=Cr((function(e){const{children:t,classes:n,className:r,label:i,notched:s,...a}=e,o=null!=i&&""!==i,l={...e,notched:s,withLabel:o};return(0,zr.jsx)(Ko,{"aria-hidden":!0,className:r,ownerState:l,...a,children:(0,zr.jsx)(jo,{ownerState:l,children:o?(0,zr.jsx)("span",{children:i}):Vo||(Vo=(0,zr.jsx)("span",{className:"notranslate","aria-hidden":!0,children:"\u200b"}))})})}),{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(e,t)=>t.notchedOutline})(Ki((e=>{let{theme:t}=e;const n="light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:n}}))),Ho=Cr(To,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:So})(Ki((e=>{let{theme:t}=e;return{padding:"16.5px 14px",...!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderRadius:"inherit"}},...t.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:e=>{let{ownerState:t}=e;return t.multiline},style:{padding:0}},{props:e=>{let{ownerState:t}=e;return t.startAdornment},style:{paddingLeft:0}},{props:e=>{let{ownerState:t}=e;return t.endAdornment},style:{paddingRight:0}}]}}))),Xo=e.forwardRef((function(t,n){var r;const i=Nr({props:t,name:"MuiOutlinedInput"}),{components:s={},fullWidth:a=!1,inputComponent:l="input",label:u,multiline:c=!1,notched:h,slots:p={},type:d="text",...f}=i,m=(e=>{const{classes:t}=e,n=o({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},Bo,t);return{...t,...n}})(i),g=Or(),y=ao({props:i,muiFormControl:g,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),b={...i,color:y.color||"primary",disabled:y.disabled,error:y.error,focused:y.focused,formControl:g,fullWidth:a,hiddenLabel:y.hiddenLabel,multiline:c,size:y.size,type:d},x=p.root??s.Root??Go,v=p.input??s.Input??Ho;return(0,zr.jsx)(_o,{slots:{root:x,input:v},renderSuffix:t=>(0,zr.jsx)(Wo,{ownerState:b,className:m.notchedOutline,label:null!=u&&""!==u&&y.required?r||(r=(0,zr.jsxs)(e.Fragment,{children:[u,"\u2009","*"]})):u,notched:"undefined"!==typeof h?h:Boolean(t.startAdornment||t.filled||t.focused)}),fullWidth:a,inputComponent:l,multiline:c,ref:n,type:d,...f,classes:{...m,notchedOutline:null}})}));Xo.muiName="Input";const qo=Xo,Yo={name:"MuiSelect",overridesResolver:(e,t)=>t.root,shouldForwardProp:e=>E(e)&&"variant"!==e,slot:"Root"},Jo=Cr(Ro,Yo)(""),Qo=Cr(qo,Yo)(""),Zo=Cr(Fo,Yo)(""),el=e.forwardRef((function(t,n){const r=Nr({name:"MuiSelect",props:t}),{autoWidth:i=!1,children:s,classes:l={},className:u,defaultOpen:c=!1,displayEmpty:h=!1,IconComponent:p=oo,id:d,input:f,inputProps:m,label:g,labelId:y,MenuProps:b,multiple:x=!1,native:v=!1,onClose:w,onOpen:S,open:k,renderValue:T,SelectDisplayProps:A,variant:E="outlined",..._}=r,L=v?Ha:so,C=ao({props:r,muiFormControl:Or(),states:["variant","error"]}),I=C.variant||E,$={...r,variant:I,classes:l},O=(e=>{const{classes:t}=e,n=o({root:["root"]},Ya,t);return{...t,...n}})($),{root:R,...D}=O,z=f||{standard:(0,zr.jsx)(Jo,{ownerState:$}),outlined:(0,zr.jsx)(Qo,{label:g,ownerState:$}),filled:(0,zr.jsx)(Zo,{ownerState:$})}[I],P=Kr(n,as(z));return(0,zr.jsx)(e.Fragment,{children:e.cloneElement(z,{inputComponent:L,inputProps:{children:s,error:C.error,IconComponent:p,variant:I,type:void 0,multiple:x,...v?{id:d}:{autoWidth:i,defaultOpen:c,displayEmpty:h,labelId:y,MenuProps:b,onClose:w,onOpen:S,open:k,renderValue:T,SelectDisplayProps:{id:d,...A}},...m,classes:m?ft(D,m.classes):D,...f?f.props.inputProps:{}},...(x&&v||h)&&"outlined"===I?{notched:!0}:{},ref:P,className:a(z.props.className,u,O.root),...!f&&{variant:I},..._})})}));el.muiName="Select";const tl=el;const nl=gi("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);const rl=gi("MuiListItemIcon",["root","alignItemsFlexStart"]);const il=gi("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);function sl(e){return mi("MuiMenuItem",e)}const al=gi("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),ol=Cr(Li,{shouldForwardProp:e=>E(e)||"classes"===e,name:"MuiMenuItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.divider&&t.divider,!n.disableGutters&&t.gutters]}})(Ki((e=>{let{theme:t}=e;return{...t.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${al.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:g(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${al.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:g(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${al.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:g(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:g(t.palette.primary.main,t.palette.action.selectedOpacity)}},[`&.${al.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${al.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},[`& + .${nl.root}`]:{marginTop:t.spacing(1),marginBottom:t.spacing(1)},[`& + .${nl.inset}`]:{marginLeft:52},[`& .${il.root}`]:{marginTop:0,marginBottom:0},[`& .${il.inset}`]:{paddingLeft:36},[`& .${rl.root}`]:{minWidth:36},variants:[{props:e=>{let{ownerState:t}=e;return!t.disableGutters},style:{paddingLeft:16,paddingRight:16}},{props:e=>{let{ownerState:t}=e;return t.divider},style:{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"}},{props:e=>{let{ownerState:t}=e;return!t.dense},style:{[t.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:e=>{let{ownerState:t}=e;return t.dense},style:{minHeight:32,paddingTop:4,paddingBottom:4,...t.typography.body2,[`& .${rl.root} svg`]:{fontSize:"1.25rem"}}}]}}))),ll=e.forwardRef((function(t,n){const r=Nr({props:t,name:"MuiMenuItem"}),{autoFocus:i=!1,component:s="li",dense:l=!1,divider:u=!1,disableGutters:c=!1,focusVisibleClassName:h,role:p="menuitem",tabIndex:d,className:f,...m}=r,g=e.useContext(fs),y=e.useMemo((()=>({dense:l||g.dense||!1,disableGutters:c})),[g.dense,l,c]),b=e.useRef(null);vs((()=>{i&&b.current&&b.current.focus()}),[i]);const x={...r,dense:y.dense,divider:u,disableGutters:c},v=(e=>{const{disabled:t,dense:n,divider:r,disableGutters:i,selected:s,classes:a}=e,l=o({root:["root",n&&"dense",t&&"disabled",!i&&"gutters",r&&"divider",s&&"selected"]},sl,a);return{...a,...l}})(r),w=Kr(b,n);let S;return r.disabled||(S=void 0!==d?d:-1),(0,zr.jsx)(fs.Provider,{value:y,children:(0,zr.jsx)(ol,{ref:w,role:p,tabIndex:S,component:s,focusVisibleClassName:a(v.focusVisible,h),className:a(v.root,f),...m,ownerState:x,classes:v})})})),ul=us;function cl(e){return mi("MuiCircularProgress",e)}gi("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const hl=44,pl=ci`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,dl=ci`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,fl="string"!==typeof pl?ui`
        animation: ${pl} 1.4s linear infinite;
      `:null,ml="string"!==typeof dl?ui`
        animation: ${dl} 1.4s ease-in-out infinite;
      `:null,gl=Cr("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`color${T(n.color)}`]]}})(Ki((e=>{let{theme:t}=e;return{display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("transform")}},{props:{variant:"indeterminate"},style:fl||{animation:`${pl} 1.4s linear infinite`}},...Object.entries(t.palette).filter(Qi()).map((e=>{let[n]=e;return{props:{color:n},style:{color:(t.vars||t).palette[n].main}}}))]}}))),yl=Cr("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({display:"block"}),bl=Cr("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.circle,t[`circle${T(n.variant)}`],n.disableShrink&&t.circleDisableShrink]}})(Ki((e=>{let{theme:t}=e;return{stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:e=>{let{ownerState:t}=e;return"indeterminate"===t.variant&&!t.disableShrink},style:ml||{animation:`${dl} 1.4s ease-in-out infinite`}}]}}))),xl=e.forwardRef((function(e,t){const n=Nr({props:e,name:"MuiCircularProgress"}),{className:r,color:i="primary",disableShrink:s=!1,size:l=40,style:u,thickness:c=3.6,value:h=0,variant:p="indeterminate",...d}=n,f={...n,color:i,disableShrink:s,size:l,thickness:c,value:h,variant:p},m=(e=>{const{classes:t,variant:n,color:r,disableShrink:i}=e;return o({root:["root",n,`color${T(r)}`],svg:["svg"],circle:["circle",`circle${T(n)}`,i&&"circleDisableShrink"]},cl,t)})(f),g={},y={},b={};if("determinate"===p){const e=2*Math.PI*((hl-c)/2);g.strokeDasharray=e.toFixed(3),b["aria-valuenow"]=Math.round(h),g.strokeDashoffset=`${((100-h)/100*e).toFixed(3)}px`,y.transform="rotate(-90deg)"}return(0,zr.jsx)(gl,{className:a(m.root,r),style:{width:l,height:l,...y,...u},ownerState:f,ref:t,role:"progressbar",...b,...d,children:(0,zr.jsx)(yl,{className:m.svg,ownerState:f,viewBox:"22 22 44 44",children:(0,zr.jsx)(bl,{className:m.circle,style:g,ownerState:f,cx:hl,cy:hl,r:(hl-c)/2,fill:"none",strokeWidth:c})})})})),vl=xl;function wl(e){return mi("MuiButton",e)}const Sl=gi("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]);const kl=e.createContext({});const Tl=e.createContext(void 0),Al=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],El=Cr(Li,{shouldForwardProp:e=>E(e)||"classes"===e,name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`${n.variant}${T(n.color)}`],t[`size${T(n.size)}`],t[`${n.variant}Size${T(n.size)}`],"inherit"===n.color&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth,n.loading&&t.loading]}})(Ki((e=>{let{theme:t}=e;const n="light"===t.palette.mode?t.palette.grey[300]:t.palette.grey[800],r="light"===t.palette.mode?t.palette.grey.A100:t.palette.grey[700];return{...t.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create(["background-color","box-shadow","border-color","color"],{duration:t.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${Sl.disabled}`]:{color:(t.vars||t).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(t.vars||t).shadows[2],"&:hover":{boxShadow:(t.vars||t).shadows[4],"@media (hover: none)":{boxShadow:(t.vars||t).shadows[2]}},"&:active":{boxShadow:(t.vars||t).shadows[8]},[`&.${Sl.focusVisible}`]:{boxShadow:(t.vars||t).shadows[6]},[`&.${Sl.disabled}`]:{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${Sl.disabled}`]:{border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(t.palette).filter(Qi()).map((e=>{let[n]=e;return{props:{color:n},style:{"--variant-textColor":(t.vars||t).palette[n].main,"--variant-outlinedColor":(t.vars||t).palette[n].main,"--variant-outlinedBorder":t.vars?`rgba(${t.vars.palette[n].mainChannel} / 0.5)`:g(t.palette[n].main,.5),"--variant-containedColor":(t.vars||t).palette[n].contrastText,"--variant-containedBg":(t.vars||t).palette[n].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(t.vars||t).palette[n].dark,"--variant-textBg":t.vars?`rgba(${t.vars.palette[n].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:g(t.palette[n].main,t.palette.action.hoverOpacity),"--variant-outlinedBorder":(t.vars||t).palette[n].main,"--variant-outlinedBg":t.vars?`rgba(${t.vars.palette[n].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:g(t.palette[n].main,t.palette.action.hoverOpacity)}}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":t.vars?t.vars.palette.Button.inheritContainedBg:n,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":t.vars?t.vars.palette.Button.inheritContainedHoverBg:r,"--variant-textBg":t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:g(t.palette.text.primary,t.palette.action.hoverOpacity),"--variant-outlinedBg":t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:g(t.palette.text.primary,t.palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:t.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:t.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:t.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${Sl.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${Sl.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:t.transitions.create(["background-color","box-shadow","border-color"],{duration:t.transitions.duration.short}),[`&.${Sl.loading}`]:{color:"transparent"}}}]}}))),_l=Cr("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.startIcon,n.loading&&t.startIconLoadingStart,t[`iconSize${T(n.size)}`]]}})((e=>{let{theme:t}=e;return{display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...Al]}})),Ll=Cr("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.endIcon,n.loading&&t.endIconLoadingEnd,t[`iconSize${T(n.size)}`]]}})((e=>{let{theme:t}=e;return{display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...Al]}})),Cl=Cr("span",{name:"MuiButton",slot:"LoadingIndicator",overridesResolver:(e,t)=>t.loadingIndicator})((e=>{let{theme:t}=e;return{display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(t.vars||t).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]}})),Il=Cr("span",{name:"MuiButton",slot:"LoadingIconPlaceholder",overridesResolver:(e,t)=>t.loadingIconPlaceholder})({display:"inline-block",width:"1em",height:"1em"}),$l=e.forwardRef((function(t,n){const r=e.useContext(kl),i=e.useContext(Tl),s=Nr({props:Dr(r,t),name:"MuiButton"}),{children:l,color:u="primary",component:c="button",className:h,disabled:p=!1,disableElevation:d=!1,disableFocusRipple:f=!1,endIcon:m,focusVisibleClassName:g,fullWidth:y=!1,id:b,loading:x=null,loadingIndicator:v,loadingPosition:w="center",size:S="medium",startIcon:k,type:A,variant:E="text",..._}=s,L=ul(b),C=v??(0,zr.jsx)(vl,{"aria-labelledby":L,color:"inherit",size:16}),I={...s,color:u,component:c,disabled:p,disableElevation:d,disableFocusRipple:f,fullWidth:y,loading:x,loadingIndicator:C,loadingPosition:w,size:S,type:A,variant:E},$=(e=>{const{color:t,disableElevation:n,fullWidth:r,size:i,variant:s,loading:a,loadingPosition:l,classes:u}=e,c=o({root:["root",a&&"loading",s,`${s}${T(t)}`,`size${T(i)}`,`${s}Size${T(i)}`,`color${T(t)}`,n&&"disableElevation",r&&"fullWidth",a&&`loadingPosition${T(l)}`],startIcon:["icon","startIcon",`iconSize${T(i)}`],endIcon:["icon","endIcon",`iconSize${T(i)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},wl,u);return{...u,...c}})(I),O=(k||x&&"start"===w)&&(0,zr.jsx)(_l,{className:$.startIcon,ownerState:I,children:k||(0,zr.jsx)(Il,{className:$.loadingIconPlaceholder,ownerState:I})}),R=(m||x&&"end"===w)&&(0,zr.jsx)(Ll,{className:$.endIcon,ownerState:I,children:m||(0,zr.jsx)(Il,{className:$.loadingIconPlaceholder,ownerState:I})}),D=i||"",z="boolean"===typeof x?(0,zr.jsx)("span",{className:$.loadingWrapper,style:{display:"contents"},children:x&&(0,zr.jsx)(Cl,{className:$.loadingIndicator,ownerState:I,children:C})}):null;return(0,zr.jsxs)(El,{ownerState:I,className:a(r.className,$.root,h,D),component:c,disabled:p||x,focusRipple:!f,focusVisibleClassName:a($.focusVisible,g),ref:n,type:A,id:x?L:b,..._,classes:$,children:[O,"end"!==w&&z,l,"end"===w&&z,R]})})),Ol=$l,Rl=(e,t)=>Math.floor(Math.random()*(t-e+1))+e,Dl=()=>{const e=Rl(5,100),t=Rl(5,100);return{display:`${e} + ${t}`,expectedResult:e+t,userResult:null,resultCorrect:!1,learningModel:[e,t,1],timeElapsed:-1}},zl=()=>{const e=Rl(5,100),t=Rl(5,100);return{display:`${e} - ${t}`,expectedResult:e-t,userResult:null,resultCorrect:!1,learningModel:[e,t,2],timeElapsed:-1}},Pl=()=>{const e=Rl(1,15),t=Rl(4,30);return{display:`${e} * ${t}`,expectedResult:e*t,userResult:null,resultCorrect:!1,learningModel:[e,t,3],timeElapsed:-1}},Ml=()=>{const e=Rl(1,10),t=Rl(1,10),n=e*t;return{display:`${n} \xf7 ${e}`,expectedResult:t,userResult:null,resultCorrect:!1,learningModel:[n,e,4],timeElapsed:-1}},Nl=()=>{const e=Rl(100,999),t=Rl(100,999);return{display:`${e} + ${t}`,expectedResult:e+t,userResult:null,resultCorrect:!1,learningModel:[e,t,1],timeElapsed:-1}},Fl=()=>{const e=Rl(100,999),t=Rl(100,e);return{display:`${e} - ${t}`,expectedResult:e-t,userResult:null,resultCorrect:!1,learningModel:[e,t,2],timeElapsed:-1}},Vl=()=>{const e=Rl(10,99),t=Rl(10,99);return{display:`${e} * ${t}`,expectedResult:e*t,userResult:null,resultCorrect:!1,learningModel:[e,t,3],timeElapsed:-1}},Kl=()=>{const e=Rl(10,99),t=Rl(10,99),n=e*t;return{display:`${n} \xf7 ${e}`,expectedResult:t,userResult:null,resultCorrect:!1,learningModel:[n,e,4],timeElapsed:-1}},jl=()=>{const e=Rl(2,25);return{display:`${e}\xb2`,expectedResult:e*e,userResult:null,resultCorrect:!1,learningModel:[e,.1,5],timeElapsed:-1}},Bl=()=>{const e=Rl(2,10);return{display:`${e}\xb3`,expectedResult:e*e*e,userResult:null,resultCorrect:!1,learningModel:[e,.1,6],timeElapsed:-1}},Ul=e=>{let{setState:t,data:n,setData:r}=e;return(0,zr.jsx)("div",{children:(0,zr.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[(0,zr.jsx)("h1",{style:{textAlign:"center"},children:"Welcome to Mental Math!"}),(0,zr.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[(0,zr.jsx)(ss,{checked:n.smallAddSub,onChange:()=>r((e=>({...e,smallAddSub:!e.smallAddSub})))}),(0,zr.jsx)("div",{className:"home-component-checkbox-text",onClick:()=>r((e=>({...e,smallAddSub:!e.smallAddSub}))),children:"Kleine Addition/Subtraktion"})]}),(0,zr.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[(0,zr.jsx)(ss,{checked:n.smallMulDiv,onChange:()=>r((e=>({...e,smallMulDiv:!e.smallMulDiv})))}),(0,zr.jsx)("div",{className:"home-component-checkbox-text",onClick:()=>r((e=>({...e,smallMulDiv:!e.smallMulDiv}))),children:"Kleine Multiplikation/Division"})]}),(0,zr.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[(0,zr.jsx)(ss,{checked:n.largeAddSub,onChange:()=>r((e=>({...e,largeAddSub:!e.largeAddSub})))}),(0,zr.jsx)("div",{className:"home-component-checkbox-text",onClick:()=>r((e=>({...e,largeAddSub:!e.largeAddSub}))),children:"Grosse Addition/Subtraktion"})]}),(0,zr.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[(0,zr.jsx)(ss,{checked:n.largeMulDiv,onChange:()=>r((e=>({...e,largeMulDiv:!e.largeMulDiv})))}),(0,zr.jsx)("div",{className:"home-component-checkbox-text",onClick:()=>r((e=>({...e,largeMulDiv:!e.largeMulDiv}))),children:"Grosse Multiplikation/Division"})]}),(0,zr.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[(0,zr.jsx)(ss,{checked:n.square,onChange:()=>r((e=>({...e,square:!e.square})))}),(0,zr.jsx)("div",{className:"home-component-checkbox-text",onClick:()=>r((e=>({...e,square:!e.square}))),children:"Quadrate"})]}),(0,zr.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[(0,zr.jsx)(ss,{checked:n.audioOnly,onChange:()=>r((e=>({...e,audioOnly:!e.audioOnly})))}),(0,zr.jsx)("div",{className:"home-component-checkbox-text",onClick:()=>r((e=>({...e,audioOnly:!e.audioOnly}))),children:"Only audio"})]}),(0,zr.jsx)("div",{style:{marginTop:"15px"},children:(0,zr.jsxs)(tl,{id:"number-exercises-select",value:n.numExer,label:"Age",sx:{width:"150px"},onChange:e=>r((t=>({...t,numExer:Number(e.target.value)}))),children:[(0,zr.jsx)(ll,{value:1,children:"1"},"1"),Array.from({length:20},((e,t)=>5*(t+1))).map((e=>(0,zr.jsx)(ll,{value:e,children:e},e)))]})}),(0,zr.jsx)("div",{style:{marginTop:"15px"},children:(0,zr.jsx)(Ol,{variant:"contained",onClick:()=>{const e=(e=>{const t=[],n={};e.smallAddSub&&(n.smallAdd=Dl,n.smallSub=zl),e.smallMulDiv&&(n.smallMul=Pl,n.smallDiv=Ml),e.largeAddSub&&(n.largeAdd=Nl,n.largeSub=Fl),e.largeMulDiv&&(n.largeMul=Vl,n.largeDiv=Kl),e.square&&(n.square=jl,n.cube=Bl);const r=Object.keys(n);if(0===r.length)return t;for(let i=0;i<e.numExer;i++){const e=r[Math.floor(Math.random()*r.length)];t.push(n[e]())}return t})(n);r((t=>({...t,exercises:e}))),t(i.EXERCISE)},children:"Next"})})]})})};function Gl(e){return mi("MuiTableContainer",e)}gi("MuiTableContainer",["root"]);const Wl=Cr("div",{name:"MuiTableContainer",slot:"Root",overridesResolver:(e,t)=>t.root})({width:"100%",overflowX:"auto"}),Hl=e.forwardRef((function(e,t){const n=Nr({props:e,name:"MuiTableContainer"}),{className:r,component:i="div",...s}=n,l={...n,component:i},u=(e=>{const{classes:t}=e;return o({root:["root"]},Gl,t)})(l);return(0,zr.jsx)(Wl,{ref:t,as:i,className:a(u.root,r),ownerState:l,...s})}));const Xl=e.createContext();function ql(e){return mi("MuiTable",e)}gi("MuiTable",["root","stickyHeader"]);const Yl=Cr("table",{name:"MuiTable",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.stickyHeader&&t.stickyHeader]}})(Ki((e=>{let{theme:t}=e;return{display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":{...t.typography.body2,padding:t.spacing(2),color:(t.vars||t).palette.text.secondary,textAlign:"left",captionSide:"bottom"},variants:[{props:e=>{let{ownerState:t}=e;return t.stickyHeader},style:{borderCollapse:"separate"}}]}}))),Jl="table",Ql=e.forwardRef((function(t,n){const r=Nr({props:t,name:"MuiTable"}),{className:i,component:s=Jl,padding:l="normal",size:u="medium",stickyHeader:c=!1,...h}=r,p={...r,component:s,padding:l,size:u,stickyHeader:c},d=(e=>{const{classes:t,stickyHeader:n}=e;return o({root:["root",n&&"stickyHeader"]},ql,t)})(p),f=e.useMemo((()=>({padding:l,size:u,stickyHeader:c})),[l,u,c]);return(0,zr.jsx)(Xl.Provider,{value:f,children:(0,zr.jsx)(Yl,{as:s,role:s===Jl?null:"table",ref:n,className:a(d.root,i),ownerState:p,...h})})})),Zl=Ql;const eu=e.createContext();function tu(e){return mi("MuiTableHead",e)}gi("MuiTableHead",["root"]);const nu=Cr("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-header-group"}),ru={variant:"head"},iu="thead",su=e.forwardRef((function(e,t){const n=Nr({props:e,name:"MuiTableHead"}),{className:r,component:i=iu,...s}=n,l={...n,component:i},u=(e=>{const{classes:t}=e;return o({root:["root"]},tu,t)})(l);return(0,zr.jsx)(eu.Provider,{value:ru,children:(0,zr.jsx)(nu,{as:i,className:a(u.root,r),ref:t,role:i===iu?null:"rowgroup",ownerState:l,...s})})}));function au(e){return mi("MuiTableRow",e)}const ou=gi("MuiTableRow",["root","selected","hover","head","footer"]),lu=Cr("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.head&&t.head,n.footer&&t.footer]}})(Ki((e=>{let{theme:t}=e;return{color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${ou.hover}:hover`]:{backgroundColor:(t.vars||t).palette.action.hover},[`&.${ou.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:g(t.palette.primary.main,t.palette.action.selectedOpacity),"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:g(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity)}}}}))),uu="tr",cu=e.forwardRef((function(t,n){const r=Nr({props:t,name:"MuiTableRow"}),{className:i,component:s=uu,hover:l=!1,selected:u=!1,...c}=r,h=e.useContext(eu),p={...r,component:s,hover:l,selected:u,head:h&&"head"===h.variant,footer:h&&"footer"===h.variant},d=(e=>{const{classes:t,selected:n,hover:r,head:i,footer:s}=e;return o({root:["root",n&&"selected",r&&"hover",i&&"head",s&&"footer"]},au,t)})(p);return(0,zr.jsx)(lu,{as:s,ref:n,className:a(d.root,i),role:s===uu?null:"row",ownerState:p,...c})})),hu=cu;function pu(e){return mi("MuiTableCell",e)}const du=gi("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),fu=Cr("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`size${T(n.size)}`],"normal"!==n.padding&&t[`padding${T(n.padding)}`],"inherit"!==n.align&&t[`align${T(n.align)}`],n.stickyHeader&&t.stickyHeader]}})(Ki((e=>{let{theme:t}=e;return{...t.typography.body2,display:"table-cell",verticalAlign:"inherit",borderBottom:t.vars?`1px solid ${t.vars.palette.TableCell.border}`:`1px solid\n    ${"light"===t.palette.mode?v(g(t.palette.divider,1),.88):b(g(t.palette.divider,1),.68)}`,textAlign:"left",padding:16,variants:[{props:{variant:"head"},style:{color:(t.vars||t).palette.text.primary,lineHeight:t.typography.pxToRem(24),fontWeight:t.typography.fontWeightMedium}},{props:{variant:"body"},style:{color:(t.vars||t).palette.text.primary}},{props:{variant:"footer"},style:{color:(t.vars||t).palette.text.secondary,lineHeight:t.typography.pxToRem(21),fontSize:t.typography.pxToRem(12)}},{props:{size:"small"},style:{padding:"6px 16px",[`&.${du.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}}},{props:{padding:"checkbox"},style:{width:48,padding:"0 0 0 4px"}},{props:{padding:"none"},style:{padding:0}},{props:{align:"left"},style:{textAlign:"left"}},{props:{align:"center"},style:{textAlign:"center"}},{props:{align:"right"},style:{textAlign:"right",flexDirection:"row-reverse"}},{props:{align:"justify"},style:{textAlign:"justify"}},{props:e=>{let{ownerState:t}=e;return t.stickyHeader},style:{position:"sticky",top:0,zIndex:2,backgroundColor:(t.vars||t).palette.background.default}}]}}))),mu=e.forwardRef((function(t,n){const r=Nr({props:t,name:"MuiTableCell"}),{align:i="inherit",className:s,component:l,padding:u,scope:c,size:h,sortDirection:p,variant:d,...f}=r,m=e.useContext(Xl),g=e.useContext(eu),y=g&&"head"===g.variant;let b;b=l||(y?"th":"td");let x=c;"td"===b?x=void 0:!x&&y&&(x="col");const v=d||g&&g.variant,w={...r,align:i,component:b,padding:u||(m&&m.padding?m.padding:"normal"),size:h||(m&&m.size?m.size:"medium"),sortDirection:p,stickyHeader:"head"===v&&m&&m.stickyHeader,variant:v},S=(e=>{const{classes:t,variant:n,align:r,padding:i,size:s,stickyHeader:a}=e;return o({root:["root",n,a&&"stickyHeader","inherit"!==r&&`align${T(r)}`,"normal"!==i&&`padding${T(i)}`,`size${T(s)}`]},pu,t)})(w);let k=null;return p&&(k="asc"===p?"ascending":"descending"),(0,zr.jsx)(fu,{as:b,ref:n,className:a(S.root,s),"aria-sort":k,scope:x,ownerState:w,...f})})),gu=mu;function yu(e){return mi("MuiTableBody",e)}gi("MuiTableBody",["root"]);const bu=Cr("tbody",{name:"MuiTableBody",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-row-group"}),xu={variant:"body"},vu="tbody",wu=e.forwardRef((function(e,t){const n=Nr({props:e,name:"MuiTableBody"}),{className:r,component:i=vu,...s}=n,l={...n,component:i},u=(e=>{const{classes:t}=e;return o({root:["root"]},yu,t)})(l);return(0,zr.jsx)(eu.Provider,{value:xu,children:(0,zr.jsx)(bu,{className:a(u.root,r),as:i,ref:t,role:i===vu?null:"rowgroup",ownerState:l,...s})})}));function Su(e){return mi("MuiIconButton",e)}const ku=gi("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),Tu=Cr(Li,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.loading&&t.loading,"default"!==n.color&&t[`color${T(n.color)}`],n.edge&&t[`edge${T(n.edge)}`],t[`size${T(n.size)}`]]}})(Ki((e=>{let{theme:t}=e;return{textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),variants:[{props:e=>!e.disableRipple,style:{"--IconButton-hoverBg":t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:g(t.palette.action.active,t.palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]}})),Ki((e=>{let{theme:t}=e;return{variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(t.palette).filter(Qi()).map((e=>{let[n]=e;return{props:{color:n},style:{color:(t.vars||t).palette[n].main}}})),...Object.entries(t.palette).filter(Qi()).map((e=>{let[n]=e;return{props:{color:n},style:{"--IconButton-hoverBg":t.vars?`rgba(${(t.vars||t).palette[n].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:g((t.vars||t).palette[n].main,t.palette.action.hoverOpacity)}}})),{props:{size:"small"},style:{padding:5,fontSize:t.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:t.typography.pxToRem(28)}}],[`&.${ku.disabled}`]:{backgroundColor:"transparent",color:(t.vars||t).palette.action.disabled},[`&.${ku.loading}`]:{color:"transparent"}}}))),Au=Cr("span",{name:"MuiIconButton",slot:"LoadingIndicator",overridesResolver:(e,t)=>t.loadingIndicator})((e=>{let{theme:t}=e;return{display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(t.vars||t).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]}})),Eu=e.forwardRef((function(e,t){const n=Nr({props:e,name:"MuiIconButton"}),{edge:r=!1,children:i,className:s,color:l="default",disabled:u=!1,disableFocusRipple:c=!1,size:h="medium",id:p,loading:d=null,loadingIndicator:f,...m}=n,g=ul(p),y=f??(0,zr.jsx)(vl,{"aria-labelledby":g,color:"inherit",size:16}),b={...n,edge:r,color:l,disabled:u,disableFocusRipple:c,loading:d,loadingIndicator:y,size:h},x=(e=>{const{classes:t,disabled:n,color:r,edge:i,size:s,loading:a}=e;return o({root:["root",a&&"loading",n&&"disabled","default"!==r&&`color${T(r)}`,i&&`edge${T(i)}`,`size${T(s)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},Su,t)})(b);return(0,zr.jsxs)(Tu,{id:d?g:p,className:a(x.root,s),centerRipple:!0,focusRipple:!c,disabled:u||d,ref:t,...m,ownerState:b,children:["boolean"===typeof d&&(0,zr.jsx)("span",{className:x.loadingWrapper,style:{display:"contents"},children:(0,zr.jsx)(Au,{className:x.loadingIndicator,ownerState:b,children:d&&y})}),i]})})),_u=Eu,Lu=Wi((0,zr.jsx)("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check"),Cu=Wi((0,zr.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");var Iu=n(277),$u=n.n(Iu);const Ou=t=>{let{setState:n,data:r,setData:s}=t;const[a,o]=(0,e.useState)([]),[l,u]=(0,e.useState)(0);(0,e.useEffect)((()=>{c()}),[]);const c=()=>{o(r.exercises);const e=r.exercises.filter((e=>!0===e.resultCorrect));u(Math.round(e.length/r.exercises.length*100))};return(0,zr.jsxs)("div",{children:[0===a.length&&(0,zr.jsx)(zr.Fragment,{children:(0,zr.jsx)("b",{children:"Exercise number was set to 0, so no exercises were created!!"})}),a.length>0&&(0,zr.jsx)(zr.Fragment,{children:(0,zr.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[(0,zr.jsxs)("p",{style:{textAlign:"center"},children:["Your results are as follows:",(0,zr.jsx)("br",{}),(0,zr.jsxs)("b",{children:[l,"%"]})]}),(0,zr.jsx)(Hl,{sx:{maxWidth:1e3},component:Aa,children:(0,zr.jsxs)(Zl,{sx:{minWidth:350,maxWidth:1e3},"aria-label":"simple table",children:[(0,zr.jsx)(su,{children:(0,zr.jsxs)(hu,{children:[(0,zr.jsx)(gu,{children:"Exercise"}),(0,zr.jsx)(gu,{align:"right",children:"Correct"}),(0,zr.jsx)(gu,{align:"right",children:"Yours"}),(0,zr.jsx)(gu,{align:"right"})]})}),(0,zr.jsx)(wu,{children:a.map(((e,t)=>(0,zr.jsxs)(hu,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,zr.jsx)(gu,{component:"th",scope:"row",children:e.display}),(0,zr.jsx)(gu,{align:"right",children:e.expectedResult}),(0,zr.jsx)(gu,{align:"right",children:e.userResult}),(0,zr.jsxs)(gu,{align:"right",children:[e.resultCorrect&&(0,zr.jsx)(zr.Fragment,{children:(0,zr.jsx)(_u,{"aria-label":"delete",size:"large",style:{background:"#bff1bf"},children:(0,zr.jsx)(Lu,{})})}),!e.resultCorrect&&(0,zr.jsx)(zr.Fragment,{children:(0,zr.jsx)(_u,{"aria-label":"delete",size:"large",style:{background:"rgb(238 170 170)"},children:(0,zr.jsx)(Cu,{})})})]})]},t)))})]})}),(0,zr.jsx)("div",{children:(0,zr.jsx)(Ol,{variant:"contained",onClick:()=>{const e=[];r.exercises.forEach((t=>{t.resultCorrect&&e.push({input:t.learningModel,output:[t.timeElapsed]})}));const t=JSON.stringify(e);console.log(t),$u()(t)},children:"Copy training results to clip-board"})})]})}),(0,zr.jsx)("div",{style:{width:"100%",marginTop:"15px",display:"flex",justifyContent:"center"},children:(0,zr.jsx)(Ol,{variant:"contained",onClick:()=>(s((e=>({...e,exercises:[]}))),void n(i.HOME)),children:"Back to home"})})]})};const Ru=gi("MuiBox",["root"]),Du=Ar(),zu=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:n,defaultTheme:r,defaultClassName:i="MuiBox-root",generateClassName:s}=t,o=lt("div",{shouldForwardProp:e=>"theme"!==e&&"sx"!==e&&"as"!==e})(xn);return e.forwardRef((function(e,t){const l=Bs(r),{className:u,component:c="div",...h}=fo(e);return(0,zr.jsx)(o,{as:c,ref:t,className:a(u,s?s(i):i),theme:n&&l[n]||l,...h})}))}({themeId:_r,defaultTheme:Du,defaultClassName:Ru.root,generateClassName:di.generate}),Pu=zu;function Mu(e){return mi("MuiTypography",e)}gi("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const Nu={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},Fu=fo,Vu=Cr("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.variant&&t[n.variant],"inherit"!==n.align&&t[`align${T(n.align)}`],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})(Ki((e=>{let{theme:t}=e;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(t.typography).filter((e=>{let[t,n]=e;return"inherit"!==t&&n&&"object"===typeof n})).map((e=>{let[t,n]=e;return{props:{variant:t},style:n}})),...Object.entries(t.palette).filter(Qi()).map((e=>{let[n]=e;return{props:{color:n},style:{color:(t.vars||t).palette[n].main}}})),...Object.entries(t.palette?.text||{}).filter((e=>{let[,t]=e;return"string"===typeof t})).map((e=>{let[n]=e;return{props:{color:`text${T(n)}`},style:{color:(t.vars||t).palette.text[n]}}})),{props:e=>{let{ownerState:t}=e;return"inherit"!==t.align},style:{textAlign:"var(--Typography-textAlign)"}},{props:e=>{let{ownerState:t}=e;return t.noWrap},style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:e=>{let{ownerState:t}=e;return t.gutterBottom},style:{marginBottom:"0.35em"}},{props:e=>{let{ownerState:t}=e;return t.paragraph},style:{marginBottom:16}}]}}))),Ku={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},ju=e.forwardRef((function(e,t){const{color:n,...r}=Nr({props:e,name:"MuiTypography"}),i=Fu({...r,...!Nu[n]&&{color:n}}),{align:s="inherit",className:l,component:u,gutterBottom:c=!1,noWrap:h=!1,paragraph:p=!1,variant:d="body1",variantMapping:f=Ku,...m}=i,g={...i,align:s,color:n,className:l,component:u,gutterBottom:c,noWrap:h,paragraph:p,variant:d,variantMapping:f},y=u||(p?"p":f[d]||Ku[d])||"span",b=(e=>{const{align:t,gutterBottom:n,noWrap:r,paragraph:i,variant:s,classes:a}=e;return o({root:["root",s,"inherit"!==e.align&&`align${T(t)}`,n&&"gutterBottom",r&&"noWrap",i&&"paragraph"]},Mu,a)})(g);return(0,zr.jsx)(Vu,{as:y,ref:t,className:a(b.root,l),...m,ownerState:g,style:{..."inherit"!==s&&{"--Typography-textAlign":s},...m.style}})})),Bu=ju;var Uu=n(790);const Gu=JSON.parse('[{"input":[52,17,2],"output":[10]},{"input":[79,32,2],"output":[17]},{"input":[67,37,1],"output":[4]},{"input":[12,11,1],"output":[4]},{"input":[61,48,1],"output":[3]},{"input":[13,47,2],"output":[6]},{"input":[79,67,2],"output":[5]},{"input":[10,88,1],"output":[3]},{"input":[52,25,2],"output":[3]},{"input":[86,6,1],"output":[2]},{"input":[15,27,1],"output":[6]},{"input":[6,30,3],"output":[7]},{"input":[10,0,6],"output":[4]},{"input":[850,644,2],"output":[8]},{"input":[244,228,2],"output":[8]},{"input":[2,0,6],"output":[1]},{"input":[3190,55,4],"output":[38]},{"input":[47,21,1],"output":[5]},{"input":[8,4,4],"output":[1]},{"input":[100,51,2],"output":[3]},{"input":[910,638,1],"output":[7]},{"input":[44,29,1],"output":[11]},{"input":[87,78,2],"output":[6]},{"input":[383,268,2],"output":[7]},{"input":[794,506,2],"output":[12]},{"input":[12,4,4],"output":[2]},{"input":[44,65,3],"output":[32]},{"input":[5510,95,4],"output":[47]},{"input":[97,81,3],"output":[39]},{"input":[78,46,1],"output":[7]},{"input":[608,16,4],"output":[16]},{"input":[11,0,5],"output":[3]},{"input":[1344,14,4],"output":[8]},{"input":[453,127,2],"output":[14]},{"input":[4,2,4],"output":[2]},{"input":[3,25,3],"output":[2]},{"input":[347,159,1],"output":[12]},{"input":[66,22,1],"output":[2]},{"input":[2542,31,4],"output":[31]},{"input":[29,45,2],"output":[8]},{"input":[147,130,1],"output":[14]},{"input":[42,6,4],"output":[5]},{"input":[86,20,1],"output":[3]},{"input":[67,95,1],"output":[12]},{"input":[12,3,4],"output":[2]},{"input":[97,24,2],"output":[5]},{"input":[831,402,2],"output":[5]},{"input":[60,39,3],"output":[20]},{"input":[37,13,1],"output":[4]},{"input":[459,401,1],"output":[6]},{"input":[823,239,1],"output":[9]},{"input":[74,78,2],"output":[2]},{"input":[5,90,1],"output":[2]},{"input":[100,397,1],"output":[3]},{"input":[2068,47,4],"output":[13]},{"input":[18,32,2],"output":[4]},{"input":[87,46,1],"output":[5]},{"input":[3,0,6],"output":[3]},{"input":[392,596,1],"output":[8]}]').map((e=>{let{input:t,output:n}=e;return{input:[t[0]/1e3,t[1]/1e3,0,t[2],0,0,0,0],output:n.map((e=>e/100))}})),Wu={1:[...Array(30)].map((()=>Dl())).map((e=>e.learningModel)).concat([...Array(30)].map((()=>Nl())).map((e=>e.learningModel))),2:[...Array(30)].map((()=>zl())).map((e=>e.learningModel)).concat([...Array(30)].map((()=>Fl())).map((e=>e.learningModel))),3:[...Array(30)].map((()=>Pl())).map((e=>e.learningModel)).concat([...Array(30)].map((()=>Vl())).map((e=>e.learningModel))),4:[...Array(30)].map((()=>Ml())).map((e=>e.learningModel)).concat([...Array(30)].map((()=>Kl())).map((e=>e.learningModel))),5:[...Array(30)].map((()=>jl())).map((e=>e.learningModel)),6:[...Array(30)].map((()=>Bl())).map((e=>e.learningModel))};let Hu,Xu=!1;do{Xu=!0,Hu=new Uu.NeuralNetwork({hiddenLayers:[16,12],learningRate:.05,activation:"relu"}),Hu.train(Gu,{iterations:2e3});const e=e=>{const t=Array.from(e).sort(((e,t)=>e-t)),n=Math.floor(t.length/2);return t.length%2===0?(t[n-1]+t[n])/2:t[n]};for(let t=1;t<=6;t++){const n=Wu[t].map((e=>{const t=[e[0]/1e3,e[1]/1e3,0,e[2],0,0,0,0],n=Hu.run(t);return Number(n[0])}));if(0==e(n)){Xu=!1;break}Wu[t]=e(n)}}while(!1===Xu);console.log(Wu);const qu=t=>{let{setState:n,data:r,setData:s}=t;const[a,o]=(0,e.useState)(null),[l,u]=(0,e.useState)(0),[c,h]=(0,e.useState)(""),[p,d]=(0,e.useState)("unset"),[f,m]=(0,e.useState)(new Date),[g,y]=(0,e.useState)(null),[b,x]=(0,e.useState)(null),[v,w]=(0,e.useState)(!1);(0,e.useEffect)((()=>{S()}),[]);const S=()=>{if(T(),l===r.exercises.length)n(i.RESULT);else{m(new Date);const e=r.exercises[l];o(e),u(l+1),r.audioOnly&&_(e.display),console.log(e.learningModel),k(e)}},k=e=>{const t=(e=>{const t=[e[0]/1e3,e[1]/1e3,0,e[2],0,0,0,0];let n;do{n=Hu.run(t)}while(0===Number(n[0]));const r=Math.max(1,100*Number(n[0])),i=Math.max(1,100*Wu[e[2]]),s=r/i;let a=.7;s>3&&s<=10?a=.7-.2*(s-3)/7:s>10&&(a=.3);const o=r*a+i*(1-a);return console.log(`Average time: ${i.toFixed(2)}ms`),console.log(`Predicted time: ${r.toFixed(2)}ms`),console.log(`Final estimated time: ${o.toFixed(2)}ms`),console.log(`Prediction weight: ${(100*a).toFixed(0)}%`),console.log(`Prediction ratio: ${s.toFixed(2)}x`),o})(e.learningModel),n=setTimeout((()=>{new Audio("/MentalMath/beep.mp3").play().catch((e=>console.error("Audio play failed:",e)));const e=setTimeout((()=>{w(!0)}),5e3);x(e)}),1e3*t+1500);y(n)},T=()=>{g&&clearTimeout(g),b&&clearTimeout(b),y(null),x(null)},A=e=>{h(`${c}${e}`)},E=()=>{if(a){const t=Number(c);var e=(new Date).getTime()-f.getTime();e/=1e3,s((n=>({...n,exercises:n.exercises.map(((n,r)=>r===l-1?{...n,userResult:t,resultCorrect:a.expectedResult===t,timeElapsed:Math.round(e)}:n))}))),h(""),S(),a.expectedResult===t?d("green"):d("red"),setTimeout((()=>{d("unset")}),500)}},_=e=>{const t=speechSynthesis.getVoices().find((e=>e.lang.startsWith("de"))),n=new SpeechSynthesisUtterance(e);n.lang="de-DE",t&&(n.voice=t),speechSynthesis.speak(n)},L=()=>{w(!1),E()};return(0,zr.jsx)("div",{children:(0,zr.jsxs)("div",{children:[a&&(0,zr.jsxs)(zr.Fragment,{children:[(0,zr.jsx)("h1",{id:"exercise-component-exercise-display",children:!r.audioOnly&&(0,zr.jsx)(zr.Fragment,{children:a.display})}),(0,zr.jsxs)("h1",{id:"exercise-component-exercise-input",children:[" ",c," "]}),(0,zr.jsx)("div",{id:"exercise-component-numberpad-box",style:{background:p},children:(0,zr.jsxs)("div",{id:"exercise-component-numberpad",children:[(0,zr.jsx)("button",{onClick:()=>A(1),children:"1"}),(0,zr.jsx)("button",{onClick:()=>A(2),children:"2"}),(0,zr.jsx)("button",{onClick:()=>A(3),children:"3"}),(0,zr.jsx)("button",{onClick:()=>A(4),children:"4"}),(0,zr.jsx)("button",{onClick:()=>A(5),children:"5"}),(0,zr.jsx)("button",{onClick:()=>A(6),children:"6"}),(0,zr.jsx)("button",{onClick:()=>A(7),children:"7"}),(0,zr.jsx)("button",{onClick:()=>A(8),children:"8"}),(0,zr.jsx)("button",{onClick:()=>A(9),children:"9"}),(0,zr.jsx)("button",{onClick:()=>A(0),children:"0"}),(0,zr.jsx)("button",{onClick:()=>{h(c.startsWith("-")?c.slice(1):"-"+c)},children:"+/-"}),(0,zr.jsx)("button",{onClick:()=>{h(c.slice(0,-1))},children:"Del"}),(0,zr.jsx)("button",{onClick:E,id:"submit",style:{gridColumn:"span 3"},children:"Submit"})]})}),(0,zr.jsx)("div",{style:{width:"100%",marginTop:"5px",display:"flex",justifyContent:"center"},children:(0,zr.jsx)(Ol,{variant:"contained",onClick:()=>(s((e=>({...e,exercises:[]}))),void n(i.HOME)),children:"Back to home"})})]}),(0,zr.jsx)(Sa,{open:v,onClose:L,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,zr.jsxs)(Pu,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",minWidth:280,width:"50%",bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4},children:[(0,zr.jsx)(Bu,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Your time is up!!"}),(0,zr.jsxs)(Bu,{id:"modal-modal-description",sx:{mt:2,display:"flex",flexDirection:"column",gap:"10px"},children:[(0,zr.jsx)(Ol,{variant:"outlined",onClick:()=>{w(!1)},children:"Continue here"}),(0,zr.jsx)(Ol,{variant:"contained",onClick:L,children:"Go to next"})]})]})})]})})},Yu=()=>{const[t,n]=(0,e.useState)(i.HOME),[r,s]=(0,e.useState)((e=>{var t,n,r,i,s,a,o,l,u;return{smallAddSub:null!==(t=e.smallAddSub)&&void 0!==t&&t,smallMulDiv:null!==(n=e.smallMulDiv)&&void 0!==n&&n,largeAddSub:null!==(r=e.largeAddSub)&&void 0!==r&&r,largeMulDiv:null!==(i=e.largeMulDiv)&&void 0!==i&&i,square:null!==(s=e.square)&&void 0!==s&&s,numExer:null!==(a=e.numExer)&&void 0!==a?a:0,exercises:null!==(o=e.exercises)&&void 0!==o?o:[],audioOnly:null!==(l=e.audioOnly)&&void 0!==l&&l,result:null!==(u=e.result)&&void 0!==u?u:null}})({numExer:15,audioOnly:!0}));return(0,zr.jsxs)("div",{children:[t===i.HOME&&(0,zr.jsx)(Ul,{setState:n,data:r,setData:s}),t===i.EXERCISE&&(0,zr.jsx)(qu,{setState:n,data:r,setData:s}),t===i.RESULT&&(0,zr.jsx)(Ou,{setState:n,data:r,setData:s})]})},Ju=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then((t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:s,getTTFB:a}=t;n(e),r(e),i(e),s(e),a(e)}))};r.createRoot(document.getElementById("root")).render((0,zr.jsx)(Yu,{})),Ju()})()})();
//# sourceMappingURL=main.7eabf192.js.map